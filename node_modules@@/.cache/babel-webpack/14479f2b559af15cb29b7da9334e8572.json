{"ast":null,"code":"import _asyncToGenerator from \"C:/FH/fh-cloud-app/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"!C:\\\\FH\\\\fh-cloud-app\\\\node_modules\\\\@ngtools\\\\webpack\\\\src\\\\loaders\\\\direct-resource.js!./header.component.html\";\nimport __NG_CLI_RESOURCE__1 from \"./header.component.css\";\nimport { Component, EventEmitter, Output } from \"@angular/core\";\nimport { SharedServiceService } from \"../../services/shared-service.service\";\nimport { Auth } from \"aws-amplify\";\nimport { Router } from \"@angular/router\";\nimport { ApiService, ListService } from \"src/app/services\";\nimport { InvokeHeaderFnService } from \"src/app/services/invoke-header-fn.service\";\nimport { environment } from \"../../../environments/environment\";\nimport { DashboardUtilityService } from \"src/app/services/dashboard-utility.service\";\nlet HeaderComponent = class HeaderComponent {\n  constructor(sharedService, apiService, listService, router, headerFnService, dashboardService) {\n    var _this = this;\n\n    this.sharedService = sharedService;\n    this.apiService = apiService;\n    this.listService = listService;\n    this.router = router;\n    this.headerFnService = headerFnService;\n    this.dashboardService = dashboardService;\n    this.environment = environment.isFeatureEnabled;\n    this.isFleetEnabled = environment.isFleetEnabled;\n    this.isDispatchEnabled = environment.isDispatchEnabled;\n    this.isComplianceEnabled = environment.isComplianceEnabled;\n    this.isManageEnabled = environment.isManageEnabled;\n    this.isSafetyEnabled = environment.isSafetyEnabled;\n    this.isAccountsEnabled = environment.isAccountsEnabled;\n    this.isReportsEnabled = environment.isReportsEnabled;\n    this.Asseturl = this.apiService.AssetUrl;\n    this.navClicked = new EventEmitter();\n    this.navSelected = \"\";\n    this.currentUser = \"\";\n    this.currentCarrierID = \"\";\n    this.userRole = \"\";\n    this.carriers = [];\n    this.currentUserName = \"\";\n    this.disabled = false;\n    this.nickName = \"\";\n    this.logoSrc = \"assets/img/logo.png\";\n    this.unitData = {\n      cName: \"\",\n      dba: \"\",\n      workPhone: \"\",\n      workEmail: \"\",\n      eTypes: [],\n      adrs: [{\n        aType: null,\n        cName: \"\",\n        sName: \"\",\n        ctyName: null,\n        zip: \"\",\n        add1: \"\",\n        add2: \"\",\n        geoCords: {\n          lat: \"\",\n          lng: \"\"\n        },\n        userLoc: \"\",\n        manual: false,\n        cCode: null,\n        sCode: null,\n        houseNo: \"\",\n        street: \"\",\n        states: [],\n        cities: []\n      }],\n      addlCnt: [{\n        flName: \"\",\n        fName: \"\",\n        lName: \"\",\n        phone: \"\",\n        des: \"\",\n        email: \"\",\n        fax: \"\"\n      }],\n      data: []\n    };\n    this.updateButton = false;\n    this.getCurrentuser = /*#__PURE__*/_asyncToGenerator(function* () {\n      _this.currentUser = (yield Auth.currentSession()).getIdToken().payload;\n      _this.userRole = _this.currentUser.userType;\n      localStorage.setItem(\"currentUsername\", _this.currentUser.username);\n      _this.currentUser = `${_this.currentUser.firstName} ${_this.currentUser.lastName}`;\n\n      const outputName = _this.currentUser.match(/\\b(\\w)/g);\n\n      _this.smallName = outputName.join(\"\");\n      localStorage.setItem(\"currentUserName\", _this.currentUser);\n      localStorage.setItem(\"nickName\", _this.smallName);\n      _this.currentUserName = localStorage.getItem(\"currentUserName\");\n      _this.nickName = localStorage.getItem(\"nickName\");\n    });\n    this.sharedService.activeParentNav.subscribe(val => {\n      let activeTab = localStorage.getItem(\"active-header\");\n\n      if (activeTab != undefined && activeTab != \"\") {\n        val = activeTab;\n      }\n\n      this.navSelected = val;\n    });\n  }\n\n  ngOnInit() {\n    this.init();\n    this.getCurrentuser();\n    this.fetchCarrier();\n\n    if (this.headerFnService.subsVar === undefined) {\n      this.headerFnService.subsVar = this.headerFnService.invokeHeaderComponentFunction.subscribe(name => {\n        this.upateCurrentUser();\n      });\n    }\n  }\n\n  init() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this2.apiService.checkAccess();\n      _this2.isFleetEnabled = environment.isFleetEnabled;\n      _this2.isDispatchEnabled = localStorage.getItem(\"isDispatchEnabled\") ? JSON.parse(localStorage.getItem(\"isDispatchEnabled\")) : environment.isDispatchEnabled;\n      _this2.isComplianceEnabled = localStorage.getItem(\"isComplianceEnabled\") ? JSON.parse(localStorage.getItem(\"isComplianceEnabled\")) : environment.isComplianceEnabled;\n      _this2.isManageEnabled = localStorage.getItem(\"isManageEnabled\") ? JSON.parse(localStorage.getItem(\"isManageEnabled\")) : environment.isManageEnabled;\n      _this2.isSafetyEnabled = localStorage.getItem(\"isSafetyEnabled\") ? JSON.parse(localStorage.getItem(\"isSafetyEnabled\")) : environment.isSafetyEnabled;\n      _this2.isAccountsEnabled = localStorage.getItem(\"isAccountsEnabled\") ? JSON.parse(localStorage.getItem(\"isAccountsEnabled\")) : environment.isAccountsEnabled;\n      environment.isAccountsEnabled;\n      _this2.isReportsEnabled = environment.isReportsEnabled;\n    })();\n  }\n\n  onNavSelected(nav) {\n    localStorage.setItem(\"active-header\", nav);\n    const rootHtml = document.getElementsByTagName(\"html\")[0];\n    rootHtml.classList.add(\"fixed\");\n    rootHtml.classList.add(\"sidebar-light\");\n    rootHtml.classList.add(\"sidebar-left-collapsed\");\n    this.navClicked.emit(nav);\n    this.sharedService.activeParentNav.next(nav);\n  }\n\n  fetchCarrier() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this3.dashboardService.getCarriers();\n\n      if (result.Items.length > 0) {\n        _this3.carriers = result.Items[0];\n        _this3.currentCarrierID = _this3.carriers.carrierID;\n        _this3.logoSrc = \"assets/img/logo.png\"; // if (this.carriers.uploadedLogo !== '') {\n        //   this.logoSrc = `${this.Asseturl}/${this.carriers.carrierID}/${this.carriers.uploadedLogo}`;\n        // } else {\n        //   this.logoSrc = 'assets/img/logo.png';\n        // }\n      }\n    })();\n  }\n\n  Logout() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        yield Auth.signOut();\n\n        _this4.listService.triggerModal(\"\");\n\n        _this4.listService.openDocTypeMOdal(\"\");\n\n        localStorage.removeItem(\"LoggedIn\");\n        localStorage.removeItem(\"user\");\n        localStorage.removeItem(\"active-header\");\n        localStorage.removeItem(\"carrierID\");\n        localStorage.removeItem(\"loggin-carrier\");\n        localStorage.removeItem(\"issueVehicleID\");\n        localStorage.removeItem(\"carrierID\");\n        localStorage.removeItem(\"active-header\");\n        localStorage.removeItem(\"currentUserName\");\n        localStorage.removeItem(\"nickName\");\n        localStorage.removeItem(\"isDispatchEnabled\");\n        localStorage.removeItem(\"isComplianceEnabled\");\n        localStorage.removeItem(\"isSafetyEnabled\");\n        localStorage.removeItem(\"isAccountsEnabled\");\n        localStorage.removeItem(\"isManageEnabled\");\n        localStorage.setItem(\"signOut\", \"true\"); //trigger flag\n\n        localStorage.removeItem(\"accessToken\"); //Remove token from local\n        // localStorage.removeItem('jwt');\n\n        _this4.router.navigate([\"/Login\"]);\n      } catch (error) {\n        console.log(\"error signing out: \", error);\n      }\n    })();\n  }\n\n  upateCurrentUser() {\n    this.currentUserName = localStorage.getItem(\"currentUserName\");\n    this.nickName = localStorage.getItem(\"nickName\");\n  }\n\n  openModal(unit) {\n    this.listService.triggerModal(unit);\n    this.updateButton = false;\n    this.unitData = {\n      cName: \"\",\n      dba: \"\",\n      workPhone: \"\",\n      workEmail: \"\",\n      eTypes: [],\n      adrs: [{\n        aType: null,\n        cName: \"\",\n        sName: \"\",\n        ctyName: null,\n        zip: \"\",\n        add1: \"\",\n        add2: \"\",\n        geoCords: {\n          lat: \"\",\n          lng: \"\"\n        },\n        userLoc: \"\",\n        manual: false,\n        cCode: null,\n        sCode: null,\n        houseNo: \"\",\n        street: \"\",\n        states: [],\n        cities: []\n      }],\n      addlCnt: [{\n        flName: \"\",\n        fName: \"\",\n        lName: \"\",\n        phone: \"\",\n        des: \"\",\n        email: \"\",\n        fax: \"\"\n      }],\n      data: []\n    };\n  }\n\n};\n\nHeaderComponent.ctorParameters = () => [{\n  type: SharedServiceService\n}, {\n  type: ApiService\n}, {\n  type: ListService\n}, {\n  type: Router\n}, {\n  type: InvokeHeaderFnService\n}, {\n  type: DashboardUtilityService\n}];\n\nHeaderComponent.propDecorators = {\n  navClicked: [{\n    type: Output\n  }]\n};\nHeaderComponent = __decorate([Component({\n  selector: \"app-header\",\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], HeaderComponent);\nexport { HeaderComponent };","map":null,"metadata":{},"sourceType":"module"}