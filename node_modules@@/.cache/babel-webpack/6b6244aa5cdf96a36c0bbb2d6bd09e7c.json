{"ast":null,"code":"import _asyncToGenerator from \"C:/FH/fh-cloud-app/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"!C:\\\\FH\\\\fh-cloud-app\\\\node_modules\\\\@ngtools\\\\webpack\\\\src\\\\loaders\\\\direct-resource.js!./purchase-order-detail.component.html\";\nimport __NG_CLI_RESOURCE__1 from \"./purchase-order-detail.component.css\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { ToastrService } from \"ngx-toastr\";\nimport { AccountService } from \"src/app/services/account.service\";\nimport { ApiService } from \"src/app/services/api.service\";\nlet PurchaseOrderDetailComponent = class PurchaseOrderDetailComponent {\n  constructor(accountService, route, apiService, toaster) {\n    this.accountService = accountService;\n    this.route = route;\n    this.apiService = apiService;\n    this.toaster = toaster;\n    this.orderData = {\n      txnDate: null,\n      refNo: \"\",\n      orderNo: \"\",\n      currency: \"CAD\",\n      poType: \"\",\n      vendorID: null,\n      detail: [{\n        comm: \"\",\n        qty: \"\",\n        qtyTyp: null,\n        rate: \"\",\n        rateTyp: null,\n        amount: 0\n      }],\n      charges: {\n        remarks: \"\",\n        cName: \"Adjustments\",\n        cType: \"add\",\n        cAmount: 0,\n        accFee: [{\n          name: \"\",\n          amount: 0\n        }],\n        accDed: [{\n          name: \"\",\n          amount: 0\n        }],\n        taxes: [{\n          name: \"GST\",\n          tax: 0,\n          type: \"prcnt\",\n          amount: 0\n        }, {\n          name: \"PST\",\n          tax: 0,\n          type: \"prcnt\",\n          amount: 0\n        }, {\n          name: \"HST\",\n          tax: 0,\n          type: \"prcnt\",\n          amount: 0\n        }]\n      },\n      total: {\n        detailTotal: 0,\n        feeTotal: 0,\n        dedTotal: 0,\n        subTotal: 0,\n        taxes: 0,\n        finalTotal: 0\n      },\n      status: \"\",\n      billStatus: \"\"\n    };\n    this.emailDisabled = false;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.purchaseID = _this.route.snapshot.params[\"purchaseID\"];\n      yield _this.fetchDetails();\n      yield _this.fetchVendor();\n    })();\n  }\n\n  fetchDetails() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this2.accountService.getData(`purchase-orders/details/${_this2.purchaseID}`).toPromise();\n      _this2.orderData = result[0];\n    })();\n  }\n\n  fetchVendor() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this3.apiService.getData(`contacts/minor/detail/${_this3.orderData.vendorID}`).toPromise();\n\n      if (result.Items.length > 0) {\n        _this3.vendorName = result.Items[0].cName;\n      }\n    })();\n  }\n\n  sendConfirmationEmail() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      _this4.emailDisabled = true;\n      let result = yield _this4.accountService.getData(`purchase-orders/send/confirmation-email/${_this4.purchaseID}`).toPromise();\n      _this4.emailDisabled = false;\n\n      if (result) {\n        _this4.toaster.success(\"Email sent successfully\");\n      } else {\n        _this4.toaster.error(\"Something went wrong.\");\n      }\n    })();\n  }\n\n};\n\nPurchaseOrderDetailComponent.ctorParameters = () => [{\n  type: AccountService\n}, {\n  type: ActivatedRoute\n}, {\n  type: ApiService\n}, {\n  type: ToastrService\n}];\n\nPurchaseOrderDetailComponent = __decorate([Component({\n  selector: \"app-purchase-order-detail\",\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], PurchaseOrderDetailComponent);\nexport { PurchaseOrderDetailComponent };","map":null,"metadata":{},"sourceType":"module"}