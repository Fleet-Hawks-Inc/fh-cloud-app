{"ast":null,"code":"import _asyncToGenerator from \"C:/FH/fh-cloud-app/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/account.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/api.service\";\nimport * as i4 from \"ngx-toastr\";\nimport * as i5 from \"@angular/common\";\n\nfunction PurchaseOrderDetailComponent_tr_99_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const data_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(data_r3.comm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", data_r3.qty, \" \", data_r3.qtyTyp, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"\", i0.ɵɵpipeBind2(7, 8, data_r3.rate, \"1.2-2\"), \" \", ctx_r0.currency, \" / \", data_r3.rateTyp, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(10, 11, data_r3.amount, \"1.2-2\"), \" \", ctx_r0.currency, \"\");\n  }\n}\n\nfunction PurchaseOrderDetailComponent_tr_112_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 36);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3, \"No document found\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PurchaseOrderDetailComponent_tr_113_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelementStart(6, \"a\", 37);\n    i0.ɵɵelement(7, \"img\", 38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 39);\n    i0.ɵɵelementStart(9, \"a\", 40);\n    i0.ɵɵlistener(\"click\", function PurchaseOrderDetailComponent_tr_113_Template_a_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const doc_r5 = restoredCtx.$implicit;\n      const d_r6 = restoredCtx.index;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.deleteDocument(doc_r5.displayName, d_r6);\n    });\n    i0.ɵɵelement(10, \"em\", 41);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const doc_r5 = ctx.$implicit;\n    const d_r6 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(d_r6 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(doc_r5.displayName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", doc_r5.docPath, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", doc_r5.imgPath, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport class PurchaseOrderDetailComponent {\n  constructor(accountService, route, apiService, toaster) {\n    this.accountService = accountService;\n    this.route = route;\n    this.apiService = apiService;\n    this.toaster = toaster;\n    this.commDetails = [];\n    this.taxes = [];\n    this.emailDisabled = false;\n    this.documents = [];\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.purchaseID = _this.route.snapshot.params[\"purchaseID\"];\n      yield _this.fetchDetails();\n    })();\n  }\n\n  fetchDetails() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this2.accountService.getData(`purchase-orders/details/${_this2.purchaseID}`).toPromise();\n      yield _this2.fetchVendor(result[0].vendorID);\n      _this2.txnDate = result[0].txnDate;\n      _this2.currency = result[0].currency;\n      _this2.finalTotal = result[0].total.finalTotal;\n      _this2.refNo = result[0].refNo;\n      _this2.remarks = result[0].remarks;\n      _this2.poType = result[0].poType;\n      _this2.orderNo = result[0].orderNo;\n      _this2.status = result[0].status;\n      _this2.billStatus = result[0].billStatus;\n      _this2.commDetails = result[0].detail;\n\n      if (result[0].docs.length > 0) {\n        result[0].docs.forEach(x => {\n          let obj = {};\n\n          if (x.storedName.split(\".\")[1] === \"jpg\" || x.storedName.split(\".\")[1] === \"png\" || x.storedName.split(\".\")[1] === \"jpeg\") {\n            obj = {\n              imgPath: `${x.urlPath}`,\n              docPath: `${x.urlPath}`,\n              displayName: x.displayName,\n              name: x.storedName,\n              ext: x.storedName.split(\".\")[1]\n            };\n          } else {\n            obj = {\n              imgPath: \"assets/img/icon-pdf.png\",\n              docPath: `${x.urlPath}`,\n              displayName: x.displayName,\n              name: x.storedName,\n              ext: x.storedName.split(\".\")[1]\n            };\n          }\n\n          _this2.documents.push(obj);\n        });\n      }\n    })();\n  }\n\n  deleteDocument(name, index) {\n    this.accountService.deleteData(`purchase-orders/uploadDelete/${this.purchaseID}/${name}`).subscribe(result => {\n      this.documents.splice(index, 1);\n      this.toaster.success(\"Attachment deleted successfully.\");\n    });\n  }\n\n  fetchVendor(vendorID) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this3.apiService.getData(`contacts/minor/detail/${vendorID}`).toPromise();\n\n      if (result.Items.length > 0) {\n        _this3.vendorName = result.Items[0].cName;\n      }\n    })();\n  }\n\n  sendConfirmationEmail() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      _this4.emailDisabled = true;\n      let result = yield _this4.accountService.getData(`purchase-orders/send/confirmation-email/${_this4.purchaseID}`).toPromise();\n      _this4.emailDisabled = false;\n\n      if (result) {\n        _this4.toaster.success(\"Email sent successfully\");\n      } else {\n        _this4.toaster.error(\"Something went wrong.\");\n      }\n    })();\n  }\n\n}\n\nPurchaseOrderDetailComponent.ɵfac = function PurchaseOrderDetailComponent_Factory(t) {\n  return new (t || PurchaseOrderDetailComponent)(i0.ɵɵdirectiveInject(i1.AccountService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.ApiService), i0.ɵɵdirectiveInject(i4.ToastrService));\n};\n\nPurchaseOrderDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PurchaseOrderDetailComponent,\n  selectors: [[\"app-purchase-order-detail\"]],\n  decls: 114,\n  vars: 24,\n  consts: [[1, \"body\"], [1, \"inner-wrapper\"], [\"role\", \"main\", 1, \"content-body\", \"pl-0\", \"pr-0\", \"pt-0\"], [1, \"page-header\", \"pr19\", \"pl7\"], [1, \"row\", 2, \"padding-top\", \"10px\"], [1, \"col-md-4\", \"col-lg-4\"], [1, \"text-4\", \"mt-0\", \"mb-0\", \"font-weight-bold\", \"text-dark\"], [1, \"badge\", \"badge-dark\", \"p-1\", \"text-uppercase\"], [1, \"col-md-8\", \"col-lg-8\", \"text-right\", \"pr-1\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", \"btn-sm\", \"mr-3\", 3, \"disabled\", \"click\"], [\"routerLink\", \"/accounts/purchases/orders/list\", 1, \"btn\", \"btn-sm\", \"btn-default\"], [1, \"fas\", \"fa-list\"], [1, \"m-2\"], [1, \"row\", \"mb-3\"], [1, \"col-lg-12\"], [1, \"bg-white\", \"p-3\", \"text-dark\"], [1, \"form-group\", \"row\"], [1, \"row\"], [1, \"text-center\", \"p-4\", \"cmaindiv\"], [1, \"far\", \"fa-calendar-alt\", \"text-7\"], [1, \"mb-0\", \"text-5\", \"font-weight-bold\", \"text-dark\"], [1, \"mb-0\"], [1, \"fa\", \"fa-user\", \"text-7\"], [1, \"mb-0\", \"text-5\", \"font-weight-bold\", \"text-dark\", \"text-capitalize\"], [1, \"fas\", \"fa-money-bill-wave\", \"text-7\"], [1, \"col-lg-6\"], [1, \"table\", \"table-bordered\", \"table-responsive-lg\"], [1, \"back-color-gray\", \"font-weight-bold\"], [1, \"table\", \"table-bordered\", \"table-responsive-lg\", \"text-capitalize\"], [\"width\", \"40%\", 1, \"back-color-gray\", \"font-weight-bold\"], [\"width\", \"60%\"], [1, \"table\", \"table-bordered\", \"table-hover\"], [4, \"ngFor\", \"ngForOf\"], [1, \"col-6\"], [1, \"table\", \"table-bordered\"], [4, \"ngIf\"], [\"colspan\", \"4\"], [\"target\", \"_blank\", 1, \"image-popup-no-margins\", 3, \"href\"], [1, \"img-fluid\", \"img_thumbnail\", 3, \"src\"], [1, \"cursorpoint\"], [\"href\", \"javascript:;\", 1, \"modal-with-form\", 3, \"click\"], [1, \"fas\", \"fa-times\", \"text-danger\"]],\n  template: function PurchaseOrderDetailComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"section\", 2);\n      i0.ɵɵelementStart(3, \"header\", 3);\n      i0.ɵɵelementStart(4, \"div\", 4);\n      i0.ɵɵelementStart(5, \"div\", 5);\n      i0.ɵɵelementStart(6, \"h4\", 6);\n      i0.ɵɵtext(7);\n      i0.ɵɵelementStart(8, \"span\", 7);\n      i0.ɵɵtext(9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 8);\n      i0.ɵɵelementStart(11, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function PurchaseOrderDetailComponent_Template_button_click_11_listener() {\n        return ctx.sendConfirmationEmail();\n      });\n      i0.ɵɵtext(12, \" Send Email To Vendor \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"a\", 10);\n      i0.ɵɵelement(14, \"i\", 11);\n      i0.ɵɵtext(15, \" All Purchase Orders\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"section\", 12);\n      i0.ɵɵelementStart(17, \"div\", 13);\n      i0.ɵɵelementStart(18, \"div\", 14);\n      i0.ɵɵelementStart(19, \"div\", 15);\n      i0.ɵɵelementStart(20, \"div\", 16);\n      i0.ɵɵelementStart(21, \"div\", 14);\n      i0.ɵɵelementStart(22, \"div\", 17);\n      i0.ɵɵelementStart(23, \"div\", 5);\n      i0.ɵɵelementStart(24, \"div\", 18);\n      i0.ɵɵelement(25, \"i\", 19);\n      i0.ɵɵelement(26, \"br\");\n      i0.ɵɵelementStart(27, \"p\", 20);\n      i0.ɵɵtext(28);\n      i0.ɵɵpipe(29, \"date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"p\", 21);\n      i0.ɵɵtext(31, \"DATE\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"div\", 5);\n      i0.ɵɵelementStart(33, \"div\", 18);\n      i0.ɵɵelement(34, \"i\", 22);\n      i0.ɵɵelement(35, \"br\");\n      i0.ɵɵelementStart(36, \"p\", 23);\n      i0.ɵɵtext(37);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"p\", 21);\n      i0.ɵɵtext(39, \"VENDOR\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"div\", 5);\n      i0.ɵɵelementStart(41, \"div\", 18);\n      i0.ɵɵelement(42, \"i\", 24);\n      i0.ɵɵelement(43, \"br\");\n      i0.ɵɵelementStart(44, \"p\", 20);\n      i0.ɵɵtext(45);\n      i0.ɵɵpipe(46, \"number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"p\", 21);\n      i0.ɵɵtext(48, \"AMOUNT\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"div\", 13);\n      i0.ɵɵelementStart(50, \"div\", 14);\n      i0.ɵɵelementStart(51, \"div\", 15);\n      i0.ɵɵelementStart(52, \"div\", 16);\n      i0.ɵɵelementStart(53, \"div\", 25);\n      i0.ɵɵelementStart(54, \"div\", 17);\n      i0.ɵɵelementStart(55, \"div\", 14);\n      i0.ɵɵelementStart(56, \"table\", 26);\n      i0.ɵɵelementStart(57, \"tbody\");\n      i0.ɵɵelementStart(58, \"tr\");\n      i0.ɵɵelementStart(59, \"td\", 27);\n      i0.ɵɵtext(60, \"Reference#\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(61, \"td\");\n      i0.ɵɵtext(62);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(63, \"tr\");\n      i0.ɵɵelementStart(64, \"td\", 27);\n      i0.ɵɵtext(65, \"Remarks\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(66, \"td\");\n      i0.ɵɵtext(67);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(68, \"tr\");\n      i0.ɵɵelementStart(69, \"td\", 27);\n      i0.ɵɵtext(70, \"Total Amount\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(71, \"td\");\n      i0.ɵɵtext(72);\n      i0.ɵɵpipe(73, \"number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(74, \"div\", 25);\n      i0.ɵɵelementStart(75, \"div\", 17);\n      i0.ɵɵelementStart(76, \"div\", 14);\n      i0.ɵɵelementStart(77, \"table\", 28);\n      i0.ɵɵelementStart(78, \"tbody\");\n      i0.ɵɵelementStart(79, \"tr\");\n      i0.ɵɵelementStart(80, \"td\", 29);\n      i0.ɵɵtext(81, \"Type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(82, \"td\", 30);\n      i0.ɵɵtext(83);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(84, \"div\", 14);\n      i0.ɵɵelementStart(85, \"div\", 17);\n      i0.ɵɵelementStart(86, \"div\", 25);\n      i0.ɵɵelementStart(87, \"table\", 31);\n      i0.ɵɵelementStart(88, \"thead\");\n      i0.ɵɵelementStart(89, \"tr\");\n      i0.ɵɵelementStart(90, \"th\");\n      i0.ɵɵtext(91, \"Commodity\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(92, \"th\");\n      i0.ɵɵtext(93, \"Quantity\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(94, \"th\");\n      i0.ɵɵtext(95, \"Rate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(96, \"th\");\n      i0.ɵɵtext(97, \"Amount\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(98, \"tbody\");\n      i0.ɵɵtemplate(99, PurchaseOrderDetailComponent_tr_99_Template, 11, 14, \"tr\", 32);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(100, \"div\", 33);\n      i0.ɵɵelementStart(101, \"table\", 34);\n      i0.ɵɵelementStart(102, \"thead\");\n      i0.ɵɵelementStart(103, \"th\");\n      i0.ɵɵtext(104, \"Sr.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(105, \"th\");\n      i0.ɵɵtext(106, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(107, \"th\");\n      i0.ɵɵtext(108, \"Icon/Thumbnail\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(109, \"th\");\n      i0.ɵɵtext(110, \"Action\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(111, \"tbody\");\n      i0.ɵɵtemplate(112, PurchaseOrderDetailComponent_tr_112_Template, 4, 0, \"tr\", 35);\n      i0.ɵɵtemplate(113, PurchaseOrderDetailComponent_tr_113_Template, 11, 4, \"tr\", 32);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate1(\"Purchase Order# - \", ctx.orderNo, \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.status);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.emailDisabled);\n      i0.ɵɵadvance(17);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(29, 15, ctx.txnDate, \"yyyy/MM/dd\"));\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate(ctx.vendorName);\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(46, 18, ctx.finalTotal, \"1.2-2\"), \" \", ctx.currency, \"\");\n      i0.ɵɵadvance(17);\n      i0.ɵɵtextInterpolate(ctx.refNo ? ctx.refNo : \"-\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.remarks ? ctx.remarks : \"-\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(73, 21, ctx.finalTotal, \"1.2-2\"), \" \", ctx.currency, \"\");\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate1(\" \", ctx.poType, \" \");\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngForOf\", ctx.commDetails);\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngIf\", ctx.documents.length == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.documents);\n    }\n  },\n  directives: [i2.RouterLinkWithHref, i5.NgForOf, i5.NgIf],\n  pipes: [i5.DatePipe, i5.DecimalPipe],\n  styles: [\".img_thumbnail[_ngcontent-%COMP%] {\\r\\n  width: 90px;\\r\\n  height: 70px;\\r\\n  object-fit: contain;\\r\\n}\"]\n});","map":null,"metadata":{},"sourceType":"module"}