{"ast":null,"code":"import _asyncToGenerator from \"C:/FH/fh-cloud-app/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { from, Subject, throwError } from \"rxjs\";\nimport { debounceTime, distinctUntilChanged, switchMap, catchError, map } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../services\";\nimport * as i2 from \"src/app/services/safety.service\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"ngx-spinner\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@ng-select/ng-select\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@ng-bootstrap/ng-bootstrap\";\n\nfunction AddEventComponent_ng_option_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ng-option\", 53);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const vehicle_r18 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", vehicle_r18.vehicleID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", vehicle_r18.vehicleIdentification, \" \");\n  }\n}\n\nfunction AddEventComponent_div_30_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Vehicle is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddEventComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtemplate(1, AddEventComponent_div_30_div_1_Template, 2, 0, \"div\", 55);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r1 = i0.ɵɵreference(28);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1.errors.required);\n  }\n}\n\nfunction AddEventComponent_div_41_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Event date is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddEventComponent_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtemplate(1, AddEventComponent_div_41_div_1_Template, 2, 0, \"div\", 55);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r5 = i0.ɵɵreference(40);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors.required);\n  }\n}\n\nfunction AddEventComponent_div_50_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Event time is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddEventComponent_div_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtemplate(1, AddEventComponent_div_50_div_1_Template, 2, 0, \"div\", 55);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r7 = i0.ɵɵreference(49);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r7.errors.required);\n  }\n}\n\nfunction AddEventComponent_div_68_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Event type is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddEventComponent_div_68_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtemplate(1, AddEventComponent_div_68_div_1_Template, 2, 0, \"div\", 55);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r9 = i0.ɵɵreference(59);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r9.errors.required);\n  }\n}\n\nfunction AddEventComponent_div_85_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Location is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddEventComponent_div_85_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtemplate(1, AddEventComponent_div_85_div_1_Template, 2, 0, \"div\", 55);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r11 = i0.ɵɵreference(84);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r11.errors.required);\n  }\n}\n\nfunction AddEventComponent_div_86_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"a\", 59);\n    i0.ɵɵlistener(\"click\", function AddEventComponent_div_86_li_2_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r27);\n      const item_r25 = restoredCtx.$implicit;\n      const ctx_r26 = i0.ɵɵnextContext(2);\n      return ctx_r26.assignLocation(item_r25);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r25 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"title\", item_r25.address);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r25.address);\n  }\n}\n\nfunction AddEventComponent_div_86_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵelementStart(1, \"ul\", 57);\n    i0.ɵɵtemplate(2, AddEventComponent_div_86_li_2_Template, 3, 2, \"li\", 58);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r13.searchResults);\n  }\n}\n\nfunction AddEventComponent_span_93_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 54);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r14.photoSizeError, \" \");\n  }\n}\n\nfunction AddEventComponent_span_98_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 54);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r15.videoSizeError, \" \");\n  }\n}\n\nfunction AddEventComponent_div_105_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtext(1, \" Only 500 characters are allowed. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class AddEventComponent {\n  constructor(apiService, safetyService, toastr, spinner, router, hereMap) {\n    var _this = this;\n\n    this.apiService = apiService;\n    this.safetyService = safetyService;\n    this.toastr = toastr;\n    this.spinner = spinner;\n    this.router = router;\n    this.hereMap = hereMap;\n    this.errors = {};\n    this.event = {\n      vehicleID: null,\n      eventDate: \"\",\n      eventTime: \"\",\n      eventType: null,\n      eventSource: \"manual\",\n      createdBy: \"\",\n      location: {\n        label: \"\",\n        cords: \"\"\n      },\n      notes: \"\",\n      status: \"open\"\n    };\n    this.uploadedPhotos = [];\n    this.uploadedVideos = [];\n    this.carrierID = \"\";\n    this.criticalityType = [{\n      value: \"harshBrake\",\n      name: \"Harsh Brake\"\n    }, {\n      value: \"harshAcceleration\",\n      name: \"Harsh Acceleration\"\n    }, {\n      value: \"highSpeed\",\n      name: \"High Speed\"\n    }, {\n      value: \"highSpeed\",\n      name: \"High Speed\"\n    }, {\n      value: \"impactTilt\",\n      name: \"Impact/Tilt\"\n    }];\n    this.severity = [{\n      value: \"high\",\n      name: \"High\"\n    }, {\n      value: \"medium\",\n      name: \"Medium\"\n    }, {\n      value: \"low\",\n      name: \"Low\"\n    }];\n    this.vehicles = [];\n    this.drivers = [];\n    this.users = [];\n    this.trips = [];\n    this.photoSizeError = \"\";\n    this.videoSizeError = \"\";\n    this.isSuggest = false;\n    this.searchTerm = new Subject();\n    this.uploadedDocs = [];\n    this.disableButton = false;\n    /**\r\n     * Get Current User logged in\r\n     */\n\n    this.getCurrentuser = /*#__PURE__*/_asyncToGenerator(function* () {\n      _this.currentUser = localStorage.getItem(\"currentUserName\");\n      _this.event.createdBy = _this.currentUser;\n    });\n    this.selectedFileNames = new Map();\n    const date = new Date();\n    this.birthDateMinLimit = {\n      year: 1950,\n      month: 1,\n      day: 1\n    };\n    this.birthDateMaxLimit = {\n      year: date.getFullYear(),\n      month: 12,\n      day: 31\n    };\n  }\n\n  ngOnInit() {\n    this.fetchVehicles(); // this.fetchDrivers();\n\n    this.disabledButton(); // this.fetchTrips();\n\n    this.searchLocation();\n    this.getCurrentuser();\n  }\n\n  fetchVehicles() {\n    this.apiService.getData(\"vehicles\").subscribe(result => {\n      result.Items.forEach(element => {\n        if (element.isDeleted === 0) {\n          this.vehicles.push(element);\n        }\n      });\n    });\n  }\n\n  fetchDrivers() {\n    this.apiService.getData(\"drivers/safety\").subscribe(result => {\n      this.drivers = result.Items;\n    });\n  }\n\n  fetchUsers() {\n    this.apiService.getData(\"common/users/fetch/records\").subscribe(result => {\n      result.Items.map(i => {\n        i.fullName = i.firstName + \" \" + i.lastName;\n        return i;\n      });\n      this.users = result.Items;\n    });\n  }\n\n  fetchTrips() {\n    this.apiService.getData(\"trips\").subscribe(result => {\n      for (let i = 0; i < result.Items.length; i++) {\n        const element = result.Items[i];\n\n        if (element.isDeleted === 0) {\n          this.trips.push(element);\n        }\n      }\n    });\n  }\n\n  addEvent() {\n    if (!this.isSuggest) {\n      this.toastr.error(\"Please select valid location\");\n      return;\n    }\n\n    this.disableButton = true;\n    this.hideErrors(); // create form data instance\n\n    const formData = new FormData(); // append videos if any\n\n    for (let i = 0; i < this.uploadedVideos.length; i++) {\n      formData.append(\"uploadedVideos\", this.uploadedVideos[i]);\n    } // append docs if any\n\n\n    for (let j = 0; j < this.uploadedPhotos.length; j++) {\n      formData.append(\"uploadedPhotos\", this.uploadedPhotos[j]);\n    } // append other fields\n\n\n    formData.append(\"data\", JSON.stringify(this.event));\n    this.safetyService.postData(\"critical-events\", formData, true).subscribe({\n      complete: () => {},\n      error: err => {\n        this.disableButton = false;\n        from(err.error).pipe(map(val => {\n          val.message = val.message.replace(/\".*\"/, \"This Field\");\n          this.errors[val.context.key] = val.message;\n          this.disableButton = false;\n        })).subscribe({\n          complete: () => {\n            this.disableButton = false;\n            this.throwErrors();\n          },\n          error: () => {\n            this.disableButton = false;\n          },\n          next: () => {}\n        });\n      },\n      next: res => {\n        this.spinner.hide();\n        this.toastr.success(\"Critical event added successfully\");\n        this.router.navigateByUrl(\"/safety/critical-events\");\n      }\n    });\n  }\n\n  throwErrors() {\n    from(Object.keys(this.errors)).subscribe(v => {\n      $('[name=\"' + v + '\"]').after('<label id=\"' + v + '-error\" class=\"error\" for=\"' + v + '\">' + this.errors[v] + \"</label>\").addClass(\"error\");\n    });\n  }\n\n  disabledButton() {\n    if (this.event.vehicleID == \"\" || this.event.vehicleID == null || this.event.eventDate == \"\" || this.event.eventDate == null || this.event.eventTime == null || this.event.eventTime == \"\" || this.event.eventType == \"\" || this.event.eventType == null || this.event.createdBy == \"\" || this.event.location.label == \"\" || this.event.status == \"\" || this.event.eventSource == \"\" || this.event.notes.length > 500) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  hideErrors() {\n    from(Object.keys(this.errors)).subscribe(v => {\n      $('[name=\"' + v + '\"]').removeClass(\"error\").next().remove(\"label\");\n    });\n    this.errors = {};\n  }\n\n  searchLocation() {\n    this.searchTerm.pipe(map(e => {\n      $(e.target).closest(\"div\").addClass(\"show-search__result\");\n      return e.target.value;\n    }), debounceTime(400), distinctUntilChanged(), switchMap(term => {\n      return this.hereMap.searchEntries(term);\n    }), catchError(e => {\n      return throwError(e);\n    })).subscribe(res => {\n      this.searchResults = res;\n    });\n  }\n\n  getAddressDetail(id) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this2.apiService.getData(`pcMiles/detail/${id}`).toPromise();\n      return result;\n    })();\n  }\n\n  assignLocation(item) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this3.getAddressDetail(item.place_id);\n\n      if (result != undefined) {\n        _this3.event.location.cords = `${result.position.lat},${result.position.lng}`;\n        _this3.event.location.label = item.address;\n        _this3.searchResults = false;\n        _this3.isSuggest = true;\n        $(\"div\").removeClass(\"show-search__result\");\n      } else {\n        _this3.event.location.label = item.address;\n        _this3.event.location.cords = \"0,0\";\n      }\n    })();\n  }\n  /*\r\n   * Selecting files before uploading\r\n   */\n\n\n  selectDocuments(event, obj) {\n    let files = [...event.target.files];\n    let filesSize = 0;\n\n    if (files.length > 5) {\n      this.toastr.error(\"files count limit exceeded\");\n\n      if (obj === \"uploadedPhotos\") {\n        this.photoSizeError = \"files should not be more than 5\";\n      } else {\n        this.videoSizeError = \"files should not be more than 5\";\n      }\n\n      return;\n    }\n\n    if (obj === \"uploadedPhotos\") {\n      this.uploadedPhotos = [];\n\n      for (let i = 0; i < files.length; i++) {\n        filesSize += files[i].size / 1024 / 1024;\n\n        if (filesSize > 10) {\n          this.toastr.error(\"files size limit exceeded\");\n          this.photoSizeError = \"Please select file which have size below 10 MB\";\n          return;\n        } else {\n          this.photoSizeError = \"\";\n          let name = files[i].name.split(\".\");\n          let ext = name[name.length - 1].toLowerCase();\n\n          if (ext == \"jpg\" || ext == \"jpeg\" || ext == \"png\") {\n            this.uploadedPhotos.push(files[i]);\n          } else {\n            this.photoSizeError = \"Only .jpg, .jpeg, .png files allowed\";\n          }\n        }\n      }\n    } else {\n      this.uploadedVideos = [];\n\n      for (let i = 0; i < files.length; i++) {\n        filesSize += files[i].size / 1024 / 1024;\n\n        if (filesSize > 30) {\n          this.toastr.error(\"files size limit exceeded\");\n          this.videoSizeError = \"Please select file which have size below 30 MB\";\n          return;\n        } else {\n          this.videoSizeError = \"\";\n          let name = files[i].name.split(\".\");\n          let ext = name[name.length - 1].toLowerCase();\n\n          if (ext == \"mp4\" || ext == \"mov\") {\n            this.uploadedVideos.push(files[i]);\n          } else {\n            this.videoSizeError = \"Only .mp4 and .mov files allowed\";\n          }\n        }\n      }\n    }\n  }\n\n}\n\nAddEventComponent.ɵfac = function AddEventComponent_Factory(t) {\n  return new (t || AddEventComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.SafetyService), i0.ɵɵdirectiveInject(i3.ToastrService), i0.ɵɵdirectiveInject(i4.NgxSpinnerService), i0.ɵɵdirectiveInject(i5.Router), i0.ɵɵdirectiveInject(i1.HereMapService));\n};\n\nAddEventComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddEventComponent,\n  selectors: [[\"app-add-event\"]],\n  decls: 112,\n  vars: 21,\n  consts: [[1, \"body\"], [1, \"inner-wrapper\"], [\"role\", \"main\", 1, \"content-body\", \"pr-0\", \"pl-0\", \"pt-0\"], [1, \"page-header\", \"pr8\", \"pl11\"], [1, \"row\", 2, \"padding-top\", \"10px\"], [1, \"col-md-4\", \"col-lg-4\"], [1, \"font-weight-bold\", \"text-4\", \"mt-0\", \"mb-0\", \"text-dark\"], [1, \"col-md-8\", \"col-lg-8\", \"text-right\"], [\"href\", \"javascript:;\", \"routerLink\", \"/safety/critical-events\", 1, \"btn\", \"btn-default\", \"btn-sm\"], [1, \"fas\", \"fa-list\"], [1, \"m-2\"], [1, \"form-horizontal\", \"form-bordered\", \"text-dark\"], [\"eventForm\", \"ngForm\"], [1, \"row\", \"mb-3\"], [1, \"col-lg-12\"], [1, \"bg-white\", \"p-3\", \"text-dark\"], [1, \"form-group\", \"row\", \"adddriverpl\", \"pt-3\"], [1, \"col-lg-6\"], [1, \"row\"], [1, \"col-10\"], [1, \"control-label\", \"font-weight-bold\", \"text-lg-right\", \"pt-2\"], [1, \"mandfield\", \"text-2\", \"ml-1\"], [\"name\", \"vehicleID\", \"placeholder\", \"Select vehicle\", \"required\", \"\", 1, \"text-capitalize\", 3, \"ngModel\", \"ngModelChange\"], [\"vehicle\", \"ngModel\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [1, \"col-lg-5\"], [\"readonly\", \"\", \"name\", \"eventDate\", \"type\", \"text\", \"placeholder\", \" yyyy/mm/dd\", \"ngbDatepicker\", \"\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"maxDate\", \"minDate\", \"ngModelChange\", \"click\"], [\"d\", \"ngbDatepicker\", \"date\", \"ngModel\"], [\"type\", \"time\", \"name\", \"eventTime\", \"placeholder\", \"Enter event time\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"time\", \"ngModel\"], [\"data-select2-id\", \"351\", 1, \"row\"], [\"name\", \"eventType\", \"placeholder\", \"Select event type\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"evType\", \"ngModel\"], [\"value\", \"harshAcceleration\"], [\"value\", \"harshBrake\"], [\"value\", \"highSpeed\"], [\"value\", \"impactTilt\"], [\"type\", \"text\", \"disabled\", \"\", \"name\", \"createdBy\", 1, \"form-control\", 3, \"value\", \"ngModel\", \"ngModelChange\"], [1, \"col-lg-10\"], [\"type\", \"text\", \"required\", \"\", \"name\", \"location\", \"placeholder\", \"eg. 71 Ave NW, Calgary, AB T3B, Canada\", \"autocomplete\", \"off\", 1, \"form-control\", 3, \"ngModel\", \"keyup\", \"ngModelChange\"], [\"loc\", \"ngModel\"], [\"class\", \"map-search__results\", 4, \"ngIf\"], [1, \"row\", \"pt-2\"], [1, \"control-label\", \"font-weight-bold\", \"font-bold\", \"text-lg-right\", \"pt-2\"], [\"type\", \"file\", \"name\", \"uploadedPhotos\", \"multiple\", \"\", 1, \"form-control\", \"border-0\", \"p-0\", 3, \"change\"], [\"type\", \"file\", \"name\", \"uploadedVideos\", \"multiple\", \"\", 1, \"form-control\", \"border-0\", \"p-0\", 3, \"change\"], [\"required\", \"\", \"rows\", \"3\", \"placeholder\", \"Enter notes for the Safety Manager\", \"name\", \"notes\", 1, \"form-control\", \"h-auto\", 3, \"ngModel\", \"ngModelChange\"], [\"note\", \"ngModel\"], [1, \"form-group\", \"row\"], [1, \"col-lg-11\", \"text-right\"], [\"type\", \"button\", \"routerLink\", \"/safety/critical-events\", 1, \"btn\", \"btn-default\", \"mt-4\", \"mr-3\"], [1, \"btn\", \"btn-success\", \"mt-4\", \"modal-confirm\", 3, \"disabled\", \"click\"], [3, \"value\"], [1, \"text-danger\"], [4, \"ngIf\"], [1, \"map-search__results\"], [1, \"p-0\", \"m-0\", \"text-left\", \"bg-white\"], [4, \"ngFor\", \"ngForOf\"], [\"href\", \"javascript:;\", 3, \"title\", \"click\"]],\n  template: function AddEventComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r28 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"section\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"section\", 2);\n      i0.ɵɵelementStart(3, \"header\", 3);\n      i0.ɵɵelementStart(4, \"div\", 4);\n      i0.ɵɵelementStart(5, \"div\", 5);\n      i0.ɵɵelementStart(6, \"h4\", 6);\n      i0.ɵɵtext(7, \" Add Critical Event \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 7);\n      i0.ɵɵelementStart(9, \"a\", 8);\n      i0.ɵɵelement(10, \"i\", 9);\n      i0.ɵɵtext(11, \" Events List\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"section\", 10);\n      i0.ɵɵelementStart(13, \"form\", 11, 12);\n      i0.ɵɵelementStart(15, \"div\", 13);\n      i0.ɵɵelementStart(16, \"div\", 14);\n      i0.ɵɵelementStart(17, \"div\", 15);\n      i0.ɵɵelementStart(18, \"div\", 16);\n      i0.ɵɵelementStart(19, \"div\", 17);\n      i0.ɵɵelementStart(20, \"div\", 18);\n      i0.ɵɵelementStart(21, \"div\", 19);\n      i0.ɵɵelementStart(22, \"label\", 20);\n      i0.ɵɵtext(23, \"Vehicle \");\n      i0.ɵɵelementStart(24, \"span\", 21);\n      i0.ɵɵelementStart(25, \"sup\");\n      i0.ɵɵtext(26, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"ng-select\", 22, 23);\n      i0.ɵɵlistener(\"ngModelChange\", function AddEventComponent_Template_ng_select_ngModelChange_27_listener($event) {\n        return ctx.event.vehicleID = $event;\n      });\n      i0.ɵɵtemplate(29, AddEventComponent_ng_option_29_Template, 2, 2, \"ng-option\", 24);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(30, AddEventComponent_div_30_Template, 2, 1, \"div\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"div\", 18);\n      i0.ɵɵelementStart(32, \"div\", 26);\n      i0.ɵɵelementStart(33, \"label\", 20);\n      i0.ɵɵtext(34, \"Event Date \");\n      i0.ɵɵelementStart(35, \"span\", 21);\n      i0.ɵɵelementStart(36, \"sup\");\n      i0.ɵɵtext(37, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"input\", 27, 28);\n      i0.ɵɵlistener(\"ngModelChange\", function AddEventComponent_Template_input_ngModelChange_38_listener($event) {\n        return ctx.event.eventDate = $event;\n      })(\"click\", function AddEventComponent_Template_input_click_38_listener() {\n        i0.ɵɵrestoreView(_r28);\n\n        const _r4 = i0.ɵɵreference(39);\n\n        return _r4.toggle();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(41, AddEventComponent_div_41_Template, 2, 1, \"div\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(42, \"div\", 26);\n      i0.ɵɵelementStart(43, \"label\", 20);\n      i0.ɵɵtext(44, \"Event Time \");\n      i0.ɵɵelementStart(45, \"span\", 21);\n      i0.ɵɵelementStart(46, \"sup\");\n      i0.ɵɵtext(47, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(48, \"input\", 29, 30);\n      i0.ɵɵlistener(\"ngModelChange\", function AddEventComponent_Template_input_ngModelChange_48_listener($event) {\n        return ctx.event.eventTime = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(50, AddEventComponent_div_50_Template, 2, 1, \"div\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(51, \"div\", 31);\n      i0.ɵɵelementStart(52, \"div\", 26);\n      i0.ɵɵelementStart(53, \"label\", 20);\n      i0.ɵɵtext(54, \"Event Type \");\n      i0.ɵɵelementStart(55, \"span\", 21);\n      i0.ɵɵelementStart(56, \"sup\");\n      i0.ɵɵtext(57, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(58, \"ng-select\", 32, 33);\n      i0.ɵɵlistener(\"ngModelChange\", function AddEventComponent_Template_ng_select_ngModelChange_58_listener($event) {\n        return ctx.event.eventType = $event;\n      });\n      i0.ɵɵelementStart(60, \"ng-option\", 34);\n      i0.ɵɵtext(61, \"Harsh Acceleration\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(62, \"ng-option\", 35);\n      i0.ɵɵtext(63, \"Harsh Brake\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(64, \"ng-option\", 36);\n      i0.ɵɵtext(65, \"High Speed\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(66, \"ng-option\", 37);\n      i0.ɵɵtext(67, \"Impact/Tilt\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(68, AddEventComponent_div_68_Template, 2, 1, \"div\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(69, \"div\", 26);\n      i0.ɵɵelementStart(70, \"label\", 20);\n      i0.ɵɵtext(71, \"Created By \");\n      i0.ɵɵelementStart(72, \"span\", 21);\n      i0.ɵɵelementStart(73, \"sup\");\n      i0.ɵɵtext(74, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(75, \"input\", 38);\n      i0.ɵɵlistener(\"ngModelChange\", function AddEventComponent_Template_input_ngModelChange_75_listener($event) {\n        return ctx.event.createdBy = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(76, \"div\", 18);\n      i0.ɵɵelementStart(77, \"div\", 39);\n      i0.ɵɵelementStart(78, \"label\", 20);\n      i0.ɵɵtext(79, \"Location \");\n      i0.ɵɵelementStart(80, \"span\", 21);\n      i0.ɵɵelementStart(81, \"sup\");\n      i0.ɵɵtext(82, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(83, \"input\", 40, 41);\n      i0.ɵɵlistener(\"keyup\", function AddEventComponent_Template_input_keyup_83_listener($event) {\n        return ctx.searchTerm.next($event);\n      })(\"ngModelChange\", function AddEventComponent_Template_input_ngModelChange_83_listener($event) {\n        return ctx.event.location.label = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(85, AddEventComponent_div_85_Template, 2, 1, \"div\", 25);\n      i0.ɵɵtemplate(86, AddEventComponent_div_86_Template, 3, 1, \"div\", 42);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(87, \"div\", 17);\n      i0.ɵɵelementStart(88, \"div\", 43);\n      i0.ɵɵelementStart(89, \"div\", 26);\n      i0.ɵɵelementStart(90, \"label\", 44);\n      i0.ɵɵtext(91, \"Attach Photo(s) \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(92, \"input\", 45);\n      i0.ɵɵlistener(\"change\", function AddEventComponent_Template_input_change_92_listener($event) {\n        return ctx.selectDocuments($event, \"uploadedPhotos\");\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(93, AddEventComponent_span_93_Template, 2, 1, \"span\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(94, \"div\", 26);\n      i0.ɵɵelementStart(95, \"label\", 44);\n      i0.ɵɵtext(96, \"Attach Video(s) \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(97, \"input\", 46);\n      i0.ɵɵlistener(\"change\", function AddEventComponent_Template_input_change_97_listener($event) {\n        return ctx.selectDocuments($event, \"uploadedVideos\");\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(98, AddEventComponent_span_98_Template, 2, 1, \"span\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(99, \"div\", 18);\n      i0.ɵɵelementStart(100, \"div\", 39);\n      i0.ɵɵelementStart(101, \"label\", 20);\n      i0.ɵɵtext(102, \"Safety Manager Internal Notes \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(103, \"textarea\", 47, 48);\n      i0.ɵɵlistener(\"ngModelChange\", function AddEventComponent_Template_textarea_ngModelChange_103_listener($event) {\n        return ctx.event.notes = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(105, AddEventComponent_div_105_Template, 2, 0, \"div\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(106, \"div\", 49);\n      i0.ɵɵelementStart(107, \"div\", 50);\n      i0.ɵɵelementStart(108, \"button\", 51);\n      i0.ɵɵtext(109, \" Cancel \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(110, \"button\", 52);\n      i0.ɵɵlistener(\"click\", function AddEventComponent_Template_button_click_110_listener() {\n        return ctx.addEvent();\n      });\n      i0.ɵɵtext(111, \" Save \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(28);\n\n      const _r5 = i0.ɵɵreference(40);\n\n      const _r7 = i0.ɵɵreference(49);\n\n      const _r9 = i0.ɵɵreference(59);\n\n      const _r11 = i0.ɵɵreference(84);\n\n      i0.ɵɵadvance(27);\n      i0.ɵɵproperty(\"ngModel\", ctx.event.vehicleID);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.vehicles);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", _r1.invalid && (_r1.dirty || _r1.touched));\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.event.eventDate)(\"maxDate\", ctx.birthDateMaxLimit)(\"minDate\", ctx.birthDateMinLimit);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", _r5.invalid && (_r5.dirty || _r5.touched));\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngModel\", ctx.event.eventTime);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", _r7.invalid && (_r7.dirty || _r7.touched));\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.event.eventType);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngIf\", _r9.invalid && (_r9.dirty || _r9.touched));\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"value\", ctx.currentUser)(\"ngModel\", ctx.event.createdBy);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.event.location.label);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", _r11.invalid && (_r11.dirty || _r11.touched));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.searchResults);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.photoSizeError != \"\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.videoSizeError != \"\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.event.notes);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", (ctx.event.notes == null ? null : ctx.event.notes.length) > 500);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"disabled\", ctx.disableButton || ctx.disabledButton());\n    }\n  },\n  directives: [i5.RouterLinkWithHref, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.NgForm, i7.NgSelectComponent, i6.RequiredValidator, i6.NgControlStatus, i6.NgModel, i8.NgForOf, i8.NgIf, i9.NgbInputDatepicker, i6.DefaultValueAccessor, i7.ɵr, i5.RouterLink],\n  styles: [\"\"]\n});","map":null,"metadata":{},"sourceType":"module"}