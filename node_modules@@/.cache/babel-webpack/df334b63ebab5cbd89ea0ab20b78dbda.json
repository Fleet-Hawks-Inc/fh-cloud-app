{"ast":null,"code":"import _asyncToGenerator from \"C:/FH/fh-cloud-app/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport spacetime from 'spacetime';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../services\";\nimport * as i2 from \"src/app/services/safety.service\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"ngx-spinner\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"../../../../services/here-map.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\nimport * as i9 from \"ngx-slick-carousel\";\n\nfunction EventDetailComponent_span_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Motion Detection\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EventDetailComponent_span_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Harsh Driving\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EventDetailComponent_span_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Harsh Acceleration\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EventDetailComponent_span_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"High Speed\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EventDetailComponent_span_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Impact/Tilt\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EventDetailComponent_span_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" Harsh Brake \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EventDetailComponent_a_97_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 70);\n    i0.ɵɵlistener(\"click\", function EventDetailComponent_a_97_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.fetchEvidence();\n    });\n    i0.ɵɵelement(1, \"i\", 71);\n    i0.ɵɵtext(2, \" Fetch Evidence Video(s)\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EventDetailComponent_a_98_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 72);\n    i0.ɵɵelement(1, \"i\", 71);\n    i0.ɵɵtext(2, \" View Critical Event Photo\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EventDetailComponent_a_99_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 73);\n    i0.ɵɵelement(1, \"i\", 71);\n    i0.ɵɵtext(2, \" View Critical Event Video\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EventDetailComponent_div_100_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 75);\n    i0.ɵɵtext(1);\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r18 = ctx.$implicit;\n    const i_r19 = ctx.index;\n    i0.ɵɵproperty(\"href\", item_r18.path, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Download Video \", i_r19 + 1, \"\");\n  }\n}\n\nfunction EventDetailComponent_div_100_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, EventDetailComponent_div_100_a_1_Template, 3, 2, \"a\", 74);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r9.eventVideos);\n  }\n}\n\nfunction EventDetailComponent_li_110_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"div\", 76);\n    i0.ɵɵelementStart(2, \"span\", 77);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ul\", 78);\n    i0.ɵɵelementStart(6, \"li\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r20 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(4, 2, item_r20.created, \"yyyy/MM/dd hh:mm a\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", item_r20.notes, \" \");\n  }\n}\n\nfunction EventDetailComponent_div_130_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 84);\n    i0.ɵɵelement(1, \"img\", 85);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r23 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", item_r23.path, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction EventDetailComponent_div_130_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 79);\n    i0.ɵɵelementStart(1, \"div\", 80);\n    i0.ɵɵelementStart(2, \"div\", 41);\n    i0.ɵɵelementStart(3, \"div\", 14);\n    i0.ɵɵelementStart(4, \"ngx-slick-carousel\", 81, 82);\n    i0.ɵɵtemplate(6, EventDetailComponent_div_130_div_6_Template, 2, 1, \"div\", 83);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"config\", ctx_r11.slideConfig);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r11.eventImages);\n  }\n}\n\nfunction EventDetailComponent_div_131_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"div\", 86);\n    i0.ɵɵtext(2, \" No photo(s) found \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EventDetailComponent_div_145_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 84);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelementStart(2, \"video\", 87);\n    i0.ɵɵelement(3, \"source\", 88);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"a\", 89);\n    i0.ɵɵtext(5, \"Download this video\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r27 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", item_r27.path, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"href\", item_r27.path, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction EventDetailComponent_div_145_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 79);\n    i0.ɵɵelementStart(1, \"div\", 80);\n    i0.ɵɵelementStart(2, \"div\", 41);\n    i0.ɵɵelementStart(3, \"div\", 14);\n    i0.ɵɵelementStart(4, \"ngx-slick-carousel\", 81, 82);\n    i0.ɵɵtemplate(6, EventDetailComponent_div_145_div_6_Template, 6, 2, \"div\", 83);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"config\", ctx_r13.slideConfig);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r13.eventVideos);\n  }\n}\n\nfunction EventDetailComponent_div_146_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"div\", 86);\n    i0.ɵɵtext(2, \" No video(s) found \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class EventDetailComponent {\n  constructor(apiService, safetyService, toastr, spinner, router, route, hereMap) {\n    var _this = this;\n\n    this.apiService = apiService;\n    this.safetyService = safetyService;\n    this.toastr = toastr;\n    this.spinner = spinner;\n    this.router = router;\n    this.route = route;\n    this.hereMap = hereMap;\n    this.asseturl = this.apiService.AssetUrl;\n    this.errors = {};\n    this.event = {\n      eventDate: '',\n      eventTime: '',\n      location: '',\n      criticalityType: '-'\n    };\n    this.eventImages = [];\n    this.eventVideos = [];\n    this.showMap = true;\n    this.eventID = '';\n    this.safetyNotes = [];\n    this.slideConfig = {\n      slidesToShow: 1,\n      slidesToScroll: 1,\n      dots: true,\n      infinite: true,\n      autoplay: false,\n      variableWidth: true,\n      autoplaySpeed: 1500\n    };\n    this.slideConfig1 = {\n      slidesToShow: 1,\n      slidesToScroll: 1,\n      dots: true,\n      infinite: true,\n      autoplay: false,\n      variableWidth: true,\n      autoplaySpeed: 1500\n    };\n    this.vehiclesObject = {};\n    this.driversObject = {};\n\n    this.setMarker = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (location) {\n        const cords = location.split(',');\n\n        if (cords.length > 0) {\n          const lat = cords[0];\n          const lng = cords[1];\n          const startIcon = new H.map.Icon(\"/assets/img/mapIcon/dest.png\", {\n            size: {\n              w: 30,\n              h: 30\n            }\n          });\n\n          _this.map.setCenter({\n            lat,\n            lng\n          });\n\n          const currentLoc = new H.map.Marker({\n            lat,\n            lng\n          }, {\n            icon: startIcon\n          });\n\n          _this.map.addObject(currentLoc);\n        }\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  }\n\n  ngOnInit() {\n    this.platform = this.hereMap.mapSetAPI();\n    this.map = this.hereMap.mapInit();\n    this.eventID = this.route.snapshot.params['eventID'];\n    this.fetchEventDetail();\n    this.fetchAllDriverIDs();\n    this.fetchAllVehiclesIDs();\n    this.mapShow();\n    $('#viewVideosModal').modal({\n      show: false\n    }).on('hidden.bs.modal', function () {\n      $(\"video\").each(function () {\n        this.pause();\n      });\n    });\n  }\n\n  fetchEventDetail() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.safetyService.getData('critical-events/detail/' + _this2.eventID).subscribe( /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator(function* (res) {\n          let result = res[0];\n          _this2.deviceSerialNo = result.deviceSerialNo || 'NA';\n          _this2.vehicle = result.vehicleID;\n          _this2.trip = result.tripID;\n          _this2.assigned = result.assigned;\n          _this2.eventDate = result.eventDate;\n          _this2.eventSource = result.eventSource;\n          _this2.eventStartDateTime = result.eventStartDateTime;\n          _this2.eventEndDateTime = result.eventEndDateTime;\n          _this2.eventTime = yield _this2.convertTimeFormat(result.eventTime);\n          _this2.createdBy = result.createdBy;\n          _this2.eventType = result.eventType;\n          _this2.eventSpeed = parseInt(result.speed);\n          _this2.deviceEventId = result.deviceEventId;\n          _this2.location = result.location.label ? result.location.label : 'NA';\n\n          if (result.location.cords != undefined) {\n            yield _this2.setMarker(result.location.cords);\n          }\n\n          _this2.safetyNotes = result.safetyNotes;\n\n          if (result.uploadedPhotos != undefined && result.uploadedPhotos.length > 0) {\n            _this2.eventImages = result.uploadPics; // this.eventImages = result.uploadedPhotos.map(x => ({\n            //    path: `${this.asseturl}/${result.pk}/${x}`,\n            //    name: x,\n            //  }));\n          }\n\n          if (result.uploadedVideos != undefined && result.uploadedVideos.length > 0) {\n            _this2.eventVideos = result.uploadVideo; // this.eventVideos = result.uploadedVideos.map(x => ({\n            //    path: `${this.asseturl}/${result.pk}/${x}`,\n            //    name: x\n            //  }));\n          }\n        });\n\n        return function (_x2) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n\n  convertTimeFormat(time) {\n    // Check correct time format and split into components\n    time = time.toString().match(/^([01]\\d|2[0-3])(:)([0-5]\\d)(:[0-5]\\d)?$/) || [time];\n\n    if (time.length > 1) {\n      // If time format correct\n      time = time.slice(1); // Remove full string match value\n\n      time[5] = +time[0] < 12 ? ' AM' : ' PM'; // Set AM/PM\n\n      time[0] = +time[0] % 12 || 12; // Adjust hours\n    }\n\n    return time.join(''); // return adjusted time or original string\n  }\n\n  mapShow() {\n    setTimeout(() => {\n      this.hereMap.mapSetAPI();\n      this.hereMap.mapInit();\n    }, 100);\n  }\n\n  getLocation(location) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const cords = location.split(',');\n\n        if (cords.length == 2) {\n          const params = {\n            lat: cords[0].trim(),\n            lng: cords[1].trim()\n          };\n          const location = yield _this3.hereMap.revGeoCode(params);\n\n          if (location && location.items.length > 0) {\n            return location.items[0].title;\n          } else {\n            _this3.showMap = false;\n            return 'NA';\n          }\n        } else {\n          _this3.showMap = false;\n          return 'NA';\n        }\n      } catch (error) {\n        _this3.showMap = false;\n        return 'NA';\n      }\n    })();\n  }\n\n  fetchAllVehiclesIDs() {\n    this.apiService.getData('vehicles/get/list').subscribe(result => {\n      this.vehiclesObject = result;\n    });\n  }\n\n  fetchAllDriverIDs() {\n    this.apiService.getData('drivers/get/list').subscribe(result => {\n      this.driversObject = result;\n    });\n  }\n\n  addNotes() {\n    if (this.newNotes.trim().length > 0) {\n      let data = {\n        notes: this.newNotes,\n        eventID: this.eventID\n      };\n      this.safetyService.postData('critical-events/notes', data).subscribe(res => {\n        this.fetchEventDetail();\n        this.toastr.success('Notes added successfully');\n        this.newNotes = '';\n      });\n    }\n  }\n  /**\r\n   * Fetch Event Evidence only in case of Automatic events generated by DashCam\r\n   */\n\n\n  fetchEvidence() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        _this4.eventVideos = [];\n        const eventStartDate = spacetime(_this4.eventStartDateTime).format('numeric-cn');\n        const eventEndDate = spacetime(_this4.eventEndDateTime).format('numeric-cn');\n        const body = {\n          deviceSerialNo: _this4.deviceSerialNo,\n          startDateTime: `${eventStartDate} 00:00:00`,\n          endDateTime: `${eventEndDate} 23:59:59`,\n          deviceEventId: _this4.deviceEventId\n        };\n        const response = yield _this4.safetyService.postData('critical-events/fetchEvent', body).toPromise();\n\n        if (response && response.alarmFiles && response.alarmFiles.length > 0) {\n          for (const video of response.alarmFiles) {\n            const params = {\n              path: video.videoUrl,\n              name: video.alarmType\n            };\n\n            _this4.eventVideos.push(params);\n          }\n        } else {\n          _this4.toastr.error('Event Video not available. Please try again.');\n        }\n      } catch (error) {\n        _this4.toastr.error('Unable to fetch evidence.');\n      }\n    })();\n  }\n\n}\n\nEventDetailComponent.ɵfac = function EventDetailComponent_Factory(t) {\n  return new (t || EventDetailComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.SafetyService), i0.ɵɵdirectiveInject(i3.ToastrService), i0.ɵɵdirectiveInject(i4.NgxSpinnerService), i0.ɵɵdirectiveInject(i5.Router), i0.ɵɵdirectiveInject(i5.ActivatedRoute), i0.ɵɵdirectiveInject(i6.HereMapService));\n};\n\nEventDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EventDetailComponent,\n  selectors: [[\"app-event-detail\"]],\n  decls: 150,\n  vars: 30,\n  consts: [[1, \"body\"], [1, \"inner-wrapper\"], [\"role\", \"main\", 1, \"content-body\", \"pl-0\", \"pt-0\", \"pr-0\"], [1, \"page-header\"], [1, \"row\", \"pr-1\", \"mr-1\", 2, \"padding-top\", \"10px\"], [1, \"col-md-4\", \"col-lg-4\"], [1, \"text-4\", \"font-weight-bold\", \"mt-0\", \"mb-0\", \"text-dark\"], [1, \"col-md-8\", \"col-lg-8\", \"text-right\", \"pr-1\"], [\"routerLink\", \"/safety/critical-events\", 1, \"btn\", \"btn-sm\", \"btn-default\", \"mr-2\"], [1, \"fas\", \"fa-list\"], [\"routerLink\", \"/safety/critical-events/add-event\", 1, \"btn\", \"btn-success\", \"btn-sm\"], [1, \"fas\", \"fa-plus\"], [1, \"m-2\"], [1, \"row\", \"mb-3\"], [1, \"col-12\"], [1, \"bg-white\", \"p-3\", \"text-dark\"], [1, \"form-group\", \"row\", \"justify-content-between\", \"pl-2\", \"pr-2\"], [1, \"col-xl-9\", \"col-12\", \"pl-0\", \"pr-0\"], [1, \"row\", \"pl-3\", \"pr-3\"], [1, \"col-xl-6\", \"col-6\", \"pl-0\"], [1, \"safetytile\", \"critical3box\", \"p-4\", \"border\"], [1, \"driverbar\"], [1, \"pull-right\", \"pt-1\", \"text-capitalize\", \"text-4\", \"font-weight-bold\", \"text-dark\"], [1, \"pull-left\", \"line-height-lg\", \"mb-0\", \"mt-0\", \"text-4\", \"font-weight-semibold\", \"text-dark\"], [1, \"w100\", \"pull-left\"], [1, \"solid\", \"mt-2\", \"mb-2\"], [1, \"driverbar\", \"w100\"], [1, \"pull-right\", \"pt-1\", \"text-4\", \"text-capitalize\", \"font-weight-bold\", \"text-dark\"], [1, \"pull-left\", \"line-height-xl\", \"mb-0\", \"mt-0\", \"text-4\", \"font-weight-semibold\", \"text-dark\"], [1, \"col-xl-6\", \"col-6\", \"pr-0\"], [4, \"ngIf\"], [1, \"pull-right\", \"pt-1\", \"text-4\", \"text-capitalize\", \"font-weight-bold\", \"text-dark\", \"w-50\", \"text-right\"], [1, \"col-xl-3\", \"col-12\", \"pl-0\", \"pr-0\"], [1, \"col-xl-12\", \"col-12\", \"mb-3\"], [1, \"vehicle-common-box\", \"critical3box\", \"maindisbox\", \"w100\", \"pull-left\"], [1, \"widgetload\"], [1, \"widgettbload\"], [1, \"pull-right\", \"text-3\", \"mt-2\", \"text-dark\"], [1, \"pull-left\", \"mt-0\", \"mb-0\", \"text-4\", \"font-weight-semibold\", \"text-dark\"], [1, \"fas\", \"fa-box\"], [1, \"widgetlinfo\", \"pb-1\"], [1, \"row\"], [1, \"col-lg-12\", \"text-center\", \"p-5\"], [\"href\", \"javascript:;\", \"class\", \"\\n                                  modal-with-form\\n                                  btn btn-success btn-block\\n                                  mb-2\\n                                  btn-sm\\n                                \", 3, \"click\", 4, \"ngIf\"], [\"href\", \"javascript:;\", \"data-target\", \"#viewImagesModal\", \"data-toggle\", \"modal\", \"class\", \"\\n                                  modal-with-form\\n                                  btn btn-success btn-block\\n                                  mb-2\\n                                  btn-sm\\n                                \", 4, \"ngIf\"], [\"href\", \"javascript:;\", \"data-target\", \"#viewVideosModal\", \"data-toggle\", \"modal\", \"class\", \"\\n                                  modal-with-form\\n                                  btn btn-success btn-block\\n                                  mb-1\\n                                  btn-sm\\n                                \", 4, \"ngIf\"], [1, \"col-4\"], [1, \"mb-2\", \"text-4\", \"font-weight-bold\", \"text-dark\"], [1, \"timeline\", \"w100\", \"dispatch-timeline\", \"timeline-simple\", \"changelog\", \"pb-3\", 2, \"min-height\", \"370px\", \"overflow-x\", \"auto\", \"max-height\", \"370px\"], [1, \"tm-body\", \"text-dark\", \"py-0\"], [1, \"tm-items\"], [4, \"ngFor\", \"ngForOf\"], [1, \"w100\", \"mt-3\"], [\"name\", \"newNotes\", \"placeholder\", \"Enter notes for the Safety Manager\", \"rows\", \"2\", 1, \"form-control\", \"heighta\", 3, \"ngModel\", \"ngModelChange\"], [1, \"w100\", \"mt-2\", \"text-right\"], [\"href\", \"javascript:;\", 1, \"btn\", \"btn-success\", \"btn-sm\", 3, \"click\"], [1, \"col-8\"], [\"id\", \"map\", 2, \"height\", \"520px\", \"overflow\", \"hidden\"], [\"id\", \"viewImagesModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"viewDocModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"role\", \"document\", 1, \"modal-dialog\", 2, \"max-width\", \"600px\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"viewDocModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"close\"], [\"aria-hidden\", \"true\"], [1, \"modal-body\"], [\"class\", \"col-lg-12\", 4, \"ngIf\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-default\"], [\"id\", \"viewVideosModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"viewDocModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"href\", \"javascript:;\", 1, \"modal-with-form\", \"btn\", \"btn-success\", \"btn-block\", \"mb-2\", \"btn-sm\", 3, \"click\"], [1, \"fas\", \"fa-eye\"], [\"href\", \"javascript:;\", \"data-target\", \"#viewImagesModal\", \"data-toggle\", \"modal\", 1, \"modal-with-form\", \"btn\", \"btn-success\", \"btn-block\", \"mb-2\", \"btn-sm\"], [\"href\", \"javascript:;\", \"data-target\", \"#viewVideosModal\", \"data-toggle\", \"modal\", 1, \"modal-with-form\", \"btn\", \"btn-success\", \"btn-block\", \"mb-1\", \"btn-sm\"], [3, \"href\", 4, \"ngFor\", \"ngForOf\"], [3, \"href\"], [1, \"tm-box\"], [1, \"release-date\"], [1, \"list-unstyled\"], [1, \"col-lg-12\"], [1, \"mb-3\"], [1, \"carousel\", \"safety-slider\", 3, \"config\"], [\"slickModal\", \"slick-carousel\"], [\"ngxSlickItem\", \"\", \"class\", \"slide\", 4, \"ngFor\", \"ngForOf\"], [\"ngxSlickItem\", \"\", 1, \"slide\"], [\"alt\", \"\", 1, \"img-fluid\", 2, \"height\", \"400px\", \"object-fit\", \"cover\", 3, \"src\"], [\"role\", \"alert\", 1, \"alert\", \"alert-secondary\", \"m-0\"], [\"id\", \"clip\", \"controls\", \"\", \"disablepictureinpicture\", \"\", \"controlsList\", \"nodownload\", \"width\", \"530\", \"height\", \"264\"], [3, \"src\"], [\"target\", \"_blank\", 2, \"text-align\", \"center\", 3, \"href\"]],\n  template: function EventDetailComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"section\", 2);\n      i0.ɵɵelementStart(3, \"header\", 3);\n      i0.ɵɵelementStart(4, \"div\", 4);\n      i0.ɵɵelementStart(5, \"div\", 5);\n      i0.ɵɵelementStart(6, \"h4\", 6);\n      i0.ɵɵtext(7, \" Event Details \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 7);\n      i0.ɵɵelementStart(9, \"a\", 8);\n      i0.ɵɵelement(10, \"i\", 9);\n      i0.ɵɵtext(11, \" Events List\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"a\", 10);\n      i0.ɵɵelement(13, \"i\", 11);\n      i0.ɵɵtext(14, \" Add Event\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"section\", 12);\n      i0.ɵɵelementStart(16, \"div\", 13);\n      i0.ɵɵelementStart(17, \"div\", 14);\n      i0.ɵɵelementStart(18, \"div\", 15);\n      i0.ɵɵelementStart(19, \"div\", 16);\n      i0.ɵɵelementStart(20, \"div\", 17);\n      i0.ɵɵelementStart(21, \"div\", 18);\n      i0.ɵɵelementStart(22, \"div\", 19);\n      i0.ɵɵelementStart(23, \"div\", 20);\n      i0.ɵɵelementStart(24, \"div\", 21);\n      i0.ɵɵelementStart(25, \"span\", 22);\n      i0.ɵɵtext(26);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"h2\", 23);\n      i0.ɵɵtext(28, \" Device Serial No. \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"div\", 24);\n      i0.ɵɵelement(30, \"hr\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"div\", 26);\n      i0.ɵɵelementStart(32, \"span\", 27);\n      i0.ɵɵtext(33);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"h2\", 28);\n      i0.ɵɵtext(35, \" Vehicle \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"div\", 24);\n      i0.ɵɵelement(37, \"hr\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"div\", 26);\n      i0.ɵɵelementStart(39, \"span\", 27);\n      i0.ɵɵtext(40);\n      i0.ɵɵpipe(41, \"date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(42, \"h2\", 28);\n      i0.ɵɵtext(43, \" Event Date Time \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"div\", 24);\n      i0.ɵɵelement(45, \"hr\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"div\", 21);\n      i0.ɵɵelementStart(47, \"span\", 27);\n      i0.ɵɵtext(48);\n      i0.ɵɵpipe(49, \"number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(50, \"h2\", 23);\n      i0.ɵɵtext(51, \" Speed (approx.) \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(52, \"div\", 29);\n      i0.ɵɵelementStart(53, \"div\", 20);\n      i0.ɵɵelementStart(54, \"div\", 21);\n      i0.ɵɵelementStart(55, \"span\", 27);\n      i0.ɵɵtemplate(56, EventDetailComponent_span_56_Template, 2, 0, \"span\", 30);\n      i0.ɵɵtemplate(57, EventDetailComponent_span_57_Template, 2, 0, \"span\", 30);\n      i0.ɵɵtemplate(58, EventDetailComponent_span_58_Template, 2, 0, \"span\", 30);\n      i0.ɵɵtemplate(59, EventDetailComponent_span_59_Template, 2, 0, \"span\", 30);\n      i0.ɵɵtemplate(60, EventDetailComponent_span_60_Template, 2, 0, \"span\", 30);\n      i0.ɵɵtemplate(61, EventDetailComponent_span_61_Template, 2, 0, \"span\", 30);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(62, \"h2\", 23);\n      i0.ɵɵtext(63, \" Event Type \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(64, \"div\", 24);\n      i0.ɵɵelement(65, \"hr\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(66, \"div\", 26);\n      i0.ɵɵelementStart(67, \"span\", 27);\n      i0.ɵɵtext(68);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(69, \"h2\", 28);\n      i0.ɵɵtext(70, \" Event Source \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(71, \"div\", 24);\n      i0.ɵɵelement(72, \"hr\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(73, \"div\", 26);\n      i0.ɵɵelementStart(74, \"span\", 27);\n      i0.ɵɵtext(75);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(76, \"h2\", 28);\n      i0.ɵɵtext(77, \" Created By \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(78, \"div\", 24);\n      i0.ɵɵelement(79, \"hr\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(80, \"div\", 21);\n      i0.ɵɵelementStart(81, \"span\", 31);\n      i0.ɵɵtext(82);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(83, \"h2\", 23);\n      i0.ɵɵtext(84, \" Location \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(85, \"div\", 32);\n      i0.ɵɵelementStart(86, \"div\", 33);\n      i0.ɵɵelementStart(87, \"div\", 34);\n      i0.ɵɵelementStart(88, \"div\", 35);\n      i0.ɵɵelementStart(89, \"div\", 36);\n      i0.ɵɵelement(90, \"span\", 37);\n      i0.ɵɵelementStart(91, \"h2\", 38);\n      i0.ɵɵelement(92, \"i\", 39);\n      i0.ɵɵtext(93, \" Attachments \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(94, \"div\", 40);\n      i0.ɵɵelementStart(95, \"div\", 41);\n      i0.ɵɵelementStart(96, \"div\", 42);\n      i0.ɵɵtemplate(97, EventDetailComponent_a_97_Template, 3, 0, \"a\", 43);\n      i0.ɵɵtemplate(98, EventDetailComponent_a_98_Template, 3, 0, \"a\", 44);\n      i0.ɵɵtemplate(99, EventDetailComponent_a_99_Template, 3, 0, \"a\", 45);\n      i0.ɵɵtemplate(100, EventDetailComponent_div_100_Template, 2, 1, \"div\", 30);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(101, \"div\", 13);\n      i0.ɵɵelementStart(102, \"div\", 46);\n      i0.ɵɵelementStart(103, \"div\", 15);\n      i0.ɵɵelementStart(104, \"div\", 16);\n      i0.ɵɵelementStart(105, \"p\", 47);\n      i0.ɵɵtext(106, \" Safety Manager Internal Notes \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(107, \"div\", 48);\n      i0.ɵɵelementStart(108, \"div\", 49);\n      i0.ɵɵelementStart(109, \"ol\", 50);\n      i0.ɵɵtemplate(110, EventDetailComponent_li_110_Template, 8, 5, \"li\", 51);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(111, \"div\", 52);\n      i0.ɵɵelementStart(112, \"textarea\", 53);\n      i0.ɵɵlistener(\"ngModelChange\", function EventDetailComponent_Template_textarea_ngModelChange_112_listener($event) {\n        return ctx.newNotes = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(113, \"div\", 54);\n      i0.ɵɵelementStart(114, \"a\", 55);\n      i0.ɵɵlistener(\"click\", function EventDetailComponent_Template_a_click_114_listener() {\n        return ctx.addNotes();\n      });\n      i0.ɵɵtext(115, \"Send\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(116, \"div\", 56);\n      i0.ɵɵelementStart(117, \"div\", 15);\n      i0.ɵɵelementStart(118, \"div\", 16);\n      i0.ɵɵelement(119, \"div\", 57);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(120, \"div\", 58);\n      i0.ɵɵelementStart(121, \"div\", 59);\n      i0.ɵɵelementStart(122, \"div\", 60);\n      i0.ɵɵelementStart(123, \"div\", 61);\n      i0.ɵɵelementStart(124, \"h5\", 62);\n      i0.ɵɵtext(125, \"View Events Gallery\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(126, \"button\", 63);\n      i0.ɵɵelementStart(127, \"span\", 64);\n      i0.ɵɵtext(128, \"\\u00D7\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(129, \"div\", 65);\n      i0.ɵɵtemplate(130, EventDetailComponent_div_130_Template, 7, 2, \"div\", 66);\n      i0.ɵɵtemplate(131, EventDetailComponent_div_131_Template, 3, 0, \"div\", 30);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(132, \"div\", 67);\n      i0.ɵɵelementStart(133, \"button\", 68);\n      i0.ɵɵtext(134, \" Cancel \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(135, \"div\", 69);\n      i0.ɵɵelementStart(136, \"div\", 59);\n      i0.ɵɵelementStart(137, \"div\", 60);\n      i0.ɵɵelementStart(138, \"div\", 61);\n      i0.ɵɵelementStart(139, \"h5\", 62);\n      i0.ɵɵtext(140, \"View Events Videos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(141, \"button\", 63);\n      i0.ɵɵelementStart(142, \"span\", 64);\n      i0.ɵɵtext(143, \"\\u00D7\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(144, \"div\", 65);\n      i0.ɵɵtemplate(145, EventDetailComponent_div_145_Template, 7, 2, \"div\", 66);\n      i0.ɵɵtemplate(146, EventDetailComponent_div_146_Template, 3, 0, \"div\", 30);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(147, \"div\", 67);\n      i0.ɵɵelementStart(148, \"button\", 68);\n      i0.ɵɵtext(149, \" Cancel \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(26);\n      i0.ɵɵtextInterpolate(ctx.deviceSerialNo);\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(ctx.vehiclesObject[ctx.vehicle]);\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(41, 24, ctx.eventDate, \"yyyy/MM/dd\"), \" \", ctx.eventTime, \"\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(49, 27, ctx.eventSpeed || 0, \"1.2-2\"), \" km/h\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ctx.eventType == \"motionDetection\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.eventType == \"harshDriving\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.eventType == \"harshAcceleration\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.eventType == \"highSpeed\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.eventType == \"impactTilt\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.eventType == \"harshBrake\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(ctx.eventSource);\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(ctx.createdBy);\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(ctx.location);\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngIf\", ctx.eventSource == \"Automatic\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.eventSource == \"manual\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.eventSource == \"manual\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (ctx.eventVideos == null ? null : ctx.eventVideos.length) > 0 && ctx.eventSource == \"Automatic\");\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngForOf\", ctx.safetyNotes);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.newNotes);\n      i0.ɵɵadvance(18);\n      i0.ɵɵproperty(\"ngIf\", (ctx.eventImages == null ? null : ctx.eventImages.length) > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (ctx.eventImages == null ? null : ctx.eventImages.length) === 0);\n      i0.ɵɵadvance(14);\n      i0.ɵɵproperty(\"ngIf\", (ctx.eventVideos == null ? null : ctx.eventVideos.length) > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (ctx.eventVideos == null ? null : ctx.eventVideos.length) === 0);\n    }\n  },\n  directives: [i5.RouterLinkWithHref, i7.NgIf, i7.NgForOf, i8.DefaultValueAccessor, i8.NgControlStatus, i8.NgModel, i9.SlickCarouselComponent, i9.SlickItemDirective],\n  pipes: [i7.DatePipe, i7.DecimalPipe],\n  styles: [\".critical3box[_ngcontent-%COMP%] {\\r\\n  height: 241px !important;\\r\\n}\", \"#map_view[_ngcontent-%COMP%] {\\n    display: inline-block;\\n    height: 700px;\\n    width: 100%;\\n  }\"]\n});","map":null,"metadata":{},"sourceType":"module"}