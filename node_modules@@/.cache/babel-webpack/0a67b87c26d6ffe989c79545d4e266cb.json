{"ast":null,"code":"import _asyncToGenerator from \"C:/FH/fh-cloud-app/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { MapInfoWindow } from '@angular/google-maps';\nimport { ReactiveFormConfig, RxwebValidators } from '@rxweb/reactive-form-validators';\nimport { MessageService, ConfirmationService } from 'primeng/api';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/dash-cam-location-stream.service\";\nimport * as i3 from \"src/app/services\";\nimport * as i4 from \"primeng/api\";\nimport * as i5 from \"@rxweb/reactive-form-validators\";\nimport * as i6 from \"@angular/platform-browser\";\nimport * as i7 from \"primeng/toast\";\nimport * as i8 from \"primeng/confirmdialog\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"primeng/dialog\";\nimport * as i11 from \"@angular/forms\";\nimport * as i12 from \"@ng-select/ng-select\";\nimport * as i13 from \"primeng/button\";\nimport * as i14 from \"primeng/tooltip\";\nimport * as i15 from \"primeng/ripple\";\nimport * as i16 from \"@angular/google-maps\";\nimport * as i17 from \"ngx-clipboard\";\n\nfunction VehicleDashCamTrackerComponent_div_12_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function VehicleDashCamTrackerComponent_div_12_button_3_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.openLiveView();\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction VehicleDashCamTrackerComponent_div_12_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"button\", 34);\n  }\n}\n\nfunction VehicleDashCamTrackerComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵelementStart(1, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function VehicleDashCamTrackerComponent_div_12_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.shareLocation();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function VehicleDashCamTrackerComponent_div_12_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.refresh();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, VehicleDashCamTrackerComponent_div_12_button_3_Template, 1, 0, \"button\", 31);\n    i0.ɵɵtemplate(4, VehicleDashCamTrackerComponent_div_12_button_4_Template, 1, 0, \"button\", 32);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isOnline == true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isOnline);\n  }\n}\n\nfunction VehicleDashCamTrackerComponent_div_16_google_map_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"google-map\", 37);\n    i0.ɵɵelement(1, \"map-traffic-layer\", 38);\n    i0.ɵɵelementStart(2, \"map-marker\", 39, 40);\n    i0.ɵɵlistener(\"mapClick\", function VehicleDashCamTrackerComponent_div_16_google_map_1_Template_map_marker_mapClick_2_listener() {\n      i0.ɵɵrestoreView(_r18);\n\n      const _r16 = i0.ɵɵreference(3);\n\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return ctx_r17.openInfoWindow(_r16);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"map-info-window\", 41);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"width\", ctx_r15.width)(\"center\", ctx_r15.center)(\"height\", ctx_r15.height)(\"options\", ctx_r15.mapOptions);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"autoRefresh\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"position\", ctx_r15.center)(\"options\", ctx_r15.vehicleMarkerOptions);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r15.infoDetail, i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction VehicleDashCamTrackerComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵtemplate(1, VehicleDashCamTrackerComponent_div_16_google_map_1_Template, 5, 8, \"google-map\", 36);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loaded);\n  }\n}\n\nfunction VehicleDashCamTrackerComponent_ng_template_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.vehicleDetails.Items[0].plateNumber, \"\");\n  }\n}\n\nfunction VehicleDashCamTrackerComponent_small_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 42);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const errorMessage_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", errorMessage_r19, \" \");\n  }\n}\n\nfunction VehicleDashCamTrackerComponent_small_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 42);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const errorMessage_r20 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", errorMessage_r20, \" \");\n  }\n}\n\nfunction VehicleDashCamTrackerComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵelementStart(1, \"input\", 44);\n    i0.ɵɵlistener(\"ngModelChange\", function VehicleDashCamTrackerComponent_div_40_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.locationLink = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"span\", 45);\n    i0.ɵɵelementStart(3, \"button\", 46);\n    i0.ɵɵlistener(\"cbOnSuccess\", function VehicleDashCamTrackerComponent_div_40_Template_button_cbOnSuccess_3_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return ctx_r23.isCopied1 = true;\n    })(\"cbOnError\", function VehicleDashCamTrackerComponent_div_40_Template_button_cbOnError_3_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.onCopyFailure();\n    })(\"cbOnSuccess\", function VehicleDashCamTrackerComponent_div_40_Template_button_cbOnSuccess_3_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.copied($event);\n    });\n    i0.ɵɵtext(4, \" Copy \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.locationLink);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"btn-success\", ctx_r5.isCopied1);\n    i0.ɵɵproperty(\"cbContent\", ctx_r5.locationLink);\n  }\n}\n\nfunction VehicleDashCamTrackerComponent_ng_template_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h4\", 47);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Dash Cam Live Feed \", ctx_r6.vehicleDetails.Items[0].plateNumber, \"\");\n  }\n}\n\nfunction VehicleDashCamTrackerComponent_ng_template_48_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 48);\n    i0.ɵɵlistener(\"click\", function VehicleDashCamTrackerComponent_ng_template_48_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.restartDevice();\n    });\n    i0.ɵɵtext(1, \"Restart DashCam\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function () {\n  return {\n    width: \"500px\",\n    height: \"450px\"\n  };\n};\n\nexport class VehicleDashCamTrackerComponent {\n  constructor(route, webSocket, apiService, messageService, formBuilder, _sanitizer, confirmService) {\n    this.route = route;\n    this.webSocket = webSocket;\n    this.apiService = apiService;\n    this.messageService = messageService;\n    this.formBuilder = formBuilder;\n    this._sanitizer = _sanitizer;\n    this.confirmService = confirmService;\n    this.messages = [];\n    this.destroyed$ = new Subject();\n    this.vehicleDetails = undefined;\n    this.vehicleId = undefined;\n    this.width = \"100%\";\n    this.height = \"100%\";\n    this.isOnline = false;\n    this.center = {\n      lat: 48.48248695279594,\n      lng: -99.0688673798094\n    };\n    this.token = undefined;\n    this.loaded = false;\n    this.showLiveFeed = false;\n    this.deviceSerial = undefined;\n    this.deviceDetails = undefined;\n    this.deviceInfo = {\n      deviceType: '',\n      deviceId: '',\n      deviceSrNo: '',\n      email: ''\n    };\n    this.infoDetail = 'Vehicle is Offline!!';\n    this.vehicleMarkerOptions = {\n      draggable: false,\n      icon: 'assets/vehicle-marker.png'\n    };\n    this.mapOptions = {\n      zoomControl: true,\n      mapTypeControl: true,\n      streetViewControl: false,\n      fullscreenControl: true,\n      zoom: 15,\n      mapId: '620eb1a41a9e36d4',\n      zoomControlOptions: {\n        position: google.maps.ControlPosition.RIGHT_TOP\n      },\n      center: this.center\n    };\n    this.durations = [{\n      duration: '1d',\n      name: '1 day'\n    }, {\n      duration: '3d',\n      name: '3 days'\n    }, {\n      duration: '7d',\n      name: '1 week'\n    }, {\n      duration: '15d',\n      name: '15 days'\n    }, {\n      duration: '30d',\n      name: '1 month'\n    }, {\n      duration: '3m',\n      name: '3 months'\n    }, {\n      duration: '6m',\n      name: '6 months'\n    }];\n    this.display = false;\n    this.locationLink = undefined;\n    this.deviceSerial = this.route.snapshot.params.deviceSerial;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      ReactiveFormConfig.set({\n        'validationMessage': {\n          \"required\": \"This field is required\",\n          \"email\": \"Email is invalid.\"\n        }\n      });\n      _this.userFormGroup = _this.formBuilder.group({\n        duration: ['', RxwebValidators.required()],\n        email: ['', [RxwebValidators.email(), RxwebValidators.required()]]\n      }); // Extract query parameters\n\n      _this.extractQueryParams();\n\n      yield _this.getVehicleDetails(); // get last location\n\n      yield _this.getLastLocation();\n      _this.center = {\n        lng: _this.apiResponse.lat,\n        lat: _this.apiResponse.lng\n      };\n      yield _this.checkDeviceStatus();\n    })();\n  }\n\n  checkDeviceStatus() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this2.apiResponse && _this2.apiResponse.errorCode) {\n        _this2.messageService.add({\n          severity: 'error',\n          summary: 'Unable to connect to Vehicle. ',\n          detail: 'Please try after some time.'\n        });\n\n        _this2.loaded = false;\n        _this2.isOnline = false;\n      }\n\n      if (_this2.apiResponse) {\n        _this2.loaded = true;\n        _this2.mapOptions.center = {\n          lat: _this2.apiResponse.lng,\n          lng: _this2.apiResponse.lat\n        };\n\n        _this2.connectToWSServer(); // this.updateLastLocation();\n\n      }\n    })();\n  }\n\n  extractQueryParams() {\n    this.route.queryParams.subscribe(params => {\n      this.vehicleId = params.vehicleId;\n    });\n  }\n\n  getVehicleDetails() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      let vehicleResult = yield _this3.apiService.getData(\"vehicles/\" + _this3.vehicleId).toPromise();\n\n      if (vehicleResult) {\n        _this3.vehicleDetails = vehicleResult;\n        vehicleResult = vehicleResult.Items[0]; // Check if DashCam is added to enable Share Live location button\n\n        if (vehicleResult.deviceInfo && vehicleResult.deviceInfo.length > 0) {\n          for (const device of vehicleResult.deviceInfo) {\n            if (device.deviceType === \"DashCam\") {\n              _this3.deviceInfo.deviceId = device.deviceId;\n              _this3.deviceInfo.deviceSrNo = device.deviceSrNo;\n              _this3.deviceInfo.deviceType = device.deviceType;\n            }\n          }\n        }\n      }\n    })();\n  }\n\n  connectToWSServer() {\n    this.webSocket.connect(this.apiResponse.usage, this.apiResponse.salt, this.apiResponse.token).pipe(takeUntil(this.destroyed$)).subscribe(message => {\n      this.deviceDetails = message;\n\n      if (message.action === '80000') {\n        this.messageService.add({\n          severity: 'info',\n          summary: 'Connected to server.'\n        });\n      }\n\n      if (message.action === \"80003\" && message.payload.deviceID === this.deviceSerial) {\n        this.isOnline = true;\n        this.deviceDetails = message.payload;\n        this.messages.push(message);\n\n        if (this.messages.length === 1) {\n          this.messageService.add({\n            severity: 'success',\n            summary: 'Vehicle is online.'\n          });\n        }\n\n        this.center = {\n          lat: parseFloat(message.payload.location.latitude),\n          lng: parseFloat(message.payload.location.longitude)\n        };\n        this.mapOptions.zoom = 17;\n        this.apiResponse.speed = parseFloat(message.payload.location.speed).toFixed(2) || 0.0;\n        this.apiResponse.networkType = this.getNetwork(message.payload.mobile.type);\n      }\n    });\n  }\n\n  getLastLocation() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      _this4.apiResponse = yield _this4.apiService.getData(`location/dashcam/get/${_this4.deviceSerial}`).toPromise();\n    })();\n  }\n\n  refresh() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this5.getLastLocation();\n      yield _this5.checkDeviceStatus();\n    })();\n  }\n\n  ngOnDestroy() {\n    this.destroyed$.next();\n  }\n\n  openInfoWindow(marker) {\n    if (this.loaded && this.isOnline) {\n      this.infoDetail = `<b>Vehicle Name : ${this.vehicleDetails.Items[0].plateNumber}</b><br><br>`;\n      this.infoDetail += `Device Serial/ID: ${this.deviceSerial}<br><br>`;\n      this.infoDetail += `Device Time: ${this.deviceDetails.dtu || 'NA'}<br><br>`;\n\n      if (this.apiResponse.speed) {\n        this.infoDetail += `Speed : ${parseFloat(this.deviceDetails.location.speed).toFixed(2) || 'NA'} km/h<br><br>`;\n      }\n\n      if (this.apiResponse.networkType) {\n        this.infoDetail += `Network : ${this.apiResponse.networkType}`;\n      }\n    } else {\n      this.infoDetail = \"Device is offline.\";\n    }\n\n    this.infoWindow.open(marker);\n  }\n\n  getNetwork(networkType) {\n    switch (networkType) {\n      case '-1':\n        return 'Offline';\n\n      case '0':\n        return 'Unknown';\n\n      case '3':\n        return '2G';\n\n      case '4':\n        return '3G';\n\n      case '5':\n        return '4G';\n\n      default:\n        return undefined;\n    }\n  }\n\n  shareLocation() {\n    this.display = true;\n  }\n\n  shareLocationLink() {\n    const data = {\n      \"deviceSerialNo\": this.deviceInfo.deviceSrNo.split('#')[1],\n      \"vehicleID\": this.vehicleId,\n      \"vehicleName\": this.vehicleDetails.Items[0].plateNumber,\n      \"duration\": this.selectedDuration,\n      \"email\": this.deviceInfo.email\n    };\n    this.apiService.postData('location/share/vehicle', data, false).subscribe(resultData => {\n      if (resultData) {\n        this.locationLink = resultData.locationPageURL;\n      }\n    });\n  }\n\n  restartDevice() {\n    var _this6 = this;\n\n    this.confirmService.confirm({\n      message: 'Are you sure that you want to RESTART the DashCam?  Make sure driver is not driving the vehicle as restart sound may create distraction.',\n      header: 'Safety Warning',\n      accept: function () {\n        var _ref = _asyncToGenerator(function* () {\n          _this6.apiService.getData(`devices/dashCam/restart/${_this6.deviceInfo.deviceSrNo.split('#')[1]}`).subscribe(resultData => {\n            if (resultData.status === \"SUCCESS\") {\n              _this6.messageService.add({\n                severity: 'info',\n                summary: 'Restart command sent to device.',\n                detail: 'Please allow a minute for device to restart.'\n              });\n            }\n          });\n        });\n\n        return function accept() {\n          return _ref.apply(this, arguments);\n        };\n      }()\n    });\n  }\n\n  onCopyFailure() {\n    this.messageService.add({\n      severity: 'error',\n      summary: 'Unable to copy link.',\n      detail: 'Please copy it manually.'\n    });\n  }\n\n  copied(event) {\n    this.messageService.add({\n      severity: 'info',\n      summary: 'Link copied to clipboard.',\n      detail: 'This link will be valid for selected duration.'\n    });\n  }\n  /**\r\n   * Open Live View popup.\r\n   * @param content\r\n   */\n\n\n  openLiveView() {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      const deviceId = _this7.deviceInfo.deviceSrNo.split('#')[1];\n\n      const response = yield _this7.apiService.getData(`vehicles/dashCam/liveFeed/${deviceId}`).toPromise();\n      _this7.liveFeedUrl = _this7._sanitizer.bypassSecurityTrustResourceUrl(response.feedUrl);\n      _this7.liveStreamVehicle = `(${_this7.deviceInfo.deviceId})`;\n      _this7.showLiveFeed = true;\n      setTimeout(() => {\n        _this7.showLiveFeed = false;\n      }, 60000);\n    })();\n  }\n\n}\n\nVehicleDashCamTrackerComponent.ɵfac = function VehicleDashCamTrackerComponent_Factory(t) {\n  return new (t || VehicleDashCamTrackerComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.DashCamLocationStreamService), i0.ɵɵdirectiveInject(i3.ApiService), i0.ɵɵdirectiveInject(i4.MessageService), i0.ɵɵdirectiveInject(i5.RxFormBuilder), i0.ɵɵdirectiveInject(i6.DomSanitizer), i0.ɵɵdirectiveInject(i4.ConfirmationService));\n};\n\nVehicleDashCamTrackerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: VehicleDashCamTrackerComponent,\n  selectors: [[\"app-vehicle-dash-cam-tracker\"]],\n  viewQuery: function VehicleDashCamTrackerComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(MapInfoWindow, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.infoWindow = _t.first);\n    }\n  },\n  features: [i0.ɵɵProvidersFeature([MessageService, ConfirmationService])],\n  decls: 49,\n  vars: 19,\n  consts: [[\"position\", \"top-right\"], [\"header\", \"Confirmation\", \"icon\", \"pi pi-exclamation-triangle\"], [1, \"body\"], [1, \"inner-wrapper\"], [\"role\", \"main\", 1, \"content-body\", \"pr-0\", \"pt-0\", \"pl-0\"], [1, \"page-header\"], [1, \"row\"], [1, \"col\", \"header-title\"], [1, \"mt-0\", \"mb-0\"], [1, \"text-muted\", \"text-small\"], [\"class\", \"col header-buttons\", 4, \"ngIf\"], [1, \"m-2\"], [1, \"row\", \"mb-3\", \"bg-white\"], [1, \"col-lg-12\", \"p-3\", \"text-dark\"], [\"class\", \"text-dark\", \"style\", \"height: calc(100vh - 170px);width: 100%;\", 4, \"ngIf\"], [\"position\", \"top\", 3, \"visible\", \"visibleChange\"], [\"pTemplate\", \"header\"], [3, \"formGroup\"], [1, \"form-group\"], [\"type\", \"text\", \"formControlName\", \"email\", \"placeholder\", \"Email of user to share with.\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"form-text text-danger\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"duration\", \"placeholder\", \"Select sharing duration\", \"bindLabel\", \"name\", \"bindValue\", \"duration\", \"placeholder\", \"Select Duration\", 3, \"items\", \"ngModel\", \"ngModelChange\"], [\"pButton\", \"\", \"type\", \"button\", 3, \"disabled\", \"click\"], [\"class\", \"input-group\", 4, \"ngIf\"], [3, \"visible\", \"maximizable\", \"visibleChange\"], [1, \"embed-responsive\", \"z-depth-1-half\", 2, \"height\", \"600px\", \"width\", \"100%\"], [\"id\", \"videoIframe\", \"height\", \"600px\", \"width\", \"100%\", 3, \"src\"], [\"pTemplate\", \"footer\"], [1, \"col\", \"header-buttons\"], [\"id\", \"btnShareLocation\", \"type\", \"button\", \"pButton\", \"\", \"tooltipPosition\", \"left\", \"icon\", \"fas fa-map-location\", \"pTooltip\", \"Share Location\", 1, \"mr-1\", 3, \"click\"], [\"id\", \"btnResetFilter\", \"type\", \"button\", \"pButton\", \"\", \"tooltipPosition\", \"left\", \"icon\", \"pi pi-refresh\", \"pTooltip\", \"Refresh\", 1, \"mr-1\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"pTooltip\", \"Camera is Online.\", \"type\", \"button\", \"tooltipPosition\", \"left\", \"icon\", \"fas fa-light fa-video\", \"class\", \"mr-1 p-button-rounded p-button-outlined p-button-success\", 3, \"click\", 4, \"ngIf\"], [\"pButton\", \"\", \"pRipple\", \"\", \"pTooltip\", \"Camera is Offline.\", \"tooltipPosition\", \"left\", \"type\", \"button\", \"icon\", \"fas fa-video-slash\", \"class\", \"mr-1 p-button-rounded  p-button-outlined p-button-danger\", 4, \"ngIf\"], [\"pButton\", \"\", \"pRipple\", \"\", \"pTooltip\", \"Camera is Online.\", \"type\", \"button\", \"tooltipPosition\", \"left\", \"icon\", \"fas fa-light fa-video\", 1, \"mr-1\", \"p-button-rounded\", \"p-button-outlined\", \"p-button-success\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"pTooltip\", \"Camera is Offline.\", \"tooltipPosition\", \"left\", \"type\", \"button\", \"icon\", \"fas fa-video-slash\", 1, \"mr-1\", \"p-button-rounded\", \"p-button-outlined\", \"p-button-danger\"], [1, \"text-dark\", 2, \"height\", \"calc(100vh - 170px)\", \"width\", \"100%\"], [3, \"width\", \"center\", \"height\", \"options\", 4, \"ngIf\"], [3, \"width\", \"center\", \"height\", \"options\"], [3, \"autoRefresh\"], [3, \"position\", \"options\", \"mapClick\"], [\"marker\", \"mapMarker\"], [3, \"innerHTML\"], [1, \"form-text\", \"text-danger\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"content will be copy after click the copy button\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"input-group-append\"], [\"pButton\", \"\", \"type\", \"button\", \"ngxClipboard\", \"\", 3, \"cbContent\", \"cbOnSuccess\", \"cbOnError\"], [\"id\", \"modal-dash-cam\", 1, \"modal-title\"], [\"id\", \"btnShareLocation\", \"type\", \"button\", \"pButton\", \"\", \"tooltipPosition\", \"left\", \"pTooltip\", \"Restart Device\", 1, \"mr-1\", 3, \"click\"]],\n  template: function VehicleDashCamTrackerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"p-toast\", 0);\n      i0.ɵɵelement(1, \"p-confirmDialog\", 1);\n      i0.ɵɵelementStart(2, \"section\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵelementStart(4, \"section\", 4);\n      i0.ɵɵelementStart(5, \"header\", 5);\n      i0.ɵɵelementStart(6, \"div\", 6);\n      i0.ɵɵelementStart(7, \"div\", 7);\n      i0.ɵɵelementStart(8, \"label\", 8);\n      i0.ɵɵtext(9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"small\", 9);\n      i0.ɵɵtext(11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, VehicleDashCamTrackerComponent_div_12_Template, 5, 2, \"div\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"section\", 11);\n      i0.ɵɵelementStart(14, \"div\", 12);\n      i0.ɵɵelementStart(15, \"div\", 13);\n      i0.ɵɵtemplate(16, VehicleDashCamTrackerComponent_div_16_Template, 2, 1, \"div\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"p-dialog\", 15);\n      i0.ɵɵlistener(\"visibleChange\", function VehicleDashCamTrackerComponent_Template_p_dialog_visibleChange_17_listener($event) {\n        return ctx.display = $event;\n      });\n      i0.ɵɵtemplate(18, VehicleDashCamTrackerComponent_ng_template_18_Template, 2, 1, \"ng-template\", 16);\n      i0.ɵɵelementStart(19, \"form\", 17);\n      i0.ɵɵelementStart(20, \"div\", 18);\n      i0.ɵɵelementStart(21, \"label\");\n      i0.ɵɵtext(22, \"Enter email of user to share the location information.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(23, \"br\");\n      i0.ɵɵelementStart(24, \"input\", 19);\n      i0.ɵɵlistener(\"ngModelChange\", function VehicleDashCamTrackerComponent_Template_input_ngModelChange_24_listener($event) {\n        return ctx.deviceInfo.email = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(25, VehicleDashCamTrackerComponent_small_25_Template, 2, 1, \"small\", 20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"div\", 18);\n      i0.ɵɵelementStart(27, \"label\");\n      i0.ɵɵtext(28, \"Select the duration of the share.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(29, \"br\");\n      i0.ɵɵelementStart(30, \"ng-select\", 21);\n      i0.ɵɵlistener(\"ngModelChange\", function VehicleDashCamTrackerComponent_Template_ng_select_ngModelChange_30_listener($event) {\n        return ctx.selectedDuration = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(31, VehicleDashCamTrackerComponent_small_31_Template, 2, 1, \"small\", 20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(32, \"br\");\n      i0.ɵɵelementStart(33, \"button\", 22);\n      i0.ɵɵlistener(\"click\", function VehicleDashCamTrackerComponent_Template_button_click_33_listener() {\n        return ctx.shareLocationLink();\n      });\n      i0.ɵɵtext(34, \"Share\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(35, \"br\");\n      i0.ɵɵelementStart(36, \"small\");\n      i0.ɵɵtext(37, \"Note: Please add no-reply@fleethawks.com as trusted email. Email may go to SPAM or JUNK folder. \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(38, \"br\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(39, \"br\");\n      i0.ɵɵtemplate(40, VehicleDashCamTrackerComponent_div_40_Template, 5, 4, \"div\", 23);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"p-dialog\", 24);\n      i0.ɵɵlistener(\"visibleChange\", function VehicleDashCamTrackerComponent_Template_p_dialog_visibleChange_41_listener($event) {\n        return ctx.showLiveFeed = $event;\n      });\n      i0.ɵɵtemplate(42, VehicleDashCamTrackerComponent_ng_template_42_Template, 2, 1, \"ng-template\", 16);\n      i0.ɵɵelementStart(43, \"b\");\n      i0.ɵɵtext(44, \"Warning: To save data consumption this window will close automatically after 1 minute of streaming. \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(45, \"div\", 25);\n      i0.ɵɵelement(46, \"iframe\", 26);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(47, \"br\");\n      i0.ɵɵtemplate(48, VehicleDashCamTrackerComponent_ng_template_48_Template, 2, 0, \"ng-template\", 27);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate1(\" Vehicle : \", ctx.vehicleDetails.Items[0].plateNumber, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"\\u00A0 Last Location: \", ctx.apiResponse.lastLocation, \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.loaded);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(18, _c0));\n      i0.ɵɵproperty(\"visible\", ctx.display);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.userFormGroup);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.deviceInfo.email);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.userFormGroup.controls.email[\"errorMessages\"]);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"items\", ctx.durations)(\"ngModel\", ctx.selectedDuration);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.userFormGroup.controls.duration[\"errorMessages\"]);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", !ctx.userFormGroup.valid);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.locationLink != undefined);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"visible\", ctx.showLiveFeed)(\"maximizable\", true);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"src\", ctx.liveFeedUrl, i0.ɵɵsanitizeResourceUrl);\n    }\n  },\n  directives: [i7.Toast, i8.ConfirmDialog, i9.NgIf, i10.Dialog, i4.PrimeTemplate, i11.ɵNgNoValidate, i11.NgControlStatusGroup, i5.ɵa, i11.FormGroupDirective, i11.DefaultValueAccessor, i5.ɵk, i5.ɵe, i11.NgControlStatus, i11.FormControlName, i9.NgForOf, i12.NgSelectComponent, i13.ButtonDirective, i14.Tooltip, i15.Ripple, i16.GoogleMap, i16.MapTrafficLayer, i16.MapMarker, i16.MapInfoWindow, i11.NgModel, i17.ClipboardDirective],\n  styles: [\".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\r\\n    height: calc(2.3em + 0.75rem + 0.1em) !important;\\r\\n}\\r\\n\\r\\n.gm-style[_ngcontent-%COMP%]   .gm-style-iw[_ngcontent-%COMP%] {\\r\\n    background-color: #252525 !important;\\r\\n    top: 0 !important;\\r\\n    left: 0 !important;\\r\\n    width: 100% !important;\\r\\n    height: 100% !important;\\r\\n    min-height: 120px !important;\\r\\n    padding-top: 10px;\\r\\n    display: block !important;\\r\\n}\"]\n});","map":null,"metadata":{},"sourceType":"module"}