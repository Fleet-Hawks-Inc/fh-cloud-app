{"ast":null,"code":"import _asyncToGenerator from \"C:/FH/fh-cloud-app/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { environment } from '../../environments/environment';\nimport { Auth } from 'aws-amplify';\nimport { EMPTY, from } from 'rxjs';\nimport { switchMap } from 'rxjs/internal/operators';\nlet AccountService = class AccountService {\n  constructor(http) {\n    this.http = http;\n    this.jwt = '';\n    this.carrierID = '';\n    this.AssetUrl = environment.AssetURL;\n    this.AccountServiceUrl = environment.AccountServiceUrl;\n    this.httpOptionsOld = {\n      headers: new HttpHeaders({\n        'Accept': 'text/html, application/xhtml+xml, */*',\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }),\n      responseType: 'text'\n    };\n    /*\r\n      * Getting CarrierId from current LoggedIn User\r\n    */\n\n    this.getCarrierID = /*#__PURE__*/_asyncToGenerator(function* () {\n      try {\n        const response = yield Auth.currentSession();\n\n        if (response) {\n          return response.idToken.payload.carrierID;\n        } else {\n          return undefined;\n        }\n      } catch (error) {\n        return undefined;\n      }\n    });\n    this.jwt = localStorage.getItem('jwt'); //\n    // from(Auth.currentSession())\n    //     .pipe(\n    //         switchMap((auth: any) => { // switchMap() is used instead of map().\n    //\n    //           const jwt = auth.accessToken.jwtToken;\n    //           // this.httpOptions = {\n    //           //   headers: new HttpHeaders({\n    //           //     'Authorization': `Bearer ${jwt}`,\n    //           //     'Content-Type': 'application/json'\n    //           //   })\n    //           // }\n    //         })\n    //     ).subscribe();\n  }\n\n  getJwt(url, data) {\n    const headers = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json'\n      })\n    };\n    return this.http.post(this.AccountServiceUrl + url, data, this.httpOptions);\n  }\n\n  postData(url, data, formData = false) {\n    let headers;\n\n    if (formData) {\n      headers = {\n        headers: {}\n      };\n    } else {\n      headers = {\n        headers: new HttpHeaders({\n          'Content-Type': 'application/json'\n        })\n      };\n    }\n\n    return this.http.post(this.AccountServiceUrl + url, data, headers);\n  }\n\n  putData(url, data, formData = false) {\n    let headers;\n\n    if (formData) {\n      headers = {\n        headers: {}\n      };\n    } else {\n      headers = {\n        headers: new HttpHeaders({\n          'Content-Type': 'application/json'\n        })\n      };\n    }\n\n    return this.http.put(this.AccountServiceUrl + url, data, headers);\n  }\n\n  getData(url) {\n    // const headers =  {headers: new  HttpHeaders({ 'Content-Type': 'application/json',\n    //   'x-auth-token': this.jwt})\n    // };\n    let isCarrier = localStorage.getItem('carrierID') != null ? localStorage.getItem('carrierID') : '';\n    const headers = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json',\n        'fh-carrier-id': isCarrier\n      })\n    };\n    return this.http.get(this.AccountServiceUrl + url, headers);\n  }\n\n  deleteData(url) {\n    // this.getHeaders();\n    // const headers =  {headers: new  HttpHeaders({ 'Content-Type': 'application/json',\n    //   'x-auth-token': this.jwt})\n    // };\n    const headers = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json'\n      })\n    };\n    return this.http.delete(this.AccountServiceUrl + url, headers);\n  }\n\n  getHeaders() {\n    from(Auth.currentSession()).pipe(switchMap(auth => {\n      const jwt = auth.accessToken.jwtToken;\n      this.httpOptions = {\n        headers: new HttpHeaders({\n          'Authorization': `Bearer ${jwt}`,\n          'Content-Type': 'application/json'\n        })\n      };\n      return EMPTY;\n    })).subscribe();\n  }\n\n  getDatatablePostData(url, data) {\n    // this.getHeaders();\n    const headers = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json'\n      })\n    }; // const headers =  {headers: new  HttpHeaders({ 'Content-Type': 'application/json',\n    //   'x-auth-token': this.jwt})\n    // };\n\n    return this.http.post(this.AccountServiceUrl + url, data, headers);\n  }\n\n};\n\nAccountService.ctorParameters = () => [{\n  type: HttpClient\n}];\n\nAccountService = __decorate([Injectable({\n  providedIn: 'root'\n})], AccountService);\nexport { AccountService };","map":null,"metadata":{},"sourceType":"module"}