{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { NgModule } from '@angular/core';\nimport * as i1 from '@angular/router';\nimport { NavigationStart, NavigationError, NavigationEnd, NavigationCancel, RouterModule } from '@angular/router';\nimport * as i2 from '@ngx-loading-bar/core';\nimport { LoadingBarModule } from '@ngx-loading-bar/core';\n\nclass LoadingBarRouterModule {\n  constructor(router, loader) {\n    const ref = loader.useRef('router');\n    router.events.subscribe(event => {\n      const navState = this.getCurrentNavigationState(router);\n\n      if (navState && navState.ignoreLoadingBar) {\n        return;\n      }\n\n      if (event instanceof NavigationStart) {\n        ref.start();\n      }\n\n      if (event instanceof NavigationError || event instanceof NavigationEnd || event instanceof NavigationCancel) {\n        ref.complete();\n      }\n    });\n  }\n\n  getCurrentNavigationState(router) {\n    // `getCurrentNavigation` only available in angular `7.2`\n    const currentNavigation = router.getCurrentNavigation && router.getCurrentNavigation();\n\n    if (currentNavigation && currentNavigation.extras) {\n      return currentNavigation.extras.state;\n    }\n\n    return {};\n  }\n\n}\n\nLoadingBarRouterModule.ɵfac = function LoadingBarRouterModule_Factory(t) {\n  return new (t || LoadingBarRouterModule)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i2.LoadingBarService));\n};\n\nLoadingBarRouterModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: LoadingBarRouterModule\n});\nLoadingBarRouterModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[RouterModule, LoadingBarModule], RouterModule, LoadingBarModule]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LoadingBarRouterModule, [{\n    type: NgModule,\n    args: [{\n      imports: [RouterModule, LoadingBarModule],\n      exports: [RouterModule, LoadingBarModule]\n    }]\n  }], function () {\n    return [{\n      type: i1.Router\n    }, {\n      type: i2.LoadingBarService\n    }];\n  }, null);\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { LoadingBarRouterModule }; //# sourceMappingURL=ngx-loading-bar-router.mjs.map","map":null,"metadata":{},"sourceType":"module"}