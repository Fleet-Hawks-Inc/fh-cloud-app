{"ast":null,"code":"import _asyncToGenerator from \"C:/FH/fh-cloud-app/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as moment from 'moment';\nimport { from } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Auth } from 'aws-amplify';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../services\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i7 from \"@ng-select/ng-select\";\n\nfunction AddInvoiceComponent_div_30_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Invoice date is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddInvoiceComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 98);\n    i0.ɵɵtemplate(1, AddInvoiceComponent_div_30_div_1_Template, 2, 0, \"div\", 99);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r2 = i0.ɵɵreference(29);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r2.errors.required);\n  }\n}\n\nfunction AddInvoiceComponent_ng_option_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ng-option\", 100);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const customer_r20 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", customer_r20.contactID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", customer_r20.companyName, \" \");\n  }\n}\n\nfunction AddInvoiceComponent_div_46_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Customer is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddInvoiceComponent_div_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 98);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtemplate(2, AddInvoiceComponent_div_46_div_2_Template, 2, 0, \"div\", 99);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r4 = i0.ɵɵreference(39);\n\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r4.errors.required);\n  }\n}\n\nfunction AddInvoiceComponent_div_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 101);\n    i0.ɵɵelementStart(1, \"div\", 102);\n    i0.ɵɵtext(2, \" There is no address of this customer \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddInvoiceComponent_div_48_div_1_div_8_div_12_label_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 114);\n    i0.ɵɵelementStart(1, \"span\", 108);\n    i0.ɵɵtext(2, \"Address:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const address_r26 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", address_r26.add1, \" \", address_r26.add2, \"\");\n  }\n}\n\nfunction AddInvoiceComponent_div_48_div_1_div_8_div_12_label_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 114);\n    i0.ɵɵelementStart(1, \"span\", 108);\n    i0.ɵɵtext(2, \"Address:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const address_r26 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", address_r26.userLoc, \"\");\n  }\n}\n\nfunction AddInvoiceComponent_div_48_div_1_div_8_div_12_input_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r35 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"input\", 120);\n    i0.ɵɵlistener(\"change\", function AddInvoiceComponent_div_48_div_1_div_8_div_12_input_24_Template_input_change_0_listener($event) {\n      i0.ɵɵrestoreView(_r35);\n      const ctx_r34 = i0.ɵɵnextContext();\n      const i_r27 = ctx_r34.index;\n      const address_r26 = ctx_r34.$implicit;\n      const ctx_r33 = i0.ɵɵnextContext(4);\n      return ctx_r33.getAddressID($event.target.checked, i_r27, address_r26.addressID);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const address_r26 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"value\", address_r26.addressID)(\"checked\", address_r26.isChecked);\n  }\n}\n\nfunction AddInvoiceComponent_div_48_div_1_div_8_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 116);\n    i0.ɵɵelementStart(1, \"div\", 65);\n    i0.ɵɵtemplate(2, AddInvoiceComponent_div_48_div_1_div_8_div_12_label_2_Template, 4, 2, \"label\", 117);\n    i0.ɵɵtemplate(3, AddInvoiceComponent_div_48_div_1_div_8_div_12_label_3_Template, 4, 1, \"label\", 117);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 118);\n    i0.ɵɵelementStart(5, \"label\", 114);\n    i0.ɵɵelementStart(6, \"span\", 108);\n    i0.ɵɵtext(7, \"City:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 118);\n    i0.ɵɵelementStart(10, \"label\", 114);\n    i0.ɵɵelementStart(11, \"span\", 108);\n    i0.ɵɵtext(12, \"Province/State:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 118);\n    i0.ɵɵelementStart(15, \"label\", 114);\n    i0.ɵɵelementStart(16, \"span\", 108);\n    i0.ɵɵtext(17, \"Country:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 118);\n    i0.ɵɵelementStart(20, \"label\", 114);\n    i0.ɵɵelementStart(21, \"span\", 108);\n    i0.ɵɵtext(22, \"Type:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(24, AddInvoiceComponent_div_48_div_1_div_8_div_12_input_24_Template, 1, 2, \"input\", 119);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const address_r26 = ctx.$implicit;\n    const item_r24 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", address_r26.manual);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !address_r26.manual);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", address_r26.ctyName, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", address_r26.sName, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", address_r26.cName, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", address_r26.aType, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r24.adrs.length > 1);\n  }\n}\n\nfunction AddInvoiceComponent_div_48_div_1_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 112);\n    i0.ɵɵelementStart(1, \"div\", 113);\n    i0.ɵɵelementStart(2, \"div\", 17);\n    i0.ɵɵelementStart(3, \"label\", 114);\n    i0.ɵɵelementStart(4, \"span\", 108);\n    i0.ɵɵtext(5, \"Email:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 17);\n    i0.ɵɵelementStart(8, \"label\", 114);\n    i0.ɵɵelementStart(9, \"span\", 108);\n    i0.ɵɵtext(10, \"Phone:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, AddInvoiceComponent_div_48_div_1_div_8_div_12_Template, 25, 7, \"div\", 115);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r24 = ctx.$implicit;\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", item_r24.workEmail ? item_r24.workEmail : \"-\", \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", item_r24.workPhone ? item_r24.workPhone : \"-\", \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", item_r24.adrs);\n  }\n}\n\nfunction AddInvoiceComponent_div_48_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 105);\n    i0.ɵɵelementStart(1, \"div\", 106);\n    i0.ɵɵelementStart(2, \"div\", 107);\n    i0.ɵɵelementStart(3, \"h5\", 108);\n    i0.ɵɵtext(4, \"Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"div\", 109);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 106);\n    i0.ɵɵelementStart(7, \"div\", 110);\n    i0.ɵɵtemplate(8, AddInvoiceComponent_div_48_div_1_div_8_Template, 13, 3, \"div\", 111);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r22.customerSelected);\n  }\n}\n\nfunction AddInvoiceComponent_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 103);\n    i0.ɵɵtemplate(1, AddInvoiceComponent_div_48_div_1_Template, 9, 1, \"div\", 104);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.invoiceData.customerID);\n  }\n}\n\nfunction AddInvoiceComponent_div_67_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Invoice currency is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddInvoiceComponent_div_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 98);\n    i0.ɵɵtemplate(1, AddInvoiceComponent_div_67_div_1_Template, 2, 0, \"div\", 99);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r9 = i0.ɵɵreference(62);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r9.errors.required);\n  }\n}\n\nfunction AddInvoiceComponent_tr_141_div_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Commodity is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddInvoiceComponent_tr_141_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 98);\n    i0.ɵɵtemplate(1, AddInvoiceComponent_tr_141_div_4_div_1_Template, 2, 0, \"div\", 99);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r41 = i0.ɵɵreference(3);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r41.errors.required);\n  }\n}\n\nfunction AddInvoiceComponent_tr_141_div_10_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Quantity/Hours is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddInvoiceComponent_tr_141_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 98);\n    i0.ɵɵtemplate(1, AddInvoiceComponent_tr_141_div_10_div_1_Template, 2, 0, \"div\", 99);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r43 = i0.ɵɵreference(9);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r43.errors.required);\n  }\n}\n\nfunction AddInvoiceComponent_tr_141_div_16_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Rate is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddInvoiceComponent_tr_141_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 98);\n    i0.ɵɵtemplate(1, AddInvoiceComponent_tr_141_div_16_div_1_Template, 2, 0, \"div\", 99);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r45 = i0.ɵɵreference(15);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r45.errors.required);\n  }\n}\n\nfunction AddInvoiceComponent_tr_141_ng_option_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ng-option\", 100);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"titlecase\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const act_r53 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", act_r53.actID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", act_r53.actNo, \" - \", i0.ɵɵpipeBind1(2, 3, act_r53.actName), \"\");\n  }\n}\n\nfunction AddInvoiceComponent_tr_141_div_27_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Account is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddInvoiceComponent_tr_141_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 98);\n    i0.ɵɵtemplate(1, AddInvoiceComponent_tr_141_div_27_div_1_Template, 2, 0, \"div\", 99);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r47 = i0.ɵɵreference(25);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r47.errors.required);\n  }\n}\n\nfunction AddInvoiceComponent_tr_141_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r56 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵelementStart(2, \"input\", 121, 122);\n    i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_tr_141_Template_input_ngModelChange_2_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r56);\n      const dt_r39 = restoredCtx.$implicit;\n      return dt_r39.commodityService = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, AddInvoiceComponent_tr_141_div_4_Template, 2, 1, \"div\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelementStart(6, \"div\", 18);\n    i0.ɵɵelementStart(7, \"div\", 11);\n    i0.ɵɵelementStart(8, \"input\", 123, 124);\n    i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_tr_141_Template_input_ngModelChange_8_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r56);\n      const dt_r39 = restoredCtx.$implicit;\n      return dt_r39.qtyHours = $event;\n    })(\"change\", function AddInvoiceComponent_tr_141_Template_input_change_8_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r56);\n      const d_r40 = restoredCtx.index;\n      const ctx_r58 = i0.ɵɵnextContext();\n      return ctx_r58.calculateDetailAmt($event.target.value, d_r40, \"qty\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, AddInvoiceComponent_tr_141_div_10_Template, 2, 1, \"div\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵelementStart(12, \"div\", 18);\n    i0.ɵɵelementStart(13, \"div\", 11);\n    i0.ɵɵelementStart(14, \"input\", 123, 125);\n    i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_tr_141_Template_input_ngModelChange_14_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r56);\n      const dt_r39 = restoredCtx.$implicit;\n      return dt_r39.priceRate = $event;\n    })(\"change\", function AddInvoiceComponent_tr_141_Template_input_change_14_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r56);\n      const d_r40 = restoredCtx.index;\n      const ctx_r60 = i0.ɵɵnextContext();\n      return ctx_r60.calculateDetailAmt($event.target.value, d_r40, \"price\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, AddInvoiceComponent_tr_141_div_16_Template, 2, 1, \"div\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵelementStart(18, \"div\", 18);\n    i0.ɵɵelementStart(19, \"div\", 11);\n    i0.ɵɵelementStart(20, \"input\", 126);\n    i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_tr_141_Template_input_ngModelChange_20_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r56);\n      const dt_r39 = restoredCtx.$implicit;\n      return dt_r39.amount = $event;\n    })(\"change\", function AddInvoiceComponent_tr_141_Template_input_change_20_listener() {\n      i0.ɵɵrestoreView(_r56);\n      const ctx_r62 = i0.ɵɵnextContext();\n      return ctx_r62.calculateAmount();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\");\n    i0.ɵɵelementStart(22, \"div\", 18);\n    i0.ɵɵelementStart(23, \"div\", 11);\n    i0.ɵɵelementStart(24, \"ng-select\", 127, 128);\n    i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_tr_141_Template_ng_select_ngModelChange_24_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r56);\n      const dt_r39 = restoredCtx.$implicit;\n      return dt_r39.accountID = $event;\n    });\n    i0.ɵɵtemplate(26, AddInvoiceComponent_tr_141_ng_option_26_Template, 3, 5, \"ng-option\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(27, AddInvoiceComponent_tr_141_div_27_Template, 2, 1, \"div\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"td\", 129);\n    i0.ɵɵelementStart(29, \"button\", 130);\n    i0.ɵɵelementStart(30, \"i\", 131);\n    i0.ɵɵlistener(\"click\", function AddInvoiceComponent_tr_141_Template_i_click_30_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r56);\n      const dt_r39 = restoredCtx.$implicit;\n      const d_r40 = restoredCtx.index;\n      const ctx_r64 = i0.ɵɵnextContext();\n      return ctx_r64.deleteDetail(dt_r39.amount, d_r40);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const dt_r39 = ctx.$implicit;\n    const d_r40 = ctx.index;\n\n    const _r41 = i0.ɵɵreference(3);\n\n    const _r43 = i0.ɵɵreference(9);\n\n    const _r45 = i0.ɵɵreference(15);\n\n    const _r47 = i0.ɵɵreference(25);\n\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"commodityService\", d_r40, \"\");\n    i0.ɵɵproperty(\"ngModel\", dt_r39.commodityService);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r41.invalid && (_r41.dirty || _r41.touched));\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"qtyHours\", d_r40, \"\");\n    i0.ɵɵproperty(\"ngModel\", dt_r39.qtyHours);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r43.invalid && (_r43.dirty || _r43.touched));\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"priceRate\", d_r40, \"\");\n    i0.ɵɵproperty(\"ngModel\", dt_r39.priceRate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r45.invalid && (_r45.dirty || _r45.touched));\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"amount\", d_r40, \"\");\n    i0.ɵɵproperty(\"ngModel\", dt_r39.amount)(\"disabled\", true);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"accountID\", d_r40, \"\");\n    i0.ɵɵproperty(\"ngModel\", dt_r39.accountID);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r12.accounts);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r47.invalid && (_r47.dirty || _r47.touched));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", d_r40 === 0);\n  }\n}\n\nfunction AddInvoiceComponent_div_156_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Only 500 characters are allowed. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddInvoiceComponent_div_156_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 98);\n    i0.ɵɵtemplate(1, AddInvoiceComponent_div_156_div_1_Template, 2, 0, \"div\", 99);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r13 = i0.ɵɵreference(155);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r13.errors.pattern);\n  }\n}\n\nfunction AddInvoiceComponent_div_220_ng_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ng-option\", 136);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const stateTax_r67 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", stateTax_r67.stateTaxID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(stateTax_r67.stateName);\n  }\n}\n\nfunction AddInvoiceComponent_div_220_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r69 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelementStart(1, \"div\", 132);\n    i0.ɵɵelementStart(2, \"label\", 133);\n    i0.ɵɵtext(3, \"Province/State\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 76);\n    i0.ɵɵelementStart(5, \"ng-select\", 134);\n    i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_div_220_Template_ng_select_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r69);\n      const ctx_r68 = i0.ɵɵnextContext();\n      return ctx_r68.invoiceData.invStateProvince = $event;\n    })(\"change\", function AddInvoiceComponent_div_220_Template_ng_select_change_5_listener() {\n      i0.ɵɵrestoreView(_r69);\n      const ctx_r70 = i0.ɵɵnextContext();\n      return ctx_r70.stateSelectChange();\n    });\n    i0.ɵɵtemplate(6, AddInvoiceComponent_div_220_ng_option_6_Template, 2, 2, \"ng-option\", 135);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r15.invoiceData.invStateProvince);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r15.stateTaxes);\n  }\n}\n\nfunction AddInvoiceComponent_div_221_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 77);\n    i0.ɵɵelementStart(1, \"div\", 37);\n    i0.ɵɵelement(2, \"input\", 139);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 79);\n    i0.ɵɵelementStart(4, \"div\", 140);\n    i0.ɵɵelement(5, \"input\", 141);\n    i0.ɵɵelementStart(6, \"span\", 142);\n    i0.ɵɵelementStart(7, \"span\", 143);\n    i0.ɵɵtext(8, \"%\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r73 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"value\", item_r73.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"value\", item_r73.amount);\n  }\n}\n\nfunction AddInvoiceComponent_div_221_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 144);\n    i0.ɵɵelementStart(1, \"div\", 145);\n    i0.ɵɵelementStart(2, \"p\", 146);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r75 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", item_r75.taxAmount ? item_r75.taxAmount : 0, \" \");\n  }\n}\n\nfunction AddInvoiceComponent_div_221_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelementStart(1, \"div\", 76);\n    i0.ɵɵtemplate(2, AddInvoiceComponent_div_221_div_2_Template, 9, 2, \"div\", 137);\n    i0.ɵɵelementStart(3, \"div\", 83);\n    i0.ɵɵelementStart(4, \"div\", 84);\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6, \"\\u00A0\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 37);\n    i0.ɵɵtemplate(8, AddInvoiceComponent_div_221_div_8_Template, 4, 1, \"div\", 138);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r16.invoiceData.taxesInfo);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r16.newTaxes);\n  }\n}\n\nfunction AddInvoiceComponent_button_237_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r78 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 147);\n    i0.ɵɵlistener(\"click\", function AddInvoiceComponent_button_237_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r78);\n      const ctx_r77 = i0.ɵɵnextContext();\n      return ctx_r77.addInvoice();\n    });\n    i0.ɵɵtext(1, \" Save \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext();\n\n    const _r0 = i0.ɵɵreference(17);\n\n    i0.ɵɵproperty(\"disabled\", !_r0.form.valid || ctx_r17.submitDisabled);\n  }\n}\n\nfunction AddInvoiceComponent_button_238_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r80 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 147);\n    i0.ɵɵlistener(\"click\", function AddInvoiceComponent_button_238_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r80);\n      const ctx_r79 = i0.ɵɵnextContext();\n      return ctx_r79.updateInvoice();\n    });\n    i0.ɵɵtext(1, \" Update \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext();\n\n    const _r0 = i0.ɵɵreference(17);\n\n    i0.ɵɵproperty(\"disabled\", !_r0.form.valid || ctx_r18.submitDisabled);\n  }\n}\n\nexport class AddInvoiceComponent {\n  constructor(accountService, listService, apiService, toaster, route, location, router) {\n    var _this = this;\n\n    this.accountService = accountService;\n    this.listService = listService;\n    this.apiService = apiService;\n    this.toaster = toaster;\n    this.route = route;\n    this.location = location;\n    this.router = router;\n    this.pageTitle = 'Add Invoice';\n    this.dateMinLimit = {\n      year: 2021,\n      month: 1,\n      day: 1\n    };\n    this.date = new Date();\n    this.futureDatesLimit = {\n      year: this.date.getFullYear() + 30,\n      month: 12,\n      day: 31\n    };\n    this.users = [];\n    this.invoiceData = {\n      invNo: '',\n      txnDate: moment().format('YYYY-MM-DD'),\n      invRef: '',\n      invCur: null,\n      invDueDate: null,\n      invPayTerms: '',\n      customerID: null,\n      cusAddressID: null,\n      invSalesman: null,\n      invSubject: '',\n      amountReceived: 0,\n      amountPaid: 0,\n      fullPayment: false,\n      balance: 0,\n      details: [{\n        commodityService: '',\n        qtyHours: 0,\n        priceRate: 0,\n        amount: 0,\n        accountID: null\n      }],\n      remarks: '',\n      discount: 0,\n      discountUnit: '%',\n      invStateProvince: null,\n      invStatus: 'open',\n      invType: 'manual',\n      subTotal: 0,\n      taxesInfo: [],\n      finalAmount: 0,\n      taxAmount: 0,\n      transactionLog: [],\n      discountAmount: 0,\n      taxExempt: true\n    };\n    this.midAmt = 0; // midAmt is sum of all the amount values in details table\n\n    this.finalAmount = 0;\n    this.customersObjects = {};\n    /**\r\n     * Customer related properties\r\n     */\n\n    this.customers = [];\n    this.customerSelected = [{\n      additionalContact: [],\n      adrs: [],\n      officeAddr: false,\n      email: '',\n      phone: ''\n    }];\n    this.notOfficeAddress = false;\n    /**\r\n     * Accounts\r\n     *\r\n     */\n\n    this.accounts = [];\n    /**\r\n     * Taxes part\r\n     */\n\n    this.tax = 0;\n    this.stateTaxes = [];\n    this.stateTaxID = '';\n    this.newTaxes = [{\n      type: '',\n      amount: 0,\n      taxAmount: 0\n    }];\n    this.errors = {};\n    this.response = '';\n    this.hasError = false;\n    this.hasSuccess = false;\n    this.Error = '';\n    this.Success = '';\n    this.submitDisabled = false;\n    this.currentUser = '';\n    this.getCurrentuser = /*#__PURE__*/_asyncToGenerator(function* () {\n      _this.currentUser = (yield Auth.currentSession()).getIdToken().payload;\n      _this.currentUser = localStorage.getItem(\"currentUserName\");\n      _this.invoiceData.invSalesman = _this.currentUser;\n    });\n  }\n\n  ngOnInit() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.getCurrentuser(); // this.customers = this.listService.customersList;\n\n\n      _this2.fetchStateTaxes(); // this.fetchUsers();\n\n\n      _this2.fetchAccounts();\n\n      _this2.invID = _this2.route.snapshot.params[`invID`];\n\n      if (_this2.invID) {\n        _this2.pageTitle = 'Edit Invoice';\n        yield _this2.fetchInvoice();\n      } else {\n        _this2.pageTitle = 'Add Invoice';\n      }\n\n      _this2.listService.fetchCustomers();\n\n      _this2.fetchCustomersByIDs();\n\n      let customerList = new Array();\n\n      _this2.getValidcustomers(customerList);\n\n      _this2.customers = customerList;\n    })();\n  }\n\n  getValidcustomers(customerList) {\n    let ids = [];\n    this.listService.customersList.forEach(element => {\n      element.forEach(element2 => {\n        if (element2.isDeleted === 1 && element2.contactID === this.invoiceData.customerID) {\n          this.invoiceData.customerID = null;\n        }\n\n        if (element2.isDeleted === 0 && !ids.includes(element2.contactID)) {\n          customerList.push(element2);\n          ids.push(element2.contactID);\n        }\n      });\n    });\n  }\n\n  fetchUsers() {\n    this.apiService.getData('contacts/get/type/employee').subscribe(result => {\n      this.users = result;\n    });\n  }\n\n  fetchAccounts() {\n    this.accountService.getData(`chartAc/fetch/list`).subscribe(res => {\n      this.accounts = res;\n    });\n  }\n\n  cancel() {\n    this.location.back(); // <-- go back to previous location on cancel\n  }\n\n  selectedCustomer(customerID) {\n    this.apiService.getData(`contacts/detail/${customerID}`).subscribe(result => {\n      if (result.Items.length > 0) {\n        this.customerSelected = result.Items;\n\n        for (let i = 0; i < this.customerSelected[0].adrs.length; i++) {\n          const element = this.customerSelected[0].adrs[i];\n          element[`isChecked`] = false;\n        }\n\n        if (this.invID) {\n          this.customerSelected[0].adrs.filter(elem => {\n            if (elem.addressID === this.invoiceData.cusAddressID) {\n              elem.isChecked = true;\n            }\n          });\n        } else {\n          this.customerSelected[0].adrs[0].isChecked = true;\n\n          if (this.customerSelected[0].adrs.length > 0) {\n            this.invoiceData.cusAddressID = this.customerSelected[0].adrs[0].addressID;\n          }\n\n          const addressLength = this.customerSelected[0].adrs.length;\n          const getType = this.customerSelected[0].adrs[0].aType;\n\n          if (addressLength === 1 && (getType === '' || getType === null)) {\n            this.notOfficeAddress = true;\n          } else {\n            this.notOfficeAddress = false;\n          }\n        }\n      }\n    });\n  }\n\n  getAddressID(value, i, id) {\n    if (value === true) {\n      this.invoiceData.cusAddressID = id;\n\n      for (let index = 0; index < this.customerSelected[0].adrs.length; index++) {\n        const element = this.customerSelected[0].adrs[index];\n        element.isChecked = false;\n      }\n\n      this.customerSelected[0].adrs[i].isChecked = true;\n    }\n  }\n\n  getInvDueDate(e) {\n    if (e === '15') {\n      const test = moment().add(15, 'd');\n      const test1 = moment(test).format('YYYY-MM-DD');\n      this.invoiceData.invDueDate = test1;\n    } else if (e === '30') {\n      const test = moment().add(30, 'd');\n      const test1 = moment(test).format('YYYY-MM-DD');\n      this.invoiceData.invDueDate = test1;\n    } else if (e === '45') {\n      const test = moment().add(45, 'd');\n      const test1 = moment(test).format('YYYY-MM-DD');\n      this.invoiceData.invDueDate = test1;\n    } else if (e === 'dueReceipt') {\n      this.invoiceData.invDueDate = moment().format('YYYY-MM-DD');\n    } else if (e === 'dueEnd') {\n      this.invoiceData.invDueDate = moment().endOf('month').format('YYYY-MM-DD');\n    } else {\n      this.invoiceData.invDueDate = null;\n    }\n  }\n\n  calculateDetailAmt(e, d, type) {\n    if (type === 'price') {\n      this.invoiceData.details[d].amount = this.invoiceData.details[d].qtyHours * e;\n      this.calculateAmount();\n    } else {\n      this.invoiceData.details[d].amount = this.invoiceData.details[d].priceRate * e;\n      this.calculateAmount();\n    }\n  }\n\n  stateSelectChange() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      const selected = _this3.stateTaxes.find(o => o.stateTaxID === _this3.invoiceData.invStateProvince);\n\n      _this3.invoiceData.taxesInfo = [];\n      _this3.invoiceData.taxesInfo = [{\n        name: 'GST',\n        amount: selected.GST\n      }, {\n        name: 'HST',\n        amount: selected.HST\n      }, {\n        name: 'PST',\n        amount: selected.PST\n      }];\n      _this3.tax = (Number(selected.GST) ? selected.GST : 0) + (Number(selected.HST) ? selected.HST : 0) + (Number(selected.PST) ? selected.PST : 0);\n      yield _this3.calculateAmount();\n    })();\n  }\n\n  fetchStateTaxes() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      const result = yield _this4.apiService.getData(`stateTaxes`).toPromise();\n      _this4.stateTaxes = result.Items;\n\n      if (!_this4.invID) {\n        _this4.invoiceData.invStateProvince = _this4.stateTaxes[0].stateTaxID;\n        _this4.invoiceData.taxesInfo = [{\n          name: 'GST',\n          amount: result.Items[0].GST\n        }, {\n          name: 'HST',\n          amount: result.Items[0].HST\n        }, {\n          name: 'PST',\n          amount: result.Items[0].PST\n        }];\n      } else {\n        _this4.stateTaxes.map(v => {\n          if (_this4.invoiceData.invStateProvince === v.stateTaxID) {\n            _this4.invoiceData.taxesInfo = [{\n              name: 'GST',\n              amount: v.GST\n            }, {\n              name: 'HST',\n              amount: v.HST\n            }, {\n              name: 'PST',\n              amount: v.PST\n            }];\n          }\n        });\n      }\n\n      _this4.newTaxes = _this4.invoiceData.taxesInfo;\n\n      if (_this4.invoiceData.subTotal > 0) {\n        for (const element of _this4.newTaxes) {\n          element.taxAmount = +(_this4.invoiceData.subTotal * element.amount / 100).toFixed(2);\n        }\n      }\n    })();\n  }\n\n  addDetails() {\n    this.invoiceData.details.push({\n      commodityService: '',\n      qtyHours: 0,\n      priceRate: 0,\n      amount: 0,\n      accountID: null\n    });\n  }\n\n  deleteDetail(amount, d) {\n    this.invoiceData.details.splice(d, 1);\n    this.calculateAmount();\n  }\n\n  addInvoice() {\n    this.invoiceData.balance = this.invoiceData.finalAmount;\n    this.submitDisabled = true;\n    this.errors = {};\n    this.hasError = false;\n    this.hasSuccess = false;\n    this.accountService.postData(`invoices`, this.invoiceData).subscribe({\n      complete: () => {},\n      error: err => {\n        from(err.error).pipe(map(val => {\n          val.message = val.message.replace(/\".*\"/, 'This Field');\n          this.errors[val.context.key] = val.message;\n        })).subscribe({\n          complete: () => {\n            this.submitDisabled = false; // this.throwErrors();\n          },\n          error: () => {\n            this.submitDisabled = false;\n          },\n          next: () => {}\n        });\n      },\n      next: res => {\n        this.submitDisabled = false;\n        this.response = res;\n        this.toaster.success('Invoice Added Successfully.');\n        this.cancel();\n      }\n    });\n  }\n\n  calculateAmount() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      _this5.midAmt = 0;\n\n      for (const element of _this5.invoiceData.details) {\n        _this5.midAmt += Number(element.amount);\n      }\n\n      _this5.invoiceData.subTotal = _this5.midAmt;\n\n      if (_this5.invoiceData.discountUnit === '%') {\n        let discount = _this5.invoiceData.discount * _this5.midAmt / 100;\n        _this5.invoiceData.subTotal = _this5.midAmt - discount;\n        _this5.invoiceData.discountAmount = discount;\n      } else if (_this5.invoiceData.discountUnit === 'CAD') {\n        _this5.invoiceData.subTotal = _this5.midAmt - _this5.invoiceData.discount;\n        _this5.invoiceData.discountAmount = _this5.invoiceData.discount;\n      } else {\n        _this5.invoiceData.subTotal = _this5.midAmt - _this5.invoiceData.discount;\n        _this5.invoiceData.discountAmount = _this5.invoiceData.discount;\n      }\n\n      _this5.finalAmount = _this5.invoiceData.subTotal.toFixed(2);\n\n      if (!_this5.invoiceData.taxExempt) {\n        const gst = _this5.invoiceData.taxesInfo[0].amount ? _this5.invoiceData.taxesInfo[0].amount : 0;\n        const pst = _this5.invoiceData.taxesInfo[1].amount ? _this5.invoiceData.taxesInfo[1].amount : 0;\n        const hst = _this5.invoiceData.taxesInfo[2].amount ? _this5.invoiceData.taxesInfo[2].amount : 0;\n        const totalTax = parseInt(gst, 10) + parseInt(pst, 10) + parseInt(hst, 10);\n        const taxAmount = _this5.midAmt * totalTax / 100;\n        _this5.invoiceData.taxAmount = +taxAmount.toFixed(2);\n        const final = parseInt(_this5.finalAmount, 10) + taxAmount;\n        _this5.invoiceData.finalAmount = final;\n        _this5.newTaxes = _this5.invoiceData.taxesInfo;\n\n        if (_this5.invoiceData.subTotal > 0) {\n          for (const element of _this5.newTaxes) {\n            element.taxAmount = +(_this5.midAmt * element.amount / 100).toFixed(2);\n          }\n        }\n      } else {\n        _this5.invoiceData.taxAmount = 0;\n        _this5.invoiceData.finalAmount = _this5.finalAmount;\n      }\n    })();\n  }\n\n  fetchInvoice() {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      let res = yield _this6.accountService.getData(`invoices/detail/${_this6.invID}`).toPromise();\n      _this6.invoiceData = res[0];\n\n      _this6.selectedCustomer(_this6.invoiceData.customerID);\n\n      _this6.invoiceData.invStateProvince = _this6.invoiceData.invStateProvince;\n\n      _this6.fetchStateTaxes();\n\n      _this6.invoiceData.details = res[0].details;\n      _this6.invoiceData.transactionLog = res[0].transactionLog;\n\n      _this6.calculateAmount();\n\n      const state = _this6.stateTaxes.find(o => o.stateTaxID === res[0].invStateProvince);\n\n      _this6.invoiceData.taxesInfo = [{\n        name: 'GST',\n        amount: state ? state.GST : ''\n      }, {\n        name: 'HST',\n        amount: state ? state.HST : ''\n      }, {\n        name: 'PST',\n        amount: state ? state.PST : ''\n      }];\n    })();\n  }\n\n  updateInvoice() {\n    this.submitDisabled = true;\n    this.errors = {};\n    this.hasError = false;\n    this.hasSuccess = false;\n    this.invoiceData.balance = this.invoiceData.finalAmount;\n    this.accountService.putData(`invoices/update/${this.invID}`, this.invoiceData).subscribe({\n      complete: () => {},\n      error: err => {\n        from(err.error).pipe(map(val => {\n          val.message = val.message.replace(/\".*\"/, 'This Field');\n          this.errors[val.context.key] = val.message;\n        })).subscribe({\n          complete: () => {\n            this.submitDisabled = false; // this.throwErrors();\n          },\n          error: () => {\n            this.submitDisabled = false;\n          },\n          next: () => {}\n        });\n      },\n      next: res => {\n        this.submitDisabled = false;\n        this.response = res;\n        this.toaster.success('Invoice Updated Successfully.');\n        this.cancel();\n      }\n    });\n  }\n  /*\r\n  * Get all customers's IDs of names from api\r\n  */\n\n\n  fetchCustomersByIDs() {\n    this.apiService.getData('contacts/get/list').subscribe(result => {\n      this.customersObjects = result;\n    });\n  }\n\n  refreshCustomerData() {\n    this.listService.fetchCustomers();\n  }\n\n  openModal(unit) {\n    this.listService.triggerModal(unit);\n    localStorage.setItem('isOpen', 'true');\n    this.listService.changeButton(false);\n  }\n\n  changeTax(value) {\n    if (!value && this.stateTaxes.length === 0) {\n      this.fetchStateTaxes();\n    }\n\n    this.calculateAmount();\n  }\n\n}\n\nAddInvoiceComponent.ɵfac = function AddInvoiceComponent_Factory(t) {\n  return new (t || AddInvoiceComponent)(i0.ɵɵdirectiveInject(i1.AccountService), i0.ɵɵdirectiveInject(i1.ListService), i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Location), i0.ɵɵdirectiveInject(i3.Router));\n};\n\nAddInvoiceComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddInvoiceComponent,\n  selectors: [[\"app-add-invoice\"]],\n  decls: 239,\n  vars: 33,\n  consts: [[1, \"body\"], [1, \"inner-wrapper\"], [\"role\", \"main\", 1, \"content-body\", \"pl-0\", \"pr-0\", \"pt-0\"], [1, \"page-header\", \"pr19\", \"pl7\"], [1, \"row\", 2, \"padding-top\", \"10px\"], [1, \"col-md-4\", \"col-lg-4\", \"font-weight-bold\", \"text-4\", \"text-dark\"], [1, \"col-md-8\", \"col-lg-8\", \"text-right\", \"pr-1\"], [\"routerLink\", \"/accounts/invoices/list\", 1, \"btn\", \"btn-sm\", \"btn-default\"], [1, \"fas\", \"fa-list\"], [1, \"m-2\"], [1, \"row\", \"mb-3\"], [1, \"col-lg-12\"], [1, \"bg-white\", \"p-3\", \"text-dark\"], [1, \"\"], [\"method\", \"post\", \"id\", \"invoiceForm\", 1, \"form-horizontal\", \"form-bordered\"], [\"invForm\", \"ngForm\"], [1, \"row\", \"adddriverpl\"], [1, \"col-lg-6\"], [1, \"row\"], [1, \"col-lg-10\"], [1, \"control-label\", \"font-weight-bold\", \"font-bold\", \"text-lg-right\", \"pt-2\"], [1, \"mandfield\", \"text-2\", \"ml-1\"], [\"name\", \"txnDate\", \"type\", \"text\", \"placeholder\", \"yyyy/mm/dd\", \"ngbDatepicker\", \"\", \"autocomplete\", \"off\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"click\"], [\"custexp\", \"ngbDatepicker\", \"invoiceDate\", \"ngModel\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [1, \"row\", \"pt-2\"], [1, \"col-lg-8\"], [\"name\", \"customerID\", \"placeholder\", \"Select Customer\", \"required\", \"\", 1, \"form-control\", \"text-capitalize\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"customer\", \"ngModel\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-lg-2\", \"mar-top-37\", \"text-right\"], [\"href\", \"javascript:;\", 1, \"btn\", \"btn-sm\", \"btn-success\", \"modal-with-form\", \"mr-3\", 3, \"click\"], [1, \"fas\", \"fa-plus\"], [\"href\", \"javascript:;\", \"data-toggle\", \"tooltip\", \"title\", \"Refresh customer data\", 1, \"btn\", \"btn-success\", \"btn-sm\", \"modal-with-form\", 3, \"click\"], [1, \"fas\", \"fa-sync\"], [\"class\", \"col-10\", 4, \"ngIf\"], [\"class\", \"col-lg-11 mt-2\", 4, \"ngIf\"], [1, \"col-lg-5\"], [\"type\", \"text\", \"name\", \"invRef\", \"placeholder\", \"Enter Unique Reference Number\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"invCur\", \"placeholder\", \"Select Currency\", \"required\", \"\", 1, \"form-control\", \"populate\", 3, \"ngModel\", \"ngModelChange\"], [\"invoiceCur\", \"ngModel\"], [\"value\", \"CAD\"], [\"value\", \"USD\"], [\"placeholder\", \"Select payment terms\", \"name\", \"invPayTerms\", 1, \"form-control\", \"populate\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"15\"], [\"value\", \"30\"], [\"value\", \"45\"], [\"value\", \"dueReceipt\"], [\"value\", \"dueEnd\"], [\"value\", \"custom\"], [\"name\", \"invDueDate\", \"type\", \"text\", \"placeholder\", \"yyyy/mm/dd\", \"ngbDatepicker\", \"\", \"autocomplete\", \"off\", 1, \"form-control\", 3, \"ngModel\", \"minDate\", \"maxDate\", \"ngModelChange\", \"click\"], [\"custexp1\", \"ngbDatepicker\"], [\"type\", \"text\", \"placeholder\", \"Rent Invoice\", \"name\", \"invSubject\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"control-label\", \"font-semi-bold\"], [1, \"control-label\", \"font-weight-bold\", \"font-weight-bold\", \"text-5\"], [1, \"col-lg-11\"], [1, \"pt-2\"], [1, \"table\", \"table-bordered\"], [\"width\", \"25%\"], [\"width\", \"15%\"], [\"width\", \"10%\"], [\"width\", \"20%\"], [\"width\", \"5%\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", \"btn-sm\", 3, \"click\"], [1, \"col-12\"], [1, \"bg-white\", \"text-dark\"], [1, \"col-lg-11\", \"pl-0\", \"pr-2\"], [1, \"control-label\", \"font-weight-bold\"], [\"placeholder\", \"Enter remarks of the invoice\", \"rows\", \"7\", \"name\", \"remarks\", \"pattern\", \"^[\\\\s\\\\S]{1,500}$\", 1, \"form-control\", \"h-auto\", 3, \"ngModel\", \"ngModelChange\"], [\"Iremarks\", \"ngModel\"], [1, \"col-lg-5\", \"offset-lg-2\"], [1, \"col\"], [1, \"text-right\", \"font-weight-bold\", \"text-4\", \"text-dark\"], [1, \"col-lg-4\"], [1, \"text-right\"], [1, \"col-lg-6\", \"offset-lg-1\"], [1, \"row\", \"mt-4\"], [\"type\", \"text\", \"disabled\", \"\", \"value\", \"Discount\", 1, \"form-control\"], [1, \"col-lg-7\"], [\"type\", \"number\", \"min\", \"0\", \"placeholder\", \"0.00\", \"name\", \"discount\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"name\", \"discountUnit\", 1, \"form-control\", \"populate\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"%\"], [1, \"row\", \"mt-3\"], [1, \"col-lg-10\", \"offset-lg-2\"], [1, \"col-lg-8\", \"pt-1\"], [1, \"bordtop\"], [1, \"col-lg-4\", \"pt-1\"], [1, \"col-lg-10\", \"offset-lg-1\", \"mb-3\"], [1, \"checkbox-custom\", \"checkbox-default\"], [\"type\", \"checkbox\", \"id\", \"taxExempt\", \"name\", \"taxExempt\", 3, \"ngModel\", \"change\", \"ngModelChange\"], [\"for\", \"taxExempt\", 1, \"control-label\", \"font-weight-semibold\", \"labelmt\", \"text-3\", \"text-dark\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"col-lg-5\", \"offset-lg-7\"], [1, \"form-group\", \"row\", \"mt-4\"], [1, \"col-lg-11\", \"text-right\", \"pr-1\"], [1, \"btn\", \"btn-default\", \"mr-2\", 3, \"click\"], [\"class\", \"btn btn-success\", \"type\", \"button\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [1, \"text-danger\"], [4, \"ngIf\"], [3, \"value\"], [1, \"col-10\"], [1, \"rounded\", \"p-2\", \"mt-2\", 2, \"background-color\", \"#e1e2e3\"], [1, \"col-lg-11\", \"mt-2\"], [\"style\", \"\\n                              border: 0.4px solid #e1e2e3;\\n                              border-radius: 0px 0px 15px 15px;\\n                              width: 90%;\\n                            \", 4, \"ngIf\"], [2, \"border\", \"0.4px solid #e1e2e3\", \"border-radius\", \"0px 0px 15px 15px\", \"width\", \"90%\"], [1, \"row\", \"pl-3\", \"pr-3\"], [1, \"col-lg-6\", 2, \"background-color\", \"#e1e2e3\"], [1, \"font-weight-bold\"], [1, \"col-lg-6\", \"text-right\", 2, \"background-color\", \"#e1e2e3\"], [1, \"col-lg-12\", \"pr-0\"], [\"style\", \"\\n                                    max-height: 200px;\\n                                    overflow-y: auto;\\n                                    overflow-x: hidden;\\n                                  \", 4, \"ngFor\", \"ngForOf\"], [2, \"max-height\", \"200px\", \"overflow-y\", \"auto\", \"overflow-x\", \"hidden\"], [1, \"row\", 2, \"margin-left\", \"15px\"], [1, \"control-label\"], [\"class\", \"row border-top mb-1 pt-2 pb-2 pr-3 position-relative\", \"style\", \"margin-left: 15px\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"border-top\", \"mb-1\", \"pt-2\", \"pb-2\", \"pr-3\", \"position-relative\", 2, \"margin-left\", \"15px\"], [\"class\", \"control-label\", 4, \"ngIf\"], [1, \"col-6\"], [\"class\", \"address-icon\", \"type\", \"radio\", \"name\", \"select\", 3, \"value\", \"checked\", \"change\", 4, \"ngIf\"], [\"type\", \"radio\", \"name\", \"select\", 1, \"address-icon\", 3, \"value\", \"checked\", \"change\"], [\"type\", \"text\", \"placeholder\", \"Enter commodity/service\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"name\", \"ngModelChange\"], [\"accID\", \"ngModel\"], [\"type\", \"number\", \"min\", \"0\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"name\", \"ngModelChange\", \"change\"], [\"qty\", \"ngModel\"], [\"rate\", \"ngModel\"], [\"type\", \"number\", \"placeholder\", \"0.00\", 1, \"form-control\", 3, \"ngModel\", \"name\", \"disabled\", \"ngModelChange\", \"change\"], [\"placeholder\", \"Select account\", \"required\", \"\", 1, \"form-control\", \"populate\", 3, \"ngModel\", \"name\", \"ngModelChange\"], [\"act\", \"ngModel\"], [1, \"text-center\"], [\"type\", \"button\", 3, \"disabled\"], [1, \"fas\", \"fa-trash\", 3, \"click\"], [1, \"col-lg-10\", \"offset-lg-1\"], [\"for\", \"inputDefault\", 1, \"control-label\", \"font-weight-bold\", \"text-3\", \"text-dark\"], [\"name\", \"invStateProvince\", 1, \"form-control\", \"populate\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"selected\", \"\", 3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"selected\", \"\", 3, \"value\"], [\"class\", \"row mt-4\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"row mt-4 pb-1 mb-1\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"disabled\", \"\", 1, \"form-control\", 3, \"value\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"0.00\", \"disabled\", \"\", 1, \"form-control\", 3, \"value\"], [1, \"input-group-append\"], [1, \"input-group-text\", \"pt-0\", \"pb-0\"], [1, \"row\", \"mt-4\", \"pb-1\", \"mb-1\"], [1, \"col-lg-12\", \"pt-1\"], [1, \"text-right\", \"m-0\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"disabled\", \"click\"]],\n  template: function AddInvoiceComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r81 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"section\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"section\", 2);\n      i0.ɵɵelementStart(3, \"header\", 3);\n      i0.ɵɵelementStart(4, \"div\", 4);\n      i0.ɵɵelementStart(5, \"div\", 5);\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 6);\n      i0.ɵɵelementStart(8, \"a\", 7);\n      i0.ɵɵelement(9, \"i\", 8);\n      i0.ɵɵtext(10, \" All Invoices\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"section\", 9);\n      i0.ɵɵelementStart(12, \"div\", 10);\n      i0.ɵɵelementStart(13, \"div\", 11);\n      i0.ɵɵelementStart(14, \"div\", 12);\n      i0.ɵɵelementStart(15, \"div\", 13);\n      i0.ɵɵelementStart(16, \"form\", 14, 15);\n      i0.ɵɵelementStart(18, \"div\", 16);\n      i0.ɵɵelementStart(19, \"div\", 17);\n      i0.ɵɵelementStart(20, \"div\", 18);\n      i0.ɵɵelementStart(21, \"div\", 19);\n      i0.ɵɵelementStart(22, \"label\", 20);\n      i0.ɵɵtext(23, \"Invoice Date\");\n      i0.ɵɵelementStart(24, \"span\", 21);\n      i0.ɵɵelementStart(25, \"sup\");\n      i0.ɵɵtext(26, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"input\", 22, 23);\n      i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_Template_input_ngModelChange_27_listener($event) {\n        return ctx.invoiceData.txnDate = $event;\n      })(\"click\", function AddInvoiceComponent_Template_input_click_27_listener() {\n        i0.ɵɵrestoreView(_r81);\n\n        const _r1 = i0.ɵɵreference(28);\n\n        return _r1.toggle();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(30, AddInvoiceComponent_div_30_Template, 2, 1, \"div\", 24);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"div\", 25);\n      i0.ɵɵelementStart(32, \"div\", 26);\n      i0.ɵɵelementStart(33, \"label\", 20);\n      i0.ɵɵtext(34, \"Customer\");\n      i0.ɵɵelementStart(35, \"span\", 21);\n      i0.ɵɵelementStart(36, \"sup\");\n      i0.ɵɵtext(37, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"ng-select\", 27, 28);\n      i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_Template_ng_select_ngModelChange_38_listener($event) {\n        return ctx.invoiceData.customerID = $event;\n      })(\"change\", function AddInvoiceComponent_Template_ng_select_change_38_listener($event) {\n        return ctx.selectedCustomer($event);\n      });\n      i0.ɵɵtemplate(40, AddInvoiceComponent_ng_option_40_Template, 2, 2, \"ng-option\", 29);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"div\", 30);\n      i0.ɵɵelementStart(42, \"a\", 31);\n      i0.ɵɵlistener(\"click\", function AddInvoiceComponent_Template_a_click_42_listener() {\n        return ctx.openModal(\"form\");\n      });\n      i0.ɵɵelement(43, \"i\", 32);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"a\", 33);\n      i0.ɵɵlistener(\"click\", function AddInvoiceComponent_Template_a_click_44_listener() {\n        return ctx.refreshCustomerData();\n      });\n      i0.ɵɵelement(45, \"i\", 34);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(46, AddInvoiceComponent_div_46_Template, 3, 1, \"div\", 24);\n      i0.ɵɵtemplate(47, AddInvoiceComponent_div_47_Template, 3, 0, \"div\", 35);\n      i0.ɵɵtemplate(48, AddInvoiceComponent_div_48_Template, 2, 1, \"div\", 36);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"div\", 17);\n      i0.ɵɵelementStart(50, \"div\", 18);\n      i0.ɵɵelementStart(51, \"div\", 37);\n      i0.ɵɵelementStart(52, \"label\", 20);\n      i0.ɵɵtext(53, \" Reference#\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(54, \"input\", 38);\n      i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_Template_input_ngModelChange_54_listener($event) {\n        return ctx.invoiceData.invRef = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(55, \"div\", 37);\n      i0.ɵɵelementStart(56, \"label\", 20);\n      i0.ɵɵtext(57, \"Select Invoice Currency\");\n      i0.ɵɵelementStart(58, \"span\", 21);\n      i0.ɵɵelementStart(59, \"sup\");\n      i0.ɵɵtext(60, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(61, \"ng-select\", 39, 40);\n      i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_Template_ng_select_ngModelChange_61_listener($event) {\n        return ctx.invoiceData.invCur = $event;\n      });\n      i0.ɵɵelementStart(63, \"ng-option\", 41);\n      i0.ɵɵtext(64, \"CAD\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(65, \"ng-option\", 42);\n      i0.ɵɵtext(66, \"USD\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(67, AddInvoiceComponent_div_67_Template, 2, 1, \"div\", 24);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(68, \"div\", 25);\n      i0.ɵɵelementStart(69, \"div\", 37);\n      i0.ɵɵelementStart(70, \"label\", 20);\n      i0.ɵɵtext(71, \"Payment Terms\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(72, \"ng-select\", 43);\n      i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_Template_ng_select_ngModelChange_72_listener($event) {\n        return ctx.invoiceData.invPayTerms = $event;\n      })(\"change\", function AddInvoiceComponent_Template_ng_select_change_72_listener($event) {\n        return ctx.getInvDueDate($event);\n      });\n      i0.ɵɵelementStart(73, \"ng-option\", 44);\n      i0.ɵɵtext(74, \"15 Days\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(75, \"ng-option\", 45);\n      i0.ɵɵtext(76, \"30 Days\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(77, \"ng-option\", 46);\n      i0.ɵɵtext(78, \"45 Days\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(79, \"ng-option\", 47);\n      i0.ɵɵtext(80, \"Due On Receipt\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(81, \"ng-option\", 48);\n      i0.ɵɵtext(82, \"Due End Of The Month\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(83, \"ng-option\", 49);\n      i0.ɵɵtext(84, \"Custom\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(85, \"div\", 37);\n      i0.ɵɵelementStart(86, \"label\", 20);\n      i0.ɵɵtext(87, \"Due Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(88, \"input\", 50, 51);\n      i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_Template_input_ngModelChange_88_listener($event) {\n        return ctx.invoiceData.invDueDate = $event;\n      })(\"click\", function AddInvoiceComponent_Template_input_click_88_listener() {\n        i0.ɵɵrestoreView(_r81);\n\n        const _r11 = i0.ɵɵreference(89);\n\n        return _r11.toggle();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(90, \"div\", 25);\n      i0.ɵɵelementStart(91, \"div\", 19);\n      i0.ɵɵelementStart(92, \"label\", 20);\n      i0.ɵɵtext(93, \"Invoice Subject\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(94, \"input\", 52);\n      i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_Template_input_ngModelChange_94_listener($event) {\n        return ctx.invoiceData.invSubject = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(95, \"div\", 25);\n      i0.ɵɵelementStart(96, \"div\", 19);\n      i0.ɵɵelementStart(97, \"label\", 20);\n      i0.ɵɵtext(98, \" Salesperson: \\u00A0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(99, \"label\", 53);\n      i0.ɵɵtext(100);\n      i0.ɵɵpipe(101, \"titlecase\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(102, \"div\", 16);\n      i0.ɵɵelementStart(103, \"div\", 19);\n      i0.ɵɵelementStart(104, \"div\", 18);\n      i0.ɵɵelementStart(105, \"div\", 17);\n      i0.ɵɵelementStart(106, \"h4\", 54);\n      i0.ɵɵtext(107, \" Details \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(108, \"div\", 55);\n      i0.ɵɵelementStart(109, \"div\", 56);\n      i0.ɵɵelementStart(110, \"table\", 57);\n      i0.ɵɵelementStart(111, \"thead\");\n      i0.ɵɵelementStart(112, \"tr\");\n      i0.ɵɵelementStart(113, \"th\", 58);\n      i0.ɵɵtext(114, \" Commodity/Service\");\n      i0.ɵɵelementStart(115, \"span\", 21);\n      i0.ɵɵelementStart(116, \"sup\");\n      i0.ɵɵtext(117, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(118, \"th\", 59);\n      i0.ɵɵtext(119, \" Quantity/Hours\");\n      i0.ɵɵelementStart(120, \"span\", 21);\n      i0.ɵɵelementStart(121, \"sup\");\n      i0.ɵɵtext(122, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(123, \"th\", 60);\n      i0.ɵɵtext(124, \" Price/Rate\");\n      i0.ɵɵelementStart(125, \"span\", 21);\n      i0.ɵɵelementStart(126, \"sup\");\n      i0.ɵɵtext(127, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(128, \"th\", 61);\n      i0.ɵɵtext(129, \" Amount\");\n      i0.ɵɵelementStart(130, \"span\", 21);\n      i0.ɵɵelementStart(131, \"sup\");\n      i0.ɵɵtext(132, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(133, \"th\", 58);\n      i0.ɵɵtext(134, \" Account\");\n      i0.ɵɵelementStart(135, \"span\", 21);\n      i0.ɵɵelementStart(136, \"sup\");\n      i0.ɵɵtext(137, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(138, \"th\", 62);\n      i0.ɵɵtext(139, \"Action\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(140, \"tbody\");\n      i0.ɵɵtemplate(141, AddInvoiceComponent_tr_141_Template, 31, 17, \"tr\", 63);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(142, \"button\", 64);\n      i0.ɵɵlistener(\"click\", function AddInvoiceComponent_Template_button_click_142_listener() {\n        return ctx.addDetails();\n      });\n      i0.ɵɵelement(143, \"i\", 32);\n      i0.ɵɵtext(144, \" Add Another Line \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(145, \"div\", 10);\n      i0.ɵɵelementStart(146, \"div\", 65);\n      i0.ɵɵelementStart(147, \"div\", 66);\n      i0.ɵɵelementStart(148, \"div\", 56);\n      i0.ɵɵelementStart(149, \"div\", 18);\n      i0.ɵɵelementStart(150, \"div\", 17);\n      i0.ɵɵelementStart(151, \"div\", 67);\n      i0.ɵɵelementStart(152, \"label\", 68);\n      i0.ɵɵtext(153, \"Remarks\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(154, \"textarea\", 69, 70);\n      i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_Template_textarea_ngModelChange_154_listener($event) {\n        return ctx.invoiceData.remarks = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(156, AddInvoiceComponent_div_156_Template, 2, 1, \"div\", 24);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(157, \"div\", 17);\n      i0.ɵɵelementStart(158, \"div\", 18);\n      i0.ɵɵelementStart(159, \"div\", 71);\n      i0.ɵɵelementStart(160, \"div\", 18);\n      i0.ɵɵelementStart(161, \"div\", 72);\n      i0.ɵɵelementStart(162, \"span\");\n      i0.ɵɵtext(163, \"\\u00A0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(164, \"div\", 37);\n      i0.ɵɵelementStart(165, \"div\", 18);\n      i0.ɵɵelementStart(166, \"div\", 26);\n      i0.ɵɵelementStart(167, \"h5\", 73);\n      i0.ɵɵtext(168, \" Total \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(169, \"div\", 74);\n      i0.ɵɵelementStart(170, \"p\", 75);\n      i0.ɵɵtext(171);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(172, \"div\", 18);\n      i0.ɵɵelementStart(173, \"div\", 76);\n      i0.ɵɵelementStart(174, \"div\", 77);\n      i0.ɵɵelementStart(175, \"div\", 37);\n      i0.ɵɵelement(176, \"input\", 78);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(177, \"div\", 79);\n      i0.ɵɵelementStart(178, \"div\", 18);\n      i0.ɵɵelementStart(179, \"div\", 17);\n      i0.ɵɵelementStart(180, \"input\", 80);\n      i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_Template_input_ngModelChange_180_listener($event) {\n        return ctx.invoiceData.discount = $event;\n      })(\"change\", function AddInvoiceComponent_Template_input_change_180_listener() {\n        return ctx.calculateAmount();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(181, \"div\", 17);\n      i0.ɵɵelementStart(182, \"ng-select\", 81);\n      i0.ɵɵlistener(\"ngModelChange\", function AddInvoiceComponent_Template_ng_select_ngModelChange_182_listener($event) {\n        return ctx.invoiceData.discountUnit = $event;\n      })(\"change\", function AddInvoiceComponent_Template_ng_select_change_182_listener() {\n        return ctx.calculateAmount();\n      });\n      i0.ɵɵelementStart(183, \"ng-option\", 82);\n      i0.ɵɵtext(184, \"%\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(185, \"ng-option\", 41);\n      i0.ɵɵtext(186, \"CAD\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(187, \"ng-option\", 42);\n      i0.ɵɵtext(188, \"USD\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(189, \"div\", 83);\n      i0.ɵɵelementStart(190, \"div\", 84);\n      i0.ɵɵelementStart(191, \"span\");\n      i0.ɵɵtext(192, \"\\u00A0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(193, \"div\", 77);\n      i0.ɵɵelementStart(194, \"div\", 84);\n      i0.ɵɵelementStart(195, \"span\");\n      i0.ɵɵtext(196, \"\\u00A0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(197, \"div\", 37);\n      i0.ɵɵelementStart(198, \"div\", 18);\n      i0.ɵɵelementStart(199, \"div\", 26);\n      i0.ɵɵelementStart(200, \"h5\", 73);\n      i0.ɵɵtext(201, \" Discount Amount \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(202, \"div\", 74);\n      i0.ɵɵelementStart(203, \"p\", 75);\n      i0.ɵɵtext(204);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(205, \"div\", 18);\n      i0.ɵɵelementStart(206, \"div\", 85);\n      i0.ɵɵelementStart(207, \"div\", 86);\n      i0.ɵɵelementStart(208, \"h5\", 73);\n      i0.ɵɵtext(209, \" Subtotal \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(210, \"div\", 87);\n      i0.ɵɵelementStart(211, \"div\", 86);\n      i0.ɵɵelementStart(212, \"p\", 75);\n      i0.ɵɵtext(213);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(214, \"div\", 18);\n      i0.ɵɵelementStart(215, \"div\", 88);\n      i0.ɵɵelementStart(216, \"div\", 89);\n      i0.ɵɵelementStart(217, \"input\", 90);\n      i0.ɵɵlistener(\"change\", function AddInvoiceComponent_Template_input_change_217_listener($event) {\n        return ctx.changeTax($event.target.checked);\n      })(\"ngModelChange\", function AddInvoiceComponent_Template_input_ngModelChange_217_listener($event) {\n        return ctx.invoiceData.taxExempt = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(218, \"label\", 91);\n      i0.ɵɵtext(219, \"Tax Exempt\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(220, AddInvoiceComponent_div_220_Template, 7, 2, \"div\", 92);\n      i0.ɵɵtemplate(221, AddInvoiceComponent_div_221_Template, 9, 2, \"div\", 92);\n      i0.ɵɵelementStart(222, \"div\", 18);\n      i0.ɵɵelementStart(223, \"div\", 93);\n      i0.ɵɵelementStart(224, \"div\", 18);\n      i0.ɵɵelementStart(225, \"div\", 85);\n      i0.ɵɵelementStart(226, \"div\", 86);\n      i0.ɵɵelementStart(227, \"h5\", 73);\n      i0.ɵɵtext(228, \" Total Amount \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(229, \"div\", 87);\n      i0.ɵɵelementStart(230, \"div\", 86);\n      i0.ɵɵelementStart(231, \"p\", 75);\n      i0.ɵɵtext(232);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(233, \"div\", 94);\n      i0.ɵɵelementStart(234, \"div\", 95);\n      i0.ɵɵelementStart(235, \"button\", 96);\n      i0.ɵɵlistener(\"click\", function AddInvoiceComponent_Template_button_click_235_listener() {\n        return ctx.cancel();\n      });\n      i0.ɵɵtext(236, \" Cancel \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(237, AddInvoiceComponent_button_237_Template, 2, 1, \"button\", 97);\n      i0.ɵɵtemplate(238, AddInvoiceComponent_button_238_Template, 2, 1, \"button\", 97);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r2 = i0.ɵɵreference(29);\n\n      const _r4 = i0.ɵɵreference(39);\n\n      const _r9 = i0.ɵɵreference(62);\n\n      const _r13 = i0.ɵɵreference(155);\n\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate1(\" \", ctx.pageTitle, \" \");\n      i0.ɵɵadvance(21);\n      i0.ɵɵproperty(\"ngModel\", ctx.invoiceData.txnDate);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", _r2.invalid && (_r2.dirty || _r2.touched));\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.invoiceData.customerID);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.customers);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", _r4.invalid && (_r4.dirty || _r4.touched));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.notOfficeAddress);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (ctx.customerSelected == null ? null : ctx.customerSelected.length) > 0 && !ctx.notOfficeAddress);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.invoiceData.invRef);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngModel\", ctx.invoiceData.invCur);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", _r9.invalid && (_r9.dirty || _r9.touched));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.invoiceData.invPayTerms);\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngModel\", ctx.invoiceData.invDueDate)(\"minDate\", ctx.dateMinLimit)(\"maxDate\", ctx.futureDatesLimit);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.invoiceData.invSubject);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(101, 31, ctx.currentUser), \"\");\n      i0.ɵɵadvance(41);\n      i0.ɵɵproperty(\"ngForOf\", ctx.invoiceData.details);\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngModel\", ctx.invoiceData.remarks);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", _r13.invalid && (_r13.dirty || _r13.touched));\n      i0.ɵɵadvance(15);\n      i0.ɵɵtextInterpolate(ctx.midAmt);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.invoiceData.discount);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.invoiceData.discountUnit);\n      i0.ɵɵadvance(22);\n      i0.ɵɵtextInterpolate1(\" \", ctx.invoiceData.discountAmount, \" \");\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate1(\" \", ctx.invoiceData.subTotal, \" \");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.invoiceData.taxExempt);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", !ctx.invoiceData.taxExempt);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.invoiceData.taxExempt);\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate1(\" \", ctx.invoiceData.finalAmount, \" \");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", !ctx.invID);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.invID);\n    }\n  },\n  directives: [i3.RouterLinkWithHref, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.NgForm, i6.NgbInputDatepicker, i5.DefaultValueAccessor, i5.RequiredValidator, i5.NgControlStatus, i5.NgModel, i4.NgIf, i7.NgSelectComponent, i4.NgForOf, i7.ɵr, i5.PatternValidator, i5.MinValidator, i5.NumberValueAccessor, i5.CheckboxControlValueAccessor],\n  pipes: [i4.TitleCasePipe],\n  styles: [\".address-icon[_ngcontent-%COMP%] {\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  left: -15px;\\r\\n  margin-top: -10px;\\r\\n}\"]\n});","map":null,"metadata":{},"sourceType":"module"}