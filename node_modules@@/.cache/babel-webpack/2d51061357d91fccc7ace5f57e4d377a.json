{"ast":null,"code":"import _asyncToGenerator from \"C:/FH/fh-cloud-app/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { EventEmitter } from \"@angular/core\";\nimport { Auth } from \"aws-amplify\";\nimport { environment } from \"../../../environments/environment\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/shared-service.service\";\nimport * as i2 from \"src/app/services\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/invoke-header-fn.service\";\nimport * as i5 from \"src/app/services/dashboard-utility.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"primeng/badge\";\nimport * as i8 from \"primeng/sidebar\";\nimport * as i9 from \"primeng/tabview\";\nimport * as i10 from \"primeng/table\";\nimport * as i11 from \"primeng/api\";\nimport * as i12 from \"../popups/new-address-book/new-address-book.component\";\nimport * as i13 from \"../popups/shared-modals/shared-modals.component\";\nimport * as i14 from \"primeng/dialog\";\nimport * as i15 from \"primeng/button\";\n\nconst _c0 = function () {\n  return [\"/Map-Dashboard\"];\n};\n\nfunction HeaderComponent_ul_9_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 35);\n    i0.ɵɵelementStart(1, \"a\", 36);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ul_9_li_1_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return ctx_r16.onNavSelected(\"fleet\");\n    });\n    i0.ɵɵtext(2, \" Fleet \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", ctx_r9.navSelected === \"fleet\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c0));\n  }\n}\n\nconst _c1 = function () {\n  return [\"/compliance\", \"hos\", \"logs\"];\n};\n\nfunction HeaderComponent_ul_9_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 35);\n    i0.ɵɵelementStart(1, \"a\", 36);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ul_9_li_2_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return ctx_r18.onNavSelected(\"compliance\");\n    });\n    i0.ɵɵtext(2, \" Compliance \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", ctx_r10.navSelected === \"compliance\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c1));\n  }\n}\n\nconst _c2 = function () {\n  return [\"/dispatch\", \"overview\"];\n};\n\nfunction HeaderComponent_ul_9_li_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 35);\n    i0.ɵɵelementStart(1, \"a\", 36);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ul_9_li_3_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return ctx_r20.onNavSelected(\"dispatch\");\n    });\n    i0.ɵɵtext(2, \" Routing & Dispatch \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", ctx_r11.navSelected === \"dispatch\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c2));\n  }\n}\n\nconst _c3 = function () {\n  return [\"/safety\", \"overview\"];\n};\n\nfunction HeaderComponent_ul_9_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 35);\n    i0.ɵɵelementStart(1, \"a\", 36);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ul_9_li_4_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return ctx_r22.onNavSelected(\"safety\");\n    });\n    i0.ɵɵtext(2, \" Safety \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", ctx_r12.navSelected === \"safety\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c3));\n  }\n}\n\nconst _c4 = function () {\n  return [\"/accounts\", \"chart-accounts\", \"list\"];\n};\n\nfunction HeaderComponent_ul_9_li_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 35);\n    i0.ɵɵelementStart(1, \"a\", 36);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ul_9_li_5_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext(2);\n      return ctx_r24.onNavSelected(\"accounts\");\n    });\n    i0.ɵɵtext(2, \" Accounts \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", ctx_r13.navSelected === \"accounts\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c4));\n  }\n}\n\nconst _c5 = function () {\n  return [\"/reports\", \"allreport\"];\n};\n\nfunction HeaderComponent_ul_9_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 35);\n    i0.ɵɵelementStart(1, \"a\", 36);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ul_9_li_6_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext(2);\n      return ctx_r26.onNavSelected(\"reports\");\n    });\n    i0.ɵɵtext(2, \" Reports \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", ctx_r14.navSelected === \"reports\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c5));\n  }\n}\n\nconst _c6 = function () {\n  return [\"/manage\", \"overview\"];\n};\n\nfunction HeaderComponent_ul_9_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 35);\n    i0.ɵɵelementStart(1, \"a\", 36);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ul_9_li_7_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r28 = i0.ɵɵnextContext(2);\n      return ctx_r28.onNavSelected(\"manage\");\n    });\n    i0.ɵɵtext(2, \" Manage \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", ctx_r15.navSelected === \"manage\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c6));\n  }\n}\n\nfunction HeaderComponent_ul_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 33);\n    i0.ɵɵtemplate(1, HeaderComponent_ul_9_li_1_Template, 3, 4, \"li\", 34);\n    i0.ɵɵtemplate(2, HeaderComponent_ul_9_li_2_Template, 3, 4, \"li\", 34);\n    i0.ɵɵtemplate(3, HeaderComponent_ul_9_li_3_Template, 3, 4, \"li\", 34);\n    i0.ɵɵtemplate(4, HeaderComponent_ul_9_li_4_Template, 3, 4, \"li\", 34);\n    i0.ɵɵtemplate(5, HeaderComponent_ul_9_li_5_Template, 3, 4, \"li\", 34);\n    i0.ɵɵtemplate(6, HeaderComponent_ul_9_li_6_Template, 3, 4, \"li\", 34);\n    i0.ɵɵtemplate(7, HeaderComponent_ul_9_li_7_Template, 3, 4, \"li\", 34);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isFleetEnabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isComplianceEnabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isDispatchEnabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isSafetyEnabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isAccountsEnabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isReportsEnabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isManageEnabled);\n  }\n}\n\nfunction HeaderComponent_ng_template_16_Template(rf, ctx) {}\n\nfunction HeaderComponent_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 37);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ng_template_17_Template_td_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r33);\n      const notification_r31 = restoredCtx.$implicit;\n      const ctx_r32 = i0.ɵɵnextContext();\n      return ctx_r32.showDetail(notification_r31);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const notification_r31 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(notification_r31.shortMessage);\n  }\n}\n\nfunction HeaderComponent_ng_template_20_Template(rf, ctx) {}\n\nfunction HeaderComponent_ng_template_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r37 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 37);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ng_template_21_Template_td_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r37);\n      const announcement_r35 = restoredCtx.$implicit;\n      const ctx_r36 = i0.ɵɵnextContext();\n      return ctx_r36.showDetail(announcement_r35, false);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const announcement_r35 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(announcement_r35.shortMessage);\n  }\n}\n\nfunction HeaderComponent_a_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r39 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 38);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_a_22_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r39);\n      const ctx_r38 = i0.ɵɵnextContext();\n      return ctx_r38.openModal(\"list\");\n    });\n    i0.ɵɵelement(1, \"i\", 39);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HeaderComponent_li_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"a\", 40);\n    i0.ɵɵelement(2, \"i\", 41);\n    i0.ɵɵtext(3, \" Company Profile\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/manage/company/detail/\", ctx_r6.currentCarrierID, \"\");\n  }\n}\n\nfunction HeaderComponent_li_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"a\", 42);\n    i0.ɵɵelement(2, \"i\", 43);\n    i0.ɵɵtext(3, \" Switch Company\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HeaderComponent_ng_template_47_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r41 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"p-button\", 44);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ng_template_47_Template_p_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r41);\n      const ctx_r40 = i0.ɵɵnextContext();\n      return ctx_r40.showNotificationDetail = false;\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c7 = function () {\n  return {\n    width: \"50vw\"\n  };\n};\n\nexport class HeaderComponent {\n  constructor(sharedService, apiService, listService, router, headerFnService, dashboardService) {\n    var _this = this;\n\n    this.sharedService = sharedService;\n    this.apiService = apiService;\n    this.listService = listService;\n    this.router = router;\n    this.headerFnService = headerFnService;\n    this.dashboardService = dashboardService;\n    this.environment = environment.isFeatureEnabled;\n    this.showNotificationDetail = false;\n    this.isFleetEnabled = environment.isFleetEnabled;\n    this.isDispatchEnabled = environment.isDispatchEnabled;\n    this.isComplianceEnabled = environment.isComplianceEnabled;\n    this.isManageEnabled = environment.isManageEnabled;\n    this.isSafetyEnabled = environment.isSafetyEnabled;\n    this.isAccountsEnabled = environment.isAccountsEnabled;\n    this.isReportsEnabled = environment.isReportsEnabled;\n    this.isAddressBook = environment.isAddressBook;\n    this.Asseturl = this.apiService.AssetUrl;\n    this.navClicked = new EventEmitter();\n    this.navSelected = \"\";\n    this.currentUser = \"\";\n    this.currentCarrierID = \"\";\n    this.userRole = \"\";\n    this.carriers = [];\n    this.currentUserName = \"\";\n    this.disabled = false;\n    this.nickName = \"\";\n    this.logoSrc = \"assets/img/logo.png\";\n    this.unitData = {\n      cName: \"\",\n      dba: \"\",\n      workPhone: \"\",\n      workEmail: \"\",\n      eTypes: [],\n      adrs: [{\n        aType: null,\n        cName: \"\",\n        sName: \"\",\n        ctyName: null,\n        zip: \"\",\n        add1: \"\",\n        add2: \"\",\n        geoCords: {\n          lat: \"\",\n          lng: \"\"\n        },\n        userLoc: \"\",\n        manual: false,\n        cCode: null,\n        sCode: null,\n        houseNo: \"\",\n        street: \"\",\n        states: [],\n        cities: []\n      }],\n      addlCnt: [{\n        flName: \"\",\n        fName: \"\",\n        lName: \"\",\n        phone: \"\",\n        des: \"\",\n        email: \"\",\n        fax: \"\"\n      }],\n      data: []\n    };\n    this.updateButton = false;\n    this.showSwitch = false;\n    this.showNotifications = false;\n    this.notifications = [];\n    this.announcements = [];\n    this.unReadCounter = 0;\n    this.getCurrentuser = /*#__PURE__*/_asyncToGenerator(function* () {\n      _this.currentUser = (yield Auth.currentSession()).getIdToken().payload;\n      const selectedCarrier = localStorage.getItem('xfhCarrierId');\n\n      if (selectedCarrier && _this.currentUser.userRoles === \"orgAdmin\") {\n        const res = yield _this.apiService.getData(`carriers/get/detail/${selectedCarrier}`).toPromise();\n        _this.userRole = 'Super Admin';\n        _this.currentUser = `${res.Items[0].firstName} ${res.Items[0].lastName}`;\n      } else {\n        _this.currentUser = (yield Auth.currentSession()).getIdToken().payload;\n        _this.userRole = _this.currentUser.userType;\n        _this.currentUser = `${_this.currentUser.firstName} ${_this.currentUser.lastName}`;\n      }\n\n      const outputName = _this.currentUser.match(/\\b(\\w)/g);\n\n      _this.smallName = outputName.join(\"\");\n      localStorage.setItem(\"currentUserName\", _this.currentUser);\n      localStorage.setItem(\"nickName\", _this.smallName);\n      _this.currentUserName = localStorage.getItem(\"currentUserName\");\n      _this.nickName = localStorage.getItem(\"nickName\");\n    });\n    this.sharedService.activeParentNav.subscribe(val => {\n      let activeTab = localStorage.getItem(\"active-header\");\n\n      if (activeTab != undefined && activeTab != \"\") {\n        val = activeTab;\n      }\n\n      this.navSelected = val;\n    });\n  }\n\n  ngOnInit() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.init();\n\n      _this2.getCurrentuser();\n\n      _this2.showSwitch = localStorage.getItem(\"subCompany\") == 'yes' ? true : false;\n\n      _this2.fetchCarrier();\n\n      if (_this2.headerFnService.subsVar === undefined) {\n        _this2.headerFnService.subsVar = _this2.headerFnService.invokeHeaderComponentFunction.subscribe(name => {\n          _this2.upateCurrentUser();\n        });\n      }\n\n      yield _this2.getAllNotificationAnnouncement();\n      setInterval( /*#__PURE__*/_asyncToGenerator(function* () {\n        yield _this2.getAllNotificationAnnouncement();\n      }), 1000 * 60 * 5);\n    })();\n  }\n\n  init() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this3.apiService.checkAccess();\n      _this3.isFleetEnabled = environment.isFleetEnabled;\n      _this3.isDispatchEnabled = localStorage.getItem(\"isDispatchEnabled\") ? JSON.parse(localStorage.getItem(\"isDispatchEnabled\")) : environment.isDispatchEnabled;\n      _this3.isComplianceEnabled = localStorage.getItem(\"isComplianceEnabled\") ? JSON.parse(localStorage.getItem(\"isComplianceEnabled\")) : environment.isComplianceEnabled;\n      _this3.isManageEnabled = localStorage.getItem(\"isManageEnabled\") ? JSON.parse(localStorage.getItem(\"isManageEnabled\")) : environment.isManageEnabled;\n      _this3.isSafetyEnabled = localStorage.getItem(\"isSafetyEnabled\") ? JSON.parse(localStorage.getItem(\"isSafetyEnabled\")) : environment.isSafetyEnabled;\n      _this3.isAccountsEnabled = localStorage.getItem(\"isAccountsEnabled\") ? JSON.parse(localStorage.getItem(\"isAccountsEnabled\")) : environment.isAccountsEnabled;\n      environment.isAccountsEnabled;\n      _this3.isAddressBook = localStorage.getItem(\"isAddressBook\") ? JSON.parse(localStorage.getItem(\"isAddressBook\")) : environment.isAddressBook;\n      _this3.isReportsEnabled = environment.isReportsEnabled;\n    })();\n  }\n\n  onNavSelected(nav) {\n    localStorage.setItem(\"active-header\", nav);\n    const rootHtml = document.getElementsByTagName(\"html\")[0];\n    rootHtml.classList.add(\"fixed\");\n    rootHtml.classList.add(\"sidebar-light\");\n    rootHtml.classList.add(\"sidebar-left-collapsed\");\n    this.navClicked.emit(nav);\n    this.sharedService.activeParentNav.next(nav);\n  }\n\n  fetchCarrier() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this4.dashboardService.getCarriers();\n\n      if (result.Items.length > 0) {\n        _this4.carriers = result.Items[0]; // this.currentCarrierID = this.carriers.carrierID;\n\n        _this4.currentCarrierID = localStorage.getItem('xfhCarrierId');\n        _this4.logoSrc = \"assets/img/logo.png\"; // if (this.carriers.uploadedLogo !== '') {\n        //   this.logoSrc = `${this.Asseturl}/${this.carriers.carrierID}/${this.carriers.uploadedLogo}`;\n        // } else {\n        //   this.logoSrc = 'assets/img/logo.png';\n        // }\n      }\n    })();\n  }\n\n  Logout() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        yield Auth.signOut();\n\n        _this5.listService.triggerModal(\"\");\n\n        _this5.listService.openDocTypeMOdal(\"\");\n\n        localStorage.removeItem(\"LoggedIn\");\n        localStorage.removeItem(\"user\");\n        localStorage.removeItem(\"active-header\");\n        localStorage.removeItem(\"carrierID\");\n        localStorage.removeItem(\"loggin-carrier\");\n        localStorage.removeItem(\"issueVehicleID\");\n        localStorage.removeItem(\"carrierID\");\n        localStorage.removeItem(\"active-header\");\n        localStorage.removeItem(\"currentUserName\");\n        localStorage.removeItem(\"nickName\");\n        localStorage.removeItem(\"isDispatchEnabled\");\n        localStorage.removeItem(\"isComplianceEnabled\");\n        localStorage.removeItem(\"isSafetyEnabled\");\n        localStorage.removeItem(\"isAccountsEnabled\");\n        localStorage.removeItem(\"isManageEnabled\");\n        localStorage.setItem(\"signOut\", \"true\"); //trigger flag\n\n        localStorage.removeItem(\"accessToken\"); //Remove token from local\n\n        localStorage.removeItem('xfhCarrierId');\n        localStorage.removeItem('currentUserName');\n        localStorage.removeItem('subCompany'); // localStorage.removeItem('jwt');\n\n        _this5.router.navigate([\"/Login\"]);\n      } catch (error) {\n        console.log(\"error signing out: \", error);\n      }\n    })();\n  }\n\n  upateCurrentUser() {\n    this.currentUserName = localStorage.getItem(\"currentUserName\");\n    this.nickName = localStorage.getItem(\"nickName\");\n  }\n\n  openModal(unit) {\n    this.listService.triggerModal(unit);\n    this.updateButton = false;\n    this.unitData = {\n      cName: \"\",\n      dba: \"\",\n      workPhone: \"\",\n      workEmail: \"\",\n      eTypes: [],\n      adrs: [{\n        aType: null,\n        cName: \"\",\n        sName: \"\",\n        ctyName: null,\n        zip: \"\",\n        add1: \"\",\n        add2: \"\",\n        geoCords: {\n          lat: \"\",\n          lng: \"\"\n        },\n        userLoc: \"\",\n        manual: false,\n        cCode: null,\n        sCode: null,\n        houseNo: \"\",\n        street: \"\",\n        states: [],\n        cities: []\n      }],\n      addlCnt: [{\n        flName: \"\",\n        fName: \"\",\n        lName: \"\",\n        phone: \"\",\n        des: \"\",\n        email: \"\",\n        fax: \"\"\n      }],\n      data: []\n    };\n  }\n\n  showDetail(notification, isNotification = true) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      _this6.showNotifications = false;\n      _this6.detailMessage = notification.message;\n      _this6.showNotificationDetail = true;\n\n      if (isNotification && notification.read === 0) {\n        yield _this6.apiService.putData(`notification/read/${notification.id}`, {}).toPromise();\n      }\n    })();\n  }\n\n  getAllNotificationAnnouncement() {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      const result = yield _this7.apiService.getData('notification/getAll').toPromise();\n\n      if (result.notifications) {\n        _this7.notifications = result.notifications;\n\n        _this7.notifications.forEach(element => {\n          if (element.read === 0) {\n            _this7.unReadCounter += 1;\n          }\n\n          const length = 50;\n          element['shortMessage'] = element.message.length > length ? element.message.substring(0, length - 3) + \"...\" : element.message;\n        });\n      }\n\n      if (result.announcements) {\n        _this7.announcements = result.announcements;\n\n        _this7.announcements.forEach(element => {\n          const length = 50;\n          element['shortMessage'] = element.message.length > length ? element.message.substring(0, length - 3) + \"...\" : element.message;\n        });\n      }\n    })();\n  }\n\n}\n\nHeaderComponent.ɵfac = function HeaderComponent_Factory(t) {\n  return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.SharedServiceService), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i2.ListService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.InvokeHeaderFnService), i0.ɵɵdirectiveInject(i5.DashboardUtilityService));\n};\n\nHeaderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HeaderComponent,\n  selectors: [[\"app-header\"]],\n  outputs: {\n    navClicked: \"navClicked\"\n  },\n  decls: 48,\n  vars: 18,\n  consts: [[1, \"header\"], [1, \"logo-container\"], [\"routerLink\", \"/Map-Dashboard\", 1, \"logo\"], [\"width\", \"\", \"height\", \"\", \"alt\", \"FH Admin Logo\", 1, \"img-fluid\", 3, \"src\"], [\"data-toggle-class\", \"sidebar-left-opened\", \"data-target\", \"html\", \"data-fire-event\", \"sidebar-left-opened\", 1, \"d-md-none\", \"toggle-sidebar-left\"], [\"aria-label\", \"Toggle sidebar\", 1, \"fas\", \"fa-bars\"], [1, \"header-nav\", \"collapse\"], [1, \"header-nav-main\", \"header-nav-main-square\"], [\"class\", \"nav\", 4, \"ngIf\"], [1, \"header-right\"], [\"pBadge\", \"\", \"severity\", \"danger\", \"size\", \"large\", 1, \"pi\", \"pi-bell\", \"mr-4\", \"p-text-secondary\", 2, \"font-size\", \"1.3rem\", \"cursor\", \"pointer\", 3, \"value\", \"click\"], [\"appendTo\", \"body\", \"modal\", \"false\", \"baseZIndex\", \"100000\", \"position\", \"right\", \"styleClass\", \"p-sidebar-sm\", 3, \"visible\", \"visibleChange\"], [\"header\", \"Notifications\"], [\"responsiveLayout\", \"scroll\", \"styleClass\", \"p-datatable-md\", \"selectionMode\", \"single\", 3, \"value\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"header\", \"Announcements\"], [\"href\", \"javascript:;\", \"class\", \"modal-with-form address-book-icon\", \"title\", \"Address Book\", 3, \"click\", 4, \"ngIf\"], [\"id\", \"userbox\", 1, \"userbox\", \"mt-0\"], [\"href\", \"#\", \"data-toggle\", \"dropdown\"], [1, \"profile-picture\", \"text-uppercase\", \"font-weight-bold\"], [\"data-lock-name\", \"John Doe\", \"data-lock-email\", \"johndoe@okler.com\", 1, \"profile-info\"], [1, \"name\"], [1, \"role\"], [1, \"fa\", \"custom-caret\"], [1, \"dropdown-menu\"], [1, \"list-unstyled\", \"mb-2\", \"text-dark\"], [1, \"divider\"], [4, \"ngIf\"], [\"id\", \"lnkLogout\", \"role\", \"menuitem\", \"tabindex\", \"-1\", \"routerLink\", \"\", 3, \"click\"], [1, \"fas\", \"fa-power-off\"], [\"header\", \"Message\", 3, \"modal\", \"visible\", \"visibleChange\"], [\"pTemplate\", \"footer\"], [1, \"nav\"], [\"class\", \"\", 3, \"active\", 4, \"ngIf\"], [1, \"\"], [1, \"nav-link\", 3, \"routerLink\", \"click\"], [2, \"cursor\", \"pointer\", 3, \"click\"], [\"href\", \"javascript:;\", \"title\", \"Address Book\", 1, \"modal-with-form\", \"address-book-icon\", 3, \"click\"], [1, \"far\", \"fa-address-book\", \"text-dark\", 2, \"font-size\", \"18px\"], [\"role\", \"menuitem\", \"tabindex\", \"-1\", 1, \"modal-with-form\", 3, \"routerLink\"], [1, \"fas\", \"fa-building\"], [\"role\", \"menuitem\", \"tabindex\", \"-1\", \"routerLink\", \"/organizations\", 1, \"modal-with-form\"], [1, \"fas\", \"fa-exchange\"], [\"icon\", \"pi pi-check\", \"label\", \"Ok\", \"styleClass\", \"p-button-text\", 3, \"click\"]],\n  template: function HeaderComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"header\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"a\", 2);\n      i0.ɵɵelement(3, \"img\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 4);\n      i0.ɵɵelement(5, \"i\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 6);\n      i0.ɵɵelementStart(7, \"div\", 7);\n      i0.ɵɵelementStart(8, \"nav\");\n      i0.ɵɵtemplate(9, HeaderComponent_ul_9_Template, 8, 7, \"ul\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 9);\n      i0.ɵɵelementStart(11, \"i\", 10);\n      i0.ɵɵlistener(\"click\", function HeaderComponent_Template_i_click_11_listener() {\n        return ctx.showNotifications = true;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"p-sidebar\", 11);\n      i0.ɵɵlistener(\"visibleChange\", function HeaderComponent_Template_p_sidebar_visibleChange_12_listener($event) {\n        return ctx.showNotifications = $event;\n      });\n      i0.ɵɵelementStart(13, \"p-tabView\");\n      i0.ɵɵelementStart(14, \"p-tabPanel\", 12);\n      i0.ɵɵelementStart(15, \"p-table\", 13);\n      i0.ɵɵtemplate(16, HeaderComponent_ng_template_16_Template, 0, 0, \"ng-template\", 14);\n      i0.ɵɵtemplate(17, HeaderComponent_ng_template_17_Template, 3, 1, \"ng-template\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"p-tabPanel\", 16);\n      i0.ɵɵelementStart(19, \"p-table\", 13);\n      i0.ɵɵtemplate(20, HeaderComponent_ng_template_20_Template, 0, 0, \"ng-template\", 14);\n      i0.ɵɵtemplate(21, HeaderComponent_ng_template_21_Template, 3, 1, \"ng-template\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(22, HeaderComponent_a_22_Template, 2, 0, \"a\", 17);\n      i0.ɵɵelementStart(23, \"div\", 18);\n      i0.ɵɵelementStart(24, \"a\", 19);\n      i0.ɵɵelementStart(25, \"figure\", 20);\n      i0.ɵɵelementStart(26, \"span\");\n      i0.ɵɵtext(27);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"div\", 21);\n      i0.ɵɵelementStart(29, \"span\", 22);\n      i0.ɵɵtext(30);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"span\", 23);\n      i0.ɵɵtext(32);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(33, \"i\", 24);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"div\", 25);\n      i0.ɵɵelementStart(35, \"ul\", 26);\n      i0.ɵɵelement(36, \"li\", 27);\n      i0.ɵɵtemplate(37, HeaderComponent_li_37_Template, 4, 1, \"li\", 28);\n      i0.ɵɵtemplate(38, HeaderComponent_li_38_Template, 4, 0, \"li\", 28);\n      i0.ɵɵelementStart(39, \"li\");\n      i0.ɵɵelementStart(40, \"a\", 29);\n      i0.ɵɵlistener(\"click\", function HeaderComponent_Template_a_click_40_listener() {\n        return ctx.Logout();\n      });\n      i0.ɵɵelement(41, \"i\", 30);\n      i0.ɵɵtext(42, \" Logout\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(43, \"app-new-address-book\");\n      i0.ɵɵelement(44, \"app-shared-modals\");\n      i0.ɵɵelementStart(45, \"p-dialog\", 31);\n      i0.ɵɵlistener(\"visibleChange\", function HeaderComponent_Template_p_dialog_visibleChange_45_listener($event) {\n        return ctx.showNotificationDetail = $event;\n      });\n      i0.ɵɵtext(46);\n      i0.ɵɵtemplate(47, HeaderComponent_ng_template_47_Template, 1, 0, \"ng-template\", 32);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"src\", ctx.logoSrc, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.navSelected != \"onboard\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"value\", ctx.unReadCounter);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"visible\", ctx.showNotifications);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"value\", ctx.notifications);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"value\", ctx.announcements);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.isAddressBook);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.nickName);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.currentUserName);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.userRole);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.isManageEnabled);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showSwitch);\n      i0.ɵɵadvance(7);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(17, _c7));\n      i0.ɵɵproperty(\"modal\", true)(\"visible\", ctx.showNotificationDetail);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\" \", ctx.detailMessage, \" \");\n    }\n  },\n  directives: [i3.RouterLinkWithHref, i6.NgIf, i7.BadgeDirective, i8.Sidebar, i9.TabView, i9.TabPanel, i10.Table, i11.PrimeTemplate, i12.NewAddressBookComponent, i13.SharedModalsComponent, i14.Dialog, i15.Button],\n  styles: [\"\"]\n});","map":null,"metadata":{},"sourceType":"module"}