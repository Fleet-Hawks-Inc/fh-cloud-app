{"ast":null,"code":"import _asyncToGenerator from \"C:/FH/fh-cloud-app/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Constants from '../../../fleet/constants';\nimport { jsPDF } from 'jspdf';\nimport autoTable from 'jspdf-autotable';\nimport * as moment from 'moment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../services/api.service\";\nimport * as i2 from \"ngx-spinner\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../../../services/list.service\";\nimport * as i5 from \"@angular/common/http\";\nimport * as i6 from \"src/app/services/country-state-city.service\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@ng-select/ng-select\";\n\nfunction MileageComponent_div_5_ng_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ng-option\", 48);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const vehicle_r8 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", vehicle_r8.vehicleIdentification);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(vehicle_r8.vehicleIdentification);\n  }\n}\n\nfunction MileageComponent_div_5_ng_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ng-option\", 48);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const fuelType_r9 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", fuelType_r9);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(fuelType_r9);\n  }\n}\n\nfunction MileageComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 36);\n    i0.ɵɵelementStart(1, \"div\", 37);\n    i0.ɵɵelementStart(2, \"div\", 38);\n    i0.ɵɵelementStart(3, \"ng-select\", 39);\n    i0.ɵɵlistener(\"ngModelChange\", function MileageComponent_div_5_Template_ng_select_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.filterVehicle = $event;\n    });\n    i0.ɵɵtemplate(4, MileageComponent_div_5_ng_option_4_Template, 2, 2, \"ng-option\", 40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 41);\n    i0.ɵɵelementStart(6, \"ng-select\", 42);\n    i0.ɵɵlistener(\"ngModelChange\", function MileageComponent_div_5_Template_ng_select_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.filterFuel = $event;\n    });\n    i0.ɵɵtemplate(7, MileageComponent_div_5_ng_option_7_Template, 2, 2, \"ng-option\", 40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 37);\n    i0.ɵɵelementStart(9, \"button\", 43);\n    i0.ɵɵlistener(\"click\", function MileageComponent_div_5_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.filterRecords();\n    });\n    i0.ɵɵtext(10, \"Search\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 44);\n    i0.ɵɵlistener(\"click\", function MileageComponent_div_5_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.resetFilter();\n    });\n    i0.ɵɵtext(12, \"Reset\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 45);\n    i0.ɵɵelementStart(14, \"a\", 46);\n    i0.ɵɵlistener(\"click\", function MileageComponent_div_5_Template_a_click_14_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.generatePDF();\n    });\n    i0.ɵɵelement(15, \"i\", 47);\n    i0.ɵɵtext(16, \" Generate IFTA Report\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.filterVehicle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.vehicleList);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.filterFuel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.fuelList);\n  }\n}\n\nfunction MileageComponent_tr_85_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 49);\n    i0.ɵɵelementStart(1, \"td\", 50);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.dataMessage);\n  }\n}\n\nfunction MileageComponent_tr_86_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r16 = i0.ɵɵnextContext().$implicit;\n    const ctx_r17 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r17.canadianStates[item_r16.jurisdiction]);\n  }\n}\n\nfunction MileageComponent_tr_86_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r16 = i0.ɵɵnextContext().$implicit;\n    const ctx_r18 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r18.usStates[item_r16.jurisdiction]);\n  }\n}\n\nfunction MileageComponent_tr_86_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtemplate(2, MileageComponent_tr_86_span_2_Template, 2, 1, \"span\", 51);\n    i0.ɵɵtemplate(3, MileageComponent_tr_86_span_3_Template, 2, 1, \"span\", 51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r16 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.canadianStates[item_r16.jurisdiction]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.usStates[item_r16.jurisdiction]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r16.totalMiles);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r16.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r16.fuelType);\n  }\n}\n\nfunction MileageComponent_tr_103_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 49);\n    i0.ɵɵelementStart(1, \"td\", 50);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.dataMessage);\n  }\n}\n\nfunction MileageComponent_tr_104_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r21 = i0.ɵɵnextContext().$implicit;\n    const ctx_r22 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r22.canadianStates[item_r21.jurisdiction]);\n  }\n}\n\nfunction MileageComponent_tr_104_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r21 = i0.ɵɵnextContext().$implicit;\n    const ctx_r23 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r23.usStates[item_r21.jurisdiction]);\n  }\n}\n\nfunction MileageComponent_tr_104_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtemplate(4, MileageComponent_tr_104_span_4_Template, 2, 1, \"span\", 51);\n    i0.ɵɵtemplate(5, MileageComponent_tr_104_span_5_Template, 2, 1, \"span\", 51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r21 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r21.vehicle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.canadianStates[item_r21.jurisdiction]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.usStates[item_r21.jurisdiction]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r21.totalMiles);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r21.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r21.fuelType);\n  }\n}\n\nfunction MileageComponent_div_105_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 52);\n    i0.ɵɵelementStart(1, \"div\", 53);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 54);\n    i0.ɵɵelementStart(4, \"button\", 55);\n    i0.ɵɵlistener(\"click\", function MileageComponent_div_105_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.prevResults();\n    });\n    i0.ɵɵtext(5, \"Prev\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 56);\n    i0.ɵɵlistener(\"click\", function MileageComponent_div_105_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.nextResults();\n    });\n    i0.ɵɵtext(7, \"Next\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\" Showing \", ctx_r5.recordStartPoint, \" to \", ctx_r5.recordEndPoint, \" of \", ctx_r5.recordCount, \" enteries \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r5.recordPrev);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r5.recordNext);\n  }\n}\n\nexport class MileageComponent {\n  constructor(apiService, spinner, route, listService, httpClient, countryStateCity) {\n    this.apiService = apiService;\n    this.spinner = spinner;\n    this.route = route;\n    this.listService = listService;\n    this.httpClient = httpClient;\n    this.countryStateCity = countryStateCity;\n    this.activeTab = 'vehicle';\n    this.vehicleList = [];\n    this.recordCount = 10;\n    this.pageLength = 10;\n    this.isRecords = false;\n    this.recordStartPoint = 1;\n    this.recordEndPoint = this.pageLength;\n    this.recordDraw = 0;\n    this.records = [];\n    this.recordNext = false;\n    this.recordPrevEvauatedKeys = [''];\n    this.lastEvaluatedKey = '';\n    this.recordPrev = true;\n    this.quarterReport = {};\n    this.recs = false;\n    this.canadianStates = {};\n    this.usStates = {};\n    this.fuelList = [];\n    this.filterFuel = \"\";\n    this.filterVehicle = \"\";\n    this.quarters = {\n      '1': \"JAN - MAR\",\n      '2': \"APR - JUN\",\n      '3': \"JUL - SEP\",\n      '4': \"OCT - DEC\"\n    };\n    this.carrierName = \"\";\n    this.username = \"\";\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.quarter = _this.route.snapshot.params['quarter'];\n      _this.quarter;\n\n      _this.fetchJurisdiction();\n\n      yield _this.fetchCountries();\n\n      _this.fetchCount();\n\n      _this.fetchVehicles();\n\n      _this.fetchWexFuelCode();\n\n      _this.fetchQuarterRreport();\n\n      yield _this.getCanadaStates();\n      yield _this.getUSStates();\n\n      _this.groupByFuelType();\n\n      _this.fetchCarrierData();\n    })();\n  }\n\n  fetchCarrierData() {\n    this.apiService.getData(`carriers/getCarrier`).subscribe(result => {\n      this.carrierName = result.Items[0].carrierName;\n      this.username = result.Items[0].userName;\n    });\n  }\n\n  groupByFuelType() {\n    this.apiService.getData(`ifta/groupFuelType/${this.quarter}`).subscribe(result => {\n      this.fuelGroup = result;\n    });\n  }\n\n  fetchWexFuelCode() {\n    let fuelList = [];\n    this.httpClient.get('assets/jsonFiles/fuel/wexFuelType.json').subscribe(result => {\n      result.forEach(element => {\n        fuelList.push(element.type);\n      });\n    });\n    this.fuelList = [\"Diesel\", \"Gasoline\", \"Propane\"];\n  }\n\n  fetchVehicleSumary() {\n    this.activeTab = 'vehicle';\n    this.fetchCount();\n  }\n\n  fetchJurisdictionSumary() {\n    this.activeTab = 'jurisdiction';\n    this.fetchJurisdiction();\n  }\n\n  fetchVehicles() {\n    this.apiService.getData(`vehicles`).subscribe(result => {\n      this.vehicleList = result.Items;\n    });\n  }\n\n  fetchJurisdiction() {\n    this.apiService.getData('ifta/jurisdiction/' + this.quarter).subscribe(result => {\n      this.jurisdictionReport = result;\n    });\n  }\n\n  filterRecords() {\n    this.dataMessage = Constants.FETCHING_DATA;\n    this.lastEvaluatedKey = '';\n    this.isRecords = false;\n    this.records = [];\n    if (this.filterFuel == null) this.filterFuel = '';\n    if (this.filterVehicle == null) this.filterVehicle = '';\n\n    if (this.filterFuel != null || this.filterVehicle != null) {\n      this.fetchCount();\n    }\n  }\n\n  resetFilter() {\n    this.filterFuel = '';\n    this.filterVehicle = '';\n    this.fetchCount();\n  }\n\n  fetchQuarterRreport() {\n    this.apiService.getData('ifta/quarter/' + this.quarter).subscribe(result => {\n      this.quarterReport.totalMiles = result[0].totalMiles;\n      this.quarterReport.iftaDistance = result[0].iftaDistance;\n      this.quarterReport.nonIftaDistance = result[0].nonIftaDistance;\n      this.quarterReport.quantityUnit = result[0].quantityUnit;\n      this.quarterReport.distanceUnit = result[0].distanceUnit;\n      this.quarterReport.quarter = result[0].quarter;\n      this.quarterReport.totalQuantity = result[0].totalQuantity;\n      this.quarterReport.totalYear = result[0].totalYear;\n      this.average = (this.quarterReport.totalMiles / this.quarterReport.totalQuantity).toFixed(2);\n    });\n  }\n\n  getPDF(element) {\n    let quart = this.quarter.split(\"-\");\n    let today = moment().format(\"MMMM Do YYYY\");\n\n    if (this.jurisdictionReport) {\n      const doc = new jsPDF({\n        orientation: \"p\",\n        unit: 'mm',\n        format: 'a4'\n      });\n      let data = this.jurisdictionReport.filter(el => el.fuelType == element.fuelType);\n      let filteredData = [];\n      data.forEach(e => {\n        let d = {\n          jurisdiction: e.jurisdiction,\n          quantity: e.quantity,\n          totalMiles: e.totalMiles\n        };\n        filteredData.push(d);\n      });\n      let dataArray = [];\n      filteredData.forEach(ele => {\n        dataArray.push(Object.values(ele));\n      });\n      autoTable(doc, {\n        styles: {},\n        columnStyles: {},\n        margin: {\n          top: 100\n        },\n        theme: 'striped',\n        headStyles: {\n          fillColor: [0, 0, 0]\n        },\n        head: [{\n          jurisdiction: 'Jurisdiction',\n          quantity: `Quantity(${this.quarterReport.quantityUnit})`,\n          distance: `Distance(${this.quarterReport.distanceUnit})`\n        }],\n        body: dataArray,\n        didDrawPage: data => {\n          doc.setFontSize(20);\n          doc.text('IFTA Report', 15, 15);\n          doc.setFontSize(10);\n          doc.text('Internation Fuel Tax Agreement Report', 15, 20);\n          doc.line(15, 25, 200, 25);\n          doc.addImage('assets/img/fhLogo.png', 160, 5, 40, 14);\n          doc.setFontSize(10);\n          doc.text(\"Carrier Name\", 15, 35);\n          doc.setFontSize(11);\n          doc.text(this.carrierName, 15, 40);\n          doc.setFontSize(10);\n          doc.text(\"Quarter/ Year\", 160, 35);\n          doc.setFontSize(11);\n          doc.text(`${this.quarters[quart[0]]}`, 160, 40);\n          doc.setFontSize(10);\n          doc.text(\"Created Date\", 15, 50);\n          doc.setFontSize(11);\n          doc.text(`${today}`, 15, 55);\n          doc.setFontSize(10);\n          doc.text(\"Created By\", 160, 50);\n          doc.setFontSize(11);\n          doc.text(this.username, 160, 55);\n          doc.setFontSize(10); // doc.text(\"IFTA Report #\",160,50)\n          // doc.setFontSize(11)\n          // doc.text(\"123456\",160,55)\n\n          autoTable(doc, {\n            styles: {},\n            columnStyles: {},\n            margin: {\n              top: 60\n            },\n            theme: 'grid',\n            body: [[`Total Distance: ${element.totalDistance} ${this.quarterReport.distanceUnit}`, `Total Fuel Quantity: ${element.totalQuantity} ${this.quarterReport.distanceUnit}`], [`Total IFTA Distance: ${element.totalIftaDistance} ${this.quarterReport.distanceUnit}`, `Total Non IFTA Distance: ${element.nonIftaDistance} ${this.quarterReport.distanceUnit}`], [`Fuel Type: ${element.fuelType}`, `Average ${this.quarterReport.distanceUnit}/${element.quantityUnit}:${(element.totalDistance / element.totalQuantity).toFixed(2)} ${this.quarterReport.distanceUnit}/${element.quantityUnit}`]]\n          });\n        }\n      });\n      doc.save(`ifta ${this.quarter}-${element.fuelType}.pdf`);\n    }\n  }\n\n  generatePDF() {\n    this.groupByFuelType();\n    this.fuelGroup.forEach(element => {\n      this.getPDF(element);\n    });\n  }\n\n  nextResults() {\n    this.recordNext = true;\n    this.recordDraw += 1;\n    this.recordPrev = true;\n    this.initDataTable();\n  } // prev button func\n\n\n  prevResults() {\n    this.recordNext = true;\n    this.recordPrev = true;\n    this.recordDraw -= 1;\n    this.lastEvaluatedKey = this.recordPrevEvauatedKeys[this.recordDraw];\n    this.initDataTable();\n  }\n\n  fetchCount() {\n    this.apiService.getData('ifta/get/count?quarter=' + this.quarter + '&vehicle=' + this.filterVehicle + '&fuelType=' + this.filterFuel).subscribe({\n      complete: () => {},\n      error: () => {},\n      next: result => {\n        this.recordCount = result.Count;\n        this.initDataTable();\n      }\n    });\n  }\n\n  fetchCountries() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.countries = yield _this2.countryStateCity.GetAllCountries();\n    })();\n  }\n\n  getCanadaStates() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      let states = yield _this3.countryStateCity.GetStatesByCountryCode([\"CA\"]);\n      states.forEach(element => {\n        _this3.canadianStates[element.stateCode] = element.stateName;\n      });\n    })();\n  }\n\n  getUSStates() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      let states = yield _this4.countryStateCity.GetStatesByCountryCode(['US']);\n      states.forEach(element => {\n        _this4.usStates[element.stateCode] = element.stateName;\n      });\n    })();\n  }\n\n  getStartandEndVal() {\n    this.recordStartPoint = this.recordDraw * this.pageLength + 1;\n    this.recordEndPoint = this.recordStartPoint + this.pageLength - 1;\n  }\n\n  initDataTable() {\n    this.spinner.show();\n    this.apiService.getData('ifta/fetch/records?quarter=' + this.quarter + '&vehicle=' + this.filterVehicle + '&fuelType=' + this.filterFuel + '&lastKey=' + this.lastEvaluatedKey).subscribe(result => {\n      if (result.Items.length == 0) {\n        this.dataMessage = Constants.NO_RECORDS_FOUND;\n        this.isRecords = false;\n      } else {\n        this.isRecords = true;\n      }\n\n      this.getStartandEndVal();\n      this.fetchRecords(result);\n\n      if (result['LastEvaluatedKey'] !== undefined) {\n        let lastEvalKey = result[`LastEvaluatedKey`].iftaSK.replace(/#/g, '--');\n        this.recordNext = false; // for prev button\n\n        if (!this.recordPrevEvauatedKeys.includes(lastEvalKey)) {\n          this.recordPrevEvauatedKeys.push(lastEvalKey);\n        }\n\n        this.lastEvaluatedKey = lastEvalKey;\n      } else {\n        this.recordNext = true;\n        this.lastEvaluatedKey = '';\n        this.recordEndPoint = this.recordCount;\n      }\n\n      if (this.recordCount < this.recordEndPoint) {\n        this.recordEndPoint = this.recordCount;\n      }\n\n      if (this.recordDraw > 0) {\n        this.recordPrev = false;\n      } else {\n        this.recordPrev = true;\n      }\n\n      this.spinner.hide();\n    }, err => {\n      this.spinner.hide();\n    });\n  }\n\n  fetchRecords(result) {\n    this.records = result.Items;\n  }\n\n}\n\nMileageComponent.ɵfac = function MileageComponent_Factory(t) {\n  return new (t || MileageComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.NgxSpinnerService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.ListService), i0.ɵɵdirectiveInject(i5.HttpClient), i0.ɵɵdirectiveInject(i6.CountryStateCityService));\n};\n\nMileageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MileageComponent,\n  selectors: [[\"app-mileage\"]],\n  decls: 106,\n  vars: 17,\n  consts: [[1, \"body\"], [1, \"inner-wrapper\"], [\"role\", \"main\", 1, \"content-body\"], [1, \"page-header\"], [\"method\", \"get\", 1, \"form-horizontal\"], [\"class\", \"row px-4\", \"style\", \"padding-top: 10px;\", \"id\", \"vehicle-summary-header\", 4, \"ngIf\"], [1, \"row\"], [1, \"col\"], [1, \"card\"], [1, \"card-body\"], [1, \"\"], [1, \"nav\", \"nav-tabs\", \"top-tabs\", \"pl-3\", 2, \"background-color\", \"white\"], [1, \"nav-item\", \"active\"], [\"href\", \"#iftaVehicle\", \"data-toggle\", \"tab\", 1, \"nav-link\", \"active\", 3, \"click\"], [1, \"nav-item\"], [\"href\", \"#iftaJurisdiction\", \"data-toggle\", \"tab\", 1, \"nav-link\", 3, \"click\"], [1, \"tab-content\", \"mt-3\", 2, \"box-shadow\", \"none\", \"border\", \"none\"], [1, \"row\", \"pr-2\", \"text-center\"], [1, \"col-lg-3\", \"col-md-12\", \"pr-1\", \"mb-2\"], [1, \"safetytile\", \"border\"], [1, \"driverbar\"], [1, \"pull-right\", \"text-10\", \"text-dark\"], [1, \"fas\", \"fa-gas-pump\"], [1, \"pull-left\", \"mt-0\", \"text-5\", \"font-weight-semibold\", \"text-dark\"], [1, \"text-5\", \"font-weight-bold\", \"pull-left\", \"mb-0\", \"mt-0\", \"text-dark\"], [1, \"col-lg-2\", \"col-md-12\", \"pr-1\", \"mb-2\"], [1, \"fas\", \"fa-prescription-bottle\"], [1, \"fas\", \"fa-usd\"], [\"id\", \"iftaJurisdiction\", 1, \"tab-pane\"], [1, \"col-lg-12\"], [\"id\", \"ifta\", 1, \"table\", \"table-responsive-lg\", \"mb-0\", \"table-bordered\", \"table-striped\", \"simple-table\"], [\"class\", \"text-center\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"iftaVehicle\", 1, \"tab-pane\", \"active\"], [\"id\", \"datatable-default\", 1, \"table\", \"table-bordered\", \"table-responsive-lg\", \"table-striped\", \"mb-0\"], [\"class\", \"row mt-3 dtPaginate\", 4, \"ngIf\"], [\"id\", \"vehicle-summary-header\", 1, \"row\", \"px-4\", 2, \"padding-top\", \"10px\"], [1, \"col-md-2\", \"col-lg-2\"], [1, \"input-group\", \"input-group-md\", \"mb-3\"], [\"name\", \"filterVehicle\", \"placeholder\", \"Select Vehicle\", 1, \"form-control\", \"populate\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-lg-2\"], [\"data-plugin-selectTwo\", \"\", \"name\", \"filterFuel\", \"placeholder\", \"Select Fuel Type\", 1, \"form-control\", \"populate\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-success\", \"mr-3\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-success\", 3, \"click\"], [1, \"col-md-5\", \"col-lg-5\", \"text-right\", \"pr-1\"], [1, \"btn\", \"btn-success\", \"btn-sm\", \"ml-2\", 2, \"color\", \"#fff\", 3, \"click\"], [1, \"fas\", \"fa-plus\"], [3, \"value\"], [1, \"text-center\"], [\"colspan\", \"12\"], [4, \"ngIf\"], [1, \"row\", \"mt-3\", \"dtPaginate\"], [1, \"col-6\"], [1, \"col-6\", \"text-right\"], [\"type\", \"button\", 1, \"btn\", \"btn-default\", \"mr-2\", 3, \"disabled\", \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-default\", 3, \"disabled\", \"click\"]],\n  template: function MileageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"section\", 2);\n      i0.ɵɵelementStart(3, \"header\", 3);\n      i0.ɵɵelementStart(4, \"form\", 4);\n      i0.ɵɵtemplate(5, MileageComponent_div_5_Template, 17, 4, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 6);\n      i0.ɵɵelementStart(7, \"div\", 7);\n      i0.ɵɵelementStart(8, \"section\", 8);\n      i0.ɵɵelementStart(9, \"div\", 9);\n      i0.ɵɵelementStart(10, \"div\", 10);\n      i0.ɵɵelementStart(11, \"ul\", 11);\n      i0.ɵɵelementStart(12, \"li\", 12);\n      i0.ɵɵelementStart(13, \"a\", 13);\n      i0.ɵɵlistener(\"click\", function MileageComponent_Template_a_click_13_listener() {\n        return ctx.fetchVehicleSumary();\n      });\n      i0.ɵɵtext(14, \"Vehicle Summary\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"li\", 14);\n      i0.ɵɵelementStart(16, \"a\", 15);\n      i0.ɵɵlistener(\"click\", function MileageComponent_Template_a_click_16_listener() {\n        return ctx.fetchJurisdictionSumary();\n      });\n      i0.ɵɵtext(17, \"Jurisdiction Summary\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 16);\n      i0.ɵɵelementStart(19, \"div\", 17);\n      i0.ɵɵelementStart(20, \"div\", 18);\n      i0.ɵɵelementStart(21, \"div\", 19);\n      i0.ɵɵelementStart(22, \"div\", 20);\n      i0.ɵɵelementStart(23, \"span\", 21);\n      i0.ɵɵelement(24, \"i\", 22);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"h2\", 23);\n      i0.ɵɵtext(26, \"Total Distance (All States) \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"div\", 10);\n      i0.ɵɵelementStart(28, \"h1\", 24);\n      i0.ɵɵtext(29);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"div\", 25);\n      i0.ɵɵelementStart(31, \"div\", 19);\n      i0.ɵɵelementStart(32, \"div\", 20);\n      i0.ɵɵelementStart(33, \"span\", 21);\n      i0.ɵɵelement(34, \"i\", 26);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"h2\", 23);\n      i0.ɵɵtext(36, \"Total Fuel Quantity\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"div\", 10);\n      i0.ɵɵelementStart(38, \"h1\", 24);\n      i0.ɵɵtext(39);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"div\", 25);\n      i0.ɵɵelementStart(41, \"div\", 19);\n      i0.ɵɵelementStart(42, \"div\", 20);\n      i0.ɵɵelementStart(43, \"span\", 21);\n      i0.ɵɵelement(44, \"i\", 26);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(45, \"h2\", 23);\n      i0.ɵɵtext(46);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"div\", 10);\n      i0.ɵɵelementStart(48, \"h1\", 24);\n      i0.ɵɵtext(49);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(50, \"div\", 25);\n      i0.ɵɵelementStart(51, \"div\", 19);\n      i0.ɵɵelementStart(52, \"div\", 20);\n      i0.ɵɵelementStart(53, \"span\", 21);\n      i0.ɵɵelement(54, \"i\", 22);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(55, \"h2\", 23);\n      i0.ɵɵtext(56, \"Total IFTA Miles \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(57, \"div\", 10);\n      i0.ɵɵelementStart(58, \"h1\", 24);\n      i0.ɵɵtext(59);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(60, \"div\", 25);\n      i0.ɵɵelementStart(61, \"div\", 19);\n      i0.ɵɵelementStart(62, \"div\", 20);\n      i0.ɵɵelementStart(63, \"span\", 21);\n      i0.ɵɵelement(64, \"i\", 27);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(65, \"h2\", 23);\n      i0.ɵɵtext(66, \"Total Non-IFTA Miles \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(67, \"div\", 10);\n      i0.ɵɵelementStart(68, \"h1\", 24);\n      i0.ɵɵtext(69);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(70, \"div\", 28);\n      i0.ɵɵelementStart(71, \"div\", 6);\n      i0.ɵɵelementStart(72, \"div\", 29);\n      i0.ɵɵelementStart(73, \"table\", 30);\n      i0.ɵɵelementStart(74, \"thead\");\n      i0.ɵɵelementStart(75, \"tr\");\n      i0.ɵɵelementStart(76, \"th\");\n      i0.ɵɵtext(77, \"Jurisdiction\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(78, \"th\");\n      i0.ɵɵtext(79);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(80, \"th\");\n      i0.ɵɵtext(81);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(82, \"th\");\n      i0.ɵɵtext(83, \"Fuel Type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(84, \"tbody\");\n      i0.ɵɵtemplate(85, MileageComponent_tr_85_Template, 3, 1, \"tr\", 31);\n      i0.ɵɵtemplate(86, MileageComponent_tr_86_Template, 10, 5, \"tr\", 32);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(87, \"div\", 33);\n      i0.ɵɵelementStart(88, \"div\");\n      i0.ɵɵelementStart(89, \"table\", 34);\n      i0.ɵɵelementStart(90, \"thead\");\n      i0.ɵɵelementStart(91, \"tr\");\n      i0.ɵɵelementStart(92, \"th\");\n      i0.ɵɵtext(93, \"Vehicle Number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(94, \"th\");\n      i0.ɵɵtext(95, \"Jurisdiction\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(96, \"th\");\n      i0.ɵɵtext(97);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(98, \"th\");\n      i0.ɵɵtext(99);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(100, \"th\");\n      i0.ɵɵtext(101, \"Fuel Type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(102, \"tbody\");\n      i0.ɵɵtemplate(103, MileageComponent_tr_103_Template, 3, 1, \"tr\", 31);\n      i0.ɵɵtemplate(104, MileageComponent_tr_104_Template, 12, 6, \"tr\", 32);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(105, MileageComponent_div_105_Template, 8, 5, \"div\", 35);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"vehicle\");\n      i0.ɵɵadvance(24);\n      i0.ɵɵtextInterpolate1(\" \", ctx.quarterReport.totalMiles, \"\");\n      i0.ɵɵadvance(10);\n      i0.ɵɵtextInterpolate1(\" \", ctx.quarterReport.totalQuantity, \"\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate2(\"Average \", ctx.quarterReport.distanceUnit, \"/\", ctx.quarterReport.quantityUnit, \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", ctx.average, \"\");\n      i0.ɵɵadvance(10);\n      i0.ɵɵtextInterpolate1(\" \", ctx.quarterReport.iftaDistance, \"\");\n      i0.ɵɵadvance(10);\n      i0.ɵɵtextInterpolate1(\" \", ctx.quarterReport.nonIftaDistance, \"\");\n      i0.ɵɵadvance(10);\n      i0.ɵɵtextInterpolate1(\"Distance (\", ctx.quarterReport.distanceUnit, \")\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Fuel Quantity (\", ctx.quarterReport.quantityUnit, \")\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", !ctx.jurisdictionReport);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.jurisdictionReport);\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate1(\"Distance (\", ctx.quarterReport.distanceUnit, \")\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Fuel (\", ctx.quarterReport.quantityUnit, \")\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isRecords);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.records);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isRecords);\n    }\n  },\n  directives: [i7.ɵNgNoValidate, i7.NgControlStatusGroup, i7.NgForm, i8.NgIf, i8.NgForOf, i9.NgSelectComponent, i7.NgControlStatus, i7.NgModel, i9.ɵr],\n  styles: [\".fuelDetailModalWidth[_ngcontent-%COMP%]{\\r\\n    width: 1300px;\\r\\n}\\r\\n.fuelDetailModal[_ngcontent-%COMP%]{\\r\\n    max-width: 1300px !important;\\r\\n}\"]\n});","map":null,"metadata":{},"sourceType":"module"}