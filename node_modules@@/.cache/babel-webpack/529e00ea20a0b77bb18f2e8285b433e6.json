{"ast":null,"code":"import _asyncToGenerator from \"C:/FH/fh-cloud-app/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as moment from \"moment\";\nimport { from } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/common/http\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@ng-select/ng-select\";\nimport * as i8 from \"@ng-bootstrap/ng-bootstrap\";\n\nfunction AddVendorCreditNoteComponent_ng_option_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ng-option\", 61);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const data_r17 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", data_r17.contactID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", data_r17.companyName, \" \");\n  }\n}\n\nfunction AddVendorCreditNoteComponent_div_31_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Vendor is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddVendorCreditNoteComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 62);\n    i0.ɵɵtemplate(1, AddVendorCreditNoteComponent_div_31_div_1_Template, 2, 0, \"div\", 63);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r1 = i0.ɵɵreference(29);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1.errors.required);\n  }\n}\n\nfunction AddVendorCreditNoteComponent_ng_option_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ng-option\", 61);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const data_r19 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", data_r19.purchaseID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", data_r19.orderNo, \" \");\n  }\n}\n\nfunction AddVendorCreditNoteComponent_div_42_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Purchase order# is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddVendorCreditNoteComponent_div_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 62);\n    i0.ɵɵtemplate(1, AddVendorCreditNoteComponent_div_42_div_1_Template, 2, 0, \"div\", 63);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r4 = i0.ɵɵreference(40);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r4.errors.required);\n  }\n}\n\nfunction AddVendorCreditNoteComponent_div_52_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Vendor Credit Date is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddVendorCreditNoteComponent_div_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 62);\n    i0.ɵɵtemplate(1, AddVendorCreditNoteComponent_div_52_div_1_Template, 2, 0, \"div\", 63);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r8 = i0.ɵɵreference(51);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r8.errors.required);\n  }\n}\n\nfunction AddVendorCreditNoteComponent_div_72_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Vendor Credit Date is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddVendorCreditNoteComponent_div_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 62);\n    i0.ɵɵtemplate(1, AddVendorCreditNoteComponent_div_72_div_1_Template, 2, 0, \"div\", 63);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r10 = i0.ɵɵreference(67);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r10.errors.required);\n  }\n}\n\nfunction AddVendorCreditNoteComponent_tr_115_ng_option_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ng-option\", 61);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"titlecase\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const act_r26 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", act_r26.actID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", act_r26.actNo, \" - \", i0.ɵɵpipeBind1(2, 3, act_r26.actName), \"\");\n  }\n}\n\nfunction AddVendorCreditNoteComponent_tr_115_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵelementStart(2, \"input\", 64);\n    i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_tr_115_Template_input_ngModelChange_2_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const dt_r23 = restoredCtx.$implicit;\n      return dt_r23.commodity = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelementStart(4, \"input\", 65);\n    i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_tr_115_Template_input_ngModelChange_4_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const dt_r23 = restoredCtx.$implicit;\n      return dt_r23.desc = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelementStart(6, \"div\", 27);\n    i0.ɵɵelementStart(7, \"div\", 66);\n    i0.ɵɵelementStart(8, \"input\", 67);\n    i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_tr_115_Template_input_ngModelChange_8_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const dt_r23 = restoredCtx.$implicit;\n      return dt_r23.qty = $event;\n    })(\"change\", function AddVendorCreditNoteComponent_tr_115_Template_input_change_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const d_r24 = restoredCtx.index;\n      const ctx_r31 = i0.ɵɵnextContext();\n      return ctx_r31.calculateAmount(d_r24);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 68);\n    i0.ɵɵelementStart(10, \"input\", 69);\n    i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_tr_115_Template_input_ngModelChange_10_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const dt_r23 = restoredCtx.$implicit;\n      return dt_r23.qtyUnit = $event;\n    })(\"change\", function AddVendorCreditNoteComponent_tr_115_Template_input_change_10_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const d_r24 = restoredCtx.index;\n      const ctx_r33 = i0.ɵɵnextContext();\n      return ctx_r33.changeUnit($event.target.value, d_r24);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵelementStart(12, \"div\", 27);\n    i0.ɵɵelementStart(13, \"div\", 66);\n    i0.ɵɵelementStart(14, \"input\", 70);\n    i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_tr_115_Template_input_ngModelChange_14_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const dt_r23 = restoredCtx.$implicit;\n      return dt_r23.rate = $event;\n    })(\"change\", function AddVendorCreditNoteComponent_tr_115_Template_input_change_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const d_r24 = restoredCtx.index;\n      const ctx_r35 = i0.ɵɵnextContext();\n      return ctx_r35.calculateAmount(d_r24);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 68);\n    i0.ɵɵelementStart(16, \"input\", 69);\n    i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_tr_115_Template_input_ngModelChange_16_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const dt_r23 = restoredCtx.$implicit;\n      return dt_r23.rateUnit = $event;\n    })(\"change\", function AddVendorCreditNoteComponent_tr_115_Template_input_change_16_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const d_r24 = restoredCtx.index;\n      const ctx_r37 = i0.ɵɵnextContext();\n      return ctx_r37.changeUnit($event.target.value, d_r24);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵelementStart(18, \"div\", 27);\n    i0.ɵɵelementStart(19, \"div\", 12);\n    i0.ɵɵelementStart(20, \"input\", 71);\n    i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_tr_115_Template_input_ngModelChange_20_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const dt_r23 = restoredCtx.$implicit;\n      return dt_r23.amount = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\");\n    i0.ɵɵelementStart(22, \"ng-select\", 72);\n    i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_tr_115_Template_ng_select_ngModelChange_22_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const dt_r23 = restoredCtx.$implicit;\n      return dt_r23.accountID = $event;\n    });\n    i0.ɵɵtemplate(23, AddVendorCreditNoteComponent_tr_115_ng_option_23_Template, 3, 5, \"ng-option\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"td\", 73);\n    i0.ɵɵelementStart(25, \"button\", 74);\n    i0.ɵɵlistener(\"click\", function AddVendorCreditNoteComponent_tr_115_Template_button_click_25_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r28);\n      const d_r24 = restoredCtx.index;\n      const ctx_r40 = i0.ɵɵnextContext();\n      return ctx_r40.deleteDetail(d_r24);\n    });\n    i0.ɵɵelement(26, \"i\", 75);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const dt_r23 = ctx.$implicit;\n    const d_r24 = ctx.index;\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"commodity\", d_r24, \"\");\n    i0.ɵɵproperty(\"ngModel\", dt_r23.commodity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"desc\", d_r24, \"\");\n    i0.ɵɵproperty(\"ngModel\", dt_r23.desc);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"qty\", d_r24, \"\");\n    i0.ɵɵproperty(\"ngModel\", dt_r23.qty);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"qtyUnit\", d_r24, \"\");\n    i0.ɵɵproperty(\"ngModel\", dt_r23.qtyUnit);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"rate\", d_r24, \"\");\n    i0.ɵɵproperty(\"ngModel\", dt_r23.rate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"rateUnit\", d_r24, \"\");\n    i0.ɵɵproperty(\"ngModel\", dt_r23.rateUnit);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"amount\", d_r24, \"\");\n    i0.ɵɵproperty(\"ngModel\", dt_r23.amount);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"accountID\", d_r24, \"\");\n    i0.ɵɵproperty(\"ngModel\", dt_r23.accountID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r12.accounts);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r12.creditData.crDetails.length === 1);\n  }\n}\n\nfunction AddVendorCreditNoteComponent_span_135_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 62);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r13.filesError, \" \");\n  }\n}\n\nfunction AddVendorCreditNoteComponent_div_136_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r45 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelementStart(6, \"a\", 77);\n    i0.ɵɵelement(7, \"img\", 78);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 79);\n    i0.ɵɵelementStart(9, \"a\", 80);\n    i0.ɵɵlistener(\"click\", function AddVendorCreditNoteComponent_div_136_tr_12_Template_a_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r45);\n      const doc_r42 = restoredCtx.$implicit;\n      const d_r43 = restoredCtx.index;\n      const ctx_r44 = i0.ɵɵnextContext(2);\n      return ctx_r44.deleteDocument(doc_r42.displayName, d_r43);\n    });\n    i0.ɵɵelement(10, \"em\", 81);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const doc_r42 = ctx.$implicit;\n    const d_r43 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(d_r43 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(doc_r42.displayName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", doc_r42.docPath, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", doc_r42.imgPath, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction AddVendorCreditNoteComponent_div_136_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 76);\n    i0.ɵɵelementStart(1, \"table\", 41);\n    i0.ɵɵelementStart(2, \"thead\");\n    i0.ɵɵelementStart(3, \"th\");\n    i0.ɵɵtext(4, \"Sr.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Icon/Thumbnail\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Action\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"tbody\");\n    i0.ɵɵtemplate(12, AddVendorCreditNoteComponent_div_136_tr_12_Template, 11, 4, \"tr\", 46);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r14.oldDocs);\n  }\n}\n\nfunction AddVendorCreditNoteComponent_button_147_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r47 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 82);\n    i0.ɵɵlistener(\"click\", function AddVendorCreditNoteComponent_button_147_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r47);\n      const ctx_r46 = i0.ɵɵnextContext();\n      return ctx_r46.addNotes();\n    });\n    i0.ɵɵtext(1, \" Save \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext();\n\n    const _r0 = i0.ɵɵreference(18);\n\n    i0.ɵɵproperty(\"disabled\", !_r0.form.valid || ctx_r15.submitDisabled);\n  }\n}\n\nfunction AddVendorCreditNoteComponent_button_148_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r49 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 82);\n    i0.ɵɵlistener(\"click\", function AddVendorCreditNoteComponent_button_148_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r49);\n      const ctx_r48 = i0.ɵɵnextContext();\n      return ctx_r48.updateNotes();\n    });\n    i0.ɵɵtext(1, \" Update \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r16.submitDisabled);\n  }\n}\n\nexport class AddVendorCreditNoteComponent {\n  constructor(listService, route, toaster, location, accountService, httpClient) {\n    this.listService = listService;\n    this.route = route;\n    this.toaster = toaster;\n    this.location = location;\n    this.accountService = accountService;\n    this.httpClient = httpClient;\n    this.submitDisabled = false;\n    this.total = 0;\n    this.creditData = {\n      txnDate: moment().format(\"YYYY-MM-DD\"),\n      currency: \"CAD\",\n      crRef: \"\",\n      purOrder: null,\n      vendorID: null,\n      crDetails: [{\n        commodity: \"\",\n        desc: \"\",\n        qty: 0,\n        qtyUnit: null,\n        rate: 0,\n        rateUnit: null,\n        amount: 0,\n        accountID: null\n      }],\n      remarks: \"\",\n      totalAmt: 0,\n      transactionLog: []\n    };\n    this.accounts = [];\n    this.vendors = [];\n    this.errors = {};\n    this.response = \"\";\n    this.hasError = false;\n    this.hasSuccess = false;\n    this.Error = \"\";\n    this.pageTitle = \"Add\";\n    this.units = [];\n    this.purchaseOrders = [];\n    this.filesError = '';\n    this.docs = [];\n    this.oldDocs = [];\n    this.removedDocs = [];\n  }\n\n  ngOnInit() {\n    this.creditID = this.route.snapshot.params[`creditID`];\n\n    if (this.creditID) {\n      this.pageTitle = \"Edit\";\n      this.fetchCredit();\n    } else {\n      this.pageTitle = \"Add\";\n    }\n\n    this.fetchAccounts();\n    this.fetchQuantityUnits();\n    this.listService.fetchVendors();\n    let vendorList = new Array();\n    this.getValidVendors(vendorList);\n    this.vendors = vendorList;\n  }\n\n  getValidVendors(vendorList) {\n    let ids = [];\n    this.listService.vendorList.forEach(element => {\n      element.forEach(element2 => {\n        if (element2.isDeleted === 0 && !ids.includes(element2.contactID)) {\n          vendorList.push(element2);\n          ids.push(element2.contactID);\n        }\n      });\n    });\n  }\n\n  refreshVendorData() {\n    this.listService.fetchVendors();\n  }\n\n  openModal(unit) {\n    this.listService.triggerModal(unit);\n    localStorage.setItem(\"isOpen\", \"true\");\n    this.listService.changeButton(false);\n  }\n\n  fetchQuantityUnits() {\n    this.httpClient.get(\"assets/jsonFiles/quantityTypes.json\").subscribe(data => {\n      this.units = data;\n    });\n  }\n\n  fetchAccounts() {\n    this.accountService.getData(`chartAc/fetch/list`).subscribe(res => {\n      this.accounts = res;\n    });\n  }\n\n  changeUnit(value, i) {\n    this.creditData.crDetails[i].qtyUnit = value;\n    this.creditData.crDetails[i].rateUnit = value;\n  }\n\n  addDetails() {\n    const lastInd = this.creditData.crDetails.length - 1;\n\n    if (this.creditData.crDetails[lastInd].commodity !== \"\" && this.creditData.crDetails[lastInd].qty > 0 && this.creditData.crDetails[lastInd].qtyUnit != null && this.creditData.crDetails[lastInd].rateUnit != null && this.creditData.crDetails[lastInd].rate > 0 && this.creditData.crDetails[lastInd].accountID != null) {\n      this.creditData.crDetails.push({\n        commodity: \"\",\n        desc: \"\",\n        qty: 0,\n        qtyUnit: null,\n        rate: 0,\n        rateUnit: null,\n        amount: 0,\n        accountID: null\n      });\n    }\n  }\n\n  deleteDetail(d) {\n    this.total -= this.creditData.crDetails[d].amount;\n    this.creditData.crDetails.splice(d, 1);\n  }\n\n  calculateAmount(i) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let total = 0;\n      let amount = _this.creditData.crDetails[i].qty * _this.creditData.crDetails[i].rate;\n      _this.creditData.crDetails[i].amount = parseFloat(amount.toFixed(2));\n\n      _this.creditData.crDetails.forEach(element => {\n        total += element.amount;\n      });\n\n      _this.total = total;\n    })();\n  }\n\n  cancel() {\n    this.location.back(); // <-- go back to previous location on cancel\n  }\n\n  addNotes() {\n    for (let i = 0; i < this.creditData.crDetails.length; i++) {\n      const element = this.creditData.crDetails[i];\n\n      if (element.commodity === \"\" || element.qty <= 0 || element.qtyUnit === null || element.rateUnit == null || element.rate <= 0 || element.accountID === null) {\n        this.toaster.error(\"Please enter valid credit details\");\n        return false;\n      }\n    }\n\n    this.submitDisabled = true;\n    this.creditData.totalAmt = this.total; // create form data instance\n\n    const formData = new FormData(); //append docs if any\n\n    for (let j = 0; j < this.docs.length; j++) {\n      formData.append(\"docs\", this.docs[j]);\n    } //append other fields\n\n\n    formData.append(\"data\", JSON.stringify(this.creditData));\n    this.accountService.postData(`vendor-credits`, formData, true).subscribe({\n      complete: () => {},\n      error: err => {\n        this.submitDisabled = false;\n        from(err.error).pipe(map(val => {\n          val.message = val.message.replace(/\".*\"/, \"This Field\");\n          this.errors[val.context.key] = val.message;\n        })).subscribe({\n          complete: () => {\n            this.submitDisabled = false; // this.throwErrors();\n          },\n          error: () => {// this.submitDisabled = false;\n          },\n          next: () => {}\n        });\n      },\n      next: res => {\n        this.submitDisabled = false;\n        this.response = res;\n        this.toaster.success(\"Credit note added successfully.\");\n        this.cancel();\n      }\n    });\n  }\n\n  fetchCredit() {\n    this.accountService.getData(`vendor-credits/detail/${this.creditID}`).subscribe(res => {\n      let result = res[0];\n      this.creditData.purOrder = result.purOrder;\n      this.creditData.currency = result.currency;\n      this.creditData.crRef = result.crRef;\n      this.creditData.txnDate = result.txnDate;\n      this.creditData.vCrNo = result.vCrNo;\n      this.creditData.vendorID = result.vendorID;\n      this.creditData.crDetails = result.crDetails;\n      this.creditData.remarks = result.remarks;\n      this.creditData.docs = result.docs;\n      this.total = result.totalAmt;\n\n      if (result.docs && result.docs.length > 0) {\n        result.docs.forEach(x => {\n          let obj = {};\n\n          if (x.storedName.split(\".\")[1] === \"jpg\" || x.storedName.split(\".\")[1] === \"png\" || x.storedName.split(\".\")[1] === \"jpeg\") {\n            obj = {\n              imgPath: `${x.urlPath}`,\n              docPath: `${x.urlPath}`,\n              displayName: x.displayName,\n              name: x.storedName,\n              ext: x.storedName.split(\".\")[1]\n            };\n          } else {\n            obj = {\n              imgPath: \"assets/img/icon-pdf.png\",\n              docPath: `${x.urlPath}`,\n              displayName: x.displayName,\n              name: x.storedName,\n              ext: x.storedName.split(\".\")[1]\n            };\n          }\n\n          this.oldDocs.push(obj);\n        });\n      }\n\n      this.fetchPurchaseOrders();\n    });\n  }\n\n  updateNotes() {\n    this.submitDisabled = true;\n    this.creditData.totalAmt = this.total;\n    this.creditData.removedDocs = this.removedDocs; // create form data instance\n\n    const formData = new FormData(); //append docs if any\n\n    for (let j = 0; j < this.docs.length; j++) {\n      formData.append(\"docs\", this.docs[j]);\n    } //append other fields\n\n\n    formData.append(\"data\", JSON.stringify(this.creditData));\n    this.accountService.putData(`vendor-credits/update/${this.creditID}`, formData, true).subscribe({\n      complete: () => {},\n      error: err => {\n        this.submitDisabled = false;\n        from(err.error).pipe(map(val => {\n          val.message = val.message.replace(/\".*\"/, \"This Field\");\n          this.errors[val.context.key] = val.message;\n        })).subscribe({\n          complete: () => {//this.submitDisabled = false;\n            // this.throwErrors();\n          },\n          error: () => {// this.submitDisabled = false;\n          },\n          next: () => {}\n        });\n      },\n      next: res => {\n        // this.submitDisabled = false;\n        this.response = res;\n        this.toaster.success(\"Credit note updated successfully.\");\n        this.cancel();\n      }\n    });\n  }\n\n  fetchPurchaseOrders() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.purchaseOrders = [];\n\n      if (_this2.creditData.vendorID) {\n        let result = yield _this2.accountService.getData(`purchase-orders/vendor/all/${_this2.creditData.vendorID}`).toPromise();\n        _this2.purchaseOrders = result;\n      }\n    })();\n  }\n\n  uploadDocs(documents) {\n    this.filesError = '';\n    this.docs = [];\n    let files = [...documents];\n    let filesSize = 0;\n\n    if (files.length > 5) {\n      this.toaster.error(\"Files count limit exceeded\");\n      this.filesError = \"Files should not be more than 5\";\n      return;\n    }\n\n    for (let i = 0; i < files.length; i++) {\n      filesSize += files[i].size / 1024 / 1024;\n\n      if (filesSize > 10) {\n        this.toaster.error(\"Files size limit exceeded\");\n        this.filesError = 'Files size limit exceeded. Files size should be less than 10mb';\n        return;\n      } else {\n        let name = files[i].name.split(\".\");\n        let ext = name[name.length - 1].toLowerCase();\n\n        if (ext == \"doc\" || ext == \"docx\" || ext == \"pdf\" || ext == \"jpg\" || ext == \"jpeg\" || ext == \"png\") {\n          this.docs.push(files[i]);\n        } else {\n          this.filesError = \"Only .doc, .docx, .pdf, .jpg, .jpeg and png files allowed.\";\n        }\n      }\n    }\n  }\n\n  deleteDocument(name, index) {\n    this.oldDocs.filter(elem => {\n      if (elem.displayName === name) {\n        let obj = {\n          storedName: elem.name,\n          displayName: elem.displayName\n        };\n        this.removedDocs.push(obj);\n        ;\n      }\n    });\n    this.oldDocs.splice(index, 1);\n  }\n\n}\n\nAddVendorCreditNoteComponent.ɵfac = function AddVendorCreditNoteComponent_Factory(t) {\n  return new (t || AddVendorCreditNoteComponent)(i0.ɵɵdirectiveInject(i1.ListService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.ToastrService), i0.ɵɵdirectiveInject(i4.Location), i0.ɵɵdirectiveInject(i1.AccountService), i0.ɵɵdirectiveInject(i5.HttpClient));\n};\n\nAddVendorCreditNoteComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddVendorCreditNoteComponent,\n  selectors: [[\"app-add-vendor-credit-note\"]],\n  decls: 149,\n  vars: 25,\n  consts: [[1, \"body\"], [1, \"inner-wrapper\"], [\"role\", \"main\", 1, \"content-body\", \"pl-0\", \"pr-0\", \"pt-0\"], [1, \"page-header\"], [1, \"row\", 2, \"padding-top\", \"10px\"], [1, \"col-md-4\", \"col-lg-4\"], [1, \"font-weight-bold\", \"text-4\", \"text-dark\"], [1, \"col-md-8\", \"col-lg-8\", \"text-right\", \"pr-4\"], [\"routerLink\", \"/accounts/purchases/vendor-credit-notes/list\", 1, \"btn\", \"btn-default\", \"btn-sm\"], [1, \"fas\", \"fa-list\"], [1, \"m-2\"], [1, \"row\", \"mb-3\"], [1, \"col-lg-12\"], [1, \"\"], [1, \"bg-white\", \"p-3\", \"text-dark\"], [\"method\", \"post\", \"id\", \"creditForm\", 1, \"form-horizontal\", \"form-bordered\"], [\"creditForm\", \"ngForm\"], [1, \"row\", \"adddriverpl\", \"pt-3\"], [1, \"col-lg-6\"], [1, \"row\", \"pt-2\"], [1, \"col-lg-10\"], [1, \"control-label\", \"font-weight-bold\", \"font-bold\", \"text-lg-right\", \"pt-2\"], [1, \"mandfield\", \"text-2\", \"ml-1\"], [\"name\", \"vendorID\", \"placeholder\", \"Select Vendor\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"vendorID\", \"ngModel\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-lg-5\"], [\"name\", \"purOrder\", \"placeholder\", \"Select Purchase Order#\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"pOrder\", \"ngModel\"], [\"type\", \"text\", \"name\", \"txnDate\", \"ngbDatepicker\", \"\", \"placeholder\", \"mm/dd/yyyy\", \"readonly\", \"\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"click\"], [\"vCreDate\", \"ngbDatepicker\", \"cDate\", \"ngModel\"], [\"type\", \"text\", \"name\", \"crRef\", \"placeholder\", \"Enter Unique Reference Number\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"currency\", \"placeholder\", \"Select Vendor\", \"required\", \"\", 3, \"clearable\", \"ngModel\", \"ngModelChange\"], [\"cur\", \"ngModel\"], [\"value\", \"CAD\"], [\"value\", \"USD\"], [1, \"col-lg-11\"], [1, \"font-weight-bold\", \"text-5\"], [1, \"col-12\"], [1, \"table\", \"table-bordered\"], [2, \"width\", \"250px\"], [2, \"width\", \"180px\"], [2, \"width\", \"300px\"], [\"width\", \"5%\"], [4, \"ngFor\", \"ngForOf\"], [1, \"d-flex\", \"justify-content-between\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", \"btn-sm\", 3, \"click\"], [1, \"fas\", \"fa-plus\"], [1, \"h6\", \"font-semi-bold\", \"ml-3\"], [1, \"row\", \"adddriverpl\", \"mt-3\"], [1, \"btn\", \"btn-default\", \"btn-file\", \"btn-xs\", \"w100\", \"text-left\"], [\"type\", \"file\", \"multiple\", \"\", \"name\", \"files\", 1, \"\", 3, \"ngModel\", \"change\", \"ngModelChange\"], [\"class\", \"col-10 mt-3\", \"style\", \"max-height: 256px; overflow: scroll\", 4, \"ngIf\"], [1, \"control-label\", \"font-weight-bold\", \"text-4\", \"text-dark\"], [\"rows\", \"6\", \"name\", \"remarks\", 1, \"form-control\", \"heighta\", 3, \"ngModel\", \"ngModelChange\"], [1, \"form-group\", \"row\", \"mt-4\"], [1, \"col-lg-11\", \"pr-1\", \"text-right\"], [\"type\", \"button\", \"routerLink\", \"/accounts/purchases/vendor-credit-notes/list\", 1, \"btn\", \"btn-default\", \"mr-3\"], [\"class\", \"btn btn-success\", \"type\", \"button\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [3, \"value\"], [1, \"text-danger\"], [4, \"ngIf\"], [\"type\", \"text\", \"placeholder\", \"Enter commodity\", 1, \"form-control\", 3, \"ngModel\", \"name\", \"ngModelChange\"], [\"type\", \"text\", \"placeholder\", \"Description\", 1, \"form-control\", 3, \"ngModel\", \"name\", \"ngModelChange\"], [1, \"col-lg-6\", \"pr-1\"], [\"type\", \"text\", \"placeholder\", \"Enter commodity/service\", 1, \"form-control\", 3, \"ngModel\", \"name\", \"ngModelChange\", \"change\"], [1, \"col-lg-6\", \"pl-1\"], [\"type\", \"text\", \"placeholder\", \"unit type\", 1, \"form-control\", \"populate\", 3, \"ngModel\", \"name\", \"ngModelChange\", \"change\"], [\"type\", \"text\", \"placeholder\", \"Enter rate\", 1, \"form-control\", 3, \"ngModel\", \"name\", \"ngModelChange\", \"change\"], [\"type\", \"text\", \"disabled\", \"\", \"placeholder\", \"Enter Amount\", 1, \"form-control\", 3, \"ngModel\", \"name\", \"ngModelChange\"], [\"placeholder\", \"Select account\", 1, \"form-control\", \"populate\", 3, \"ngModel\", \"name\", \"ngModelChange\"], [1, \"text-center\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", \"btn-sm\", 3, \"disabled\", \"click\"], [1, \"fas\", \"fa-minus\"], [1, \"col-10\", \"mt-3\", 2, \"max-height\", \"256px\", \"overflow\", \"scroll\"], [\"target\", \"_blank\", 1, \"image-popup-no-margins\", 3, \"href\"], [1, \"img-fluid\", \"img_thumbnail\", 3, \"src\"], [1, \"cursorpoint\", \"text-center\"], [\"href\", \"javascript:;\", 1, \"modal-with-form\", 3, \"click\"], [1, \"fas\", \"fa-times\", \"text-danger\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"disabled\", \"click\"]],\n  template: function AddVendorCreditNoteComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r50 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"section\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"section\", 2);\n      i0.ɵɵelementStart(3, \"header\", 3);\n      i0.ɵɵelementStart(4, \"div\", 4);\n      i0.ɵɵelementStart(5, \"div\", 5);\n      i0.ɵɵelementStart(6, \"h4\", 6);\n      i0.ɵɵtext(7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 7);\n      i0.ɵɵelementStart(9, \"a\", 8);\n      i0.ɵɵelement(10, \"i\", 9);\n      i0.ɵɵtext(11, \" All Vendor Credits\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"section\", 10);\n      i0.ɵɵelementStart(13, \"div\", 11);\n      i0.ɵɵelementStart(14, \"div\", 12);\n      i0.ɵɵelementStart(15, \"div\", 13);\n      i0.ɵɵelementStart(16, \"div\", 14);\n      i0.ɵɵelementStart(17, \"form\", 15, 16);\n      i0.ɵɵelementStart(19, \"div\", 17);\n      i0.ɵɵelementStart(20, \"div\", 18);\n      i0.ɵɵelementStart(21, \"div\", 19);\n      i0.ɵɵelementStart(22, \"div\", 20);\n      i0.ɵɵelementStart(23, \"label\", 21);\n      i0.ɵɵtext(24, \"Vendor \");\n      i0.ɵɵelementStart(25, \"span\", 22);\n      i0.ɵɵelementStart(26, \"sup\");\n      i0.ɵɵtext(27, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"ng-select\", 23, 24);\n      i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_Template_ng_select_ngModelChange_28_listener($event) {\n        return ctx.creditData.vendorID = $event;\n      })(\"change\", function AddVendorCreditNoteComponent_Template_ng_select_change_28_listener() {\n        return ctx.fetchPurchaseOrders();\n      });\n      i0.ɵɵtemplate(30, AddVendorCreditNoteComponent_ng_option_30_Template, 2, 2, \"ng-option\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(31, AddVendorCreditNoteComponent_div_31_Template, 2, 1, \"div\", 26);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"div\", 27);\n      i0.ɵɵelementStart(33, \"div\", 28);\n      i0.ɵɵelementStart(34, \"label\", 21);\n      i0.ɵɵtext(35, \"Purchase Order# \");\n      i0.ɵɵelementStart(36, \"span\", 22);\n      i0.ɵɵelementStart(37, \"sup\");\n      i0.ɵɵtext(38, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"ng-select\", 29, 30);\n      i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_Template_ng_select_ngModelChange_39_listener($event) {\n        return ctx.creditData.purOrder = $event;\n      });\n      i0.ɵɵtemplate(41, AddVendorCreditNoteComponent_ng_option_41_Template, 2, 2, \"ng-option\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(42, AddVendorCreditNoteComponent_div_42_Template, 2, 1, \"div\", 26);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"div\", 28);\n      i0.ɵɵelementStart(44, \"label\", 21);\n      i0.ɵɵtext(45, \"Vendor Credit Date \");\n      i0.ɵɵelementStart(46, \"span\", 22);\n      i0.ɵɵelementStart(47, \"sup\");\n      i0.ɵɵtext(48, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"input\", 31, 32);\n      i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_Template_input_ngModelChange_49_listener($event) {\n        return ctx.creditData.txnDate = $event;\n      })(\"click\", function AddVendorCreditNoteComponent_Template_input_click_49_listener() {\n        i0.ɵɵrestoreView(_r50);\n\n        const _r7 = i0.ɵɵreference(50);\n\n        return _r7.toggle();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(52, AddVendorCreditNoteComponent_div_52_Template, 2, 1, \"div\", 26);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(53, \"div\", 18);\n      i0.ɵɵelementStart(54, \"div\", 27);\n      i0.ɵɵelementStart(55, \"div\", 20);\n      i0.ɵɵelementStart(56, \"label\", 21);\n      i0.ɵɵtext(57, \" Reference#\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(58, \"input\", 33);\n      i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_Template_input_ngModelChange_58_listener($event) {\n        return ctx.creditData.crRef = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(59, \"div\", 19);\n      i0.ɵɵelementStart(60, \"div\", 20);\n      i0.ɵɵelementStart(61, \"label\", 21);\n      i0.ɵɵtext(62, \"Currency \");\n      i0.ɵɵelementStart(63, \"span\", 22);\n      i0.ɵɵelementStart(64, \"sup\");\n      i0.ɵɵtext(65, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(66, \"ng-select\", 34, 35);\n      i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_Template_ng_select_ngModelChange_66_listener($event) {\n        return ctx.creditData.currency = $event;\n      });\n      i0.ɵɵelementStart(68, \"ng-option\", 36);\n      i0.ɵɵtext(69, \"CAD\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(70, \"ng-option\", 37);\n      i0.ɵɵtext(71, \"USD\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(72, AddVendorCreditNoteComponent_div_72_Template, 2, 1, \"div\", 26);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(73, \"div\", 17);\n      i0.ɵɵelementStart(74, \"div\", 38);\n      i0.ɵɵelementStart(75, \"div\", 27);\n      i0.ɵɵelementStart(76, \"div\", 20);\n      i0.ɵɵelementStart(77, \"h4\", 39);\n      i0.ɵɵtext(78, \" Vendor Credit Details \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(79, \"div\", 38);\n      i0.ɵɵelementStart(80, \"div\", 19);\n      i0.ɵɵelementStart(81, \"div\", 40);\n      i0.ɵɵelementStart(82, \"table\", 41);\n      i0.ɵɵelementStart(83, \"thead\");\n      i0.ɵɵelementStart(84, \"tr\");\n      i0.ɵɵelementStart(85, \"th\", 42);\n      i0.ɵɵtext(86, \" Commodity \");\n      i0.ɵɵelementStart(87, \"span\", 22);\n      i0.ɵɵelementStart(88, \"sup\");\n      i0.ɵɵtext(89, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(90, \"th\", 42);\n      i0.ɵɵtext(91, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(92, \"th\", 42);\n      i0.ɵɵtext(93, \" Quantity \");\n      i0.ɵɵelementStart(94, \"span\", 22);\n      i0.ɵɵelementStart(95, \"sup\");\n      i0.ɵɵtext(96, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(97, \"th\", 42);\n      i0.ɵɵtext(98, \" Rate \");\n      i0.ɵɵelementStart(99, \"span\", 22);\n      i0.ɵɵelementStart(100, \"sup\");\n      i0.ɵɵtext(101, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(102, \"th\", 43);\n      i0.ɵɵtext(103, \" Amount \");\n      i0.ɵɵelementStart(104, \"span\", 22);\n      i0.ɵɵelementStart(105, \"sup\");\n      i0.ɵɵtext(106, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(107, \"th\", 44);\n      i0.ɵɵtext(108, \" Account \");\n      i0.ɵɵelementStart(109, \"span\", 22);\n      i0.ɵɵelementStart(110, \"sup\");\n      i0.ɵɵtext(111, \"*\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(112, \"th\", 45);\n      i0.ɵɵtext(113, \"Action\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(114, \"tbody\");\n      i0.ɵɵtemplate(115, AddVendorCreditNoteComponent_tr_115_Template, 27, 18, \"tr\", 46);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(116, \"div\", 47);\n      i0.ɵɵelementStart(117, \"button\", 48);\n      i0.ɵɵlistener(\"click\", function AddVendorCreditNoteComponent_Template_button_click_117_listener() {\n        return ctx.addDetails();\n      });\n      i0.ɵɵelement(118, \"i\", 49);\n      i0.ɵɵtext(119, \" Add Another Line \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(120, \"div\");\n      i0.ɵɵelementStart(121, \"span\");\n      i0.ɵɵtext(122, \"Total Amount\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(123, \"span\", 50);\n      i0.ɵɵtext(124);\n      i0.ɵɵpipe(125, \"number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(126);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(127, \"div\", 51);\n      i0.ɵɵelementStart(128, \"div\", 18);\n      i0.ɵɵelementStart(129, \"div\", 27);\n      i0.ɵɵelementStart(130, \"div\", 20);\n      i0.ɵɵelementStart(131, \"label\", 21);\n      i0.ɵɵtext(132, \" Attachments\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(133, \"span\", 52);\n      i0.ɵɵelementStart(134, \"input\", 53);\n      i0.ɵɵlistener(\"change\", function AddVendorCreditNoteComponent_Template_input_change_134_listener($event) {\n        return ctx.uploadDocs($event.target.files);\n      })(\"ngModelChange\", function AddVendorCreditNoteComponent_Template_input_ngModelChange_134_listener($event) {\n        return ctx.files = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(135, AddVendorCreditNoteComponent_span_135_Template, 2, 1, \"span\", 26);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(136, AddVendorCreditNoteComponent_div_136_Template, 13, 1, \"div\", 54);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(137, \"div\", 18);\n      i0.ɵɵelementStart(138, \"div\", 27);\n      i0.ɵɵelementStart(139, \"div\", 20);\n      i0.ɵɵelementStart(140, \"label\", 55);\n      i0.ɵɵtext(141, \"Remarks\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(142, \"textarea\", 56);\n      i0.ɵɵlistener(\"ngModelChange\", function AddVendorCreditNoteComponent_Template_textarea_ngModelChange_142_listener($event) {\n        return ctx.creditData.remarks = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(143, \"div\", 57);\n      i0.ɵɵelementStart(144, \"div\", 58);\n      i0.ɵɵelementStart(145, \"button\", 59);\n      i0.ɵɵtext(146, \" Cancel \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(147, AddVendorCreditNoteComponent_button_147_Template, 2, 1, \"button\", 60);\n      i0.ɵɵtemplate(148, AddVendorCreditNoteComponent_button_148_Template, 2, 1, \"button\", 60);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(29);\n\n      const _r4 = i0.ɵɵreference(40);\n\n      const _r8 = i0.ɵɵreference(51);\n\n      const _r10 = i0.ɵɵreference(67);\n\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate1(\" \", ctx.pageTitle, \" Vendor Credit \");\n      i0.ɵɵadvance(21);\n      i0.ɵɵproperty(\"ngModel\", ctx.creditData.vendorID);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.vendors);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", _r1.invalid && (_r1.dirty || _r1.touched));\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.creditData.purOrder);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.purchaseOrders);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", _r4.invalid && (_r4.dirty || _r4.touched));\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngModel\", ctx.creditData.txnDate);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", _r8.invalid && (_r8.dirty || _r8.touched));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.creditData.crRef);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"clearable\", false)(\"ngModel\", ctx.creditData.currency);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", _r10.invalid && (_r10.dirty || _r10.touched));\n      i0.ɵɵadvance(43);\n      i0.ɵɵproperty(\"ngForOf\", ctx.creditData.crDetails);\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(125, 22, ctx.total, \"1.2-2\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", ctx.creditData.currency, \" \");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.files);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.filesError != \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.oldDocs.length > 0);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.creditData.remarks);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", !ctx.creditID);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.creditID);\n    }\n  },\n  directives: [i2.RouterLinkWithHref, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.NgForm, i7.NgSelectComponent, i6.RequiredValidator, i6.NgControlStatus, i6.NgModel, i4.NgForOf, i4.NgIf, i8.NgbInputDatepicker, i6.DefaultValueAccessor, i7.ɵr, i2.RouterLink],\n  pipes: [i4.DecimalPipe, i4.TitleCasePipe],\n  styles: [\".address-icon[_ngcontent-%COMP%] {\\r\\n  position: absolute;\\r\\n  left: 15px;\\r\\n  margin-left: 0px;\\r\\n  top: 50%;\\r\\n}\\r\\n.img_thumbnail[_ngcontent-%COMP%] {\\r\\n  width: 90px;\\r\\n  height: 70px;\\r\\n  object-fit: contain;\\r\\n}\"]\n});","map":null,"metadata":{},"sourceType":"module"}