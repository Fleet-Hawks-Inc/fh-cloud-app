{"ast":null,"code":"import _asyncToGenerator from \"C:/FH/fh-cloud-app/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"!C:\\\\FH\\\\fh-cloud-app\\\\node_modules\\\\@ngtools\\\\webpack\\\\src\\\\loaders\\\\direct-resource.js!./vendor-payment-detail.component.html\";\nimport __NG_CLI_RESOURCE__1 from \"./vendor-payment-detail.component.css\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport Constants from \"src/app/pages/fleet/constants\";\nimport { AccountService, ApiService, ListService } from \"src/app/services\";\nlet VendorPaymentDetailComponent = class VendorPaymentDetailComponent {\n  constructor(apiService, accountService, route, listService) {\n    this.apiService = apiService;\n    this.accountService = accountService;\n    this.route = route;\n    this.listService = listService;\n    this.dataMessage = Constants.NO_RECORDS_FOUND;\n    this.paymentData = {\n      paymentNo: \"\",\n      txnDate: null,\n      vendorID: null,\n      refNo: \"\",\n      currency: \"CAD\",\n      accountID: null,\n      payMode: null,\n      payModeNo: \"\",\n      payModeDate: null,\n      billIds: [],\n      billData: [],\n      advIds: [],\n      advData: [],\n      total: {\n        subTotal: 0,\n        advTotal: 0,\n        finalTotal: 0\n      },\n      transactionLog: []\n    };\n    this.vendorName = \"\";\n    this.bills = {};\n    this.downloadDisabled = true;\n    this.showModal = false;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.paymentID = _this.route.snapshot.params[\"paymentID\"];\n      yield _this.fetchPayments();\n\n      _this.fetchVendor();\n\n      _this.fetchBills();\n    })();\n  }\n\n  fetchPayments() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this2.accountService.getData(`purchase-payments/details/${_this2.paymentID}`).toPromise();\n      _this2.downloadDisabled = false;\n      _this2.paymentData = result[0];\n      _this2.paymentData.payMode = _this2.paymentData.payMode.replace(\"_\", \" \");\n    })();\n  }\n\n  fetchVendor() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this3.apiService.getData(`contacts/minor/detail/${_this3.paymentData.vendorID}`).toPromise();\n\n      if (result.Items.length > 0) {\n        _this3.vendorName = result.Items[0].cName;\n      }\n    })();\n  }\n\n  fetchBills() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this4.accountService.getData(`bills/get/list`).toPromise();\n      _this4.bills = result;\n    })();\n  }\n\n  showCheque() {\n    this.showModal = true;\n    let obj = {\n      entityId: this.paymentData.vendorID,\n      chequeDate: this.paymentData.payModeDate,\n      chequeAmount: this.paymentData.total.finalTotal,\n      type: \"purchasePayment\",\n      paymentTo: 'vendor',\n      chequeNo: this.paymentData.payModeNo,\n      currency: this.paymentData.currency,\n      showModal: this.showModal,\n      fromDate: this.paymentData.txnDate,\n      finalAmount: this.paymentData.total.finalTotal,\n      txnDate: this.paymentData.txnDate,\n      page: \"detail\",\n      advance: this.paymentData.total.advTotal\n    };\n    this.listService.openPaymentChequeModal(obj);\n  }\n\n};\n\nVendorPaymentDetailComponent.ctorParameters = () => [{\n  type: ApiService\n}, {\n  type: AccountService\n}, {\n  type: ActivatedRoute\n}, {\n  type: ListService\n}];\n\nVendorPaymentDetailComponent = __decorate([Component({\n  selector: \"app-vendor-payment-detail\",\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], VendorPaymentDetailComponent);\nexport { VendorPaymentDetailComponent };","map":null,"metadata":{},"sourceType":"module"}