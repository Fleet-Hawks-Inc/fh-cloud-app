{"ast":null,"code":"import _asyncToGenerator from \"C:/FH/fh-cloud-app/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"!C:\\\\FH\\\\fh-cloud-app\\\\node_modules\\\\@ngtools\\\\webpack\\\\src\\\\loaders\\\\direct-resource.js!./load-invoice-detail.component.html\";\nimport __NG_CLI_RESOURCE__1 from \"./load-invoice-detail.component.css\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { AccountService, ApiService } from \"../../../../services\";\nlet LoadInvoiceDetailComponent = class LoadInvoiceDetailComponent {\n  constructor(route, accountService, apiService) {\n    this.route = route;\n    this.accountService = accountService;\n    this.apiService = apiService;\n    this.invID = \"\";\n    this.showDetails = false;\n    this.Asseturl = this.apiService.AssetUrl;\n    this.invoiceData = {\n      orderID: \"\",\n      isFeatEnabled: false\n    };\n    this.vehicles = [];\n    this.assets = [];\n    this.customers = [];\n    this.customersObjects = {};\n    this.accountsObjects = {};\n    this.accountsIntObjects = {};\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.invID = _this.route.snapshot.params[`invID`];\n\n      if (_this.invID) {\n        yield _this.fetchInvoice();\n        yield _this.fetchOrderInvoiceData();\n      }\n    })();\n  }\n\n  fetchInvoice() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let res = yield _this2.accountService.getData(`order-invoice/detail/${_this2.invID}`).toPromise();\n      _this2.invoiceData = res[0];\n\n      if (!_this2.invoiceData.isFeatEnabled) {\n        _this2.fetchAccountsByInternalIDs();\n      }\n\n      _this2.invoiceData.transactionLog.map(v => {\n        v.type = v.type.replace(\"_\", \" \");\n      });\n    })();\n  }\n\n  fetchAccountsByInternalIDs() {\n    this.accountService.getData(\"chartAc/get/internalID/list/all\").subscribe(result => {\n      this.accountsIntObjects = result;\n    });\n  }\n\n  fetchOrderInvoiceData() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield _this3.apiService.getData(`orders/invoice/${_this3.invoiceData.orderID}`).toPromise();\n\n      if (result) {\n        _this3.showDetails = true;\n      }\n\n      _this3.invoiceData[\"additionalContact\"] = result[0][\"additionalContact\"];\n      _this3.invoiceData[\"carrierData\"] = result[0][\"carrierData\"];\n      _this3.invoiceData[\"cusAddressID\"] = result[0][\"cusAddressID\"];\n      _this3.invoiceData[\"orderNumber\"] = result[0][\"orderNumber\"];\n      _this3.invoiceData[\"data\"] = result[0][\"data\"];\n\n      if (_this3.invoiceData.carrierData.logo && _this3.invoiceData.carrierData.logo != \"\") {\n        _this3.companyLogoSrc = `${_this3.Asseturl}/${_this3.invoiceData.pk}/${_this3.invoiceData.carrierData.logo}`;\n      }\n\n      if (result[0].assets != undefined) {\n        _this3.assets = result[0].assets;\n      }\n\n      if (result[0].vehicles != undefined) {\n        _this3.vehicles = result[0].vehicles;\n      }\n\n      if (result != undefined) {\n        _this3.customers = result;\n      }\n    })();\n  }\n\n};\n\nLoadInvoiceDetailComponent.ctorParameters = () => [{\n  type: ActivatedRoute\n}, {\n  type: AccountService\n}, {\n  type: ApiService\n}];\n\nLoadInvoiceDetailComponent = __decorate([Component({\n  selector: \"app-load-invoice-detail\",\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], LoadInvoiceDetailComponent);\nexport { LoadInvoiceDetailComponent };","map":null,"metadata":{},"sourceType":"module"}