<section class="body">
    <!-- start: header -->
    <app-header></app-header>
    <!-- end: header -->
  
    <div class="inner-wrapper">
        <!-- start: sidebar -->
        <app-sidebar></app-sidebar>
        <!-- end: sidebar -->
        <section role="main" class="content-body pl-1  pr-0 pt-0">
            <header class="page-header">
               <div class="row pr-5" style="padding-top:10px;">
                  <div class="col-md-4 col-lg-4 font-weight-bold text-4 text-dark">
                     Service Program Details
                  </div>
                  <div class="col-md-8  col-lg-8 text-right">
                     <a routerLink="/fleet/maintenance/service-program/list"  class="btn btn-default btn-sm mx-2" style="color:black;"><i class="fas fa-list"></i> Service Programs List</a>
                     <a href="javascript:;" data-toggle="modal" data-target="#editServiceScheduleModal" class="modal-with-form btn btn-success btn-sm mx-2" style="color:white;"><i class="fas fa-plus"></i> Add Service Schedule</a>
                     <a href="javascript:;" data-toggle="modal" data-target="#addVehicleModal" class="modal-with-form btn btn-success btn-sm mx-2" style="color:white;"><i class="fas fa-plus"></i> Add Vehicle</a>
                  </div>
               </div>
            </header>
            <div class="row">
               <div class="col pr-0">
                  <section class="card">
                     <div class="card-body">
                        <div class="row" *ngFor="let program of programs">
                           <div class="col-lg-12 font-weight-bold"><span class="text-4  text-dark">Service Program Name: </span><span class="text-4 text-info">{{program.programName}}</span></div>
                           <div class="col-lg-12"><span class="text-4  font-weight-bold  text-dark">Description: </span><span class="text-3 text-dark">{{program.description}}</span></div>
                        </div>
                        <div class="row mt-4">
                           <div class="col-lg-4">
                              <div class="row">
                                 <div class="col-lg-12"><label class="text-dark control-label font-weight-bold text-4">List of Vehicles</label></div>
                              </div>
                              <table class="table table-responsive-lg table-bordered table-striped mb-0 assetDetailsTable">
                                 <thead>
                                    <tr>
                                       <th width="95%">Vehicle Name</th>
                                       <th  width="5%" ></th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr *ngFor="let vehicle of vehicles; let i = index;">
                                       <td>{{vehiclesObject[vehicle]}}</td>
                                       <td class="text-center">
                                       <a class="text-danger" (click)="remove('vehicle', i)" href="javascript:;"><i class="fas fa-times"></i></a>

                                       </td>
                                    </tr>
                                    <tr *ngIf="!vehicles?.length > 0">
                                          <td colspan="3">No Data Found</td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <div class="col-lg-8">
                              <div class="row">
                                 <div class="col-lg-12"><label class="text-dark control-label font-weight-bold text-4">Service Schedules</label></div>
                              </div>
                              <table class="table table-responsive-lg table-bordered table-striped mb-0 assetDetailsTable">
                                 <thead>
                                    <tr>
                                       <th width="20%">Interval</th>
                                       <th width="65%">Service Task</th>
                                       <th  width="5%"></th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr *ngFor="let task of tasks; let i = index;">
                                       <td>Every {{task.repeatByTime}} {{task.repeatByTimeUnit}} or {{task.repeatByOdometer}} miles   </td>
                                       <td>{{task.serviceTask}}</td>
                                       <td>
                                          <div class="btn-group flex-wrap mx-2">
                                             <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span class="caret"></span></button>
                                             <div class="dropdown-menu" role="menu" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 38px, 0px);">
                                             <a class="dropdown-item text-1 modal-with-form"  href="javascript:;" (click)="editTask(task, i)">Edit</a>
                                                <a class="modal-with-form dropdown-item text-1" href="javascript:;" (click)="remove('task', i)">Delete</a>
                                             </div>
                                          </div>
                                       </td>
                                    </tr>
                                    <tr *ngIf="!tasks?.length > 0">
                                          <td colspan="3">No Data Found</td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                        </div>
                     </div>
                  </section>
               </div>
            </div>
         </section>
    </div>
  </section>

  <div class="modal fade" id="editServiceScheduleModal" tabindex="-1" role="dialog" aria-labelledby="editServiceScheduleModal"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width: 600px;" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">{{Title}} Service Schedule</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="far fa-window-close modal-dismiss" style="font-size:25px;"> </i>
                </button>
            </div>
            <div class="modal-body">
               <form class="form-horizontal form-bordered" id="taskForm" method="get">
                  
                  <div class="form-row">
                     <div class="form-group col-md-12">
                        <label class="font-weight-bold control-label">Select Service Task</label>
                        <ng-select [(ngModel)]="programData.serviceTask" name="serviceTask" style="width: 100%;">
                                          <ng-option value="A/C Compressor Replacement">A/C Compressor Replacement
                                          </ng-option>
                                          <ng-option value="A/C Condenser Replacemen">A/C Condenser Replacement
                                          </ng-option>
                                          <ng-option value="A/C Diagnosis">A/C Diagnosis</ng-option>
                                          <ng-option value="A/C Evaporator Replacement">A/C Evaporator Replacement
                                          </ng-option>
                                          <ng-option value="A/C Inspection">A/C Inspection</ng-option>
                                          <ng-option value="A/C Recharge">A/C Recharge</ng-option>
                                          <ng-option value="Air Brake System Valve Inspection">Air Brake System Valve
                                             Inspection</ng-option>
                                          <ng-option value="Air Cleaner Inspection">Air Cleaner Inspection</ng-option>
                                          <ng-option value="Air Compressor Inspection">Air Compressor Inspection
                                          </ng-option>
                                          <ng-option value="Air Dryer Desiccant Replacement">Air Dryer Desiccant
                                             Replacement</ng-option>
                                          <ng-option value="Air Dryer Inspection">Air Dryer Inspection</ng-option>
                                          <ng-option value="Air Filter Replacement">Air Filter Replacement</ng-option>

                                          <ng-option value="Alcohol Evaporator Cleaning">Alcohol Evaporator Cleaning
                                          </ng-option>
                                          <ng-option value="Alternator Replacement">Alternator Replacement</ng-option>
                                          <ng-option value="Automatic Drain Valve Inspection">Automatic Drain Valve
                                             Inspection</ng-option>
                                          <ng-option value="Axle Lubricant and Filter Replacement">Axle Lubricant and
                                             Filter Replacement</ng-option>
                                          <ng-option value="Ball Joint Replacement">Ball Joint Replacement</ng-option>
                                          <ng-option value="Battery Inspection">Battery Inspection</ng-option>
                                          <ng-option value="Battery-Powered HVAC System Inspection">Battery-Powered HVAC
                                             System Inspection</ng-option>
                                          <ng-option value="Battery Replacement">Battery Replacement</ng-option>
                                          <ng-option value="Brake Caliper Replacement">Brake Caliper Replacement
                                          </ng-option>
                                          <ng-option value="Brake Camshaft Bracket Lubrication">Brake Camshaft Bracket
                                             Lubrication</ng-option>
                                          <ng-option value="Brake Inspection">Brake Inspection</ng-option>
                                          <ng-option value="Brake Pad(s) Replacement">Brake Pad(s) Replacement
                                          </ng-option>

                                          <ng-option value="Brake Rotor Replacement">Brake Rotor Replacement</ng-option>
                                          <ng-option value="Brake Slack Adjuster Lubrication">Brake Slack Adjuster
                                             Lubrication</ng-option>
                                          <ng-option value="Cabin Air FIlter Replacement">Cabin Air FIlter Replacement
                                          </ng-option>
                                          <ng-option value="Cab Shock Absorber Bracket Torque Check">Cab Shock Absorber
                                             Bracket Torque Check</ng-option>
                                          <ng-option value="Car Wash">Car Wash</ng-option>
                                          <ng-option value="Catalytic Converter Replacement">Catalytic Converter
                                             Replacement</ng-option>
                                          <ng-option value="Charging and Starting System Inspection">Charging and
                                             Starting System Inspection</ng-option>
                                          <ng-option value="Charging System Diagnosis">Charging System Diagnosis
                                          </ng-option>
                                          <ng-option value="Clutch Hydraulic Fluid Level Check"> Clutch Hydraulic Fluid
                                             Level Check</ng-option>
                                          <ng-option value="Clutch Hydraulic Fluid Replacement">Clutch Hydraulic Fluid
                                             Replacement</ng-option>
                                          <ng-option value="Clutch Release Bearing Lubrication">Clutch Release Bearing
                                             Lubrication</ng-option>
                                          <ng-option value="Coolant Flush">Coolant Flush</ng-option>

                                          <ng-option value="Cooling System Fluid Level Inspection">Cooling System Fluid
                                             Level Inspection</ng-option>
                                          <ng-option value="Clutch Hydraulic Fluid Replacement">Clutch Hydraulic Fluid
                                             Replacement</ng-option>
                                          <ng-option value="Door Window Motor/Regulator Replacement">Door Window
                                             Motor/Regulator Replacement</ng-option>
                                          <ng-option value="Drag Link Inspection">Drag Link Inspection</ng-option>
                                          <ng-option value="Drive Axle Assembly Fluid Replacement">Drive Axle Assembly
                                             Fluid Replacement</ng-option>
                                          <ng-option value="Driveline Inspection">Driveline Inspection</ng-option>
                                          <ng-option value="Driveline Lubrication">Driveline Lubrication</ng-option>
                                          <ng-option value="Engine Air Filter Replacement">Engine Air Filter Replacement
                                          </ng-option>
                                          <ng-option value="Engine Belt Inspection">Engine Belt Inspection</ng-option>
                                          <ng-option value="Engine Coolant Drain & Refill">Engine Coolant Drain & Refill
                                          </ng-option>
                                          <ng-option value="Engine Coolant Replacement">Engine Coolant Replacement
                                          </ng-option>
                                          <ng-option value="Engine/Drive Belt(s) Inspection">Engine/Drive Belt(s)
                                             Inspection</ng-option>


                                          <ng-option value="Engine/Drive Belt(s) Replacement">Engine/Drive Belt(s)
                                             Replacement</ng-option>
                                          <ng-option value="Engine Oil & Filter Replacement">Engine Oil & Filter
                                             Replacement</ng-option>
                                          <ng-option value="Exhaust Manifold Replacement">Exhaust Manifold Replacement
                                          </ng-option>
                                          <ng-option value="Exhaust System Inspection">Exhaust System Inspection
                                          </ng-option>
                                          <ng-option value="Factory Scheduled Maintenance">Factory Scheduled Maintenance
                                          </ng-option>
                                          <ng-option value="Fan Clutch Inspection">Fan Clutch Inspection</ng-option>
                                          <ng-option value="Fifth Wheel Inspection">Fifth Wheel Inspection</ng-option>
                                          <ng-option value="Fifth Wheel Lubrication">Fifth Wheel Lubrication</ng-option>
                                          <ng-option value="Fuel Filter Replacement">Fuel Filter Replacement</ng-option>
                                          <ng-option value="Fuel Injector Replacement">Fuel Injector Replacement
                                          </ng-option>
                                          <ng-option value="Fuel Pump Replacement">Fuel Pump Replacement</ng-option>
                                          <ng-option value="Fuel/Water Separator Filter Replacement"> Fuel/Water
                                             Separator Filter Replacement</ng-option>

                                          <ng-option value="Head Gasket(s) Replacement">Head Gasket(s) Replacement
                                          </ng-option>
                                          <ng-option value="Heater Blower Motor Replacement">Heater Blower Motor
                                             Replacement</ng-option>
                                          <ng-option value="Heater Control Valve Replacement">Heater Control Valve
                                             Replacement</ng-option>
                                          <ng-option value="Heater Core Replacement">Heater Core Replacement</ng-option>
                                          <ng-option value="Heater Hose Replacement">Heater Hose Replacement</ng-option>
                                          <ng-option value="Ignition Coil Replacement">Ignition Coil Replacement
                                          </ng-option>
                                          <ng-option value="Intake Manifold Gasket Replacement">Intake Manifold Gasket
                                             Replacement</ng-option>
                                          <ng-option value="Knuckle Pin Lubrication">Knuckle Pin Lubrication</ng-option>
                                          <ng-option value="Mirror Folding Check">Mirror Folding Check</ng-option>
                                          <ng-option value="Oil Change">Oil Change</ng-option>
                                          <ng-option value="Oil & Filter Change">Oil & Filter Change</ng-option>
                                          <ng-option value=" Oil Pump Replacement"> Oil Pump Replacement</ng-option>

                                          <ng-option value="Other Maintenance">Other Maintenance</ng-option>
                                          <ng-option value="Oxygen Sensor Replacement">Oxygen Sensor Replacement
                                          </ng-option>
                                          <ng-option value="Power Steering Fluid and Filter Replacement">Power Steering
                                             Fluid and Filter Replacement</ng-option>
                                          <ng-option value="Power Steering Fluid Level Inspection">Power Steering Fluid
                                             Level Inspection</ng-option>
                                          <ng-option value="Power Steering Gear Lubrication">Power Steering Gear
                                             Lubrication</ng-option>
                                          <ng-option value="Power Steering Hose Replacement">Power Steering Hose
                                             Replacement</ng-option>
                                          <ng-option value="Power Steering Pump Replacement">Power Steering Pump
                                             Replacement</ng-option>
                                          <ng-option value="Pressure Relief Cap Inspection">Pressure Relief Cap
                                             Inspection</ng-option>
                                          <ng-option value="Radiator Repair">Radiator Repair</ng-option>
                                          <ng-option value="Resurface Rotors">Resurface Rotors</ng-option>
                                          <ng-option value="Rotate Tires"> Rotate Tires</ng-option>
                                          <ng-option value="Rotor Replacement">Rotor Replacement</ng-option>

                                          <ng-option value="Spark Plug Replacement">Spark Plug Replacement</ng-option>
                                          <ng-option value="Spark Plugs Replacement">Spark Plugs Replacement</ng-option>
                                          <ng-option value="Starter Replacement">Starter Replacement</ng-option>
                                          <ng-option value="Steer Axle Hub Cap Vent Plug Inspection">Steer Axle Hub Cap
                                             Vent Plug Inspection</ng-option>
                                          <ng-option value="Suspension Inspection">Suspension Inspection</ng-option>
                                          <ng-option value="Suspension U-Bolt Torque Check">Suspension U-Bolt Torque
                                             Check</ng-option>
                                          <ng-option value="Thermostat Replacement">Thermostat Replacement</ng-option>
                                          <ng-option value="Tie Rod End Replacement">Tie Rod End Replacement</ng-option>
                                          <ng-option value="Tie Rod Inspection">Tie Rod Inspection</ng-option>
                                          <ng-option value="Tire Check">Tire Check</ng-option>
                                          <ng-option value="Tire Replacement">Tire Replacement</ng-option>
                                          <ng-option value="Tire Rotation">Tire Rotation</ng-option>

                                          <ng-option value="Tire Service">Tire Service</ng-option>
                                          <ng-option value="Trailer Cable Inspection">Trailer Cable Inspection
                                          </ng-option>
                                          <ng-option value="Transfer Case Fluid Replacement">Transfer Case Fluid
                                             Replacement</ng-option>
                                          <ng-option value="Transmission Filter Replacement">Transmission Filter
                                             Replacement</ng-option>
                                          <ng-option value="Transmission Fluid Drain & Refill">Transmission Fluid Drain
                                             & Refill</ng-option>
                                          <ng-option value="Transmission Fluid Level Inspection">Transmission Fluid
                                             Level Inspection</ng-option>
                                          <ng-option value="Transmission Fluid Replacement">Transmission Fluid
                                             Replacement</ng-option>
                                          <ng-option value="Transmission Replacement"> Transmission Replacement
                                          </ng-option>
                                          <ng-option value="Water Pump Replacement">Water Pump Replacement</ng-option>
                                          <ng-option value="Wheel Alignment">Wheel Alignment</ng-option>
                                          <ng-option value="Wheel Bearing Replacement"> Wheel Bearing Replacement
                                          </ng-option>
                                          <ng-option value="Wheel Nut Check">Wheel Nut Check</ng-option>
                                          <ng-option value="Windshield Wiper(s) Replacement">Windshield Wiper(s)
                                             Replacement</ng-option>
                                       </ng-select>
                     </div>
                  </div>
                  
                  <div class="form-row pt-2">
                     <div class="col-lg-12">
                        <div class="row">
                           <div class="col-lg-6">
                              <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Repeat By Time</label>
                              <div class="row">
                                 <div class="col-lg-6">
                                    <input [(ngModel)]="programData.repeatByTime" name="repeatByTime" type="text" class="form-control">
                                 </div>
                                 <div class="col-lg-6 pl-0">
                                    <select [(ngModel)]="programData.repeatByTimeUnit" name="repeatByTimeUnit" class="form-control populate" tabindex="-1" aria-hidden="true">
                                       <optgroup label="">
                                          <option value="Days">Days</option>
                                          <option value="Weeks">Weeks</option>
                                          <option value="Months">Months</option>
                                       </optgroup>
                                    </select>
                                 </div>
                              </div>
                           </div>
                           <div class="col-lg-6">
                              <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Repeat By Odometer miles</label>
                              <input [(ngModel)]="programData.repeatByOdometer" name="repeatByOdometer" type="text" class="form-control" value="">
                           </div>
                        </div>
                     </div>
                  </div>
               </form>
            </div>
            <div class="modal-footer">
               <button class="btn btn-default" data-dismiss="modal">Cancel</button>
               <button class="btn btn-success" *ngIf="Title === 'Add'" (click)="addServiceProgram()">Add</button>
               <button class="btn btn-success" *ngIf="Title !== 'Add'" (click)="updateServiceProgram()">Update</button>
            </div>
         </div>
      </div>
  </div>

  <div class="modal fade" id="addVehicleModal" tabindex="-1" role="dialog" aria-labelledby="addVehicleModal"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width: 600px;" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add Vehicle</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="far fa-window-close modal-dismiss" style="font-size:25px;"> </i>
                </button>
            </div>
            <div class="modal-body">
               <form class="form-horizontal form-bordered" id="vehicleForm" method="get">
                  <div class="form-row">
                     <div class="form-group col-md-12">
                        <label class="font-weight-bold control-label">Select Vehicle</label>
                        <ng-select [(ngModel)]="vehicleData" name="vehicleData" [multiple]="true" class="form-control populate">
                           <ng-option *ngFor="let vehicle of allVehicles" value="{{vehicle.vehicleID}}">{{vehicle.vehicleIdentification}}</ng-option>
                        </ng-select>
                     </div>
                  </div>
               </form>
            </div>
            <div class="modal-footer">
               <button class="btn btn-default" data-dismiss="modal">Cancel</button>

               <button class="btn btn-success" (click)="addVehicle()">Save</button>
            </div>
         </div>
      </div>
  </div>

 
  