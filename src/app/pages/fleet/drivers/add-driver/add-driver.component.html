<section class="body">
  <div class="inner-wrapper">

    <section role="main" class="content-body pt-0 pr-0 pl-0">
      <header class="page-header">
        <div class="row" style="padding-top:10px;">
          <div class="col-md-4 col-lg-4">
            <h4 class="text-4 mt-0 mb-0 text-dark">{{pageTitle}}</h4>
          </div>
          <div class="col-md-8  col-lg-8 text-right">
            <a routerLink="/fleet/drivers/list" class="btn btn-sm btn-default"><i class="fas fa-list"></i> Drivers
              List</a>
          </div>
        </div>
      </header>
      <form id="driverForm" class="form-horizontal form-bordered bg-white" name="driverForm"  [mustMatch]="['password', 'confirmPassword']"
        (ngSubmit)="onSubmit()" novalidate="novalidate">
        <section class="m-2">
          <div class="row mb-3">
            <div class="col-12">
              <div class="bg-white p-3 text-dark">
                <div class="form-group row justify-content-between adddriverpl">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold text-lg-right text-5 pt-2">Basic Details</label>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-12 pt-2">
                        <div class="row">
                          <div class="col-lg-3">
                            <label class="control-label font-weight-bold text-lg-right">Driver Type:</label>
                          </div>
                          <div class="btn-group-toggle" data-toggle="buttons">
                            <label class="btn btn-outline btn-yesno  mr-2"
                              [class.active]="driverData.driverType === 'employee'" style="width:110px;"
                              (click)="onChangeUnitType('driver_type', 'employee')">
                              <input type="radio" [(ngModel)]="driverData.driverType" name="driverType" checked hidden
                                value="employee"> Employee
                            </label>
                            <label class="btn btn-outline btn-yesno mr-2 " style="width:110px;"
                              [class.active]="driverData.driverType === 'contractor'"
                              (click)="onChangeUnitType('driver_type', 'contractor')">
                              <input type="radio" [(ngModel)]="driverData.driverType" name="driverType" hidden
                                value="contractor"> Contractor
                            </label>
                          </div>

                        </div>
                      </div>
                      <div class="col-lg-10" id="employeeIDDiv">
                        <div class="row">
                          <div class="col-lg-6" *ngIf="driverData.driverType == 'employee'">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Employee ID <span
                                class="mandfield text-2 ml-1"><sup>*</sup></span>
                            </label>
                            <div class="input-group">
                              <input [disabled]="isEdit" (change)="onChangeHideErrors('employeeContractorId')"
                                [(ngModel)]="driverData.employeeContractorId" name="employeeContractorId" type="text"
                                class="form-control" placeholder="Any Numbers or Name" #dName="ngModel" required
                                pattern="^[a-zA-Z0-9\s\-]{2,30}$" maxlength="30">

                            </div>
                            <div *ngIf="dName.invalid && (dName.dirty || dName.touched)" class="text-danger">
                              <div *ngIf="dName.errors.required">
                                Employee ID is required.
                              </div>
                              <div *ngIf="dName.errors.pattern">
                                Employee ID must not contain special character. Employee ID must be
                                between 2 to 30 characters and contain letters and numbers only.
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-6" *ngIf="driverData.driverType == 'contractor'">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Contractor ID <span
                                class="mandfield text-2 ml-1"><sup>*</sup></span>
                            </label>
                            <div class="input-group">
                              <input [(ngModel)]="driverData.employeeContractorId" name="employeeContractorId"
                                type="text" class="form-control" placeholder="Any Numbers or Name" #cName="ngModel"
                                required pattern="^[a-zA-Z0-9\s\-]{2,30}$" maxlength="30">
                            </div>
                            <div *ngIf="cName.invalid && (cName.dirty || cName.touched)" class="text-danger">
                              <div *ngIf="cName.errors.required">
                                Contractor ID is required.
                              </div>
                              <div *ngIf="cName.errors.pattern">
                                Contractor ID must not contain special character. Contractor ID must be
                                between 2 to 30 characters and contain letters and numbers only.
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-6">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Status <span
                                class="mandfield text-2 ml-1"><sup>*</sup></span>
                            </label>
                            <ng-select [(ngModel)]="driverData.driverStatus" name="driverStatus"
                              class="form-control form-control-sm" placeholder="Select driver status"
                              (change)="onChangeHideErrors('driverStatus')" #status="ngModel" required>
                              <ng-option value="Active">Active</ng-option>
                              <ng-option value="InActive">InActive</ng-option>
                            </ng-select>
                            <div *ngIf="status.invalid && (status.dirty || status.touched)" class="text-danger">
                              <div *ngIf="status.errors.required">
                                Status is required.
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-12" *ngIf="driverData.driverType == 'contractor'">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Owner Operator <span
                                class="mandfield text-2 ml-1"><sup>*</sup></span>
                            </label>
                            <ng-select [(ngModel)]="driverData.ownerOperator" name="ownerOperator"
                              class="form-control form-control-sm" placeholder="Select Owner Operator "
                              (change)="onChangeHideErrors('ownerOperator')" #oSlt="ngModel" required>
                              <ng-option *ngFor="let item of ownerOperators | async" value="{{item.operatorID}}">
                                {{item.companyName}}</ng-option>
                            </ng-select>
                            <div *ngIf="oSlt.invalid && (oSlt.dirty || oSlt.touched)" class="text-danger">
                              <div *ngIf="oSlt.errors.required">
                                Owner Operator is required.
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">User Name <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <input [disabled]="isEdit" (change)="onChangeHideErrors('userName')"
                          [(ngModel)]="driverData.userName" name="userName" type="text" class="form-control"
                          placeholder=" eg. Johnsmith80" #uName="ngModel" required pattern="^[a-z0-9\.]+$"
                          maxlength="30">
                        <div *ngIf="uName.invalid && (uName.dirty || uName.touched)" class="text-danger">
                          <div *ngIf="uName.errors.required">
                            UserName is required.
                          </div>
                          <div *ngIf="uName.errors.pattern">
                            Username must contain small letters,numbers and special
                            characters(period(.)) only.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Birth Date <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <input (click)="onChangeHideErrors('DOB');d6.toggle()" ngbDatepicker #d6="ngbDatepicker"
                          [maxDate]="birthDateMaxLimit" [minDate]="birthDateMinLimit" [(ngModel)]="driverData.DOB"
                          name="DOB" type="text" class="form-control" placeholder="yyyy/mm/dd"
                          #dob="ngModel" required>
                        <div *ngIf="dob.invalid && (dob.dirty || dob.touched)" class="text-danger">
                          <div *ngIf="dob.errors.required">
                            Birth date is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-10">
                        <div class="row">
                          <div class="col-lg-6">
                            <label class="control-label font-weight-bold text-lg-right pt-2">First Name <span
                                class="mandfield text-2 ml-1"><sup>*</sup></span>
                            </label>
                            <input [(ngModel)]="driverData.firstName" (change)="onChangeHideErrors('firstName')"
                              name="firstName" type="text" class="form-control" placeholder="eg. John" #fName="ngModel"
                              required pattern="^[a-zA-Z]+$" maxlength="30">
                            <div *ngIf="fName.invalid && (fName.dirty || fName.touched)" class="text-danger">
                              <div *ngIf="fName.errors.required">
                                First Name is required.
                              </div>
                              <div *ngIf="fName.errors.pattern">
                                First Name contains uppercase and lowercase character only.
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-6">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Last Name <span
                                class="mandfield text-2 ml-1"><sup>*</sup></span>
                            </label>
                            <input [(ngModel)]="driverData.lastName" (change)="onChangeHideErrors('lastName')"
                              name="lastName" type="text" class="form-control" placeholder="eg. Smith" #lName="ngModel"
                              required pattern="^[a-zA-Z0-9]+$" maxlength="30">
                            <div *ngIf="lName.invalid && (lName.dirty || lName.touched)" class="text-danger">
                              <div *ngIf="lName.errors.required">
                                Last Name is required.
                              </div>
                              <div *ngIf="lName.errors.pattern">

                                Last Name must contains uppercase and lowercase character only.

                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-10" *ngIf="!isEdit">
                        <div class="row">
                          <div class="col-lg-6">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Password <span
                                class="mandfield text-2 ml-1"><sup>*</sup></span>
                            </label>
                            <div class="input-group">
                              <input  id="pd"  [(ngModel)]="driverData.password"  placeholder="eg.  $John@01"  (change)="onChangeHideErrors('password')" name="password"  #pwd="ngModel" required pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])[a-zA-Z0-9//#//@//$//&]{8,20}$"  [type]="fieldTextType ? 'text' : 'password'"  class="form-control"
                                />
                                <div class="input-group-append">
                                  <span class="input-group-text eye">
                                    <i class="fa" [ngClass]="{
                                      'fa-eye-slash': !fieldTextType,
                                      'fa-eye': fieldTextType
                                    }"
                                    (click)="toggleFieldTextType()"></i>
                                  </span>
                               </div>
                            </div>
                              <div *ngIf="pwd.invalid && (pwd.dirty || pwd.touched)" class="text-danger">
                                <div *ngIf="pwd.errors.required">
                                  Password is required.
                                </div>
                                <div *ngIf="pwd.errors.pattern">
                                  Password must be 8 digits long and  a combination of small letters,capital letters and atleast one special characters(#,@,$,&).
                                </div>
                              </div>
                          </div>
                          <div class="col-lg-6">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Confirm Password <span
                                class="mandfield text-2 ml-1"><sup>*</sup></span>
                            </label>
                              <div class="input-group">
                                <input  id="cnf" [(ngModel)]="driverData.confirmPassword" name="confirmPassword"  (change)="onChangeHideErrors('confirmPassword')"  #cpwd="ngModel" required   [type]="cpwdfieldTextType ? 'text' : 'password'" placeholder="Confirm password" class="form-control"
                                  />
                                  <div class="input-group-append">
                                    <span class="input-group-text eye">
                                      <i class="fa" [ngClass]="{
                                        'fa-eye-slash': !cpwdfieldTextType,
                                        'fa-eye': cpwdfieldTextType
                                      }"
                                      (click)="togglecpwdfieldTextType()"></i>
                                    </span>
                                 </div>
                              </div>
                            <div *ngIf="cpwd.invalid && (cpwd.dirty || cpwd.touched)" class="text-danger">
                              <div *ngIf="cpwd.errors.required">
                                Confirm password is required.
                              </div>
                              <div *ngIf="cpwd.errors.mustMatch">Passwords must match</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-12 pt-2">
                        <div class="row">
                          <div class="col-lg-3">
                            <label class="control-label font-weight-bold text-lg-right">Driver Gender:</label>
                          </div>
                          <div class="col-lg-5 px-0">
                            <div class="btn-group-toggle" data-toggle="buttons">
                              <label class="btn btn-outline btn-yesno mr-2 active mb-2">
                                <input id="male" name="male" type="radio">Male</label>
                              <label class="btn btn-outline btn-yesno mr-2 mb-2">
                                <input id="female" name="female" type="radio">Female</label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right">Phone <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <input [(ngModel)]="driverData.phone" name="phone" type="text" class="form-control"
                          (change)="onChangeHideErrors('phone')" placeholder="eg. +18968831455" #mob="ngModel"
                          required pattern="^(\+1)[0-9]{10}$">
                        <div *ngIf="mob.invalid && (mob.dirty || mob.touched)" class="text-danger">
                          <div *ngIf="mob.errors.required">
                            Phone is required.
                          </div>
                          <div *ngIf="mob.errors.pattern">
                            Enter valid phone number eg. +16040571231.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right">Email <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <input [(ngModel)]="driverData.email" name="email" type="text" class="form-control" [disabled]="isEdit"
                          (change)="onChangeHideErrors('email')" placeholder="eg. example@email.com" #em="ngModel"
                          required pattern="^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9]+$">
                        <div *ngIf="em.invalid && (em.dirty || em.touched)" class="text-danger">
                          <div *ngIf="em.errors.required">
                            Email is required.
                          </div>
                          <div *ngIf="em.errors.pattern">
                            Enter valid email eg. johnsmith@test.com.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-4">
                        <label class="control-label font-weight-bold pt-2 font-weight-bold text-lg-right">Group <span
                            class="text-1 optional-label-color">(optional)</span>
                        </label>
                        <ng-select class="form-control form-control-sm" [(ngModel)]="driverData.groupID" name="groupID"
                          placeholder="Select group of which driver will be part of">
                          <ng-option *ngFor="let group of groups" value="{{group.groupID}}">
                            {{group.groupName}}</ng-option>
                        </ng-select>
                      </div>
                      <div class="col-lg-1 mar-top-37 text-right"> <a data-toggle="modal"
                          data-target="#addDriverGroupModal" href="javascript:;"
                          class="modal-with-form btn cus-btn-padd btn-success">
                          <em class="fas fa-plus"></em>
                        </a>
                      </div>
                      <div class="col-lg-4">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Assign Vehicle <span
                            class="text-1 optional-label-color">(optional)</span>
                        </label>
                        <ng-select [(ngModel)]="driverData.assignedVehicle" name="assignedVehicle"
                          placeholder="Assign vehicle to driver">
                          <ng-option *ngFor="let vehicle of vehicles | async;" value="{{vehicle.vehicleID}}">
                            {{vehicle.vehicleIdentification}}
                          </ng-option>
                        </ng-select>
                      </div>
                      <div class="col-lg-1 mar-top-37 text-right"><a (click)="gotoVehiclePage();" href="javascript:;"
                          class="btn btn-success cus-btn-padd"><em class="fas fa-plus"></em></a>
                      </div>
                      <div class="col-lg-10">
                        <div class="row">
                          <div class="col-lg-6" *ngIf="driverData.driverType !== 'contractor'">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Start Date <span
                                class="mandfield text-2 ml-1"><sup>*</sup></span>
                            </label>
                            <input (click)="onChangeHideErrors('startDate');d11.toggle()" ngbDatepicker
                              #d11="ngbDatepicker" [(ngModel)]="driverData.startDate" name="startDate" type="text"
                              class="form-control" placeholder="yyyy/mm/dd" #dSlt="ngModel" required>
                            <div *ngIf="dSlt.invalid && (dSlt.dirty || dSlt.touched)" class="text-danger">
                              <div *ngIf="dSlt.errors.required">
                                Start Date is required.
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-4" *ngIf="driverData.driverType !== 'contractor'">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Termination Date <span
                                class="text-1 optional-label-color">(optional)</span>
                            </label>
                            <input (click)="d12.toggle()" ngbDatepicker #d12="ngbDatepicker"
                              [(ngModel)]="driverData.terminationDate" name="terminationDate" type="text"
                              class="form-control" placeholder="yyyy/mm/dd" 
                              >
                            <!-- <div *ngIf="tDate.invalid && (tDate.dirty || tDate.touched)" class="text-danger">
                              <div *ngIf="tDate.errors.required" class="text-danger">
                                Termination Date must contain yyyy/mm/dd format.
                              </div>

                            </div> -->
                          </div>
                          <!-- driver is owner operator -->
                          <div class="col-lg-6" *ngIf="driverData.driverType === 'contractor'">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Start Date <span
                                class="mandfield text-2 ml-1"><sup>*</sup></span>
                            </label>
                            <input (click)="onChangeHideErrors('contractStart');d4.toggle()" ngbDatepicker
                              #d4="ngbDatepicker" [(ngModel)]="driverData.contractStart" name="contractStart"
                              type="text" class="form-control" placeholder="yyyy/mm/dd"
                              #dSlt="ngModel" required>
                            <div *ngIf="dSlt.invalid && (dSlt.dirty || dSlt.touched)" class="text-danger">
                              <div *ngIf="dSlt.errors.required">
                                Start Date is required.

                              </div>
                            </div>
                          </div>
                          <div class="col-lg-4" *ngIf="driverData.driverType === 'contractor'">
                            <label class="control-label font-weight-bold text-lg-right pt-2">End Date <span
                                class="text-1 optional-label-color">(optional)</span>
                            </label>
                            <input (click)="d5.toggle()" ngbDatepicker #d5="ngbDatepicker"
                              [(ngModel)]="driverData.contractEnd" name="contractEnd" type="text"
                              class="form-control" placeholder="yyyy/mm/dd" #endDate="ngModel"
                              >
                            
                          </div>
                          <div class="col-lg-2 pl-0 pr-0 mar-top-37">
                            <input (change)="selectPhoto($event)" [(ngModel)]="driverData.driverImage"
                              name="driverImage" type="file" class="hidden_input1 w-100" />
                            <label class="btn btn-sm btn-success" for="upload"><i class="fas fa-plus"></i> Add
                              Photo Type&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Citizenship <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <ng-select [(ngModel)]="driverData.citizenship" name="citizenship"
                          placeholder="Select the citizenship country of driver"
                          (change)="onChangeHideErrors('citizenship')" #cSlt="ngModel" required>
                          <ng-option class="text-capitalize" *ngFor="let country of countries"
                            value="{{country.countryID}}">{{country.countryName}}</ng-option>
                        </ng-select>
                        <div *ngIf="cSlt.invalid && (cSlt.dirty || cSlt.touched)" class="text-danger">
                          <div *ngIf="cSlt.errors.required">
                            Citizenship is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5 mar-top-37">
                        <input type="file" id="upload" hidden />
                        <label class="btn btn-sm btn-block btn-success" for="upload"><i class="fas fa-plus"></i> Add
                          Abstract History Document <span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-lg-10 mt-2" *ngIf="absDocs.length > 0">
                        <div class="vehicle-common-box p-3">
                          <div class="row">
                            <div class="col-lg-6"><label class="control-label font-weight-bold text-3">Abstract History
                                Document(s)</label></div>
                            <div class="col-lg-6 text-right">
                            </div>
                          </div>
                          <hr class="solid mt-2">
                          <div class="row mb-1" *ngFor="let item of absDocs;let d= index">
                            <div class="col-lg-9"><a href="javascript:;" data-toggle="modal" data-target="#viewDocModal"
                                (click)="setPDFSrc(item.path)">Document {{d+1}}</a> </div>
                            <div class="col-lg-3 text-right">
                              <i class="far fa-file text-dak mr-1" (click)="setPDFSrc(item.path)" data-toggle="modal"
                                data-target="#viewDocModal"></i>
                              <a href="javascript:;" (click)="delete('abs',item.name, d)" class="modal-with-form"><i
                                  class="fas fa-times text-danger"></i></a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row mb-3 text-dark">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="form-group row text-dark justify-content-between adddriverpl">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold text-lg-right text-5 pt-2">Driver Address</label>
                  </div>
                </div>
                <div *ngFor="let item of driverData.address; let i = index;"
                  class="address-item justify-content-between adddriverpl">
                  <div class="form-group row border-bottom-0">
                    <div class="col-lg-6">
                      <div class="row">
                        <div class="col-lg-10">
                          <label class="control-label font-weight-bold text-lg-right pt-2">Address
                            Type&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                          <ng-select [(ngModel)]="item.addressType" name="address[{{i}}].addressType"
                            placeholder="Select address type">
                            <ng-option value="Home">Home</ng-option>
                            <ng-option value="Maiing Address">Maiing Address</ng-option>
                          </ng-select>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Start typing your
                        location&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <input [(ngModel)]="item.userLocation" name="userLocation{{i}}" (keyup)="searchTerm.next($event);"
                        type="text" class="form-control" placeholder="eg. 71 Ave NW, Calgary, AB T3B, Canada"
                        [disabled]="item.manual">
                        
                      <div class="checkbox-custom pt-2">
                        <input [(ngModel)]="item.manual" name="manual{{i}}" (change)="manAddress($event, i)"
                          type="checkbox">
                        <label for="man_address">Type Manually</label>
                      </div>
                      
                      <div class="map-search__results bg-white">
                        <ul class="p-0 m-0 text-left">
                          <li *ngFor="let item of searchResults;">
                            <a href="javascript:;" (click)="userAddress(i, item)">{{item.address.label}}</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="col-lg-2 mar-top-37 pl-0">
                      <a class="btn btn-dark cus-btn-padd mr-2" href="javascript:;"
                        (click)="clearUserLocation(i);">Clear</a>
                      <button type="button" *ngIf="i === 0" [disabled]="driverData.address.length === 2"
                        (click)="addAddress();" class="btn cus-btn-padd btn-success"><i class="fa fa-plus"></i></button>
                      <a *ngIf="i != 0;" (click)="remove('address', i, item.addressID)"
                        class="btn btn-danger cus-btn-padd" href="javascript:;"><i class="fa fa-minus fa-fw"></i></a>
                    </div>
                    
                  </div>
                  <div class="address-inner" *ngIf="item.manual">
                    <div class="row mb-3 border-bottom pb-4">
                      <div class="col-lg-6 pt-3">
                        <div class="row">
                          <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Select
                              Country   </label>
                            <ng-select [(ngModel)]="item.countryID" name="countryID{{i}}" data-plugin-selectTwo
                              (change)="getStates($event, i)" class="form-control populate"
                              placeholder="Select country">
                              <ng-option class="text-capitalize" *ngFor="let country of addressCountries"
                                value="{{country.countryID}}">{{country.countryName}}</ng-option>
                            </ng-select>
                            
                          </div>
                          <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Select
                              Province </label>
                            <ng-select (change)="getCities($event, i)" [(ngModel)]="item.stateID" name="stateID{{i}}"
                              placeholder="Select Province" >
                              <ng-option class="text-capitalize" *ngFor="let state of states" value="{{state.stateID}}">
                                {{state.stateName}}</ng-option>
                            </ng-select>
                            
                          </div>
                          <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Select
                              City </label>
                            <ng-select (change)="getCityName(i, $event)" [(ngModel)]="item.cityID" name="cityID{{i}}"
                              placeholder="Select city">
                              <ng-option class="text-capitalize" *ngFor="let city of cities" value="{{city.cityID}}">
                                {{city.cityName}}</ng-option>
                            </ng-select>
                            
                          </div>
                          <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Zip
                              Code </label>
                            <input [(ngModel)]="item.zipCode" name="zipCode{{i}}" type="text" class="form-control"
                              placeholder=" eg. 7V2 3R4" #txtZip="ngModel"   pattern="^[a-zA-Z0-9\s]+$">
                              <div *ngIf="txtZip.invalid && (txtZip.dirty || txtZip.touched)" class="text-danger">
                                
                                <div *ngIf="txtZip.errors.pattern">
                                 Zip Code must contains uppercase,lowercase,numbers and special characters for period(space) only.
                                    </div> 
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-6 pt-3">
                        <div class="row">
                          <div class="col-lg-12">
                            <label class="control-label font-weight-bold text-lg-right">Address
                              1 </label>
                            <input [(ngModel)]="item.address1" name="address1{{i}}" type="text" class="form-control"
                              placeholder="eg. Rocky View County, AB, Canada" #add1="ngModel" pattern="^[a-zA-Z0-9\s\,\-\&]+$">
                              <div *ngIf="add1.invalid && (add1.dirty || add1.touched)" class="text-danger">
                               
                                <div *ngIf="add1.errors.pattern">
                               Address 1 must contains uppercase,lowecase,numbers and special characters for period(space,&,-,'.') only.
                                    </div> 
                            </div>
                          </div>
                          <div class="col-lg-12">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Address
                              2&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                            <input [(ngModel)]="item.address2" name="address2{{i}}" type="text" class="form-control"
                              placeholder="eg. Rocky View County, AB, Canada" #add2="ngModel" pattern="^[a-zA-Z0-9\s\,\-\&]+$">
                              <div *ngIf="add2.invalid && (add2.dirty || add2.touched)" class="text-danger">
                                
                                <div *ngIf="add2.errors.pattern">
                                  Address 2 must contains uppercase,lowecase,numbers and special characters for period(space,&,-,'.') only..
                                    </div> 
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="row adddriverpl">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold text-lg-right text-dark text-5 pt-2">Documents
                      Details</label>
                  </div>
                </div>
                <div class="form-group row adddriverpl text-dark border-0 mb-0 pb-0" id="document-one"
                  *ngFor="let document of driverData.documentDetails;let i = index">
                  <div class="col-lg-12 text-right">
                    <button type="button" *ngIf="i === 0;" (click)="addDocument()" id="add-document"
                      [disabled]="driverData.documentDetails.length == 3" class="btn btn-success cus-btn-padd"><i
                        class="fa fa-plus"></i> Add
                      Another Document</button>
                  </div>

                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-10">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Document Type <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <ng-select [(ngModel)]="document.documentType"
                          [attr.name]="'documentDetails['+i+'].documentType'" [ngModelOptions]="{standalone: true}"
                          placeholder="Select document type"
                          (change)="onChangeHideErrors('documentDetails['+i+'].documentType')" #doc="ngModel" required>

                          <ng-option *ngFor="let documentType of documentTypeList" [value]="documentType.code">
                            {{documentType.description}}</ng-option>

                        </ng-select>
                        <div *ngIf="doc.invalid && (doc.dirty || doc.touched)" class="text-danger">
                          <div *ngIf="doc.errors.required">
                            Document Type is required.
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div>
                      <div class="row">
                        <div class="col-lg-5">
                          <label class="control-label font-weight-bold text-lg-right pt-2">Document# <span
                              class="mandfield text-2 ml-1"><sup>*</sup></span>
                          </label>
                          <input [(ngModel)]="document.document" [attr.name]="'documentDetails['+i+'].document'"
                            [ngModelOptions]="{standalone: true}" type="text" class="form-control"
                            placeholder="eg. Certificate number 2017-17-123456"
                            (change)="onChangeHideErrors('documentDetails['+i+'].document')" #docNum="ngModel" required
                            pattern="^[a-zA-Z0-9\s\#\.\-\_]+$">

                          <div *ngIf="docNum.invalid && (docNum.dirty || docNum.touched)" class="text-danger">
                            <div *ngIf="docNum.errors.required">
                              Document# is required.
                            </div>
                            <div *ngIf="docNum.errors.pattern">
                              Document# must contain combination of small letters,capital letters
                              ,alphanumeric and atleast one special characters(#,/,-,_,.)
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-5">
                          <label class="control-label font-weight-bold text-lg-right pt-2">Issuing Authority <span
                              class="text-1 optional-label-color">(optional)</span>
                          </label>
                          <input [(ngModel)]="document.issuingAuthority"
                            [attr.name]="'documentDetails['+i+'].issuingAuthority'"
                            [ngModelOptions]="{standalone: true}" type="text" class="form-control"
                            placeholder="eg. Ontario,canada" #authority="ngModel" required pattern="^[a-zA-z\,\s]+$">
                          <div *ngIf="authority.invalid && (authority.dirty || authority.touched)" class="text-danger">

                            <div *ngIf="authority.errors.pattern">
                              Issuing Authority must contain letter and special characters for period(space,',')) only .
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Issuing Country <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <ng-select
                          (change)="onChangeHideErrors('documentDetails['+i+'].issuingCountry');getStates($event)"
                          [(ngModel)]="document.issuingCountry" [attr.name]="'documentDetails['+i+'].issuingCountry'"
                          [ngModelOptions]="{standalone: true}" class="form-control populate"
                          placeholder="Select the issuing country" #iCountry="ngModel" required>
                          <ng-option class="text-capitalize" *ngFor="let country of countries"
                            value="{{country.countryID}}">{{country.countryName}}</ng-option>
                        </ng-select>
                        <div *ngIf="iCountry.invalid && (iCountry.dirty || iCountry.touched)" class="text-danger">
                          
                            <div *ngIf="iCountry.errors.required">
                              Select valid issue country from the list is required.
                            </div>
                          
  
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Issuing State/Province <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <ng-select
                          (change)="onChangeHideErrors('documentDetails['+i+'].issuingState');getCities($event)"
                          [(ngModel)]="document.issuingState" [attr.name]="'documentDetails['+i+'].issuingState'"
                          [ngModelOptions]="{standalone: true}" placeholder="Select issuing Province" #iState="ngModel" required>
                          <ng-option class="text-capitalize" *ngFor="let state of states" value="{{state.stateID}}">
                            {{state.stateName}}</ng-option>
                        </ng-select>
                        <div *ngIf="iState.invalid && (iState.dirty || iState.touched)" class="text-danger">
                        
                            <div *ngIf="iState.errors.required">
                              Select valid issue state/province from the list is required.
                            </div>
                        
  
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Issue Date <span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <input [(ngModel)]="document.issueDate"
                          (click)="onChangeHideErrors('documentDetails['+i+'].issueDate');d.toggle()" ngbDatepicker
                          #d="ngbDatepicker" type="text" class="form-control" [maxDate]="getcurrentDate"
                          [minDate]="birthDateMinLimit" placeholder="yyyy/mm/dd"
                          [attr.name]="'documentDetails['+i+'].issueDate'" [ngModelOptions]="{standalone: true}"
                          #idSlt="ngModel" required>
                        <div *ngIf="idSlt.invalid && (idSlt.dirty || idSlt.touched)" class="text-danger">
                          <div *ngIf="idSlt.errors.required">
                            Issue Date is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-5" *ngIf="document.documentType != 'BCN'">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Expiry Date <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <input [(ngModel)]="document.expiryDate" [attr.name]="'documentDetails['+i+'].expiryDate'"
                          [ngModelOptions]="{standalone: true}"
                          (click)="onChangeHideErrors('documentDetails['+i+'].expiryDate');d1.toggle()" ngbDatepicker
                          #d1="ngbDatepicker" placeholder="yyyy/mm/dd" [maxDate]="futureDatesLimit"
                          [minDate]="getcurrentDate" type="text" class="form-control" #expSlt="ngModel" required>
                        <div *ngIf="expSlt.invalid && (expSlt.dirty || expSlt.touched)" class="text-danger">
                          <div *ngIf="expSlt.errors.required">
                            Expiry Date is required.
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-10">
                        <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Attach
                          Document Type&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                        <input class="form-control p-0" name="document.uploadedDocs{{i}}"
                          (change)="selectDocuments($event, i)" type="file" multiple>
                      </div>
                      <div class="col-lg-10 mt-2" *ngIf="assetsDocs[i]">
                        <div class="vehicle-common-box p-3">
                          <div class="row">
                            <div class="col-lg-6"><label
                                class="control-label font-weight-bold text-3">Document(s)</label>
                            </div>
                            <div class="col-lg-6 text-right">
                            </div>
                          </div>
                          <hr class="solid mt-2">
                          <div class="row mb-1" *ngFor="let doc of assetsDocs[i];let d= index">
                            <div class="col-lg-9"><a href="javascript:;" data-toggle="modal" data-target="#viewDocModal"
                                (click)="setPDFSrc(doc.path)">Document
                                {{d+1}}</a> </div>
                            <div class="col-lg-3 text-right">
                              <i class="far fa-file text-dak mr-1" (click)="setPDFSrc(doc.path)" data-toggle="modal"
                                data-target="#viewDocModal"></i>
                              <a href="javascript:;" (click)="delete('doc',doc.name, i)" class="modal-with-form"><i
                                  class="fas fa-times text-danger"></i></a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>


                  </div>
                  <div class="col-lg-6 text-right"> <a href="javascript:;" (click)="remove('document', i)"
                      class="btn btn-danger"><i class="fa fa-minus"></i></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="row text-dark adddriverpl">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold text-lg-right text-5 pt-2">Cross Border Details</label>
                  </div>
                </div>
                <div class="form-group row adddriverpl text-dark" id="document-one">
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">ACI ID <span
                            class="text-1 optional-label-color">(optional)</span>
                        </label>
                        <input [(ngModel)]="driverData.crossBorderDetails.ACI_ID" name="crossBorderDetails.ACI_ID"
                          type="text" class="form-control" placeholder="10 digits , eg.4567895676" #aci="ngModel"
                          pattern="^[0-9]{10}$" maxlength="10">
                        <div *ngIf="aci.invalid && (aci.dirty || aci.touched)" class="text-danger">
                          <div *ngIf="aci.errors.pattern">
                            ACI ID must contain 10 numbers only. eg.1234567895
                          </div>

                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">ACE ID <span
                            class="text-1 optional-label-color">(optional)</span>
                        </label>
                        <input [(ngModel)]="driverData.crossBorderDetails.ACE_ID" name="crossBorderDetails.ACE_ID"
                          type="text" class="form-control" placeholder="10 digits , eg.4567895676" #ace="ngModel"
                          pattern="^[0-9]{10}$" maxlength="10">
                        <div *ngIf="ace.invalid && (ace.dirty || ace.touched)" class="text-danger">
                          <div *ngIf="ace.errors.pattern">
                            ACE ID must contain 10 numbers only. eg.1234567895
                          </div>

                        </div>
                      </div>
                    </div>
                    <div class="row pt-2">
                      <div class="col-lg-10">
                        <div class="checkbox-custom pt-2">
                          <input type="checkbox" [(ngModel)]="driverData.crossBorderDetails.csa" name="crossBorderDetails.csa">
                          <label for="csa">CSA</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div>
                      <div class="row">
                        <div class="col-lg-5">
                          <label class="control-label font-weight-bold text-lg-right pt-2">FAST# <span
                              class="text-1 optional-label-color">(optional)</span>
                          </label>
                          <input [(ngModel)]="driverData.crossBorderDetails.fast_ID" name="crossBorderDetails.fast_ID"
                            type="text" class="form-control"
                            placeholder="14 digits, beginning with 4270 or 4110 and ending with 00 or 01 or 02 (42700012345601)"
                            #fastCard="ngModel" pattern="^[4270|4110]{4}[0-9]{8}[00|01]{2}$" maxlength="14">
                          <div *ngIf="fastCard.invalid && (fastCard.dirty || fastCard.touched)" class="text-danger">
                            <div *ngIf="fastCard.errors.pattern">
                              Fast Card must contain only 14 numbers beginning with 4270 or 4110 and ending with 00 or
                              01.
                            </div>

                          </div>
                        </div>
                        <div class="col-lg-5">
                          <label class="control-label font-weight-bold text-lg-right pt-2">FAST Expiry <span
                              class="text-1 optional-label-color">(optional)</span>
                          </label>
                          <input [(ngModel)]="driverData.crossBorderDetails.fastExpiry"
                            name="crossBorderDetails.fastExpiry" (click)="d2.toggle()" ngbDatepicker #d2="ngbDatepicker"
                            type="text" class="form-control" placeholder="yyyy/mm/dd">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="form-group row text-dark adddriverpl">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold text-lg-right text-5 pt-2">Licence Details</label>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">CDL# <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <input [(ngModel)]="driverData.CDL_Number" name="CDL_Number"
                          type="text" class="form-control" placeholder="9 digits eg. 0005-04440"
                          (change)="onChangeHideErrors('CDL_Number')" #cdl="ngModel" required maxlength="9"
                          pattern="^[0-9]{9}$">
                        <div *ngIf="cdl.invalid && (cdl.dirty || cdl.touched)" class="text-danger">
                          <div *ngIf="cdl.errors.required">
                            CDL# is required.
                          </div>
                          <div *ngIf="cdl.errors.pattern">
                            CDL# must contain 9 numbers only. eg.123456894
                          </div>


                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Licence Expiration <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <input (click)="onChangeHideErrors('licenceDetails.licenceExpiry');d3.toggle()" ngbDatepicker
                          #d3="ngbDatepicker" [(ngModel)]="driverData.licenceDetails.licenceExpiry"
                          name="licenceDetails.licenceExpiry" [maxDate]="futureDatesLimit" [minDate]="getcurrentDate"
                          type="text" class="form-control" placeholder="yyyy/mm/dd" #leSlt="ngModel" required>
                        <div *ngIf="leSlt.invalid && (leSlt.dirty || leSlt.touched)" class="text-danger">
                          <div *ngIf="leSlt.errors.required">
                            Licence Expiration is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Issued Country <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <ng-select (change)="onChangeHideErrors('licenceDetails.issuedCountry');getStates($event)"
                          [(ngModel)]="driverData.licenceDetails.issuedCountry" placeholder="Select country"
                          name="licenceDetails.issuedCountry" class="form-control populate" #conSlt="ngModel" required>

                          <ng-option class="text-capitalize" *ngFor="let country of addressCountries"
                            value="{{country.countryID}}">{{country.countryName}}</ng-option>

                        </ng-select>
                        <div *ngIf="conSlt.invalid && (conSlt.dirty || conSlt.touched)" class="text-danger">
                          <div *ngIf="conSlt.errors.required">
                            Issued Country is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Issued Province <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <ng-select [(ngModel)]="driverData.licenceDetails.issuedState" name="licenceDetails.issuedState"
                          placeholder="Select Province"
                          (change)="onChangeHideErrors('licenceDetails.issuedState');getCities($event)" #ipSlt="ngModel"
                          required>


                          <ng-option class="text-capitalize" *ngFor="let state of states" value="{{state.stateID}}">
                            {{state.stateName}}</ng-option>

                        </ng-select>
                        <div *ngIf="ipSlt.invalid && (ipSlt.dirty || ipSlt.touched)" class="text-danger">
                          <div *ngIf="ipSlt.errors.required">
                            Issued Province is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-10 pt-2">
                        <input name="licenceDetails.licenceNotification" type="checkbox"
                          class="ng-untouched ng-pristine ng-valid">Send notification (Before 30 days of expiration)
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">WCB# <span
                            class="text-1 optional-label-color">(optional)</span>
                        </label>
                        <input [(ngModel)]="driverData.licenceDetails.WCB" name="licenceDetails.WCB" type="text"
                          class="form-control"
                          placeholder="total 7 digits , 1 is alphabetical and 6 is numeric . eg.123456A" #wcb="ngModel"
                          pattern="^[a-zA-Z0-9]{2,7}$" maxlength="7">
                        <div *ngIf="wcb.invalid && (wcb.dirty || wcb.touched)" class="text-danger">
                          <div *ngIf="wcb.errors.pattern">
                            WCB must contain 7 characters only in which 1 is alphabetical and 6 is numeric. eg.123456A.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Medical Card Renewal <span
                            class="text-1 optional-label-color">(optional)</span>
                        </label>
                        <input (click)="d7.toggle()" ngbDatepicker #d7="ngbDatepicker"
                          [(ngModel)]="driverData.licenceDetails.medicalCardRenewal"
                          name="licenceDetails.medicalCardRenewal" type="text" data-plugin-datepicker=""
                          class="form-control" placeholder="yyyy/mm/dd">
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Health Care# <span
                            class="text-1 optional-label-color">(optional)</span>
                        </label>
                        <input [(ngModel)]="driverData.licenceDetails.healthCare" name="licenceDetails.healthCare"
                          type="text" class="form-control"
                          placeholder="total 13 digits , 11 is numeric and 2 is alphabets , eg. 12345678923AB"
                          #hCare="ngModel" pattern="^[a-zA-Z0-9]{2,13}$" maxlength="13">
                        <div *ngIf="hCare.invalid && (hCare.dirty || hCare.touched)" class="text-danger">
                          <div *ngIf="hCare.errors.pattern">
                            Health Care must contain 13 characters only in which 2 is alphabetical and 11 is numeric.
                            eg. AB12345678922.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Select Vehicle Type <span
                            class="text-1 optional-label-color">(optional)</span>
                        </label>
                        <ng-select [(ngModel)]="driverData.licenceDetails.vehicleType" name="licenceDetails.vehicleType"
                          placeholder="Select licence type of driver">
                          <ng-option value="Heavy Vehicle">Heavy Vehicle</ng-option>
                          <ng-option value="Light Vehicle">Light Vehicle</ng-option>
                        </ng-select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="form-group row text-dark adddriverpl">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold text-lg-right text-5 pt-2">Payment Details</label>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-10">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Default
                          Payment Type<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <ng-select [(ngModel)]="driverData.paymentDetails.paymentType" name="paymentDetails.paymentType"
                          placeholder="Select the payment type" id="paymentTypeForm"
                          (change)="onChangeHideErrors('paymentDetails.paymentType');changePaymentModeForm($event)"
                          #paySlt="ngModel" required>
                          <ng-option value="Pay Per Mile">Pay Per Mile</ng-option>
                          <ng-option value="Percentage">Percentage</ng-option>
                          <ng-option value="Pay Per Hour">Pay Per Hour</ng-option>
                          <ng-option value="Pay Per Delivery">Pay Per Delivery</ng-option>
                        </ng-select>
                        <div *ngIf="paySlt.invalid && (paySlt.dirty || paySlt.touched)" class="text-danger">
                          <div *ngIf="paySlt.errors.required">
                            Default Payment Type is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-10">
                        <label class="control-label font-weight-bold text-lg-right pt-2">SIN <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <input (change)="onChangeHideErrors('SIN')"
                          [(ngModel)]="driverData.SIN" name="SIN"
                          type="text" class="form-control" placeholder="9 digits , eg.123456789" #sin="ngModel" required
                          pattern="^[0-9]+$" maxlength="9">
                        <div *ngIf="sin.invalid && (sin.dirty || sin.touched)" class="text-danger">
                          <div *ngIf="sin.errors.required">
                            SIN is required.
                          </div>
                          <div *ngIf="sin.errors.pattern">
                            SIN must contains 9 numbers only. eg.123456789
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="row" id="payPerHourForm"
                      *ngIf="driverData.paymentDetails.paymentType == 'Pay Per Hour'">
                      <div class="col-lg-4">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Rate<span
                            class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <input [(ngModel)]="driverData.paymentDetails.rate" name="paymentDetails.rate" type="text"
                          class="form-control" placeholder="eg. 10,20" #Rate="ngModel" required pattern="^[0-9]+$">
                          <div *ngIf="Rate.invalid && (Rate.dirty || Rate.touched)" class="text-danger">
                            <div *ngIf="Rate.errors.required">
                             Rate is required
                            </div>
                            <div *ngIf="Rate.errors.pattern">
                              Rate must contains numbers only.   
                             </div>
                           

                         </div>
                      </div>
                      <div class="col-lg-6">
                        <label class="control-label font-weight-bold text-lg-right pt-2 mt-1"></label>
                        <ng-select class="mt-2" [(ngModel)]="driverData.paymentDetails.rateUnit"
                          name="paymentDetails.rateUnit" placeholder="Select Currency" #rCurrency="ngModel" required>

                          <ng-option value="CAD">CAD</ng-option>
                          <ng-option value="USD">USD</ng-option>
                        </ng-select>
                        <div *ngIf="rCurrency.invalid && (rCurrency.dirty || rCurrency.touched)" class="text-danger">
                          <div *ngIf="rCurrency.errors.required">
                           Select valid currency from the list is required.
                          </div>
                          
                         

                       </div>
                        
                      </div>
                      <div class="col-lg-4">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Waiting
                          period Pay<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <input [(ngModel)]="driverData.paymentDetails.waitingPay" name="paymentDetails.waitingPay"
                          type="text" class="form-control" placeholder=" eg. 10,20" #wPay="ngModel" required pattern="^[0-9]+$">
                          <div *ngIf="wPay.invalid && (wPay.dirty || wPay.touched)" class="text-danger">
                            <div *ngIf="wPay.errors.required">
                               Waiting Period Pay is required.
                            </div>
                            <div *ngIf="wPay.errors.pattern">
                              Waiting Period Pay must contains numbers only.   
                             </div>
                           

                         </div>
                      </div>
                      <div class="col-lg-6">
                        <label class="control-label font-weight-bold text-lg-right pt-2 mt-1"></label>
                        <ng-select class="mt-2" [(ngModel)]="driverData.paymentDetails.waitingPayUnit"
                          name="paymentDetails.waitingPayUnit" placeholder="Select Currency" #wCurrency="ngModel" required>

                          <ng-option value="CAD">CAD</ng-option>
                          <ng-option value="USD">USD</ng-option>
                        </ng-select>
                        <div *ngIf="wCurrency.invalid && (wCurrency.dirty || wCurrency.touched)" class="text-danger">
                          <div *ngIf="wCurrency.errors.required">
                           Select valid currency from the list is required.
                          </div>
                          
                         

                       </div>
                      </div>
                      <div class="col-lg-4">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Waiting hour
                          start after<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <input [(ngModel)]="driverData.paymentDetails.waitingHourAfter"
                          name="paymentDetails.waitingHourAfter" type="text" class="form-control"
                          placeholder="eg. Min 3 hours" #wHour="ngModel" required pattern="^[a-zA-Z0-9\s]+$">
                          <div *ngIf="wHour.invalid && (wHour.dirty || wHour.touched)" class="text-danger">
                            <div *ngIf="wHour.errors.required">
                               Waiting Hour Start After is required.
                            </div>
                            <div *ngIf="wHour.errors.pattern">
                              Waiting Hour Start After must contains uppercase,lowercase,numbers and special characters for period(space) only.   
                             </div>
                           

                         </div>
                      </div>

                    </div>
                    <div class="row" id="payPerHourForm"
                      *ngIf="driverData.paymentDetails.paymentType == 'Pay Per Delivery'">
                      <div class="col-lg-4">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Delivery
                          Rate<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <input [(ngModel)]="driverData.paymentDetails.deliveryRate" name="paymentDetails.deliveryRate"
                          type="text" class="form-control" placeholder="eg. 30,35" #dRate="ngModel" required pattern="^[0-9]+$">
                          <div *ngIf="dRate.invalid && (dRate.dirty || dRate.touched)" class="text-danger">
                            <div *ngIf="dRate.errors.required">
                               Delivery Rate is required.
                            </div>
                            <div *ngIf="dRate.errors.pattern">
                              Delivery Rate must contains numbers only.   
                             </div>
                           

                         </div>
                      </div>
                      <div class="col-lg-6">
                        <label class="control-label font-weight-bold text-lg-right pt-2 mt-1"></label>
                        <ng-select class="mt-2" [(ngModel)]="driverData.paymentDetails.deliveryRateUnit"
                          name="paymentDetails.deliveryRateUnit" placeholder="Select Currency" #dCurrency="ngModel" required>

                          <ng-option value="CAD">CAD</ng-option>
                          <ng-option value="USD">USD</ng-option>
                        </ng-select>
                        <div *ngIf="dCurrency.invalid && (dCurrency.dirty || dCurrency.touched)" class="text-danger">
                          <div *ngIf="dCurrency.errors.required">
                        Select valid currency from the list is required.
                          </div>
                          
                         

                       </div>
                      </div>
                    </div>
                    <div class="row" id="payPercentageForm"
                      *ngIf="driverData.paymentDetails.paymentType == 'Percentage'">
                      <div class="col-lg-10">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Load Pay
                          Percent<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <div class="row">
                          <div class="col-lg-3">
                            <input [(ngModel)]="driverData.paymentDetails.loadPayPercentage"
                              name="paymentDetails.loadPayPercentage" type="text" class="form-control"
                              placeholder="eg. 2%, 5%, 10%"
                              (change)="onChangeHideErrors('paymentDetails.loadPayPercentage')" #pLoad="ngModel" required pattern="^[0-9]+$">
                              <div *ngIf="pLoad.invalid && (pLoad.dirty || pLoad.touched)" class="text-danger">
                                <div *ngIf="pLoad.errors.required">
                                   Load Pay Percent is required.
                                </div>
                                <div *ngIf="pLoad.errors.pattern">
                                  Load Pay Percent must contains numbers only.   
                                 </div>
                               
    
                             </div>
                          </div>
                          <div class="col-lg-2 px-0">
                            <label class="font-weight-bold">%</label>
                            <label class="font-weight-bold pull-right">of</label>
                          </div>
                          <div class="col-lg-7">
                            <ng-select [(ngModel)]="driverData.paymentDetails.loadPayPercentageOf"
                              name="paymentDetails.loadPayPercentageOf" placeholder="Select the percentage type of"
                              (change)="onChangeHideErrors('paymentDetails.loadPayPercentageOf')" #sPer="ngModel" required>

                              <ng-option value="Freight Fees">Freight Fees</ng-option>
                              <ng-option value="Freight + Fuel Surcharge">Freight + Fuel Surcharge
                              </ng-option>
                              <ng-option value="Total Income">Total Income</ng-option>

                            </ng-select>
                            <div *ngIf="sPer.invalid && (sPer.dirty || sPer.touched)" class="text-danger">
                              <div *ngIf="sPer.errors.required">
                                 Select valid freight from the list is required.
                              </div>
                              
                             
  
                           </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div>
                      <div class="row" id="payPerMileForm"
                        *ngIf="driverData.paymentDetails.paymentType == 'Pay Per Mile'" style="display: flex;">
                        <div class="col-lg-3 pr-0">
                          <label class="control-label font-weight-bold text-lg-right pt-2">Loaded
                            Miles<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                          <input [(ngModel)]="driverData.paymentDetails.loadedMiles" name="paymentDetails.loadedMiles"
                            type="text" class="form-control" placeholder="eg. 10,20" #lMiles="ngModel" required pattern="^[0-9]+$">
                            <div *ngIf="lMiles.invalid && (lMiles.dirty || lMiles.touched)" class="text-danger">
                              <div *ngIf="lMiles.errors.required">
                                Loaded Miles is required.
                              </div>
                              <div *ngIf="lMiles.errors.pattern">
                               Loaded Miles must contains numbers only.   
                               </div>
                             
  
                           </div>
                        </div>
                        <div class="col-lg-2 ">
                          <label class="control-label font-weight-bold text-lg-right pt-2 mt-1"></label>
                          <ng-select class="mt-2" [(ngModel)]="driverData.paymentDetails.loadedMilesUnit"
                            name="paymentDetails.loadedMilesUnit" placeholder="Select Currency"
                            (change)="onChangeHideErrors('paymentDetails.loadedMilesUnit')" #milesC="ngModel" required>

                            <ng-option value="CAD">CAD</ng-option>
                            <ng-option value="USD">USD</ng-option>
                          </ng-select>
                          <div *ngIf="milesC.invalid && (milesC.dirty || milesC.touched)" class="text-danger">
                            <div *ngIf="milesC.errors.required">
                              Select valid currency from the list is required.
                            </div>
                            
                           

                         </div>
                        </div>
                        <div class="col-lg-3 pr-0">
                          <label class="control-label font-weight-bold text-lg-right pt-2">Empty
                            Miles<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                          <input [(ngModel)]="driverData.paymentDetails.emptyMiles" name="paymentDetails.emptyMiles"
                            type="text" class="form-control" placeholder="eg. 10,20" #eMiles="ngModel" required pattern="^[0-9]+$">
                            <div *ngIf="eMiles.invalid && (eMiles.dirty || eMiles.touched)" class="text-danger">
                              <div *ngIf="eMiles.errors.required">
                            Empty Miles is required.
                              </div>
                              <div *ngIf="eMiles.errors.pattern">
                           Empty Miles must contains numbers only.   
                               </div>
                             
  
                           </div>
                        </div>
                        <div class="col-lg-2 ">
                          <label class="control-label font-weight-bold text-lg-right pt-2 mt-1"></label>
                          <ng-select class="mt-2" [(ngModel)]="driverData.paymentDetails.emptyMilesUnit"
                            name="paymentDetails.emptyMilesUnit" placeholder="Select Currency"
                            (change)="onChangeHideErrors('paymentDetails.emptyMilesUnit')" #eCurrency="ngModel" required>
                            <ng-option value="CAD">CAD</ng-option>
                            <ng-option value="USD">USD</ng-option>
                          </ng-select>
                          <div *ngIf="eCurrency.invalid && (eCurrency.dirty || eCurrency.touched)" class="text-danger">
                            <div *ngIf="eCurrency.errors.required">
                               Select valid currency from the list is required.
                            </div>
                           
                           

                         </div>
                        </div>
                        <div class="col-lg-3 pr-0">
                          <label class="control-label font-weight-bold text-lg-right pt-2">Loaded
                            Miles (Team) </label>
                          <input [(ngModel)]="driverData.paymentDetails.loadedMilesTeam"
                            name="paymentDetails.loadedMilesTeam" type="text" class="form-control"
                            placeholder="eg. 10,20" #tMiles="ngModel" required pattern="^[0-9]+$">
                            <div *ngIf="tMiles.invalid && (tMiles.dirty || tMiles.touched)" class="text-danger">
                              <div *ngIf="tMiles.errors.required">
                                Loaded Miles(Team) is required.
                              </div>
                              <div *ngIf="tMiles.errors.pattern">
                               Loaded Miles(Team)  must contains numbers only.   
                               </div>
                             
  
                           </div>
                        </div>
                        <div class="col-lg-2">
                          <label class="control-label font-weight-bold text-lg-right pt-2 mt-1"></label>
                          <ng-select class="mt-2" [(ngModel)]="driverData.paymentDetails.loadedMilesTeamUnit"
                            name="paymentDetails.loadedMilesTeamUnit" placeholder="Select Currency" #tCurrency="ngModel" required>


                            <ng-option value="CAD">CAD</ng-option>
                            <ng-option value="USD">USD</ng-option>
                          </ng-select>
                          <div *ngIf="tCurrency.invalid && (tCurrency.dirty || tCurrency.touched)" class="text-danger">
                            <div *ngIf="tCurrency.errors.required">
                               Select valid currency from the list is required.
                            </div>
                            
                           

                         </div>
                        </div>
                        <div class="col-lg-3 pr-0">
                          <label class="control-label font-weight-bold text-lg-right pt-2">Empty
                            Miles (Team)</label>
                          <input [(ngModel)]="driverData.paymentDetails.emptyMilesTeam"
                            name="paymentDetails.emptyMilesTeam" type="text" class="form-control"
                            placeholder="eg. 10,20" #emptyMiles="ngModel" required pattern="^[0-9]+$">
                            <div *ngIf="emptyMiles.invalid && (emptyMiles.dirty || emptyMiles.touched)" class="text-danger">
                              <div *ngIf="emptyMiles.errors.required">
                                 Empty Miles(Team) is required.
                              </div>
                              <div *ngIf="emptyMiles.errors.pattern">
                                Empty Miles(Team) must contains numbers only.   
                               </div>
                             
  
                           </div> 
                        </div>
                        <div class="col-lg-2">
                          <label class="control-label font-weight-bold text-lg-right pt-2 mt-1"></label>
                          <ng-select class="mt-2" [(ngModel)]="driverData.paymentDetails.emptyMilesTeamUnit"
                            name="paymentDetails.emptyMilesTeamUnit" placeholder="Select Currency" #sltEmpty="ngModel" required>

                            <ng-option value="CAD">CAD</ng-option>
                            <ng-option value="USD">USD</ng-option>
                          </ng-select>
                          <div *ngIf="sltEmpty.invalid && (sltEmpty.dirty || sltEmpty.touched)" class="text-danger">
                            <div *ngIf="sltEmpty.errors.required">
                              Select empty miles(team) from the list is required.
                            </div>
                           
                           

                         </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-10">
                          <label class="control-label font-weight-bold text-lg-right pt-2">Pay
                            Period<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                          <ng-select [(ngModel)]="driverData.paymentDetails.payPeriod" name="paymentDetails.payPeriod"
                            placeholder="Select pay period of the driver"
                            (change)="onChangeHideErrors('paymentDetails.payPeriod')" #ppSlt="ngModel" required>

                            <ng-option value="Weekly">Weekly</ng-option>
                            <ng-option value="Biweekly">Biweekly</ng-option>
                            <ng-option value="Monthly">Monthly</ng-option>
                            <ng-option value="Quaterly">Quaterly</ng-option>
                            <ng-option value="Annually">Annually</ng-option>
                          </ng-select>
                          <div *ngIf="ppSlt.invalid && (ppSlt.dirty || ppSlt.touched)" class="text-danger">
                            <div *ngIf="ppSlt.errors.required">
                              Pay Period Type is required.
                            </div>
                          </div>


                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="form-group row text-dark adddriverpl">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold text-lg-right text-5 pt-2">Compliance Details</label>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-10">
                        <label class="control-label font-weight-bold font-weight-bold text-lg-right pt-2">Status<span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <ng-select [(ngModel)]="driverData.hosDetails.hosStatus"
                          (change)="complianceChange($event);onChangeHideErrors('hosDetails.hosStatus')"
                          name="hosDetails.hosStatus" class="form-control populate"
                          placeholder="Select exemption status of the driver" #sSlt="ngModel" required>

                          <ng-option value="Non Exempted">Non Exempted</ng-option>
                          <ng-option value="Exempted">Exempted</ng-option>

                        </ng-select>
                        <div *ngIf="sSlt.invalid && (sSlt.dirty || sSlt.touched)" class="text-danger">
                          <div *ngIf="sSlt.errors.required">
                            Status is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-10">
                        <label class="control-label font-weight-bold font-weight-bold text-lg-right pt-2">Write Remarks
                          if
                          driver is Exempted.<span class="text-1 optional-label-color">(optional)</span>
                        </label>
                        <textarea style="height: unset !important;" [(ngModel)]="driverData.hosDetails.hosRemarks"
                          name="hosDetails.hosRemarks" class="form-control" rows="4"
                          placeholder=" Enter remarks for the exempted driver"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Type<span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <ng-select [(ngModel)]="driverData.hosDetails.type" name="hosDetails.type"
                          (change)="onChangeHideErrors('hosDetails.type')" placeholder="Select the record keeping type"
                          #tSlt="ngModel" required>
                          <ng-option *ngIf="driverData.hosDetails.hosStatus == 'Non Exempted'" value="ELD">ELD
                          </ng-option>
                          <ng-option *ngIf="driverData.hosDetails.hosStatus == 'Exempted'" value="Log Book">Log Book
                          </ng-option>
                        </ng-select>
                        <div *ngIf="tSlt.invalid && (tSlt.dirty || tSlt.touched)" class="text-danger">
                          <div *ngIf="tSlt.errors.required">
                            Type is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Home Terminal <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <ng-select [(ngModel)]="driverData.hosDetails.homeTerminal" name="hosDetails.homeTerminal"
                          class="form-control populate"
                          (change)="onChangeHideErrors('hosDetails.homeTerminal');"
                          placeholder="Select home terminal of the driver" #home="ngModel" required>
                          <ng-option class="text-capitalize" *ngFor="let yard of carrierYards"
                            value="{{yard.addressID}}">
                            <div *ngIf="yard.manual">
                              {{ yard.address1 }} {{ yard.address2}}, {{ yard.cityName }}, {{
                            yard.stateName }}, {{ yard.countryName }}
                            </div>
                            <div *ngIf="!yard.manual">
                              {{ yard.userLocation }}
                            </div>
                          </ng-option>
                        </ng-select>
                        <div *ngIf="home.invalid && (home.dirty || home.touched)" class="text-danger">
                          <div *ngIf="home.errors.required">
                            Home Terminal is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Operating Zone <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <ng-select [(ngModel)]="driverData.hosDetails.optZone" name="hosDetails.optZone"
                          (change)="onChangeHideErrors('hosDetails.optZone')" class="form-control populate"
                          placeholder="Select the Operating Zone" #sltZone="ngModel" required>
                          <ng-option class="text-capitalize" value="South (Canada)">South (Canada)
                          </ng-option>
                          <ng-option class="text-capitalize" value="North (Canada)">North (Canada)
                          </ng-option>
                          <ng-option class="text-capitalize" value="USA">USA</ng-option>
                        </ng-select>
                        <div *ngIf="sltZone.invalid && (sltZone.dirty || sltZone.touched)" class="text-danger">
                          <div>
                            <div *ngIf="sltZone.errors.required">
                             Select valid operating zone from the list is required.
                            </div>
                          </div>
  
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Home Terminal Timezone <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <ng-select [(ngModel)]="driverData.hosDetails.timezone" name="hosDetails.timezone"
                          (change)="onChangeHideErrors('hosDetails.timezone')" class="form-control populate"
                          placeholder="Select the home terminal timezone" #sltTerminal="ngModel" required>
                          <ng-option class="text-capitalize" *ngFor="let timezone of finaltimezones" [value]="timezone.name">{{timezone.country}} - {{timezone.name}}
                          </ng-option>
                        </ng-select>
                        <div *ngIf="sltTerminal.invalid && (sltTerminal.dirty || sltTerminal.touched)" class="text-danger">
                          <div>
                            <div *ngIf="sltTerminal.errors.required">
                              Select valid home terminal timezone from the list is required.
                            </div>
                          </div>
  
                        </div>
                      </div>
                      <div class="col-lg-10" *ngIf="driverData.hosDetails.hosStatus == 'Non Exempted'">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Cycle <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <ng-select [(ngModel)]="driverData.hosDetails.hosCycle" name="hosDetails.hosCycle"
                          (change)="onChangeHideErrors('hosDetails.hosCycle')" class="form-control populate"
                          placeholder="Select the cycle for the driver" #sltCycle="ngModel" required>
                          <ng-option class="text-capitalize" *ngFor="let cycle of cycles" value="{{cycle.cycleID}}">
                            {{cycle.cycleName}}</ng-option>
                        </ng-select>
                        <div *ngIf="sltCycle.invalid && (sltCycle.dirty || sltCycle.touched)" class="text-danger">
                          <div>
                            <div *ngIf="sltCycle.errors.required">
                              Select valid cycle from the list is required.                     </div>
                          </div>
  
                        </div>
                      </div>

                      <div class="col-lg-6" *ngIf="driverData.hosDetails.hosStatus == 'Non Exempted'">
                        <div class="checkbox">
                          <label class="control-label font-weight-bold">
                            <input type="checkbox" value="" [(ngModel)]="driverData.hosDetails.pcAllowed"
                              name="hosDetails.pcAllowed">Allow Personal Conveyance (PC)</label>
                        </div>
                      </div>
                      <div class="col-lg-4" *ngIf="driverData.hosDetails.hosStatus == 'Non Exempted'">
                        <div class="checkbox">
                          <label class="control-label font-weight-bold">
                            <input type="checkbox" [(ngModel)]="driverData.hosDetails.ymAllowed"
                              name="hosDetails.ymAllowed" value="Allow Yard Move (YM)">Allow Yard Move (YM)</label>
                        </div>
                      </div>
                      <div class="col-lg-10" id="crgo" style="display:none;">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Cargo Type <span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <select data-plugin-selectTwo class="form-control populate">
                          <option selected="selected">Property</option>
                          <optgroup label="">
                            <option value="">Property</option>
                            <option value="">Passenger</option>
                            <option value="">Oil and Gases</option>
                          </optgroup>
                        </select>
                        <label class="control-label font-weight-bold text-lg-right pt-2">Restart<span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <select data-plugin-selectTwo class="form-control populate">
                          <option selected="selected">34 hour Start</option>
                        </select>
                        <label class="control-label font-weight-bold text-lg-right pt-2">Reset Break<span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <select data-plugin-selectTwo class="form-control populate">
                          <option selected="selected">30 min</option>
                        </select>
                        <label class="control-label font-weight-bold text-lg-right pt-2">Short Haul Exception<span
                            class="mandfield text-2 ml-1"><sup>*</sup></span>
                        </label>
                        <select data-plugin-selectTwo class="form-control populate">
                          <optgroup label="">
                            <option value="">No short Haul Exception</option>
                          </optgroup>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="form-group row text-dark adddriverpl">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold text-lg-right text-5 pt-2">Emergency Contact
                      Details</label>
                  </div>
                  <div class="col-lg-12">
                    <div class="row">
                      <div class="col-lg-4">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Name <span
                            class="text-1 optional-label-color">(optional)</span>
                        </label>
                        <input [(ngModel)]="driverData.emergencyDetails.name" name="name" type="text"
                          class="form-control" placeholder="eg. John Smith" #eName="ngModel" pattern="^[a-zA-Z\s]+$">
                        <div *ngIf="eName.invalid && (eName.dirty || eName.touched)" class="text-danger">
                          <div *ngIf="eName.errors.pattern">
                            Name must contain alphabets only.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-4">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Phone<span
                            class="text-1 optional-label-color">(optional)</span>
                        </label>
                        <input [(ngModel)]="driverData.emergencyDetails.phone" name="emergencyDetails.phone" type="text"
                          class="form-control" placeholder="eg. 0016780571" #phone="ngModel" pattern="^(\+1)[0-9]{10}$"
                          >
                        <div *ngIf="phone.invalid && (phone.dirty || phone.touched)" class="text-danger">
                          <div *ngIf="phone.errors.pattern">
                            Phone must contain 10 numbers eg.+18123456789.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-3">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Relationship <span
                            class="text-1 optional-label-color">(optional)</span>
                        </label>
                        <input type="text" class="form-control" placeholder="eg. Manager"
                          [(ngModel)]="driverData.emergencyDetails.relationship" name="emergencyDetails.relationship"
                          #rel="ngModel" pattern="^[a-zA-Z\s]+$">
                        <div *ngIf="rel.invalid && (rel.dirty || rel.touched)" class="text-danger">
                          <div *ngIf="rel.errors.pattern">
                            Relationship must contain alphabets only.
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="form-group row mt-3">
                  <div class="col-lg-12 text-right pb-4 pr-5">
                    <a type="button" (click)="cancel()" class="btn cus-btn-padd btn-default btnPrevious mr-2">Cancel</a>
                    <button type="submit" class="cus-btn-padd btn btn-success" *ngIf="!driverID" 
                     >Save</button>
                    <button type="button" (click)="updateDriver()" *ngIf="driverID" class="btn cus-btn-padd btn-success"
                      >Update</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </form>
    </section>



  </div>
</section>

<!--- VIEW DOCUMENT MODAL --->
<div class="modal fade" id="viewDocModal" tabindex="-1" role="dialog" aria-labelledby="viewDocModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewDocModalLabel">View Document</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <div class="form-group col-md-12">
            <div>
              <iframe [src]='pdfSrc' title="" width="100%" height="400px"> </iframe>

            </div>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>
<!-- Group modal -->
<div class="modal fade" id="addDriverGroupModal" tabindex="-1" role="dialog" aria-labelledby="addDriverGroupModal"
  aria-hidden="true" data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog" style="max-width: 600px;" role="document">
    <div class="modal-content">
      <form id="groupForm1" class="form-horizontal form-bordered bg-white" method="get" name="form" #grouphide="ngForm">
      <div class="modal-header">
        <h5 class="modal-title">Add Group</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="closeGroupModal()">
          <i class="far fa-window-close modal-dismiss" style="font-size:25px;"> </i>
        </button>
      </div>
      <div class="modal-body text-dark">
        <div class="card-body p-0">

            <div class="form-row">
              <div class="form-group col-lg-12 mb-0">
                <label class="control-label font-weight-bold" >Group Name
                  <span
                    class="mandfield text-2 ml-1"><sup>*</sup></span>
                  </label>
                <input [(ngModel)]="groupData.groupName" name="groupName" type="text" class="form-control"
                  placeholder="eg. Fleet Group " #groupModel="ngModel" required pattern="^[a-zA-Z\s]+$">
                  <div *ngIf="groupModel.invalid && (groupModel.dirty || groupModel.touched)" class="text-danger">
                    <div *ngIf="groupModel.errors.required">
                      Group Name is required.
                    </div>
                    <div *ngIf="groupModel.errors.pattern">
                           Group Name must contains uppercase, lowercase and special characters for period(space) only.
                    </div>
                  </div>
              </div>
              <div class="form-group col-lg-12">
                <label class="control-label font-weight-bold">Group Members&nbsp;<span
                    class="text-1 optional-label-color">(optional)</span></label>
                <ng-select [multiple]=true [(ngModel)]="groupData.groupMembers" name="groupMembers" style="width: 100%;"
                  placeholder="Select group members">
                  <ng-option *ngFor="let item of allDrivers;" value={{item.driverID}}>{{item.firstName}}
                    {{item.lastname}}</ng-option>
                </ng-select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-lg-12">
                <div class="row">
                  <div class="col-lg-12">
                    <label class="control-label font-weight-bold text-lg-right pt-2">Description&nbsp;<span
                        class="text-1 optional-label-color">(optional)</span></label>
                    <textarea [(ngModel)]="groupData.description" name="description" class="form-control h-auto"
                      rows="4" placeholder="Enter group description"></textarea>
                  </div>
                </div>
              </div>
            </div>

        </div>
      </div>
      <div class="modal-footer text-right">
        <a class="btn btn-default modal-dismiss" (click)="closeGroupModal()" data-dismiss="modal">Cancel</a>
        <button class="btn btn-success" (click)="addGroup()" [disabled]="!grouphide.form.valid">Save</button>
      </div>
    </form>
    </div>
  </div>
</div>
