<section class="body overflow-auto">
  <div class="inner-wrapper">
    <section role="main" class="content-body pl-1 pr-0 pt-0">
      <header class="page-header pr8 pl11">
        <div class="row" style="padding-top: 10px">
          <div class="col-md-4 col-lg-4">
            <h4 class="text-4 mt-0 mb-0 text-dark">{{ pageTitle }}</h4>
          </div>
          <div class="col-md-8 col-lg-8 text-right">
            <a
              routerLink="/fleet/drivers/list/{{ sessionID }}"
              class="btn btn-sm btn-default"
              ><i class="fas fa-list"></i> Drivers List</a
            >
          </div>
        </div>
      </header>

      <form
        id="driverF"
        class="form-horizontal form-bordered"
        name="driverF"
        [mustMatch]="['password', 'confirmPassword']"
        (ngSubmit)="
          driverID
            ? driverF.form.valid
              ? onUpdateDriver()
              : scrollError()
            : driverF.form.valid
            ? onAddDriver()
            : scrollError()
        "
        novalidate
        #driverF="ngForm"
        ngNativeValidate
      >
        <section class="m-2">
          <div class="row mb-3">
            <div class="col-12">
              <div class="bg-white p-3 text-dark">
                <div class="form-group row justify-content-between adddriverpl">
                  <div class="col-lg-10">
                    <label
                      class="control-label font-weight-bold text-lg-right text-5"
                      >Basic Details</label
                    >
                  </div>
                  <div class="col-lg-6 mb-1">
                    <div class="row">
                      <div class="col-lg-12 pt-2">
                        <div class="row">
                          <div class="col-lg-2">
                            <label
                              class="control-label font-weight-bold text-lg-right"
                              >Driver Type:</label
                            >
                          </div>
                          <div class="btn-group-toggle" data-toggle="buttons">
                            <label
                              class="btn btn-outline btn-yesno mr-2"
                              [class.active]="
                                driverData.driverType === 'employee'
                              "
                              style="width: 110px"
                              (click)="
                                onChangeUnitType('driver_type', 'employee')
                              "
                            >
                              <input
                                type="radio"
                                [(ngModel)]="driverData.driverType"
                                name="driverType"
                                checked
                                hidden
                                value="employee"
                              />
                              Employee
                            </label>
                            <label
                              class="btn btn-outline btn-yesno mr-2"
                              style="width: 110px"
                              [class.active]="
                                driverData.driverType === 'contractor'
                              "
                              (click)="
                                onChangeUnitType('driver_type', 'contractor')
                              "
                            >
                              <input
                                type="radio"
                                [(ngModel)]="driverData.driverType"
                                name="driverType"
                                hidden
                                value="contractor"
                              />
                              Contractor
                            </label>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-10" id="employeeIDDiv">
                        <div class="row">
                          <div
                            class="col-lg-6"
                            *ngIf="driverData.driverType == 'employee'"
                          >
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Employee ID
                              <span class="mandfield text-2 ml-1"
                                ><sup>*</sup></span
                              >
                            </label>
                            <div class="input-group">
                              <input
                                [disabled]="isEdit"
                                (change)="
                                  onChangeHideErrors('employeeContractorId');
                                  validateEmployeeID()
                                "
                                [(ngModel)]="driverData.employeeContractorId"
                                name="employeeContractorId"
                                type="text"
                                class="form-control"
                                placeholder="Any Numbers or Name"
                                #dName="ngModel"
                                required
                                [ngClass]="{
                                  error: driverF.submitted && dName.invalid
                                }"
                                pattern="^[a-zA-Z0-9\s]{1,30}$"
                                maxlength="30"
                              />
                            </div>
                            <div
                              *ngIf="dName.invalid && driverF.submitted"
                              class="text-danger"
                            >
                              <div *ngIf="dName.errors.required">
                                Employee ID is required.
                              </div>
                              <div *ngIf="dName.errors.pattern">
                                Employee ID can only contain alphanumeric
                                characters.
                              </div>
                            </div>
                          </div>
                          <div
                            class="col-lg-6"
                            *ngIf="driverData.driverType == 'contractor'"
                          >
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Contractor ID
                              <span class="mandfield text-2 ml-1"
                                ><sup>*</sup></span
                              >
                            </label>
                            <div class="input-group">
                              <input
                                [(ngModel)]="driverData.employeeContractorId"
                                name="employeeContractorId"
                                (change)="
                                  onChangeHideErrors('employeeContractorId');
                                  validateEmployeeID()
                                "
                                type="text"
                                class="form-control"
                                placeholder="Any Numbers or Name"
                                #cName="ngModel"
                                [ngClass]="{
                                  error: driverF.submitted && cName.invalid
                                }"
                                required
                                pattern="^[a-zA-Z0-9\s]{1,30}$"
                                maxlength="30"
                              />
                            </div>
                            <div
                              *ngIf="cName.invalid && driverF.submitted"
                              class="text-danger"
                            >
                              <div *ngIf="cName.errors.required">
                                Contractor ID is required.
                              </div>
                              <div *ngIf="cName.errors.pattern">
                                Contractor ID can only contain alphanumeric
                                characters.
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-6">
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Status
                              <span class="mandfield text-2 ml-1"
                                ><sup>*</sup></span
                              >
                            </label>
                            <ng-select
                              [(ngModel)]="driverData.driverStatus"
                              name="driverStatus"
                              class="form-control form-control-sm"
                              placeholder="Select driver status"
                              #status="ngModel"
                              required
                              [ngClass]="{
                                error: driverF.submitted && status.invalid
                              }"
                            >
                              <ng-option value="active">Active</ng-option>
                              <ng-option value="inActive">InActive</ng-option>
                            </ng-select>
                            <div
                              *ngIf="status.invalid && driverF.submitted"
                              class="text-danger"
                            >
                              <div *ngIf="status.errors.required">
                                Status is required.
                              </div>
                            </div>
                          </div>
                          <div
                            class="col-lg-12"
                            *ngIf="driverData.driverType == 'contractor'"
                          >
                            <div class="row">
                              <div class="col-lg-6">
                                <label
                                  class="control-label font-weight-bold text-lg-right pt-2"
                                  >Corporation
                                  <span class="mandfield text-2 ml-1"
                                    ><sup>*</sup></span
                                  >
                                </label>
                                <ng-select
                                  [(ngModel)]="driverData.corporationType"
                                  name="corporationType"
                                  class="form-control form-control-sm"
                                  placeholder="Select corporation"
                                  (change)="changeCompany($event)"
                                  #corp="ngModel"
                                  required
                                  [ngClass]="{
                                    error: driverF.submitted && corp.invalid
                                  }"
                                >
                                  <ng-option value="company">Company</ng-option>
                                  <!-- <ng-option value="corporation">Corporation</ng-option> -->
                                  <ng-option value="owner_operator"
                                    >Owner Operator</ng-option
                                  >
                                </ng-select>
                                <div
                                  *ngIf="corp.invalid && driverF.submitted"
                                  class="text-danger"
                                >
                                  <div *ngIf="corp.errors.required">
                                    Corporation is required.
                                  </div>
                                </div>
                              </div>
                              <div
                                class="col-4 pr-3"
                                *ngIf="
                                  driverData.corporationType == 'owner_operator'
                                "
                              >
                                <label
                                  class="control-label font-weight-bold text-lg-right pt-2"
                                  >Owner Operator
                                  <span class="mandfield text-2 ml-1"
                                    ><sup>*</sup></span
                                  >
                                </label>
                                <ng-select
                                  [(ngModel)]="driverData.ownerOperator"
                                  name="ownerOperator"
                                  class="form-control form-control-sm"
                                  placeholder="Select Owner Operator "
                                  #oSlt="ngModel"
                                  required
                                  [ngClass]="{
                                    error: driverF.submitted && oSlt.invalid
                                  }"
                                >
                                  <ng-option
                                    *ngFor="let item of ownerOperators"
                                    value="{{ item.contactID }}"
                                  >
                                    {{ item.companyName }}</ng-option
                                  >
                                </ng-select>
                                <div
                                  *ngIf="oSlt.invalid && driverF.submitted"
                                  class="text-danger"
                                >
                                  <div *ngIf="oSlt.errors.required">
                                    Owner operator is required.
                                  </div>
                                </div>
                              </div>
                              <div
                                class="col-2 mar-top-37 text-left pl-1"
                                *ngIf="
                                  driverData.corporationType == 'owner_operator'
                                "
                              >
                                <a
                                  href="javascript:;"
                                  (click)="openModal('form')"
                                  class="btn btn-sm btn-success mr-3"
                                  ><i class="fas fa-plus"></i
                                ></a>
                                <a
                                  href="javascript:;"
                                  (click)="refreshOpData()"
                                  data-toggle="tooltip"
                                  title="Refresh owner operator data"
                                  class="btn btn-success btn-sm modal-with-form"
                                  ><i class="fas fa-sync"></i
                                ></a>
                              </div>
                              <div
                                class="col-4 pr-3"
                                *ngIf="driverData.corporationType == 'company'"
                              >
                                <label
                                  class="control-label font-weight-bold text-lg-right pt-2"
                                  >Vendor
                                  <span class="mandfield text-2 ml-1"
                                    ><sup>*</sup></span
                                  >
                                </label>
                                <ng-select
                                  [(ngModel)]="driverData.vendor"
                                  name="vendor"
                                  class="form-control form-control-sm"
                                  placeholder="Select Vendor"
                                  #vendor="ngModel"
                                  required
                                  [ngClass]="{
                                    error: driverF.submitted && vendor.invalid
                                  }"
                                >
                                  <ng-option
                                    *ngFor="let item of vendors"
                                    value="{{ item.contactID }}"
                                  >
                                    {{ item.companyName }}</ng-option
                                  >
                                </ng-select>
                                <div
                                  *ngIf="vendor.invalid && driverF.submitted"
                                  class="text-danger"
                                >
                                  <div *ngIf="vendor.errors.required">
                                    Vendor is required.
                                  </div>
                                </div>
                              </div>
                              <div
                                class="col-lg-6"
                                *ngIf="
                                  driverData.corporationType == 'corporation'
                                "
                              >
                                <label
                                  class="control-label font-weight-bold text-lg-right pt-2"
                                  >Corporation Name
                                  <span class="mandfield text-2 ml-1"
                                    ><sup>*</sup></span
                                  >
                                </label>
                                <input
                                  [(ngModel)]="driverData.corporation"
                                  name="corporation"
                                  class="form-control form-control-sm"
                                  placeholder="Enter Corporation name"
                                  #corp1="ngModel"
                                  required
                                  type="text"
                                  [ngClass]="{
                                    error: driverF.submitted && corp1.invalid
                                  }"
                                />

                                <div
                                  *ngIf="corp1.invalid && driverF.submitted"
                                  class="text-danger"
                                >
                                  <div *ngIf="corp1.errors.required">
                                    Corporation is required.
                                  </div>
                                </div>
                              </div>

                              <div
                                class="col-2 mar-top-37 text-right pl-1"
                                *ngIf="driverData.corporationType == 'company'"
                              >
                                <a
                                  href="javascript:;"
                                  (click)="openModal('form')"
                                  class="btn btn-sm btn-success modal-with-form mr-3"
                                  ><i class="fas fa-plus"></i
                                ></a>
                                <a
                                  href="javascript:;"
                                  (click)="refreshVendorData()"
                                  data-toggle="tooltip"
                                  title="Refresh vendor data"
                                  class="btn btn-success btn-sm modal-with-form"
                                  ><i class="fas fa-sync"></i
                                ></a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Username
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <input
                          [disabled]="isEdit"
                          (change)="
                            onChangeHideErrors('userName'); validateUserName()
                          "
                          [(ngModel)]="driverData.userName"
                          name="userName"
                          type="text"
                          class="form-control text-lowercase"
                          [ngClass]="{
                            error: driverF.submitted && uName.invalid
                          }"
                          placeholder=" eg. Johnsmith80"
                          #uName="ngModel"
                          required
                          pattern="^(?=[a-zA-Z0-9.]{6,20}$)(?!.*[.]{2})[^.].*[^.]$"
                          maxlength="30"
                          autocomplete="false"
                        />
                        <div
                          *ngIf="uName.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="uName.errors.required">
                            Username is required.
                          </div>
                          <div *ngIf="uName.errors.pattern">
                            Username should be at-least 6 characters long and
                            can be a combination of numbers, letters and dot(.).
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Birth Date
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <input
                          (click)="d6.toggle()"
                          ngbDatepicker
                          #d6="ngbDatepicker"
                          id="birth"
                          [(ngModel)]="driverData.DOB"
                          readonly
                          name="DOB"
                          type="text"
                          class="form-control"
                          placeholder="yyyy/mm/dd"
                          value=""
                          #dob="ngModel"
                          required
                          [maxDate]="birthDateMaxLimit"
                          [minDate]="birthDateMinLimit"
                          [ngClass]="{
                            error: driverF.submitted && dob.invalid
                          }"
                        />
                        <div
                          *ngIf="dob.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="dob.errors.required">
                            Birth date is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-10">
                        <div class="row">
                          <div class="col-lg-4">
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >First Name
                              <span class="mandfield text-2 ml-1"
                                ><sup>*</sup></span
                              >
                            </label>
                            <input
                              [(ngModel)]="driverData.firstName"
                              name="firstName"
                              type="text"
                              class="form-control"
                              placeholder="eg. John"
                              #fName="ngModel"
                              required
                              pattern="^[a-zA-Z\s]+$"
                              maxlength="30"
                              [ngClass]="{
                                error: driverF.submitted && fName.invalid
                              }"
                            />
                            <div
                              *ngIf="fName.invalid && driverF.submitted"
                              class="text-danger"
                            >
                              <div *ngIf="fName.errors.required">
                                First name is required.
                              </div>
                              <div *ngIf="fName.errors.pattern">
                                First name must contain letters.
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-4">
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Middle Name
                            </label>
                            <input
                              [(ngModel)]="driverData.middleName"
                              name="middleName"
                              type="text"
                              class="form-control"
                              placeholder="eg. Andrew"
                            />
                          </div>
                          <div class="col-lg-4">
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Last Name
                              <span class="mandfield text-2 ml-1"
                                ><sup>*</sup></span
                              >
                            </label>
                            <input
                              [(ngModel)]="driverData.lastName"
                              name="lastName"
                              type="text"
                              class="form-control"
                              placeholder="eg. Smith"
                              #lName="ngModel"
                              required
                              pattern="^[a-zA-Z\s]+$"
                              maxlength="30"
                              [ngClass]="{
                                error: driverF.submitted && lName.invalid
                              }"
                            />
                            <div
                              *ngIf="lName.invalid && driverF.submitted"
                              class="text-danger"
                            >
                              <div *ngIf="lName.errors.required">
                                Last name is required.
                              </div>
                              <div *ngIf="lName.errors.pattern">
                                Last name must contain letters.
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-10" *ngIf="!isEdit">
                        <div class="row">
                          <div class="col-lg-6">
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Password
                              <span class="mandfield text-2 ml-1"
                                ><sup>*</sup></span
                              >
                            </label>
                            <div class="input-group">
                              <input
                                id="pd"
                                [(ngModel)]="driverData.password"
                                placeholder="eg.  $John@01"
                                name="password"
                                #pwd="ngModel"
                                required
                                [ngClass]="{
                                  error: driverF.submitted && pwd.invalid
                                }"
                                pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*\.\-]).{8,20}$"
                                [type]="fieldTextType ? 'text' : 'password'"
                                (input)="validatePassword($event.target.value)"
                                class="form-control"
                              />
                              <div class="input-group-append">
                                <span class="input-group-text eye">
                                  <i
                                    class="fa"
                                    [ngClass]="{
                                      'fa-eye-slash': !fieldTextType,
                                      'fa-eye': fieldTextType
                                    }"
                                    (click)="toggleFieldTextType()"
                                  ></i>
                                </span>
                              </div>
                            </div>
                            <div
                              *ngIf="pwd.invalid && driverF.submitted"
                              class="text-danger"
                            >
                              <div *ngIf="pwd.errors.required">
                                Password is required.
                              </div>
                              <div *ngIf="pwd.errors.pattern">
                                <div class="row">
                                  <div class="col-lg-12">
                                    <p class="text-dark pt-2 mb-0">
                                      <span
                                        class="pr-1"
                                        [ngClass]="[
                                          passwordValidation.length
                                            ? 'green1'
                                            : 'red1'
                                        ]"
                                      >
                                        <i
                                          [ngClass]="[
                                            passwordValidation.length
                                              ? 'fas fa-check'
                                              : 'fas fa-times'
                                          ]"
                                        >
                                        </i
                                      ></span>
                                      8 characters minimum
                                    </p>
                                    <p class="text-dark pt-2 mb-0">
                                      <span
                                        class="pr-1"
                                        [ngClass]="[
                                          passwordValidation.number
                                            ? 'green1'
                                            : 'red1'
                                        ]"
                                      >
                                        <i
                                          [ngClass]="[
                                            passwordValidation.number
                                              ? 'fas fa-check'
                                              : 'fas fa-times'
                                          ]"
                                        >
                                        </i
                                      ></span>
                                      atleast 1 number
                                    </p>
                                  </div>
                                  <div class="col-lg-12">
                                    <p class="text-dark pt-2 mb-0">
                                      <span
                                        class="pr-1"
                                        [ngClass]="[
                                          passwordValidation.upperCase
                                            ? 'green1'
                                            : 'red1'
                                        ]"
                                      >
                                        <i
                                          [ngClass]="[
                                            passwordValidation.upperCase
                                              ? 'fas fa-check'
                                              : 'fas fa-times'
                                          ]"
                                        >
                                        </i
                                      ></span>
                                      atleast 1 uppercase
                                    </p>

                                    <p class="text-dark pt-2 mb-0">
                                      <span
                                        class="pr-1"
                                        [ngClass]="[
                                          passwordValidation.lowerCase
                                            ? 'green1'
                                            : 'red1'
                                        ]"
                                      >
                                        <i
                                          [ngClass]="[
                                            passwordValidation.lowerCase
                                              ? 'fas fa-check'
                                              : 'fas fa-times'
                                          ]"
                                        >
                                        </i
                                      ></span>
                                      atleast 1 lowercase
                                    </p>
                                  </div>
                                  <div class="col-lg-12">
                                    <p class="text-dark pt-2 mb-0">
                                      <span
                                        class="pr-1"
                                        [ngClass]="[
                                          passwordValidation.specialCharacters
                                            ? 'green1'
                                            : 'red1'
                                        ]"
                                      >
                                        <i
                                          [ngClass]="[
                                            passwordValidation.specialCharacters
                                              ? 'fas fa-check'
                                              : 'fas fa-times'
                                          ]"
                                        ></i
                                      ></span>
                                      atleast 1 special character(!@#$%^&*.-)
                                    </p>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-6">
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Confirm Password
                              <span class="mandfield text-2 ml-1"
                                ><sup>*</sup></span
                              >
                            </label>
                            <div class="input-group">
                              <input
                                id="cnf"
                                [(ngModel)]="driverData.confirmPassword"
                                name="confirmPassword"
                                #cpwd="ngModel"
                                required
                                [ngClass]="{
                                  error: driverF.submitted && cpwd.invalid
                                }"
                                [type]="cpwdfieldTextType ? 'text' : 'password'"
                                placeholder="Confirm password"
                                class="form-control"
                              />
                              <div class="input-group-append">
                                <span class="input-group-text eye">
                                  <i
                                    class="fa"
                                    [ngClass]="{
                                      'fa-eye-slash': !cpwdfieldTextType,
                                      'fa-eye': cpwdfieldTextType
                                    }"
                                    (click)="togglecpwdfieldTextType()"
                                  ></i>
                                </span>
                              </div>
                            </div>
                            <div
                              *ngIf="cpwd.invalid && driverF.submitted"
                              class="text-danger"
                            >
                              <div *ngIf="cpwd.errors.required">
                                Confirm password is required.
                              </div>
                              <div *ngIf="cpwd.errors.mustMatch">
                                Passwords must match
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6 mb-1">
                    <div class="row">
                      <div class="col-lg-12 pt-2">
                        <div class="row">
                          <div class="col-lg-2">
                            <label
                              class="control-label font-weight-bold text-lg-right"
                              >Driver Gender
                              <span class="mandfield text-2 ml-1"
                                ><sup>*</sup></span
                              ></label
                            >
                          </div>
                          <div class="col-lg-3 px-0">
                            <div class="btn-group-toggle" data-toggle="buttons">
                              <label
                                class="btn btn-outline btn-yesno mr-2"
                                [class.active]="driverData.gender === 'M'"
                                (click)="onChangeUnitType('gender', 'M')"
                              >
                                <div>
                                  <input
                                    type="radio"
                                    #gender="ngModel"
                                    [(ngModel)]="driverData.gender"
                                    name="gender"
                                    id="male"
                                    [ngClass]="{
                                      error: driverF.submitted && gender.invalid
                                    }"
                                    checked
                                    hidden
                                    value="M"
                                    required
                                  />
                                  Male
                                </div>
                              </label>
                              <label
                                class="btn btn-outline btn-yesno mr-2"
                                [class.active]="driverData.gender === 'F'"
                                (click)="onChangeUnitType('gender', 'F')"
                              >
                                <div>
                                  <input
                                    type="radio"
                                    [ngClass]="{
                                      error: driverF.submitted && gender.invalid
                                    }"
                                    id="female"
                                    #gender="ngModel"
                                    [(ngModel)]="driverData.gender"
                                    name="gender"
                                    hidden
                                    value="F"
                                    required
                                  />
                                  Female
                                </div>
                              </label>
                            </div>
                            <div
                              *ngIf="gender.invalid && driverF.submitted"
                              class="text-danger"
                            >
                              <div *ngIf="gender.errors.required">
                                Gender is required.
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-5">
                            <button
                              type="button"
                              data-toggle="modal"
                              *ngIf="
                                driverID &&
                                driverProfileSrc != '' &&
                                !showUploadedPicModal
                              "
                              data-target="#driverProfileModal"
                              class="btn btn-sm btn-success mr-1"
                            >
                              <i class="fas fa-eye text-light"></i>View Photo
                            </button>

                            <button
                              type="button"
                              data-toggle="modal"
                              *ngIf="showUploadedPicModal"
                              data-target="#driverPicUploadedModal"
                              class="btn btn-sm btn-success mr-1"
                            >
                              <i class="fas fa-eye text-light"></i>View Photo
                            </button>

                            <div
                              class="btn btn-sm btn-success pull-right"
                              style="position: relative"
                            >
                              <i class="fas fa-plus"></i> {{ imageTitle }} Photo
                              <input
                                class="hidden_input"
                                style="
                                  position: absolute;
                                  top: 0px;
                                  left: 0px;
                                  width: 100px;
                                "
                                (change)="
                                  selectPhoto(
                                    $event,
                                    driverData.driverImage,
                                    imageTitle
                                  )
                                "
                                type="file"
                                accept=".jpg, .jpeg, .png"
                              />
                            </div>
                            <span
                              *ngIf="uploadPhotoError != ''"
                              class="text-danger"
                            >
                              {{ uploadPhotoError }}
                            </span>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Phone
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <input
                          [(ngModel)]="driverData.phone"
                          name="phone"
                          type="text"
                          class="form-control"
                          placeholder="eg. 2234567891"
                          #mob="ngModel"
                          required
                          pattern="[0-9]{10}$"
                          [ngClass]="{
                            error: driverF.submitted && mob.invalid
                          }"
                        />
                        <div
                          *ngIf="mob.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="mob.errors.required">
                            Phone is required.
                          </div>
                          <div *ngIf="mob.errors.pattern">
                            Enter valid phone number eg. 2234567891
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Email
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <input
                          [(ngModel)]="driverData.email"
                          name="email"
                          type="text"
                          class="form-control text-lowercase"
                          (change)="
                            onChangeHideErrors('email'); validateEmail()
                          "
                          [ngClass]="{ error: driverF.submitted && em.invalid }"
                          placeholder="eg. johnsmith@gmail.com"
                          #em="ngModel"
                          required
                          pattern="^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9]+$"
                        />
                        <div
                          *ngIf="em.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="em.errors.required">
                            Email is required.
                          </div>
                          <div *ngIf="em.errors.pattern">
                            Enter valid email eg. johnsmith@gmail.com
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-3 pr-0">
                        <label
                          class="control-label font-weight-bold pt-2 font-weight-bold text-lg-right"
                          >Group
                        </label>
                        <ng-select
                          class="form-control form-control-sm text-capitalize"
                          [(ngModel)]="driverData.groupID"
                          name="groupID"
                          placeholder="Select group of which driver will be part of"
                        >
                          <ng-option
                            *ngFor="let group of groupsData"
                            value="{{ group.groupID }}"
                          >
                            {{ group.groupName }}</ng-option
                          >
                        </ng-select>
                      </div>
                      <div class="col-lg-2 mar-top-37 text-right">
                        <a
                          data-toggle="modal"
                          data-target="#addDriverGroupModal"
                          href="javascript:;"
                          class="modal-with-form btn btn-sm btn-success mr-3"
                        >
                          <em class="fas fa-plus"></em>
                        </a>
                        <a
                          href="javascript:;"
                          (click)="refreshGroupsData()"
                          data-toggle="tooltip"
                          title="Refresh group data"
                          class="btn btn-success btn-sm modal-with-form"
                          ><i class="fas fa-sync"></i
                        ></a>
                      </div>
                      <div class="col-3 pr-0">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Assign Vehicle
                        </label>
                        <ng-select
                          [(ngModel)]="driverData.assignedVehicle"
                          name="assignedVehicle"
                          placeholder="Assign vehicle to driver"
                        >
                          <ng-option
                            *ngFor="let vehicle of vehicles"
                            value="{{ vehicle.vehicleID }}"
                          >
                            {{ vehicle.vehicleIdentification }}
                          </ng-option>
                        </ng-select>
                      </div>
                      <div class="col-2 mar-top-37 text-right">
                        <a
                          class="btn btn-success btn-sm mr-3"
                          href="javascript:;"
                          routerLink="/fleet/vehicles/add"
                          target="_blank"
                          ><i class="fas fa-plus"></i
                        ></a>
                        <a
                          href="javascript:;"
                          (click)="refreshVehicleData()"
                          data-toggle="tooltip"
                          title="Refresh vehicle data"
                          class="btn btn-success btn-sm modal-with-form"
                          ><i class="fas fa-sync"></i
                        ></a>
                      </div>
                      <div class="col-lg-10">
                        <div class="row">
                          <div
                            class="col-lg-6"
                            *ngIf="driverData.driverType !== 'contractor'"
                          >
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Start Date
                              <span class="mandfield text-2 ml-1"
                                ><sup>*</sup></span
                              >
                            </label>
                            <input
                              (click)="d11.toggle()"
                              ngbDatepicker
                              #d11="ngbDatepicker"
                              readonly
                              [(ngModel)]="driverData.startDate"
                              name="startDate"
                              type="text"
                              class="form-control"
                              placeholder="yyyy/mm/dd"
                              #date1="ngModel"
                              required
                              [ngClass]="{
                                error: driverF.submitted && date1.invalid
                              }"
                              [minDate]="birthDateMinLimit"
                              [maxDate]="futureDatesLimit"
                            />
                            <div
                              *ngIf="date1.invalid && driverF.submitted"
                              class="text-danger"
                            >
                              <div *ngIf="date1.errors.required">
                                Start date is required.
                              </div>
                            </div>
                          </div>
                          <div
                            class="col-lg-6"
                            *ngIf="driverData.driverType !== 'contractor'"
                          >
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Termination Date
                            </label>
                            <input
                              (click)="d12.toggle()"
                              readonly
                              ngbDatepicker
                              #d12="ngbDatepicker"
                              [(ngModel)]="driverData.terminationDate"
                              name="terminationDate"
                              type="text"
                              data-plugin-datepicker=""
                              class="form-control"
                              placeholder="yyyy/mm/dd"
                              [minDate]="birthDateMinLimit"
                              [maxDate]="futureDatesLimit"
                            />
                            <!-- <div *ngIf="tDate.invalid && (tDate.dirty || tDate.touched)" class="text-danger">

                              <div *ngIf="tDate.errors.required" class="text-danger">
                                Termination Date must contain yyyy/mm/dd format.
                              </div>

                            </div> -->
                          </div>
                          <!-- driver is owner operator -->
                          <div
                            class="col-lg-6"
                            *ngIf="driverData.driverType === 'contractor'"
                          >
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Start Date
                              <span class="mandfield text-2 ml-1"
                                ><sup>*</sup></span
                              >
                            </label>
                            <input
                              (click)="d4.toggle()"
                              ngbDatepicker
                              #d4="ngbDatepicker"
                              [(ngModel)]="driverData.contractStart"
                              name="contractStart"
                              type="text"
                              data-plugin-datepicker=""
                              class="form-control"
                              placeholder="yyyy/mm/dd"
                              #date2="ngModel"
                              required
                              [ngClass]="{
                                error: driverF.submitted && date2.invalid
                              }"
                              [minDate]="birthDateMinLimit"
                              [maxDate]="futureDatesLimit"
                            />
                            <div
                              *ngIf="date2.invalid && driverF.submitted"
                              class="text-danger"
                            >
                              <div *ngIf="date2.errors.required">
                                Start date is required.
                              </div>
                            </div>
                          </div>
                          <div
                            class="col-lg-6"
                            *ngIf="driverData.driverType === 'contractor'"
                          >
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >End Date
                            </label>
                            <input
                              (click)="d5.toggle()"
                              ngbDatepicker
                              #d5="ngbDatepicker"
                              [(ngModel)]="driverData.contractEnd"
                              name="contractEnd"
                              type="text"
                              data-plugin-datepicker=""
                              class="form-control"
                              placeholder="yyyy/mm/dd"
                              #endDate="ngModel"
                              [minDate]="birthDateMinLimit"
                              [maxDate]="futureDatesLimit"
                            />
                            <!-- <div *ngIf="endDate.invalid && (endDate.dirty || endDate.touched)" class="text-danger">
                              <div *ngIf="endDate.errors.required">
                                End date is required.
                              </div>
                            </div> -->
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Citizenship
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <ng-select
                          [(ngModel)]="driverData.citizenship"
                          name="citizenship"
                          placeholder="Select the citizenship country of driver"
                          #cSlt="ngModel"
                          required
                          [ngClass]="{
                            error: driverF.submitted && cSlt.invalid
                          }"
                        >
                          <ng-option
                            class="text-capitalize"
                            *ngFor="let country of docCountries"
                            value="{{ country.countryCode }}"
                            >{{ country.countryName }}</ng-option
                          >
                        </ng-select>
                        <div
                          *ngIf="cSlt.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="cSlt.errors.required">
                            Citizenship is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5 mar-top-37">
                        <div class="row">
                          <div class="col-lg-12 text-right">
                            <div class="btn btn-sm btn-success">
                              <i class="fas fa-plus"></i> Add Abstract History
                              Document &nbsp;
                              <span class="mandfield text-2 ml-1"
                                ><sup>*</sup></span
                              >
                              <input
                                (change)="selectDocuments($event, nullVar)"
                                class="hidden_input1 w-100"
                                name=""
                                type="file"
                                accept=".doc, .docx, .pdf, .jpg, .jpeg .png"
                              />
                            </div>
                          </div>
                          <span *ngIf="absDocsError != ''" class="text-danger">
                            {{ absDocsError }}
                          </span>
                          <div
                            class="col-lg-12 text-right"
                            *ngIf="
                              driverF.submitted &&
                              abstractDocs.length == 0 &&
                              !driverID
                            "
                          >
                            <label class="text-danger"
                              >Add Abstract History Document</label
                            >
                          </div>
                          <div
                            class="col-lg-12 text-right"
                            *ngIf="
                              driverF.submitted &&
                              absDocs.length == 0 &&
                              abstractDocs.length == 0 &&
                              driverID
                            "
                          >
                            <label class="text-danger"
                              >Add Abstract History Document</label
                            >
                          </div>
                          <!-- <div class="col-lg-12 text-right" *ngIf="errorAbstract && abstractDocs.length == 0">
                            <label [class.text-danger]="errorAbstract">Add Abstract History Document</label>
                          </div> -->
                          <div
                            class="col-lg-12 text-right"
                            *ngIf="abstractDocs.length > 0"
                          >
                            <label
                              >{{ abstractDocs.length }} File(s) attached</label
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-lg-10 mt-2" *ngIf="absDocs.length > 0">
                        <div class="vehicle-common-box p-3">
                          <div class="row">
                            <div class="col-lg-6">
                              <label
                                class="control-label font-weight-bold text-3"
                                >Abstract History Document(s)</label
                              >
                            </div>
                            <div class="col-lg-6 text-right"></div>
                          </div>
                          <hr class="solid mt-2" />
                          <div
                            class="row mb-1"
                            *ngFor="let item of absDocs; let d = index"
                          >
                            <div class="col-lg-9">
                              <a
                                href="{{ item.path }}"
                                data-toggle="modal"
                                data-target="#viewDocModal"
                                (click)="setPDFSrc(item.path)"
                                >Document {{ d + 1 }}</a
                              >
                            </div>
                            <div class="col-lg-3 text-right">
                              <a
                                href="javascript:;"
                                class="btn btn-deafault pull-right btn-xs"
                                (click)="delete('abs', item.name, d, nullVar)"
                                ><i class="fas fa-trash-alt"></i
                              ></a>

                              <a
                                href="javascript:;"
                                class="btn btn-deafault pull-right btn-xs"
                                (click)="setPDFSrc(item.path)"
                                data-toggle="modal"
                                data-target="#viewDocModal"
                                ><i class="fas fa-eye"></i
                              ></a>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- <div class="col-lg-10 mt-2" *ngIf="localAbsDocs.length > 0 && !driverID">
                        <div class="vehicle-common-box p-3">
                          <div class="row">
                            <div class="col-lg-6"><label class="control-label font-weight-bold text-3">Abstract History
                                Document(s)</label></div>
                            <div class="col-lg-6 text-right">
                            </div>
                          </div>
                          <hr class="solid mt-2">
                          <div class="row mb-1" *ngFor="let item of localAbsDocs;let d= index">
                            <div class="col-lg-9">Document {{d+1}} </div>
                            <div class="col-lg-3 text-right">
                              <a href="javascript:;" (click)="localDelete('abs',item.name, d,nullVar)" class="modal-with-form"><i
                                  class="fas fa-times text-danger"></i></a>
                            </div>
                          </div>
                        </div>
                      </div> -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row mb-3 text-dark">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="row text-dark justify-content-between adddriverpl">
                  <div class="col-lg-10">
                    <label
                      class="control-label font-weight-bold text-lg-right text-5"
                      >Driver Address</label
                    >
                  </div>
                </div>
                <div
                  *ngFor="let item of driverData.address; let i = index"
                  class="address-item justify-content-between adddriverpl"
                >
                  <div class="form-group row border-bottom-0">
                    <div class="col-lg-6">
                      <div class="row">
                        <div class="col-lg-10">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2"
                            >Address Type</label
                          >
                          <ng-select
                            [(ngModel)]="item.addressType"
                            name="address[{{ i }}].addressType"
                            placeholder="Select address type"
                          >
                            <ng-option value="Home">Home</ng-option>
                            <ng-option value="Mailing Address"
                              >Mailing Address</ng-option
                            >
                          </ng-select>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4">
                      <label
                        class="control-label font-weight-bold text-lg-right pt-2"
                        >Start typing your location</label
                      >
                      <input
                        [(ngModel)]="item.userLocation"
                        name="userLocation{{ i }}"
                        (keyup)="searchTerm.next($event)"
                        type="text"
                        class="form-control mb-2"
                        placeholder="eg. 71 Ave NW, Calgary, AB T3B, Canada"
                        [disabled]="item.manual"
                      />
                      <div class="checkbox-custom mb2">
                        <input
                          [(ngModel)]="item.manual"
                          name="manual{{ i }}"
                          (change)="manAddress($event, i)"
                          type="checkbox"
                        />
                        <label for="man_address">Type Manually</label>
                      </div>

                      <div class="map-search__results bg-white">
                        <ul class="p-0 m-0 text-left">
                          <li *ngFor="let item of searchResults">
                            <a
                              href="javascript:;"
                              (click)="userAddress(i, item)"
                              >{{ item.address }}</a
                            >
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="col-lg-1 mar-top-37 text-right">
                      <a
                        class="btn btn-dark cus-btn-padd mr-2"
                        href="javascript:;"
                        (click)="clearUserLocation(i)"
                        >Clear</a
                      >
                      <button
                        type="button"
                        *ngIf="i === 0"
                        [disabled]="driverData.address.length === 2"
                        (click)="addAddress()"
                        class="btn btn-sm btn-success"
                      >
                        <i class="fa fa-plus"></i>
                      </button>
                      <a
                        *ngIf="i != 0"
                        (click)="remove('address', i, item.addressID)"
                        class="btn btn-danger cus-btn-padd"
                        href="javascript:;"
                        ><i class="fa fa-minus fa-fw"></i
                      ></a>
                    </div>
                  </div>
                  <div class="address-inner" *ngIf="item.manual">
                    <div class="row mb-3 border-bottom pb-4">
                      <div class="col-lg-6 pt-3">
                        <div class="row">
                          <div class="col-lg-5">
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Select Country</label
                            >
                            <ng-select
                              [(ngModel)]="item.countryCode"
                              name="countryCode{{ i }}"
                              (change)="getStates($event, i)"
                              class="form-control populate"
                              placeholder="Select country"
                            >
                              <ng-option value="CA">Canada</ng-option>
                              <ng-option value="US">United States</ng-option>
                            </ng-select>
                          </div>
                          <div class="col-lg-5">
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Select Province/State</label
                            >
                            <ng-select
                              (change)="getCities($event, i, item.countryCode)"
                              [(ngModel)]="item.stateCode"
                              name="stateCode{{ i }}"
                              placeholder="Select Province/State"
                            >
                              <ng-option
                                class="text-capitalize"
                                *ngFor="let state of item.states"
                                value="{{ state.stateCode }}"
                              >
                                {{ state.stateName }}</ng-option
                              >
                            </ng-select>
                          </div>
                          <div class="col-lg-5">
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Select City</label
                            >
                            <ng-select
                              [(ngModel)]="item.cityName"
                              name="cityName{{ i }}"
                              placeholder="Select city"
                            >
                              <ng-option
                                class="text-capitalize"
                                *ngFor="let city of item.cities"
                                value="{{ city.cityName }}"
                              >
                                {{ city.cityName }}</ng-option
                              >
                            </ng-select>
                          </div>
                          <div class="col-lg-5">
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Zip Code</label
                            >
                            <input
                              [(ngModel)]="item.zipCode"
                              name="zipCode{{ i }}"
                              type="text"
                              class="form-control"
                              placeholder=" eg. 7V2 3R4"
                            />
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5 pt-3">
                        <div class="row">
                          <div class="col-lg-12">
                            <label
                              class="control-label font-weight-bold text-lg-right"
                              >Address 1</label
                            >
                            <input
                              [(ngModel)]="item.address1"
                              name="address1{{ i }}"
                              type="text"
                              class="form-control"
                              placeholder="eg. Rocky View County, AB, Canada"
                            />
                          </div>
                          <div class="col-lg-12">
                            <label
                              class="control-label font-weight-bold text-lg-right pt-2"
                              >Address 2</label
                            >
                            <input
                              [(ngModel)]="item.address2"
                              name="address2{{ i }}"
                              type="text"
                              class="form-control"
                              placeholder="eg. Rocky View County, AB, Canada"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <label
                    style="display: none; color: '#dc3545'"
                    class="mt-2"
                    id="addErr{{ i }}"
                    >Your address or zip code is not valid</label
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="form-group row text-dark adddriverpl">
                  <div class="col-lg-10">
                    <label
                      class="control-label font-weight-bold text-lg-right text-5"
                      >Licence Details</label
                    >
                  </div>
                  <div class="col-lg-10">
                    <label class="control-label text-4 pt-2"
                      >Add other licence details (eg. Enhanced drivers licence)
                      in the documents section.</label
                    >
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >CDL#
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <input
                          [(ngModel)]="driverData.CDL_Number"
                          name="CDL_Number"
                          type="text"
                          class="form-control"
                          placeholder="9 digits eg. 0005-04440"
                          (change)="
                            onChangeHideErrors('CDL_Number'); validateCDL()
                          "
                          #cdl="ngModel"
                          required
                          [ngClass]="{
                            error: driverF.submitted && cdl.invalid
                          }"
                        />
                        <div
                          *ngIf="cdl.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="cdl.errors.required">
                            CDL# is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Licence Expiration
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <input
                          (click)="d3.toggle()"
                          ngbDatepicker
                          #d3="ngbDatepicker"
                          readonly
                          [(ngModel)]="driverData.licenceDetails.licenceExpiry"
                          name="licenceDetails.licenceExpiry"
                          [ngClass]="{
                            error: driverF.submitted && leSlt.invalid
                          }"
                          type="text"
                          class="form-control"
                          placeholder="yyyy/mm/dd"
                          #leSlt="ngModel"
                          required
                        />
                        <div
                          *ngIf="leSlt.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="leSlt.errors.required">
                            Licence expiration is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Issued Country
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <ng-select
                          (change)="getLicStates($event)"
                          [(ngModel)]="driverData.licenceDetails.issuedCountry"
                          placeholder="Select country"
                          name="licenceDetails.issuedCountry"
                          class="form-control populate"
                          #conSlt="ngModel"
                          [ngClass]="{
                            error: driverF.submitted && conSlt.invalid
                          }"
                          required
                        >
                          <ng-option value="CA">Canada</ng-option>
                          <ng-option value="US">United States</ng-option>
                        </ng-select>
                        <div
                          *ngIf="conSlt.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="conSlt.errors.required">
                            Issued country is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Issued Province/State
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <ng-select
                          [(ngModel)]="driverData.licenceDetails.issuedState"
                          name="licenceDetails.issuedState"
                          placeholder="Select Province/State"
                          (change)="getLicenseStateName()"
                          required
                          #ipSlt="ngModel"
                          [ngClass]="{
                            error: driverF.submitted && ipSlt.invalid
                          }"
                        >
                          <ng-option
                            class="text-capitalize"
                            *ngFor="let state of licStates"
                            value="{{ state.stateCode }}"
                          >
                            {{ state.stateName }}</ng-option
                          >
                        </ng-select>
                        <div
                          *ngIf="ipSlt.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="ipSlt.errors.required">
                            Issued province/state is required.
                          </div>
                        </div>
                      </div>

                      <div class="col-lg-10 pt-2">
                        <div class="checkbox-custom">
                          <input
                            type="checkbox"
                            name="licenceDetails.licenceNotification"
                            [(ngModel)]="
                              driverData.licenceDetails.licenceNotification
                            "
                            value=""
                          />
                          <label class="control-label font-weight-bold"
                            >Send notification (Before 30 days of
                            expiration)</label
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >WCB#
                        </label>
                        <input
                          [(ngModel)]="driverData.licenceDetails.WCB"
                          name="licenceDetails.WCB"
                          type="text"
                          class="form-control"
                          placeholder="total 7 digits , 1 is alphabetical and 6 is numeric . eg.123456A"
                          #wcb="ngModel"
                        />
                        <!-- <div *ngIf="wcb.invalid && (wcb.dirty || wcb.touched)" class="text-danger">
                          <div *ngIf="wcb.errors.pattern">
                            WCB must contain 7 characters only in which 1 is alphabetical and 6 is numeric. eg.123456A.
                          </div>
                        </div> -->
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Medical Card Renewal
                        </label>
                        <input
                          (click)="d7.toggle()"
                          ngbDatepicker
                          #d7="ngbDatepicker"
                          [(ngModel)]="
                            driverData.licenceDetails.medicalCardRenewal
                          "
                          name="licenceDetails.medicalCardRenewal"
                          type="text"
                          class="form-control"
                          placeholder="yyyy/mm/dd"
                        />
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Health Care#
                        </label>
                        <input
                          [(ngModel)]="driverData.licenceDetails.healthCare"
                          name="licenceDetails.healthCare"
                          type="text"
                          class="form-control"
                          placeholder="total 13 digits , 11 is numeric and 2 is alphabets , eg. 12345678923AB"
                        />
                        <!-- <div *ngIf="hCare.invalid && (hCare.dirty || hCare.touched)" class="text-danger">
                          <div *ngIf="hCare.errors.pattern">
                            Health Care must contain 13 characters only in which 2 is alphabetical and 11 is numeric.
                            eg. AB12345678922.
                          </div>
                        </div> -->
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Select Vehicle Type
                        </label>
                        <ng-select
                          [(ngModel)]="driverData.licenceDetails.vehicleType"
                          name="licenceDetails.vehicleType"
                          placeholder="Select vehicle type of driver"
                        >
                          <ng-option value="Heavy Vehicle"
                            >Heavy Vehicle</ng-option
                          >
                          <ng-option value="Light Vehicle"
                            >Light Vehicle</ng-option
                          >
                        </ng-select>
                      </div>

                      <div class="col-lg-10 mb-1">
                        <div class="row">
                          <div class="col-lg-10">
                            <label
                              class="control-label font-weight-bold font-bold text-lg-right pt-2"
                              >Attach Document
                            </label>
                            <input
                              class="w100"
                              type="file"
                              multiple
                              name="uploadLicence"
                              (change)="selectLicDoc($event, 'uploadLicence')"
                              accept=".doc, .docx, .pdf, .jpg, .jpeg .png"
                            />
                            <span
                              *ngIf="uploadLicError != ''"
                              class="text-danger"
                            >
                              {{ uploadLicError }}
                            </span>
                          </div>
                          <div
                            class="col-lg-12 mt-2"
                            *ngIf="uploadLicDocs.length > 0"
                          >
                            <div class="vehicle-common-box p-3">
                              <div class="row">
                                <div class="col-lg-6">
                                  <label
                                    class="control-label font-weight-bold text-3"
                                    >Document(s)</label
                                  >
                                </div>
                                <div class="col-lg-6 text-right"></div>
                              </div>
                              <hr class="solid mt-2" />
                              <div
                                class="row mb-1"
                                *ngFor="let doc of uploadLicDocs; let d = index"
                              >
                                <div class="col-lg-9">
                                  <a
                                    href="{{ doc.path }}"
                                    data-toggle="modal"
                                    data-target="#viewDocModal"
                                    (click)="setPDFSrc(doc.path)"
                                    >Document {{ d + 1 }}</a
                                  >
                                </div>
                                <div class="col-lg-3 text-right">
                                  <a
                                    href="javascript:;"
                                    class="btn btn-deafault pull-right btn-xs"
                                    (click)="
                                      delete('licDocs', doc.name, d, nullVar)
                                    "
                                    ><i class="fas fa-trash-alt"></i
                                  ></a>
                                  <a
                                    href="javascript:;"
                                    class="btn btn-deafault pull-right btn-xs"
                                    (click)="setPDFSrc(doc.path)"
                                    data-toggle="modal"
                                    data-target="#viewDocModal"
                                    ><i class="fas fa-eye"></i
                                  ></a>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="row text-dark adddriverpl">
                  <div class="col-lg-10">
                    <label
                      class="control-label font-weight-bold text-lg-right text-5"
                      >Cross Border Details</label
                    >
                  </div>
                </div>
                <div
                  class="form-group row adddriverpl text-dark"
                  id="document-one"
                >
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >ACI ID
                        </label>
                        <input
                          [(ngModel)]="driverData.crossBorderDetails.ACI_ID"
                          name="crossBorderDetails.ACI_ID"
                          type="text"
                          class="form-control"
                          placeholder="10 digits , eg.4567895676"
                        />
                        <!-- <div *ngIf="aci.invalid && (aci.dirty || aci.touched)" class="text-danger">
                          <div *ngIf="aci.errors.pattern">
                            ACI ID must contain 10 numbers.
                          </div>

                        </div> -->
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >ACE ID
                        </label>
                        <input
                          [(ngModel)]="driverData.crossBorderDetails.ACE_ID"
                          name="crossBorderDetails.ACE_ID"
                          type="text"
                          class="form-control"
                          placeholder="10 digits , eg.4567895676"
                        />
                        <!-- <div *ngIf="ace.invalid && (ace.dirty || ace.touched)" class="text-danger">
                          <div *ngIf="ace.errors.pattern">
                            ACE ID must contain 10 numbers.
                          </div>

                        </div> -->
                      </div>
                    </div>
                    <div class="row pt-2">
                      <div class="col-lg-10">
                        <div class="checkbox-custom">
                          <input
                            type="checkbox"
                            [(ngModel)]="driverData.crossBorderDetails.csa"
                            name="crossBorderDetails.csa"
                          />
                          <label for="csa">CSA</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div>
                      <div class="row">
                        <div class="col-lg-5">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2"
                            >FAST Card#
                          </label>
                          <input
                            [(ngModel)]="driverData.crossBorderDetails.fast_ID"
                            name="crossBorderDetails.fast_ID"
                            type="text"
                            class="form-control"
                            placeholder="14 digits, beginning with 4270/4110 and ending with 00/01/02 (42700012345601)"
                            #fastCard="ngModel"
                            pattern="^[4270|4110]{4}[0-9]{8}[00|01]{2}$"
                          />
                          <div
                            *ngIf="
                              fastCard.invalid &&
                              (fastCard.dirty || fastCard.touched)
                            "
                            class="text-danger"
                          >
                            <div *ngIf="fastCard.errors.pattern">
                              Fast Card must contain only 14 numbers beginning
                              with 4270/4110 and ending with 00/01.
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-5">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2"
                            >FAST Expiry
                          </label>
                          <input
                            [(ngModel)]="
                              driverData.crossBorderDetails.fastExpiry
                            "
                            name="crossBorderDetails.fastExpiry"
                            readonly
                            (click)="d2.toggle()"
                            ngbDatepicker
                            #d2="ngbDatepicker"
                            type="text"
                            class="form-control"
                            placeholder="yyyy/mm/dd"
                            [minDate]="birthDateMinLimit"
                            [maxDate]="futureDatesLimit"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="row adddriverpl mb-3">
                  <div class="col-lg-6">
                    <label
                      class="control-label font-weight-bold text-lg-right text-dark text-5"
                      >Documents Details</label
                    >
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-5"></div>
                      <div class="col-5 text-right">
                        <button
                          type="button"
                          (click)="addDocument()"
                          id="add-document"
                          [disabled]="driverData.documentDetails.length == 3"
                          class="btn btn-success cus-btn-padd"
                        >
                          <i class="fa fa-plus"></i> Add Another Document
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <div
                  class="form-group row adddriverpl text-dark border-0 mb-0 pb-0"
                  id="document-one"
                  *ngFor="
                    let document of driverData.documentDetails;
                    let i = index
                  "
                >
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-10">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Document Type
                        </label>
                        <ng-select
                          [(ngModel)]="document.documentType"
                          [attr.name]="
                            'documentDetails[' + i + '].documentType'
                          "
                          [ngModelOptions]="{ standalone: true }"
                          placeholder="Select document type"
                          #doc1="ngModel"
                        >
                          <ng-container
                            *ngFor="let documentType of documentTypeList"
                          >
                            <ng-option
                              *ngIf="documentType.code != '5K'"
                              [value]="documentType.code"
                            >
                              {{ documentType.description }}</ng-option
                            >
                          </ng-container>
                        </ng-select>
                        <!-- <div *ngIf="doc1.invalid && (doc1.dirty || doc1.touched)" class="text-danger">
                          <div *ngIf="doc1.errors.required">
                            Document type is required.
                          </div>
                        </div> -->
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Document#
                        </label>
                        <input
                          [(ngModel)]="document.document"
                          [attr.name]="'documentDetails[' + i + '].document'"
                          [ngModelOptions]="{ standalone: true }"
                          type="text"
                          class="form-control"
                          placeholder="eg. Certificate number 201717ABC"
                          #docNum="ngModel"
                        />

                        <!-- <div *ngIf="docNum.invalid && (docNum.dirty || docNum.touched)" class="text-danger">
                            <div *ngIf="docNum.errors.required">
                              Document# is required.
                            </div>
                            <div *ngIf="docNum.errors.pattern">
                              Document# must contain alphanumeric characters.
                            </div>
                          </div> -->
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Issuing Authority
                        </label>
                        <input
                          [(ngModel)]="document.issuingAuthority"
                          [attr.name]="
                            'documentDetails[' + i + '].issuingAuthority'
                          "
                          [ngModelOptions]="{ standalone: true }"
                          type="text"
                          class="form-control"
                          placeholder="eg. Ontario,canada"
                          #authority="ngModel"
                        />
                        <!-- <div *ngIf="authority.invalid && (authority.dirty || authority.touched)" class="text-danger">

                            <div *ngIf="authority.errors.pattern">
                              Issuing authority must contain letters and allowed characters(,).
                            </div>
                          </div> -->
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Issuing Country
                        </label>
                        <ng-select
                          (change)="getDocStates($event, i)"
                          [(ngModel)]="document.issuingCountry"
                          [attr.name]="
                            'documentDetails[' + i + '].issuingCountry'
                          "
                          [ngModelOptions]="{ standalone: true }"
                          class="form-control populate"
                          placeholder="Select the issuing country"
                        >
                          <ng-option
                            class="text-capitalize"
                            *ngFor="let country of docCountries"
                            value="{{ country.countryCode }}"
                            >{{ country.countryName }}</ng-option
                          >
                        </ng-select>
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Issuing Province/State
                        </label>
                        <ng-select
                          [(ngModel)]="document.issuingState"
                          [attr.name]="
                            'documentDetails[' + i + '].issuingState'
                          "
                          [ngModelOptions]="{ standalone: true }"
                          placeholder="Select issuing Province/State"
                        >
                          <ng-option
                            class="text-capitalize"
                            *ngFor="let state of document.docStates"
                            value="{{ state.stateCode }}"
                          >
                            {{ state.stateName }}</ng-option
                          >
                        </ng-select>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Issue Date
                        </label>
                        <input
                          [(ngModel)]="document.issueDate"
                          (click)="d.toggle()"
                          ngbDatepicker
                          #d="ngbDatepicker"
                          readonly
                          type="text"
                          class="form-control"
                          [maxDate]="getcurrentDate"
                          [minDate]="birthDateMinLimit"
                          placeholder="yyyy/mm/dd"
                          [attr.name]="'documentDetails[' + i + '].issueDate'"
                          [ngModelOptions]="{ standalone: true }"
                          #idSlt="ngModel"
                        />
                        <!-- <div *ngIf="idSlt.invalid && (idSlt.dirty || idSlt.touched)" class="text-danger">
                          <div *ngIf="idSlt.errors.required">
                            Issue date is required.
                          </div>
                        </div> -->
                      </div>
                      <div class="col-5" *ngIf="document.documentType != 'BCN'">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                        >
                          Expiry Date
                        </label>
                        <input
                          [(ngModel)]="document.expiryDate"
                          [attr.name]="'documentDetails[' + i + '].expiryDate'"
                          [ngModelOptions]="{ standalone: true }"
                          readonly
                          (click)="d1.toggle()"
                          ngbDatepicker
                          #d1="ngbDatepicker"
                          placeholder="yyyy/mm/dd"
                          [maxDate]="futureDatesLimit"
                          [minDate]="birthDateMinLimit"
                          type="text"
                          class="form-control"
                          #expSlt="ngModel"
                        />
                        <!-- <div *ngIf="expSlt.invalid && (expSlt.dirty || expSlt.touched)" class="text-danger">
                          <div *ngIf="expSlt.errors.required">
                            Expiry date is required.
                          </div>
                        </div> -->
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6 mb-1">
                    <div class="row">
                      <div class="col-lg-10">
                        <label
                          class="control-label font-weight-bold font-bold text-lg-right pt-2"
                          >Attach Document
                        </label>
                        <input
                          class="w100"
                          type="file"
                          multiple
                          name="document.uploadedDocs{{ i }}"
                          (change)="selectDocuments($event, i)"
                          accept=".doc, .docx, .pdf, .jpg, .jpeg .png"
                        />
                        <span *ngIf="uploadDocsError != ''" class="text-danger">
                          {{ uploadDocsError }}
                        </span>
                      </div>
                      <div class="col-lg-10 mt-2" *ngIf="assetsDocs[i]">
                        <div class="vehicle-common-box p-3">
                          <div class="row">
                            <div class="col-lg-6">
                              <label
                                class="control-label font-weight-bold text-3"
                                >Document(s)</label
                              >
                            </div>
                            <div class="col-lg-6 text-right"></div>
                          </div>
                          <hr class="solid mt-2" />
                          <div
                            class="row mb-1"
                            *ngFor="let doc of assetsDocs[i]; let d = index"
                          >
                            <div class="col-lg-9">
                              <a
                                href="{{ doc.path }}"
                                data-toggle="modal"
                                data-target="#viewDocModal"
                                (click)="setPDFSrc(doc.path)"
                                >Document {{ d + 1 }}</a
                              >
                            </div>
                            <div class="col-lg-3 text-right">
                              <a
                                href="javascript:;"
                                class="btn btn-deafault pull-right btn-xs"
                                (click)="delete('doc', doc.name, i, d)"
                                ><i class="fas fa-trash-alt"></i
                              ></a>
                              <a
                                href="javascript:;"
                                class="btn btn-deafault pull-right btn-xs"
                                (click)="setPDFSrc(doc.path)"
                                data-toggle="modal"
                                data-target="#viewDocModal"
                                ><i class="fas fa-eye"></i
                              ></a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6 text-right mt-4">
                    <div class="row">
                      <div class="col-5"></div>
                      <div class="col-5 text-right">
                        <a
                          href="javascript:;"
                          *ngIf="i != 0"
                          (click)="remove('document', i)"
                          class="btn btn-danger"
                          ><i class="fa fa-minus"></i
                        ></a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="form-group row text-dark adddriverpl">
                  <div class="col-lg-10">
                    <label
                      class="control-label font-weight-bold text-lg-right text-5"
                      >Payment Details</label
                    >
                  </div>
                  <div class="col-lg-6 mb-1">
                    <div class="row">
                      <div class="col-lg-10">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Default Payment Type
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          ></label
                        >
                        <ng-select
                          [(ngModel)]="paymentType"
                          name="paymentType"
                          placeholder="Select the payment type"
                          id="paymentTypeForm"
                          #paySlt="ngModel"
                          required
                          [ngClass]="{
                            error: driverF.submitted && paySlt.invalid
                          }"
                        >
                          <ng-option
                            *ngFor="let option of paymentOptions"
                            [value]="option.value"
                            >{{ option.name }}
                          </ng-option>
                        </ng-select>

                        <div
                          *ngIf="paySlt.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="paySlt.errors.required">
                            Default payment type is required.
                          </div>
                        </div>
                      </div>
                      <div
                        class="col-lg-10"
                        *ngIf="driverData.driverType === 'employee'"
                      >
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >SIN
                        </label>
                        <input
                          [(ngModel)]="driverData.SIN"
                          name="SIN"
                          type="text"
                          class="form-control"
                          placeholder="9 digits , eg.123456789"
                          #sin1="ngModel"
                          pattern="^[0-9]{9}$"
                        />
                        <div
                          *ngIf="sin1.invalid && (sin1.dirty || sin1.touched)"
                          class="text-danger"
                        >
                          <!-- <div *ngIf="sin1.errors.required">
                              SIN is required.
                            </div> -->
                          <div *ngIf="sin1.errors.pattern">
                            SIN must contain 9 numbers.
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6 mb-1">
                    <div
                      class="row"
                      id="payPerHourForm"
                      *ngIf="paymentType == 'pph'"
                    >
                      <div class="col-lg-4">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                        >
                          Rate
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          ></label
                        >
                        <input
                          [(ngModel)]="payPerHour.rate"
                          name="payPerHour.rate"
                          type="text"
                          class="form-control"
                          placeholder="eg. $20 ,$40 ,$60"
                          #payHour="ngModel"
                          required
                          [ngClass]="{
                            error: driverF.submitted && payHour.invalid
                          }"
                        />
                        <div
                          *ngIf="payHour.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="payHour.errors.required">
                            Rate is required.
                          </div>
                          <div *ngIf="payHour.errors.pattern">
                            Rate must contain numbers.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-6">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2 mt-1"
                        ></label>
                        <ng-select
                          class="mt-2"
                          [(ngModel)]="payPerHour.currency"
                          (change)="changeCurrency($event)"
                          name="rateUnit"
                          placeholder="Select Currency"
                          #payCurr="ngModel"
                          required
                          [ngClass]="{
                            error: driverF.submitted && payCurr.invalid
                          }"
                        >
                          <ng-option value="CAD">CAD</ng-option>
                          <ng-option value="USD">USD</ng-option>
                        </ng-select>
                        <div
                          *ngIf="payCurr.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="payCurr.errors.required">
                            Currency is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-4">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Waiting period Pay</label
                        >
                        <input
                          [(ngModel)]="payPerHour.waitingPay"
                          name="payPerHour.waitingPay"
                          type="text"
                          class="form-control"
                          placeholder=" eg. $20 ,$40 ,$60"
                          #payWait="ngModel"
                        />
                      </div>
                      <div class="col-lg-6">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2 mt-1"
                        ></label>
                        <ng-select
                          class="mt-2"
                          [(ngModel)]="payPerHour.currency"
                          (change)="changeCurrency($event)"
                          name="paymentDetails.waitingPayUnit"
                          placeholder="Select Currency"
                        >
                          <ng-option value="CAD">CAD</ng-option>
                          <ng-option value="USD">USD</ng-option>
                        </ng-select>
                      </div>
                      <div class="col-lg-4">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Waiting hour start after</label
                        >
                        <input
                          [(ngModel)]="payPerHour.waitingHourAfter"
                          name="paymentDetails.waitingHourAfter"
                          type="text"
                          class="form-control"
                          placeholder="eg. Min 3 hours"
                        />
                      </div>
                    </div>
                    <div
                      class="row"
                      id="payPerDelivery"
                      *ngIf="paymentType == 'ppd'"
                    >
                      <div class="col-lg-4">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Delivery Rate
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          ></label
                        >
                        <input
                          [(ngModel)]="payPerDelivery.deliveryRate"
                          name="paymentDetails.deliveryRate"
                          type="text"
                          class="form-control"
                          placeholder="eg. $20 ,$40 ,$60"
                          #dRate="ngModel"
                          required
                          [ngClass]="{
                            error: driverF.submitted && dRate.invalid
                          }"
                        />
                        <div
                          *ngIf="dRate.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="dRate.errors.required">
                            Delivery rate is required.
                          </div>
                          <div *ngIf="dRate.errors.pattern">
                            Delivery rate must contain numbers.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-6">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2 mt-1"
                        ></label>
                        <ng-select
                          class="mt-2"
                          [(ngModel)]="payPerDelivery.currency"
                          (change)="changeCurrency($event)"
                          name="paymentDetails.deliveryRateUnit"
                          placeholder="Select Currency"
                          #curr2="ngModel"
                          required
                          [ngClass]="{
                            error: driverF.submitted && curr2.invalid
                          }"
                        >
                          <ng-option value="CAD">CAD</ng-option>
                          <ng-option value="USD">USD</ng-option>
                        </ng-select>
                        <div
                          *ngIf="curr2.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="curr2.errors.required">
                            Currency is required.
                          </div>
                        </div>
                      </div>
                    </div>
                    <div
                      class="row"
                      id="payFlatRate"
                      *ngIf="paymentType == 'pfr'"
                    >
                      <div class="col-lg-4">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Flat Rate
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          ></label
                        >
                        <input
                          [(ngModel)]="payFlatRate.flatRate"
                          name="payFlatRate.flatRate"
                          type="text"
                          class="form-control"
                          placeholder="eg. $20 ,$40 ,$60"
                          #fRate="ngModel"
                          required
                          [ngClass]="{
                            error: driverF.submitted && fRate.invalid
                          }"
                        />
                        <div
                          *ngIf="fRate.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="fRate.errors.required">
                            Flat rate is required.
                          </div>
                          <div *ngIf="fRate.errors.pattern">
                            Flat rate must contain numbers.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-6">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2 mt-1"
                        ></label>
                        <ng-select
                          class="mt-2"
                          [(ngModel)]="payFlatRate.currency"
                          name="payFlatRate.currency"
                          placeholder="Select Currency"
                          #fCurr="ngModel"
                          required
                          [ngClass]="{
                            error: driverF.submitted && fCurr.invalid
                          }"
                        >
                          <ng-option value="CAD">CAD</ng-option>
                          <ng-option value="USD">USD</ng-option>
                        </ng-select>
                        <div
                          *ngIf="fCurr.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="fCurr.errors.required">
                            Currency is required.
                          </div>
                        </div>
                      </div>
                    </div>
                    <div
                      class="row"
                      id="payPercentageForm"
                      *ngIf="paymentType == 'pp'"
                    >
                      <div class="col-lg-10">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Load Pay Percent
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          ></label
                        >
                        <div class="row">
                          <div class="col-lg-3">
                            <input
                              [(ngModel)]="payPercentage.loadPayPercentage"
                              name="payPercentage.loadPayPercentage"
                              type="text"
                              class="form-control"
                              placeholder="eg. 2%, 5%, 10%"
                              #lPay1="ngModel"
                              required
                              [ngClass]="{
                                error: driverF.submitted && lPay1.invalid
                              }"
                            />
                            <div
                              *ngIf="lPay1.invalid && driverF.submitted"
                              class="text-danger"
                            >
                              <div *ngIf="lPay1.errors.required">
                                Load pay percent is required.
                              </div>
                              <div *ngIf="lPay1.errors.pattern">
                                Load pay percent must contain numbers.
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-2 px-0">
                            <label class="font-weight-bold">%</label>
                            <label class="font-weight-bold pull-right"
                              >of</label
                            >
                          </div>
                          <div class="col-lg-7">
                            <ng-select
                              [(ngModel)]="payPercentage.loadPayPercentageOf"
                              name="payPercentage.loadPayPercentageOf"
                              placeholder="Select the percentage type of"
                              #ff="ngModel"
                              required
                              [ngClass]="{
                                error: driverF.submitted && ff.invalid
                              }"
                            >
                              <ng-option value="Freight Fees"
                                >Freight Fees</ng-option
                              >
                              <ng-option value="Freight + Fuel Surcharge"
                                >Freight + Fuel Surcharge
                              </ng-option>
                              <ng-option value="Total Income"
                                >Total Income</ng-option
                              >
                            </ng-select>
                            <div
                              *ngIf="ff.invalid && driverF.submitted"
                              class="text-danger"
                            >
                              <div *ngIf="ff.errors.required">
                                Load pay percent type is required.
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div>
                      <div
                        class="row"
                        id="payPerMileForm"
                        *ngIf="paymentType == 'ppm'"
                        style="display: flex"
                      >
                        <div class="col-lg-3 pr-0">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2"
                            >Loaded Miles
                            <span class="mandfield text-2 ml-1"
                              ><sup>*</sup></span
                            ></label
                          >
                          <input
                            [(ngModel)]="payPerMile.loadedMiles"
                            name="payPerMile.loadedMiles"
                            type="text"
                            class="form-control"
                            #payM="ngModel"
                            required
                            [ngClass]="{
                              error: driverF.submitted && payM.invalid
                            }"
                            placeholder="eg. $0.5, $1, $2"
                          />
                          <div
                            *ngIf="payM.invalid && driverF.submitted"
                            class="text-danger"
                          >
                            <div *ngIf="payM.errors.required">
                              Loaded miles are required.
                            </div>
                            <div *ngIf="payM.errors.pattern">
                              Loaded miles must contain numbers.
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-2">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2 mt-1"
                          ></label>
                          <ng-select
                            class="mt-2"
                            [(ngModel)]="payPerMile.currency"
                            name="loadedMilesUnit"
                            placeholder="Select Currency"
                            (change)="changeCurrency($event)"
                            #curr4="ngModel"
                            required
                            [ngClass]="{
                              error: driverF.submitted && curr4.invalid
                            }"
                          >
                            <ng-option value="CAD">CAD</ng-option>
                            <ng-option value="USD">USD</ng-option>
                          </ng-select>
                          <div
                            *ngIf="curr4.invalid && driverF.submitted"
                            class="text-danger"
                          >
                            <div *ngIf="curr4.errors.required">
                              Currency is required.
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-3 pr-0">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2"
                            >Empty Miles
                            <span class="mandfield text-2 ml-1"
                              ><sup>*</sup></span
                            ></label
                          >
                          <input
                            [(ngModel)]="payPerMile.emptyMiles"
                            name="payPerMile.emptyMiles"
                            type="text"
                            class="form-control"
                            placeholder="eg. $0.5, $1, $2"
                            #eMiles1="ngModel"
                            required
                            [ngClass]="{
                              error: driverF.submitted && eMiles1.invalid
                            }"
                          />
                          <div
                            *ngIf="eMiles1.invalid && driverF.submitted"
                            class="text-danger"
                          >
                            <div *ngIf="eMiles1.errors.required">
                              Empty miles are required.
                            </div>
                            <div *ngIf="eMiles1.errors.pattern">
                              Empty miles must contain numbers.
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-2">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2 mt-1"
                          ></label>
                          <ng-select
                            class="mt-2"
                            [(ngModel)]="payPerMile.currency"
                            name="emptyMilesUnit"
                            placeholder="Select Currency"
                            (change)="changeCurrency($event)"
                            #curr5="ngModel"
                            required
                            [ngClass]="{
                              error: driverF.submitted && curr5.invalid
                            }"
                          >
                            <ng-option value="CAD">CAD</ng-option>
                            <ng-option value="USD">USD</ng-option>
                          </ng-select>
                          <div
                            *ngIf="curr5.invalid && driverF.submitted"
                            class="text-danger"
                          >
                            <div *ngIf="curr5.errors.required">
                              Currency is required.
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-3 pr-0">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2"
                            >Loaded Miles (Team)
                            <span class="mandfield text-2 ml-1"
                              ><sup>*</sup></span
                            ></label
                          >
                          <input
                            [(ngModel)]="payPerMile.loadedMilesTeam"
                            name="payPerMile.loadedMilesTeam"
                            type="text"
                            class="form-control"
                            placeholder="eg. $0.5, $1, $2"
                            #lMiles2="ngModel"
                            required
                            [ngClass]="{
                              error: driverF.submitted && lMiles2.invalid
                            }"
                          />
                          <div
                            *ngIf="lMiles2.invalid && driverF.submitted"
                            class="text-danger"
                          >
                            <div *ngIf="lMiles2.errors.required">
                              Loaded miles are required.
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-2">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2 mt-1"
                          ></label>
                          <ng-select
                            class="mt-2"
                            [(ngModel)]="payPerMile.currency"
                            (change)="changeCurrency($event)"
                            name="loadedMilesTeamUnit"
                            placeholder="Select Currency"
                            #curr6="ngModel"
                            required
                            [ngClass]="{
                              error: driverF.submitted && curr6.invalid
                            }"
                          >
                            <ng-option value="CAD">CAD</ng-option>
                            <ng-option value="USD">USD</ng-option>
                          </ng-select>
                          <div
                            *ngIf="curr6.invalid && driverF.submitted"
                            class="text-danger"
                          >
                            <div *ngIf="curr6.errors.required">
                              Currency is required.
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-3 pr-0">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2"
                            >Empty Miles (Team)
                            <span class="mandfield text-2 ml-1"
                              ><sup>*</sup></span
                            ></label
                          >
                          <input
                            [(ngModel)]="payPerMile.emptyMilesTeam"
                            name="payPerMile.emptyMilesTeam"
                            type="text"
                            class="form-control"
                            placeholder="eg. $0.5, $1, $2"
                            #eMilesTeam="ngModel"
                            required
                            [ngClass]="{
                              error: driverF.submitted && eMilesTeam.invalid
                            }"
                          />
                          <div
                            *ngIf="eMilesTeam.invalid && driverF.submitted"
                            class="text-danger"
                          >
                            <div *ngIf="eMilesTeam.errors.required">
                              Empty miles (Team) are required.
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-2">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2 mt-1"
                          ></label>
                          <ng-select
                            class="mt-2"
                            [(ngModel)]="payPerMile.currency"
                            (change)="changeCurrency($event)"
                            name="emptyMilesTeamUnit"
                            placeholder="Select Currency"
                            #curr7="ngModel"
                            required
                            [ngClass]="{
                              error: driverF.submitted && curr7.invalid
                            }"
                          >
                            <ng-option value="CAD">CAD</ng-option>
                            <ng-option value="USD">USD</ng-option>
                          </ng-select>
                          <div
                            *ngIf="curr7.invalid && driverF.submitted"
                            class="text-danger"
                          >
                            <div *ngIf="curr7.errors.required">
                              Currency is required.
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-10">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2"
                            >Pay Period</label
                          >
                          <ng-select
                            [(ngModel)]="driverData.payPeriod"
                            name="paymentDetails.payPeriod"
                            placeholder="Select pay period of the driver"
                            #ppSlt="ngModel"
                          >
                            <ng-option value="Weekly">Weekly</ng-option>
                            <ng-option value="Biweekly">Biweekly</ng-option>
                            <ng-option value="Monthly">Monthly</ng-option>
                            <ng-option value="Semi_monthly"
                              >Semi-Monthly</ng-option
                            >
                            <ng-option value="Quaterly">Quaterly</ng-option>
                            <ng-option value="Annually">Annually</ng-option>
                          </ng-select>
                          <!-- <div *ngIf="ppSlt.invalid && (ppSlt.dirty || ppSlt.touched)" class="text-danger">
                            <div *ngIf="ppSlt.errors.required">
                              Pay period type is required.
                            </div>
                          </div> -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="form-group row text-dark adddriverpl">
                  <div class="col-lg-10">
                    <label
                      class="control-label font-weight-bold text-lg-right text-5"
                      >Compliance Details</label
                    >
                  </div>
                  <div class="col-lg-6 mb-1">
                    <div class="row">
                      <div class="col-lg-10">
                        <label
                          class="control-label font-weight-bold font-weight-bold text-lg-right pt-2"
                          >Status<span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <ng-select
                          [(ngModel)]="driverData.hosDetails.hosStatus"
                          (change)="complianceChange($event)"
                          name="hosDetails.hosStatus"
                          class="form-control populate"
                          placeholder="Select exemption status of the driver"
                          #sSlt="ngModel"
                          required
                          [ngClass]="{
                            error: driverF.submitted && sSlt.invalid
                          }"
                        >
                          <ng-option value="non_Exempted"
                            >Non Exempted</ng-option
                          >
                          <ng-option value="exempted">Exempted</ng-option>
                        </ng-select>
                        <div
                          *ngIf="sSlt.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="sSlt.errors.required">
                            Status is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-10">
                        <label
                          class="control-label font-weight-bold font-weight-bold text-lg-right pt-2"
                          >Write Remarks if driver is Exempted.
                        </label>
                        <textarea
                          style="height: unset !important"
                          [(ngModel)]="driverData.hosDetails.hosRemarks"
                          name="hosDetails.hosRemarks"
                          class="form-control"
                          rows="4"
                          placeholder=" Enter remarks for the exempted driver"
                          #remarks1="ngModel"
                          pattern="^[\s\S]{1,500}$"
                        ></textarea>
                        <div
                          *ngIf="
                            remarks1.invalid &&
                            (remarks1.dirty || remarks1.touched)
                          "
                          class="text-danger"
                        >
                          <div *ngIf="remarks1.errors.pattern">
                            Only 500 characters are allowed.
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="row">
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Type<span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <ng-select
                          [(ngModel)]="driverData.hosDetails.type"
                          name="hosDetails.type"
                          placeholder="Select the record keeping type"
                          #tSlt="ngModel"
                          required
                          [ngClass]="{
                            error: driverF.submitted && tSlt.invalid
                          }"
                        >
                          <ng-option
                            *ngIf="
                              driverData.hosDetails.hosStatus == 'non_Exempted'
                            "
                            value="ELD"
                            >ELD
                          </ng-option>
                          <ng-option
                            *ngIf="
                              driverData.hosDetails.hosStatus == 'exempted'
                            "
                            value="Log Book"
                            >Log Book
                          </ng-option>
                        </ng-select>
                        <div
                          *ngIf="tSlt.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="tSlt.errors.required">
                            Type is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Home Terminal
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <ng-select
                          [(ngModel)]="driverData.hosDetails.homeTerminal"
                          name="hosDetails.homeTerminal"
                          class="form-control populate"
                          placeholder="Select home terminal of the driver"
                          #home="ngModel"
                          required
                          [ngClass]="{
                            error: driverF.submitted && home.invalid
                          }"
                        >
                          <ng-option
                            class="text-capitalize"
                            *ngFor="let yard of carrierYards"
                            value="{{ yard.addressID }}"
                          >
                            <div *ngIf="yard.manual">
                              {{ yard.address }} {{ yard.cityName }},
                              {{ yard.stateName }}, {{ yard.countryName }}
                            </div>
                            <div *ngIf="!yard.manual">
                              {{ yard.userLocation }}
                            </div>
                          </ng-option>
                        </ng-select>
                        <div
                          *ngIf="home.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="home.errors.required">
                            Home terminal is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Operating Zone
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <ng-select
                          [(ngModel)]="driverData.hosDetails.optZone"
                          name="hosDetails.optZone"
                          class="form-control populate"
                          placeholder="Select the Operating Zone"
                          #oz1="ngModel"
                          required
                          [ngClass]="{
                            error: driverF.submitted && oz1.invalid
                          }"
                        >
                          <ng-option
                            class="text-capitalize"
                            value="South (Canada)"
                            >South (Canada)
                          </ng-option>
                          <ng-option
                            class="text-capitalize"
                            value="North (Canada)"
                            >North (Canada)
                          </ng-option>
                          <ng-option class="text-capitalize" value="USA"
                            >USA</ng-option
                          >
                        </ng-select>
                        <div
                          *ngIf="oz1.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="oz1.errors.required">
                            Operating zone is required.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Home Terminal Timezone
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <ng-select
                          [(ngModel)]="driverData.hosDetails.timezone"
                          name="hosDetails.timezone"
                          class="form-control populate"
                          placeholder="Select the home terminal timezone"
                          #ht="ngModel"
                          required
                          [ngClass]="{ error: driverF.submitted && ht.invalid }"
                        >
                          <ng-option
                            class="text-capitalize"
                            *ngFor="let timezone of finaltimezones"
                            [value]="timezone.name"
                            >{{ timezone.country }} - {{ timezone.name }}
                          </ng-option>
                        </ng-select>
                        <div
                          *ngIf="ht.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="ht.errors.required">
                            Home terminal timezone is required.
                          </div>
                        </div>
                      </div>
                      <div
                        class="col-lg-10"
                        *ngIf="
                          driverData.hosDetails.hosStatus == 'non_Exempted'
                        "
                      >
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Cycle
                          <span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          >
                        </label>
                        <ng-select
                          [(ngModel)]="driverData.hosDetails.hosCycleName"
                          name="hosDetails.hosCycleName"
                          class="form-control populate"
                          [ngClass]="{
                            error: driverF.submitted && cycle1.invalid
                          }"
                          placeholder="Select the cycle for the driver"
                          #cycle1="ngModel"
                          [required]="
                            driverData.hosDetails.hosStatus == 'non_Exempted'
                          "
                        >
                          <ng-option value="USA 60 hour / 7 day"
                            >USA 60 hour / 7 day</ng-option
                          >
                          <ng-option value="USA 70 hour / 8 day"
                            >USA 70 hour / 8 day</ng-option
                          >
                          <ng-option value="Canada South 70 hour / 7 day"
                            >Canada South 70 hour / 7 day</ng-option
                          >
                          <ng-option value="Canada South 120 hour / 14 day"
                            >Canada South 120 hour / 14 day</ng-option
                          >
                        </ng-select>
                        <div
                          *ngIf="cycle1.invalid && driverF.submitted"
                          class="text-danger"
                        >
                          <div *ngIf="cycle1.errors.required">
                            Cycle is required.
                          </div>
                        </div>
                      </div>

                      <div
                        class="col-lg-6"
                        *ngIf="
                          driverData.hosDetails.hosStatus == 'non_Exempted'
                        "
                      >
                        <div class="checkbox-custom">
                          <input
                            type="checkbox"
                            value=""
                            [(ngModel)]="driverData.hosDetails.pcAllowed"
                            name="hosDetails.pcAllowed"
                          />
                          <label class="control-label font-weight-bold"
                            >Allow Personal Conveyance (PC)</label
                          >
                        </div>
                      </div>
                      <div
                        class="col-lg-4"
                        *ngIf="
                          driverData.hosDetails.hosStatus == 'non_Exempted'
                        "
                      >
                        <div class="checkbox-custom">
                          <input
                            type="checkbox"
                            [(ngModel)]="driverData.hosDetails.ymAllowed"
                            name="hosDetails.ymAllowed"
                            value="Allow Yard Move (YM)"
                          />
                          <label class="control-label font-weight-bold"
                            >Allow Yard Move (YM)</label
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-lg-12">
              <div class="bg-white p-3">
                <div class="form-group row text-dark adddriverpl">
                  <div class="col-lg-10">
                    <label
                      class="control-label font-weight-bold text-lg-right text-5"
                      >Emergency Contact Details</label
                    >
                  </div>
                  <div class="col-lg-12">
                    <div class="row">
                      <div class="col-lg-4">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Name
                        </label>
                        <input
                          [(ngModel)]="driverData.emergencyDetails.name"
                          name="name"
                          type="text"
                          class="form-control"
                          placeholder="eg. John Smith"
                        />
                        <!-- <div *ngIf="eName.invalid && (eName.dirty || eName.touched)" class="text-danger">
                          <div *ngIf="eName.errors.pattern">
                            Name must contain letters.
                          </div>
                        </div> -->
                      </div>
                      <div class="col-lg-4">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Phone
                        </label>
                        <input
                          [(ngModel)]="driverData.emergencyDetails.phone"
                          name="emergencyDetails.phone"
                          type="text"
                          class="form-control"
                          placeholder="eg. 2234567891"
                        />
                        <!-- <div *ngIf="phone.invalid && (phone.dirty || phone.touched)" class="text-danger">
                          <div *ngIf="phone.errors.pattern">
                            Phone must contain 10 numbers eg. +12234567891
                          </div>
                        </div> -->
                      </div>
                      <div class="col-lg-3">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Relationship
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          placeholder="eg. Manager"
                          [(ngModel)]="driverData.emergencyDetails.relationship"
                          name="emergencyDetails.relationship"
                          #rel="ngModel"
                        />
                        <!-- <div *ngIf="rel.invalid && (rel.dirty || rel.touched)" class="text-danger">
                          <div *ngIf="rel.errors.pattern">
                            Relationship must contain letters.
                          </div>
                        </div> -->
                      </div>
                    </div>
                  </div>
                </div>
                <div class="form-group row mt-3">
                  <div class="col-lg-11 text-right pb-1 pt-1 pr-2">
                    <button
                      type="button"
                      (click)="cancel()"
                      class="btn cus-btn-padd btn-default btnPrevious mr-2"
                    >
                      Cancel
                    </button>
                    <button
                      type="submit"
                      *ngIf="!driverID"
                      [disabled]="submitDisabled"
                      class="cus-btn-padd btn btn-success"
                    >
                      Save
                    </button>
                    <button
                      type="submit"
                      *ngIf="driverID"
                      [disabled]="submitDisabled"
                      class="btn cus-btn-padd btn-success"
                    >
                      Update
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </form>
    </section>
  </div>
</section>

<!--- VIEW DOCUMENT MODAL --->
<div
  class="modal fade"
  id="viewDocModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="viewDocModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewDocModalLabel">View Document</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <div class="form-group col-md-12">
            <div>
              <iframe [src]="pdfSrc" title="" width="100%" height="400px">
              </iframe>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Group modal -->
<div
  class="modal fade"
  id="addDriverGroupModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="addDriverGroupModal"
  aria-hidden="true"
  data-keyboard="false"
  data-backdrop="static"
>
  <div class="modal-dialog" style="max-width: 600px" role="document">
    <div class="modal-content">
      <form
        id="groupForm1"
        class="form-horizontal form-bordered bg-white"
        method="get"
        name="form"
        #grouphide="ngForm"
        (ngSubmit)="grouphide.form.valid && addGroup()"
        novalidate
      >
        <div class="modal-header">
          <h5 class="modal-title">Add Group</h5>
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            aria-label="Close"
            (click)="closeGroupModal()"
          >
            <i
              class="far fa-window-close modal-dismiss"
              style="font-size: 25px"
            >
            </i>
          </button>
        </div>
        <div class="modal-body text-dark">
          <div class="card-body p-0">
            <div class="form-row">
              <div class="form-group col-lg-12 mb-0">
                <label class="control-label font-weight-bold"
                  >Group Name
                  <span class="mandfield text-2 ml-1"><sup>*</sup></span>
                </label>
                <input
                  [(ngModel)]="groupData.groupName"
                  name="groupName"
                  type="text"
                  class="form-control"
                  placeholder="eg. Fleet Group "
                  #groupModel="ngModel"
                  required
                  pattern="^[a-zA-Z\s]+$"
                  [ngClass]="{
                    error: grouphide.submitted && groupModel.invalid
                  }"
                />
                <div
                  *ngIf="groupModel.invalid && grouphide.submitted"
                  class="text-danger"
                >
                  <div *ngIf="groupModel.errors.required">
                    Group name is required.
                  </div>
                  <div *ngIf="groupModel.errors.pattern">
                    Group name must contain letters.
                  </div>
                </div>
              </div>
              <div class="form-group col-lg-12">
                <label class="control-label font-weight-bold"
                  >Group Members</label
                >
                <ng-select
                  [multiple]="true"
                  [(ngModel)]="groupData.groupMembers"
                  name="groupMembers"
                  style="width: 100%"
                  placeholder="Select group members"
                >
                  <ng-option
                    *ngFor="let item of allDrivers"
                    value="{{ item.driverID }}"
                    >{{ item.firstName }} {{ item.lastname }}</ng-option
                  >
                </ng-select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-lg-12">
                <div class="row">
                  <div class="col-lg-12">
                    <label
                      class="control-label font-weight-bold text-lg-right pt-2"
                      >Description</label
                    >
                    <textarea
                      [(ngModel)]="groupData.description"
                      name="description"
                      class="form-control h-auto"
                      rows="4"
                      placeholder="Enter group description"
                      #dNotes="ngModel"
                      pattern="^[\s\S]{1,500}$"
                    ></textarea>
                    <div
                      *ngIf="dNotes.invalid && (dNotes.dirty || dNotes.touched)"
                      class="text-danger"
                    >
                      <div *ngIf="dNotes.errors.pattern">
                        Only 500 characters are allowed.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer text-right">
          <a
            class="btn btn-default modal-dismiss"
            (click)="closeGroupModal()"
            data-dismiss="modal"
            >Cancel</a
          >
          <button
            type="submit"
            class="btn btn-success"
            [disabled]="groupSubmitDisabled"
          >
            Save
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
<div
  class="modal fade"
  id="driverProfileModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="driverProfileModal"
  aria-hidden="true"
>
  <div
    class="modal-dialog modal-dialog-centered"
    role="document"
    style="width: 250px"
  >
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Driver Profile Image</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <i class="far fa-window-close modal-dismiss" style="font-size: 25px">
          </i>
        </button>
      </div>
      <div class="modal-body text-dark">
        <div class="row">
          <div class="col-lg-12">
            <img
              [src]="driverProfileSrc"
              class="img-fluid rounded"
              height="200px"
              width="100%"
            />
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12 text-right">
            <i
              class="fas fa-times text-danger"
              data-toggle="tooltip"
              data-placement="top"
              title="Delete profile picture"
              (click)="
                delete('profile', driverData.driverImage, nullVar, nullVar)
              "
            ></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div
  class="modal fade"
  id="driverPicUploadedModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="driverPicUploadedModal"
  aria-hidden="true"
>
  <div
    class="modal-dialog modal-dialog-centered"
    role="document"
    style="width: 250px"
  >
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Driver Profile Image</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <i class="far fa-window-close modal-dismiss" style="font-size: 25px">
          </i>
        </button>
      </div>
      <div class="modal-body text-dark">
        <div class="row">
          <div class="col-lg-12">
            <img
              [src]="uploadedPic"
              class="img-fluid rounded"
              height="200px"
              width="100%"
            />
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12 text-right">
            <i
              class="fas fa-times text-danger"
              data-toggle="tooltip"
              data-placement="top"
              title="Delete profile picture"
              (click)="
                delete('uploaded', driverData.driverImage, nullVar, nullVar)
              "
            ></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
