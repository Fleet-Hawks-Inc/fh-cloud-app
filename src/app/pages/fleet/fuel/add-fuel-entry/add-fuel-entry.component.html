<section class="body">
  <div class="inner-wrapper">
    <section role="main" class="content-body pl-0">
      <header class="page-header">
        <div class="row" style="padding-top:10px;">
          <div class="col-md-6 col-lg-6 font-weight-bold text-4 text-dark">
            <h4 class="text-4 font-weight-bold mt-0 mb-0 text-dark">{{title}}</h4>
          </div>
          <div class="col-md-6  col-lg-6 text-right">
            <a [routerLink]="['/fleet', 'fuel', 'list']" class="btn btn-default btn-sm"><i class="fas fa-list"></i> Fuel
              Entries List</a>
          </div>
        </div>
      </header>
      <div class="row">
        <div class="col pr-0">
          <div class="card-body text-dark">
            <form class="form-horizontal form-bordered" method="get" id="fuelForm" name="fuelForm" #fuelF="ngForm">
              <div class="form-group row">
                <div class="col-lg-12">
                  <label
                    class="control-label font-weight-bold font-bold text-lg-right text-dark text-4 font-weight-bold pt-2">Basic
                    Details</label>
                </div>

                <div class="col-lg-12 col-md-12 pt-2">
                  <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-3">
                      <label class="control-label font-weight-bold text-lg-right">Unit Type:</label>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-9">
                      <div class="btn-group-toggle" data-toggle="buttons">
                        <label class="btn btn-outline btn-fleet mr-2 mb-2"
                          [class.active]="fuelData.unitType === 'vehicle'" style="width:110px;"
                          (click)="onChangeUnitType('vehicle')">
                          <input type="radio" name="unitType" [(ngModel)]="fuelData.unitType" id="fuel_unit_vehicle"
                            checked hidden value="vehicle"> Vehicle </label>

                        <label class="btn btn-outline btn-fleet mb-2" style="width:110px;"
                          [class.active]="fuelData.unitType === 'reefer'" (click)="onChangeUnitType('reefer')">
                          <input type="radio" name="unitType" [(ngModel)]="fuelData.unitType" id="fuel_unit_reefer"
                            hidden value="reefer"> Reefer </label>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-lg-5 offset-lg-1 col-md-5 offset-md-1">

                  <div class="row pt-3" id="fuelVehicle" *ngIf="fuelData.unitType ==='vehicle'">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Select Vehicle<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select placeholder="Select Vehicle" name="unitID" [(ngModel)]="fuelData.unitID"
                        #vecSlt="ngModel" required>

                        <ng-option *ngFor="let vehicle of vehicles" value="{{vehicle.vehicleID}}">
                          {{vehicle.vehicleIdentification}}</ng-option>
                      </ng-select>
                      <div *ngIf="vecSlt.invalid && (vecSlt.dirty || vecSlt.touched)" class="text-danger">
                        <div *ngIf="vecSlt.errors.required">
                          Vehicle is required.

                        </div>



                      </div>
                    </div>
                  </div>
                  <div class="row pt-3" id="fuelReefer" *ngIf="fuelData.unitType ==='reefer'">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Select Reefer<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select name="unitID" [(ngModel)]="fuelData.unitID" placeholder="Select Reefer"
                        #reefer="ngModel" required>
                        <ng-option *ngFor="let reefer of reeferArray" value="{{reefer.assetID}}">
                          {{reefer.assetIdentification}}</ng-option>
                      </ng-select>
                      <div *ngIf="reefer.invalid && (reefer.dirty || reefer.touched)" class="text-danger">
                        <div *ngIf="reefer.errors.required">
                          Reefer is required.


                        </div>



                      </div>
                    </div>

                  </div>
                  <!---<div id="fuelVehicleQty"  *ngIf="unitType ==='vehicle'"> --->
                  <div id="fuelVehicleQty">
                    <div class="row">
                      <div class="col-lg-4">
                        <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Fuel Quantity<span
                            class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <input type="number" min='0' placeholder="eg. 100,200" class="form-control" name="fuelQty"
                          [(ngModel)]="fuelData.fuelQty" #fuelQuantity="ngModel" required>
                        <div *ngIf="fuelQuantity.invalid && (fuelQuantity.dirty || fuelQuantity.touched)"
                          class="text-danger">
                          <div *ngIf="fuelQuantity.errors.required">
                            Fuel quantity must contain numbers.
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-2 qtumbtn px-0">
                        <ng-select class="form-control populate" name="fuelUnit" [(ngModel)]="fuelData.fuelUnit"
                          #fuelqty1="ngModel" required>
                          <ng-option value="gallon">gallon</ng-option>
                          <ng-option value="litre">litre</ng-option>
                        </ng-select>
                        <div *ngIf="fuelqty1.invalid && (fuelqty1.dirty || fuelqty1.touched)" class="text-danger">
                          <div *ngIf="fuelqty1.errors.required">
                            Fuel unit is required.


                          </div>



                        </div>

                      </div>
                      <div class="col-lg-4">
                        <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Amount<span
                            class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <input type="number" min='0' placeholder="eg. 100,200" class="form-control" name="fuelQtyAmt"
                          [(ngModel)]="fuelData.fuelQtyAmt" #amount="ngModel" required>
                        <div *ngIf="amount.invalid && (amount.dirty || amount.touched)" class="text-danger">
                          <div *ngIf="amount.errors.required">
                            Amount must contain numbers.


                          </div>



                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- <div class="row">
                    <div class="col-lg-4">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">DEF Fuel Quantity <span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <input type="number" min='0' placeholder="eg. 100,200" class="form-control" name="DEFFuelQty"
                        [(ngModel)]="fuelData.DEFFuelQty" #defFuel="ngModel" required>
                      <div *ngIf="defFuel.invalid && (defFuel.dirty || defFuel.touched)" class="text-danger">
                        <div *ngIf="defFuel.errors.required">
                          DEF fuel quantity must contain numbers only.

                        </div>



                      </div>
                    </div>
                    <div class="col-lg-2 qtumbtn px-0">

                       <label class="control-label pl-2 text-lg-right">{{fuelUnit}}</label>
                      <ng-select class="form-control populate" name="fuelUnit" [(ngModel)]="fuelData.fuelUnit"  #ftype="ngModel" required
                     >
                      <ng-option value="gallon">gallon</ng-option>
                      <ng-option value="litre">litre</ng-option>
                    </ng-select>
                    <div *ngIf="ftype.invalid && (ftype.dirty || ftype.touched)" class="text-danger">
                      <div *ngIf="ftype.errors.required">
                        Fuel unit is required.

                      </div>
                    </div>
                    <div class="col-lg-4">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Amount <span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <input type="number" placeholder="eg. 100,200" class="form-control" min='0' name="DEFFuelQtyAmt"
                        [(ngModel)]="fuelData.DEFFuelQtyAmt" #amountDef="ngModel" required>
                      <div *ngIf="amountDef.invalid && (amountDef.dirty || amountDef.touched)" class="text-danger">
                        <div *ngIf="amountDef.errors.required">
                          Amount must contain numbers only.


                        </div>



                      </div>
                    </div>
                  </div> -->
                  <!-- <div class="row">
                    <div class="col-lg-4">
                    </div>
                    <div class="col-lg-2 qtumbtn px-0">
                    </div>
                    <div class="col-lg-4">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Subtotal<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <div class="row">
                        <div class="col-lg-6 text-right mt-1">
                          <input class="form-control" name="fuelData.subTotal" [(ngModel)]="fuelData.subTotal"
                            #subTotal="ngModel" required pattern="^[0-9\.]+$">
                          <div *ngIf="subTotal.invalid && (subTotal.dirty || subTotal.touched)" class="text-danger">
                            <div class="pl-1 ml-0" *ngIf="subTotal.errors.required">
                              Subtotal is required .
                            </div>
                            <div class="pl-1 ml-0" *ngIf="subTotal.errors.pattern">
                              Subtotal must contain numbers only.


                            </div>



                         </div>
                        </div> -->
                        <!-- <div class="col-lg-6">

                          <ng-select placeholder="Select Currency" name="billingCurrency"
                            [(ngModel)]="fuelData.billingCurrency" (change)="changeCurrency($event)"
                            #sltCurrency="ngModel" required>
                            <ng-option value="USD">USD</ng-option>
                            <ng-option value="CAD">CAD</ng-option>
                          </ng-select>
                          <div *ngIf="sltCurrency.invalid && (sltCurrency.dirty || sltCurrency.touched)"
                            class="text-danger">
                            <div *ngIf="sltCurrency.errors.required">
                              Currency is required.


                            </div>



                          </div>
                        </div>
                      </div>
                    </div>
                  </div> -->
                  <div class="row">
                    <div class="col-lg-6">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Select Discount
                        Type</label>
                      <ng-select placeholder="Select Discount Type" name="discType" [(ngModel)]="fuelData.discType">
                        <ng-option *ngFor="let discType of fuelDiscounts" value="{{discType.fuelDiscountID}}">
                          {{discType.fuelDiscountName}}</ng-option>
                      </ng-select>

                    </div>
                    <div class="col-lg-4">
                      <label
                        class="control-label font-weight-bold font-bold text-lg-right pt-2">Discount({{fuelData.billingCurrency}})</label>
                      <input type="number" class="form-control" min='0' name="discAmount"
                        [(ngModel)]="fuelData.discAmount">

                    </div>
                  </div>
                  <div class="row" *ngFor="let tax of fuelData.taxes; let t = index;">
                    <div class="col-lg-6">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Select Tax
                        Type</label>
                      <ng-select placeholder="Select Tax Type" [ngModelOptions]="{standalone: true}"
                        [attr.name]="'tax['+t+'].taxType'" [(ngModel)]="tax.taxType">
                        <ng-option *ngFor="let tax of fuelTaxes" value="{{tax.fuelTaxID}}">{{tax.fuelTaxName}}
                        </ng-option>
                      </ng-select>

                    </div>
                    <div class="col-lg-4">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Tax
                        Amount({{fuelData.billingCurrency}})</label>
                      <input type="number" class="form-control" min='0' [attr.name]="'tax['+t+'].taxAmount'"
                        [ngModelOptions]="{standalone: true}" [(ngModel)]="tax.taxAmount" #taxAmount="ngModel">

                    </div>
                    <div class="col-lg-2  mar-top-37 px-0">
                      <button type="button" class="btn cus-btn-padd btn-success" *ngIf="t === (fuelData.taxes.length)-1"
                        (click)="addFuelTaxRow()"><i class="fas fa-plus"></i></button>
                      <button type="button" (click)="deleteTaxRow(t)" *ngIf="t != (fuelData.taxes.length)-1"
                        class="btn cus-btn-padd btn-danger"> <i class="fas fa-minus"></i></button>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-4">
                    </div>
                    <div class="col-lg-2 qtumbtn px-0">
                    </div>
                    <div class="col-lg-4">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Cost Per
                        {{fuelData.fuelUnit}}:<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <div class="row">
                        <div class="col-lg-6 text-right mt-1">
                          <input class="form-control" name="pricePerUnit" type="number"
                            [(ngModel)]="fuelData.pricePerUnit" #cost="ngModel" required>
                          <div *ngIf="cost.invalid && (cost.dirty || cost.touched)" class="text-danger">
                            <div *ngIf="cost.errors.required">
                              Cost must contain numbers.


                            </div>



                          </div>
                        </div>
                        <div class="col-lg-6">
                          <ng-select placeholder="Select Currency" name="fuelData.billingCurrency"
                            [(ngModel)]="fuelData.billingCurrency" (change)="changeCurrency($event)" #money="ngModel"
                            required>
                            <ng-option value="USD">USD</ng-option>
                            <ng-option value="CAD">CAD</ng-option>
                          </ng-select>
                          <div *ngIf="money.invalid && (money.dirty || money.touched)" class="text-danger">
                            <div *ngIf="money.errors.required">
                              Currency is required.


                            </div>



                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-4">
                    </div>
                    <div class="col-lg-2 qtumbtn px-0">
                    </div>
                    <div class="col-lg-4">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Amount Paid:<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <div class="row">
                        <div class="col-lg-6 text-right mt-1"> <input class="form-control" name="amountPaid"
                            type="number" [(ngModel)]="fuelData.amountPaid" #amountPaid="ngModel" required>
                          <div *ngIf="amountPaid.invalid && (amountPaid.dirty || amountPaid.touched)"
                            class="text-danger">
                            <div *ngIf="amountPaid.errors.required">
                              Amount must contain numbers.


                            </div>



                          </div>
                        </div>
                        <div class="col-lg-6">
                          <ng-select placeholder="Select Currency" name="fuelData.billingCurrency"
                            [(ngModel)]="fuelData.billingCurrency" (change)="changeCurrency($event)"
                            #moneytype="ngModel" required>
                            <ng-option value="USD">USD</ng-option>
                            <ng-option value="CAD">CAD</ng-option>
                          </ng-select>
                          <div *ngIf="moneytype.invalid && (moneytype.dirty || moneytype.touched)" class="text-danger">
                            <div *ngIf="moneytype.errors.required">
                              Currency is required.


                            </div>



                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row pt-3 mt-2">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right">Fuel Date<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <input class="form-control" placeholder="yyyy/mm/dd" name="fuelDate" [maxDate]="getcurrentDate"
                        [(ngModel)]="fuelData.fuelDate" (click)="d.toggle()" ngbDatepicker #d="ngbDatepicker"
                        #date="ngModel" required />
                      <div *ngIf="date.invalid && (date.dirty || date.touched)" class="text-danger">
                        <div *ngIf="date.errors.required">
                          Fuel date is required.

                        </div>



                      </div>
                    </div>
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right">Fuel Time&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <input type="time" class="form-control" name="fuelTime" [(ngModel)]="fuelData.fuelTime">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Fuel Type<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select placeholder="Select Fuel Type" name="fuelType" [(ngModel)]="fuelData.fuelType"
                        #fType="ngModel" required>
                        <ng-option *ngFor="let fuelType of fuelTypes" value="{{fuelType.fuelTypeID}}">
                          {{fuelType.fuelTypeName}}</ng-option>
                      </ng-select>
                      <div *ngIf="fType.invalid && (fType.dirty || fType.touched)" class="text-danger">
                        <div *ngIf="fType.errors.required">
                          Fuel type is required.

                        </div>



                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group row pb-4">
                <div class="col-lg-12">
                  <label
                    class="control-label font-weight-bold font-weight-bold text-lg-right text-dark text-4 pt-2">Payment
                    Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Paid By (Driver)<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select placeholder="Select Payer" name="paidBy" [(ngModel)]="fuelData.paidBy"
                        #paidBy="ngModel" required>
                        <ng-option *ngFor="let driver of drivers" value="{{driver.driverID}}">{{driver.firstName}}
                        </ng-option>
                      </ng-select>
                      <div *ngIf="paidBy.invalid && (paidBy.dirty || paidBy.touched)" class="text-danger">
                        <div *ngIf="paidBy.errors.required">
                          Driver is required.
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Payment Mode<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select placeholder="Select Payment Mode" name="paymentMode" [(ngModel)]="fuelData.paymentMode"
                        #payment="ngModel" required>
                        <ng-option value="Cash">Cash</ng-option>
                        <ng-option value="Check">Check</ng-option>
                        <ng-option value="Credit_Card">Credit Card</ng-option>
                        <ng-option value="EFT">EFT</ng-option>
                        <ng-option value="Fuel_Card">Fuel Card</ng-option>
                      </ng-select>
                      <div *ngIf="payment.invalid && (payment.dirty || payment.touched)" class="text-danger">
                        <div *ngIf="payment.errors.required">
                          Payment mode is required.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row" *ngIf="fuelData.paymentMode === 'Fuel_Card'">
                    <div class="col-lg-5 offset-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Fuel Card#<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <input type="text" class="form-control" placeholder="eg. 1245,1546" name="fuelCardNumber"
                        [(ngModel)]="fuelData.fuelCardNumber" #fuelCard="ngModel"
                        [required]="fuelData.paymentMode == 'Fuel_Card'" pattern="^[0-9]+$">
                      <div *ngIf="fuelCard.invalid && (fuelCard.dirty || fuelCard.touched)" class="text-danger">
                        <div *ngIf="fuelCard.errors.required">
                          Fuel card is required.
                        </div>
                        <div *ngIf="fuelCard.errors.pattern">
                          Fuel card must contain numbers.
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Reference&nbsp;<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span> <span
                          class="text-1 optional-label-color">(optional when Fuel Card is used)</span></label>
                      <input type="text" class="form-control" name="reference" [(ngModel)]="fuelData.reference"
                        placeholder="Eg. FP1234" #reference="ngModel" [required]="fuelData.paymentMode != 'Fuel_Card'"
                        pattern="^[a-zA-Z0-9]+$">
                      <div *ngIf="reference.invalid && (reference.dirty || reference.touched)" class="text-danger">
                        <div *ngIf="reference.errors.required">
                          Reference is required.
                        </div>
                        <div *ngIf="reference.errors.pattern">
                          Reference must contain alphanumeric characters.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-5">
                      <div class="checkbox-custom">
                        <input type="checkbox" name="reimburseToDriver" [(ngModel)]="fuelData.reimburseToDriver">
                        <label class="control-label font-weight-bold">Reimburse to Driver</label>
                      </div>
                    </div>
                    <div class="col-lg-5">
                      <div class="checkbox-custom">
                        <input type="checkbox" name="deductFromPay" [(ngModel)]="fuelData.deductFromPay">
                        <label class="control-label font-weight-bold">Deduct from Pay</label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group row pb-4">
                <div class="col-lg-12">
                  <label
                    class="control-label font-weight-bold font-weight-bold text-lg-right text-dark text-4 pt-2">Fuel
                    Stop Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Country<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select placeholder="Select Country" name="countryCode" [(ngModel)]="fuelData.countryCode"
                        #country="ngModel" required
                        (change)="onChangeHideErrors('fuelData.countryCode');getStates($event)">
                        <ng-option value="CA">Canada</ng-option>
                        <ng-option value="US">United States of America</ng-option>
                        <ng-option value="MX">Mexico</ng-option>
                      </ng-select>
                      <div *ngIf="country.invalid && (country.dirty || country.touched)" class="text-danger">
                        <div *ngIf="country.errors.required">
                          Country is required.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Province/State<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select placeholder="Select Province" name="stateCode" [(ngModel)]="fuelData.stateCode"
                        #province="ngModel" required
                        (change)="onChangeHideErrors('fuelData.stateCode');getCities($event,fuelData.countryCode)">
                        <!-- <ng-container *ngFor="let state of states | async">
                            <ng-option *ngIf="state.countryID == fuelData.countryID" value="{{state.stateID}}">
                              {{state.stateName}}</ng-option>
                          </ng-container> -->
                        <ng-option *ngFor="let state of states" value="{{state.stateCode}}">
                          {{state.stateName}}</ng-option>
                      </ng-select>
                      <div *ngIf="province.invalid && (province.dirty || province.touched)" class="text-danger">
                        <div *ngIf="province.errors.required">
                          Province/State is required.
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-2  mar-top-37 px-0">
                      <!-- <a href="javascript:;" data-toggle="modal" data-target="#addStateModal"
                          class="btn cus-btn-padd btn-success modal-with-form"><i class="fas fa-plus"></i></a> -->
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">City<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select placeholder="Select City" name="cityName" [(ngModel)]="fuelData.cityName"
                        #city="ngModel" required>
                        <!-- <ng-container *ngFor="let city of cities | async">
                            <ng-option *ngIf="city.stateID == fuelData.stateID" value="{{city.cityName}}">
                              {{city.cityName}}</ng-option>
                          </ng-container> -->
                        <ng-option *ngFor="let city of cities" value="{{city.cityName}}">
                          {{city.cityName}}</ng-option>
                      </ng-select>
                      <div *ngIf="city.invalid && (city.dirty || city.touched)" class="text-danger">
                        <div *ngIf="city.errors.required">
                          City is required.
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-2  mar-top-37 px-0">
                      <!-- <a href="javascript:;" data-toggle="modal" data-target="#addCityModal"
                          class="btn cus-btn-padd btn-success modal-with-form"><i class="fas fa-plus"></i></a> -->
                    </div>
                  </div>
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Vendor<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select placeholder="Select Vendor" name="vendorID" [(ngModel)]="fuelData.vendorID"
                        #vendor="ngModel" required>
                        <ng-option *ngFor="let vendor of vendors |async" value="{{vendor.contactID}}">
                          {{vendor.companyName}}</ng-option>
                      </ng-select>
                      <div *ngIf="vendor.invalid && (vendor.dirty || vendor.touched)" class="text-danger">
                        <div *ngIf="vendor.errors.required">
                          Vendor is required.
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-2  mar-top-37 px-0">
                      <a href="javascript:;" data-toggle="modal" data-target="#addVendorModal"
                        class="btn cus-btn-padd btn-success modal-with-form"><i class="fas fa-plus"></i></a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group row pb-4">
                <div class="col-lg-12">
                  <label class="control-label font-weight-bold font-weight-bold text-lg-right text-dark text-4 pt-2">Add
                    Trip ID</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Select Trip &nbsp;
                        <span class="text-1 optional-label-color">(optional)</span></label>
                      <ng-select placeholder="Select Trip" name="tripID" [(ngModel)]="fuelData.tripID">

                        <ng-option *ngFor="let trip of trips" value="{{trip.tripID}}">{{trip.tripNo}}</ng-option>

                      </ng-select>
                      <!-- <div *ngIf="tripId.invalid && (tripId.dirty || tripId.touched)" class="text-danger">
                          <div *ngIf="tripId.errors.required">
                            Select valid trip id from the list.
                          </div>
                                               </div> -->
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group row pb-4">
                <div class="col-lg-12">
                  <label
                    class="control-label font-weight-bold font-bold text-lg-right text-dark text-4  pt-2">Additional
                    Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row" id="attachPhotoLine">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Attach Photo &nbsp;
                        <span class="text-1 optional-label-color">(optional)</span></label>
                      <input (change)="selectDocuments($event, 'uploadedPhotos')" name="uploadedPhotos" type="file"
                        multiple class="form-control border-0 p-0">
                    </div>
                    <div class="col-lg-2  mar-top-37">
                    </div>

                  </div>
                  <div class="row" *ngIf="fuelEntryImages?.length">
                    <div class="col-lg-6" *ngFor="let photo of fuelEntryImages; let i=index">
                      <div class="vehicle-photo-box">
                        <img src="{{photo.path}}" width="100%" class="img-fluid"
                          style="height: 180px; object-fit: cover;">
                        <hr class="m-3">
                        <div class="row">
                          <div class="col-lg-8">Image {{i+1}}</div>
                          <div class="col-lg-4 text-right">
                            <i class="fas fa-times text-danger" (click)="delete(photo.name)"></i>
                            <!-- <i class="fas fa-times text-danger"  (click)=" deleteImage(i)"></i> -->
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Odometer Reading at
                        Time of Fuelling (miles)<span class="mandfield text-2 ml-1"><sup>*</sup></span> </label>
                      <input placeholder="eg. 10000,20000" class="form-control" type="text" min='0' name="odometer"
                        [(ngModel)]="fuelData.odometer" #odoRead="ngModel" required pattern="^[0-9]+$">
                      <div *ngIf="odoRead.invalid && (odoRead.dirty || odoRead.touched)" class="text-danger">
                        <div *ngIf="odoRead.errors.required">
                          Odometer is required.
                        </div>
                        <div *ngIf="odoRead.errors.pattern">
                          Odometer must contain numbers.
                        </div>
                      </div>
                      <span *ngIf="LastOdometerMiles"> Last Odometer Miles {{LastOdometerMiles}}</span>
                    </div>
                  </div>
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Description&nbsp;
                        <span class="text-1 optional-label-color">(optional)</span></label>
                      <textarea class="form-control h-auto" rows="3" name="description"
                        [(ngModel)]="fuelData.description" placeholder="Add description" #desName4="ngModel"
                        pattern="^[\s\S]{1,500}$"></textarea>
                      <div *ngIf="desName4.invalid && (desName4.dirty || desName4.touched)" class="text-danger">
                        <div *ngIf="desName4.errors.pattern">
                          Only 500 characters are allowed.
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group row">
                <div class="col-lg-12 text-right">
                  <div class="row">
                    <div class="col-5 offset-1">&nbsp;
                    </div>
                    <div class="col-5 offset-1">
                      <div class="row">
                        <div class="col-10">
                          <button type="button" class="btn cus-btn-padd btn-default mr-2"
                            (click)="cancel()">Cancel</button>
                          <!-- if there is some error in validation  -->
                          <button type="button" *ngIf="!fuelID && !fuelF.form.valid" (click)="addFuelEntry()"
                            class="btn btn-success cus-btn-padd" [disabled]="!fuelF.form.valid">Save</button>
                          <!-- if validations are ok and now the button will disable on submit click  -->
                          <button type="button" *ngIf="!fuelID && fuelF.form.valid" (click)="addFuelEntry()"
                            class="btn btn-success cus-btn-padd" [disabled]="submitDisabled">Save</button>
                          <!---- update case -->
                          <button type="button" *ngIf="fuelID && !fuelF.form.valid" (click)="updateFuelEntry()"
                            class="btn btn-success cus-btn-padd" [disabled]="!fuelF.form.valid">Update</button>
                          <button type="button" *ngIf="fuelID && fuelF.form.valid" (click)="updateFuelEntry()"
                            class="btn btn-success cus-btn-padd" [disabled]="submitDisabled">Update</button>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>
  </div>
</section>
