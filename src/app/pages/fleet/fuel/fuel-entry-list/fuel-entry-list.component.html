<section class="body">
  <div class="inner-wrapper">
    <section role="main" class="content-body pl-1 pr-0 pt-0">
      <header class="page-header pr19 pl11">
        <form class="form-horizontal" method="get" name="form" id="form_">
          <div class="row" style="padding-top:10px;">
            <div class="col-md-2 col-lg-2">
              <div class="input-group input-group-sm mb-3">
                <ng-select [(ngModel)]="unitID" name="unitID" style="width: 100%;" placeholder="Search by vehicle">
                  <ng-option *ngFor="let data of allVehicles" [value]="data.vehicleID">{{data.vehicleIdentification}}
                  </ng-option>
                </ng-select>
              </div>
            </div>
            <div class="col-md-2 col-lg-2 pr-0 pl-2">
              <div class="input-group input-group-sm mb-3">
                <ng-select [(ngModel)]="assetUnitID" name="assetUnitID" style="width: 100%;"
                  placeholder="Search by reefer">
                  <ng-option *ngFor="let data of allAssets" [value]="data.assetID">{{data.assetIdentification}}
                  </ng-option>
                </ng-select>
              </div>
            </div>
            <div class="col-lg-3 col-md-3">
              <div class="input-daterange input-group">
                <span class="input-group-prepend">
                  <span class="input-group-text">
                    <i class="fas fa-calendar-alt"></i>
                  </span>
                </span>
                <input [(ngModel)]="fromDate" name="fromDate" type="text" placeholder="yyyy/mm/dd"
                  (click)="from.toggle()" ngbDatepicker #from="ngbDatepicker" class="form-control" autocomplete="off"
                  [minDate]="dateMinLimit" [maxDate]="futureDatesLimit">
                <span class="input-group-text border-left-0 border-right-0 rounded-0">
                  to
                </span>
                <input [(ngModel)]="toDate" name="toDate" type="text" placeholder="yyyy/mm/dd" (click)="to.toggle()"
                  ngbDatepicker #to="ngbDatepicker" class="form-control" autocomplete="off" [minDate]="dateMinLimit"
                  [maxDate]="futureDatesLimit">
              </div>
            </div>
            <div class="col-md-2 col-lg- pl-2">
              <button type="submit" (click)="searchFilter()" class="btn btn-sm btn-success mr-3">Search</button>
              <button type="button" (click)="resetFilter()" class="btn btn-sm btn-success">Reset</button>
            </div>
            <div class="col-md-3 text-right pr-1 page-buttons">
              <div class="btn-group flex-wrap" *ngIf="!environment">

                <button type="button" class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown"
                  aria-expanded="false">Actions<span class="caret"></span></button>
                <div class="dropdown-menu" role="menu" x-placement="bottom-start"
                  style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 38px, 0px);">

                  <a class="dropdown-item text-1" href="">Import</a>
                  <a class="dropdown-item text-1" href="">Export</a>
                </div>
              </div>

              <a href="javascript:;" (click)="refreshData()" data-toggle="tooltip" title="Refresh data"
                class="btn btn-success btn-sm modal-with-form mr-2">
                <i class="fas fa-sync"></i>
              </a>

              <div ngbDropdown class="d-inline-block">
                <button class="btn btn-success" id="dropdownBasic1" ngbDropdownToggle>Import</button>
                <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                  <button ngbDropdownItem data-toggle="modal" data-target="#bvdModal">BVD Report</button>
                </div>
              </div>
              <a routerLink="/fleet/fuel/add" class="btn btn-success btn-sm ml-2" style="color:white;"><i
                  class="fas fa-plus"></i> Add Fuel Entry</a>
            </div>
          </div>
        </form>
      </header>


      <section class="m-2">
        <div class="row mb-3">
          <div class="col-lg-12">
            <div class="bg-white p-3 text-dark">
              <div class="form-group row pt-1">
                <div class="col-lg-12">
                  <div class="table-responsive">
                    <table class="table table-bordered table-striped">
                      <thead>
                        <tr>
                          <th style="">Date/Time</th>
                          <th>Fuel Card#</th>
                          <th>Unit Number</th>
                          <th>Use Type</th>
                          <th>Fuel Type</th>
                          <th>Fuel Amount</th>
                          <th>Fuel Units</th>
                          <th>Site</th>
                          <th>Province/State</th>
                          <!-- <th>Fuel Cost</th> -->
                          <th>Actions</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngIf="fuelList.length == 0" class="text-center">

                          <td colspan="13">{{ dataMessage }}</td>
                        </tr>

                        <ng-container *ngFor="let fuelEntry of fuelList">

                          <!----------------------Manual-------------------------------------------->

                          <tr style="cursor: pointer;">
                            <td routerLink="/fleet/fuel/detail/{{ fuelEntry.data.fuelID }}">
                              {{fuelEntry.dateTime}}</td>
                            <td routerLink="/fleet/fuel/detail/{{ fuelEntry.data.fuelID }}">
                              <span *ngIf="fuelEntry.data.cardNo">{{fuelEntry.data.cardNo}}</span>


                            </td>

                            <td routerLink="/fleet/fuel/detail/{{ fuelEntry.data.fuelID }}">
                              <span *ngIf="!fuelEntry.unitID">{{fuelEntry.data.unitNo}}</span>
                              <span *ngIf="fuelEntry.unitID">

                                <span *ngIf="fuelEntry.data.useType!='reefer'">{{vehicleList[fuelEntry.unitID]}}</span>
                                <span *ngIf="fuelEntry.data.useType=='reefer'">{{assetList[fuelEntry.unitID]}}</span>
                                {{fuelEntry.unitIdentification}}</span>
                            </td>
                            <td routerLink="/fleet/fuel/detail/{{ fuelEntry.data.fuelID }}">
                              {{fuelEntry.data.useType}}
                            </td>
                            <td routerLink="/fleet/fuel/detail/{{ fuelEntry.data.fuelID }}">
                              {{fuelEntry.data.type}}
                            </td>

                            <td routerLink="/fleet/fuel/detail/{{ fuelEntry.data.fuelID }}">
                              {{fuelEntry.data.amt}}&nbsp;{{fuelEntry.data.currency}}
                              <!-- <span *ngIf="fuelEntry.data.lineItems.length != 0"><span
                          *ngFor="let lItems of fuelEntry.data.lineItems">{{lItems.amount}}&nbsp;{{fuelEntry.data.billingCurrency}}<br></span></span>
                      <span *ngIf="fuelEntry.data.lineItems.length == 0"><span *ngIf="fuelEntry.data.fuelQtyAmt">Fuel -
                          {{fuelEntry.data.fuelQtyAmt}} {{fuelEntry.data.billingCurrency}}</span><br>
                        <span *ngIf="fuelEntry.data.DEFFuelQtyAmt">DEF - {{fuelEntry.data.DEFFuelQtyAmt}}
                          {{fuelEntry.data.billingCurrency}}</span></span> -->
                            </td>

                            <td routerLink="/fleet/fuel/detail/{{ fuelEntry.data.fuelID }}">
                              {{fuelEntry.data.qty}}&nbsp;{{fuelEntry.data.uom}}
                              <!-- <span *ngIf="fuelEntry.data.lineItems.length != 0"><span
                          *ngFor="let lItems of fuelEntry.data.lineItems">{{lItems.quantity}} &nbsp;litre<br></span></span>
                      <span *ngIf="fuelEntry.data.lineItems.length == 0"><span *ngIf="fuelEntry.data.fuelQtyAmt">Fuel -
                          {{fuelEntry.data.fuelQty}} {{fuelEntry.data.fuelUnit}}</span><br>
                        <span *ngIf="fuelEntry.data.DEFFuelQtyAmt">DEF - {{fuelEntry.data.DEFFuelQty}}
                          {{fuelEntry.data.fuelUnit}}</span></span>  -->
                            </td>
                            <td routerLink="/fleet/fuel/detail/{{ fuelEntry.data.fuelID }}">
                              {{fuelEntry.data.site}}
                              <!-- <span *ngIf="vendorList[fuelEntry.data.vendorID]"> {{vendorList[fuelEntry.data.vendorID]}}</span>
                           <span *ngIf="!vendorList[fuelEntry.data.vendorID]"> No Vendor found</span> -->

                            </td>
                            <td routerLink="/fleet/fuel/detail/{{ fuelEntry.data.fuelID }}">

                              {{fuelEntry.data.city}},{{fuelEntry.data.state}},{{fuelEntry.data.country}}

                            </td>
                            <!-- <td routerLink="/fleet/fuel/detail/{{ fuelEntry.data.fuelID }}">
                      <span
                        *ngIf="fuelEntry.data.lineItems.length == 0">{{fuelEntry.data.pricePerUnit}}{{fuelEntry.data.billingCurrency}}</span>
                      <span *ngIf="fuelEntry.data.lineItems.length != 0"><span
                          *ngFor="let lItems of fuelEntry.data.lineItems">{{lItems.pricePerUnit}}<br></span></span>
                    </td> -->
                            <!-- <td routerLink="/fleet/fuel/detail/{{ fuelEntry.data.fuelID }}">
                      {{fuelEntry.data.amountPaid}}{{fuelEntry.data.billingCurrency}}</td>-->
                            <td>
                              <div class="btn-group flex-wrap">
                                <button type="button" class="mb-1 mt-1 mr-1 btn"
                                  [disabled]="fuelEntry.fuelProvider=='WEX'|| fuelEntry.fuelProvider=='BVD'"
                                  data-toggle="dropdown"><i class="fas fa-ellipsis-v"></i></button>
                                <div class="dropdown-menu" role="menu">
                                  <a routerLink="/fleet/fuel/edit/{{fuelEntry.data.fuelID }}"
                                    class="dropdown-item text-1">Edit</a>
                                  <button type="button" class="dropdown-item text-1"
                                    (click)="deleteFuelEntry(fuelEntry.data)">Delete</button>
                                </div>
                              </div>
                            </td>
                          </tr>

                        </ng-container>
                      </tbody>
                    </table>
                  </div>

                  <div class="row mt-3 dtPaginate" *ngIf="fuelList.length > 0">
                    <div class="col-6">
                      Showing {{ fuelStartPoint }} to {{ fuelEndPoint }} of {{ totalRecords }} enteries
                    </div>
                    <div class="col-6 text-right">
                      <button type="button" class="btn btn-default mr-2" (click)="prevResults()"
                        [disabled]="fuelPrev">Prev</button>
                      <button type="button" class="btn btn-default" (click)="nextResults()"
                        [disabled]="fuelNext">Next</button>
                    </div>
                  </div>

                </div>

              </div>
            </div>
          </div>
        </div>



      </section>



    </section>
  </div>
</section>

<div class="modal fade" id="bvdModal" tabindex="-1" role="dialog" area-labelledby="bvdModal" aria-hidden="true"
  data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog modal-dialog-centered" role="document" style="width: 600px;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">BVD Report Upload</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <i class="far fa-window-close modal-dismiss" style="font-size:25px;"> </i>
        </button>
      </div>
      <div class="modal-body text-dark">
        <div class="row">
          <div class="col-log-10 text-center">
            Please upload the BVD report in CSV fromat.
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12">
            <div class="form-group col-lg-12 mb-3">
              <label class="control-label font-weight-bold labelmt text-3 text-dark">Choose File
                <span class="mandfield text-2 ml-1"><sup>*</sup></span>
              </label>
              <input (change)="selectDoc($event)" name="" id="uploadedDocs" type="file"
                class="form-control choosefileLH">
              <div>
                <label class="text-danger">Add Document</label>
              </div>
              <span>
                Only .csv format is accepted. The maximum
                file size can be 15MB.</span>
              <div *ngIf="newDoc" class="border my-2 p-2">
                <h4 class="mt-0">Uploaded Document</h4>
                <a href="{{newDoc}}" target="_blank">Document</a>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
