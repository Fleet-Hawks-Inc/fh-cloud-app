<section class="body">
  <!-- start: header -->
  <app-header></app-header>

  <!-- end: header -->

  <div class="inner-wrapper">
    <!-- start: sidebar -->
    <app-sidebar></app-sidebar>
    <!-- end: sidebar -->

    <section role="main" class="content-body pl-0">
      <header class="page-header pr-5">
         <div class="row pr-1 mr-1" style="padding-top:10px;">
            <div class="col-md-6 col-lg-6 font-weight-bold text-4 text-dark">
               <h4 class="text-4 font-weight-bold mt-0 mb-0 text-dark">{{title}}</h4>
            </div>
            <div class="col-md-6  col-lg-6 text-right pr-1">
               <a [routerLink]="['/fleet', 'expenses','fuel', 'list']"  class="btn btn-default btn-sm"><i class="fas fa-list"></i> Fuel Entry List</a>
            </div>
         </div>
      </header>
      <div class="row">
        <div class="col pr-0">
           <div class="card-body text-dark">
              <form class="form-horizontal form-bordered" method="get"  id="fuelForm" name="fuelForm">
                 <div class="form-group row">
                    <div class="col-lg-12">
                       <label class="control-label font-weight-bold font-bold text-lg-right text-dark text-4 font-weight-bold pt-2">Basic Details</label>
                    </div>
                    <div class="col-lg-5 offset-lg-1 col-md-5 offset-md-1">
                       <div class="row">
                          <div class="col-lg-12 col-md-12 pt-2">
                             <div class="row">
                                <div class="col-lg-3 col-md-3 col-sm-3">
                                   <label class="control-label font-weight-bold text-lg-right"
                                      >Unit Type:</label>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-9">
                                  <div class="btn-group-toggle" data-toggle="buttons">
                                    <label class="btn btn-outline btn-fleet mr-2 mb-2" [class.active]="fuelData.unitType === 'vehicle'" style="width:110px;" (click) = "onChangeUnitType('vehicle')">
                                      <input type="radio" name="unitType" [(ngModel)]="fuelData.unitType"
                                         id="fuel_unit_vehicle"  checked hidden value="vehicle" > Vehicle </label>
                                   
                                         <label class="btn btn-outline btn-fleet mb-2" style="width:110px;" [class.active]="fuelData.unitType === 'reefer'" (click) = "onChangeUnitType('reefer')">
                                      <input type="radio" name="unitType" [(ngModel)]="fuelData.unitType"
                                         id="fuel_unit_reefer"  hidden value="reefer" > Reefer </label>
                                  </div>
                                </div>                               
                             </div>
                          </div>
                       </div>
                       <div class="row pt-3" id="fuelVehicle" *ngIf="fuelData.unitType ==='vehicle'">
                          <div class="col-lg-10">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Vehicle</label>
                             <ng-select placeholder="Select Vehicle" name="unitID" [(ngModel)]="fuelData.unitID" >
                               
                                   <ng-option *ngFor="let vehicle of vehicles"  value="{{vehicle.vehicleID}}">{{vehicle.vehicleIdentification}}</ng-option>
                                   
                               
                             </ng-select>
                          </div>
                         
                       </div>
                       <div class="row pt-3" id="fuelReefer" *ngIf="fuelData.unitType ==='reefer'">
                          <div class="col-lg-10">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Reefer</label>
                             <ng-select name="unitID" [(ngModel)]="fuelData.unitID" placeholder="Select Reefer">
                                
                                 <ng-option *ngFor="let reefer of reeferArray" value="{{reefer.assetID}}">{{reefer.assetIdentification}}</ng-option>                               
                                
                             </ng-select>
                          </div>
                        
                       </div>
                       <!-- <div id="fuelVehicleQty"  *ngIf="unitType ==='vehicle'"> -->
                        <div id="fuelVehicleQty" >
                          <div class="row">
                             <div class="col-lg-4">
                                <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Fuel Quantity</label>
                                <input type="number" class="form-control" name="fuelQty" [(ngModel)]="fuelData.fuelQty" (change)="calculate()">
                             </div>
                             <div class="col-lg-2 qtumbtn px-0">
                                <ng-select data-plugin-selectTwo class="form-control populate" name="fuelQtyUnit" [(ngModel)]="fuelQtyUnit" (change)="changeFuelUnit()">
                               
                                      <ng-option value="gallon">gallon</ng-option>
                                      <ng-option value="litre">litre</ng-option>
                                  
                                </ng-select>
                             </div>
                             <div class="col-lg-4">
                                <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Amount</label>
                                <input type="number" class="form-control" name="fuelQtyAmt" [(ngModel)]="fuelData.fuelQtyAmt" (change)="calculate()">
                             </div>
                          </div>
                       </div>
                       <div class="row">
                          <div class="col-lg-4">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >DEF Fuel Quantity</label>
                             <input type="number" class="form-control" name="DEFFuelQty" [(ngModel)]="fuelData.DEFFuelQty" (change)="calculate()">
                          </div>
                          <div class="col-lg-2 qtumbtn px-0">
                          
                             <label class="control-label pl-2 text-lg-right" >{{DEFFuelQtyUnit}}</label>

                          </div>
                          <div class="col-lg-4">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Amount</label>
                             <input type="number" class="form-control"  name="DEFFuelQtyAmt" [(ngModel)]="fuelData.DEFFuelQtyAmt" (change)="calculate()">
                          </div>
                       </div>
                       <div class="row">
                          <div class="col-lg-4">
                          </div>
                          <div class="col-lg-2 qtumbtn px-0">
                          </div>
                          <div class="col-lg-4">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Total Amount</label>
                             <div class="row">
                                <div class="col-lg-4 text-right mt-1"> <label class="control-label font-weight-bold text-5"> {{fuelData.totalAmount}}</label></div>
                                <div class="col-lg-8">
                                 <ng-select placeholder="Select Currency" name="currency" [(ngModel)]="fuelData.currency" (change)="changeCurrency($event)">
                                   
                                       <ng-option value="USD">USD</ng-option>
                                       <ng-option value="CAD">CAD</ng-option>
                                 
                                 </ng-select>
                                </div>
                             </div>
                            
                          </div>
                       </div>
                       <div class="row">
                          <div class="col-lg-4">
                          </div>
                          <div class="col-lg-2 qtumbtn px-0">
                          </div>
                          <div class="col-lg-4">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Discount({{currency}})</label>
                             <input type="number" class="form-control" name="discount" [(ngModel)]="fuelData.discount" (change)="calculate()">
                          </div>
                       </div>
                       <div class="row">
                          <div class="col-lg-4">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Cost Per {{fuelQtyUnit}}:</label>
                             <label class="control-label font-weight-bold text-4"> <span *ngIf="fuelData.costPerGallon"></span>{{costPerUnit}} {{currency}}</label>
                          </div>
                          <div class="col-lg-2 qtumbtn px-0">
                          </div>
                          <div class="col-lg-4">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Amount Paid: </label>
                             <label class="control-label font-weight-bold text-4"> {{fuelData.amountPaid}} {{fuelData.currency}}</label>
                          </div>
                       </div>
                    </div>
                    <div class="col-lg-5 offset-lg-1">
                       <div class="row">
                          <div class="col-lg-5">
                             <label class="control-label font-weight-bold font-bold text-lg-right">Fuel Date</label> 
                              <input
                                class="form-control" placeholder="dd-mm-yyyy" name="fuelDate" [(ngModel)]="fuelData.fuelDate"  (click)="d.toggle()" ngbDatepicker #d="ngbDatepicker"/>
                           
                          </div>
                          <div class="col-lg-5">
                           <label class="control-label font-weight-bold font-bold text-lg-right">Fuel Time</label> 
                           <input type="time" class="form-control"  name="fuelTime" [(ngModel)]="fuelData.fuelTime">
                          </div>
                       </div>
                       <div class="row">
                          <div class="col-lg-10">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Fuel Type</label>
                             <ng-select placeholder="Select Fuel" name="fuelType" [(ngModel)]="fuelData.fuelType">
                               
                                   <ng-option value="Bio Diesel">Bio Diesel</ng-option>
                                   <ng-option value="Compressed Natural Gas">Compressed Natural Gas</ng-option>
                                   <ng-option value="Diesel">Diesel</ng-option>
                                   <ng-option value="Electricity">Electricity</ng-option>
                                   <ng-option value="Ethanol">Ethanol</ng-option>
                                   <ng-option value="Gasoline">Gasoline</ng-option>
                             
                             </ng-select>
                          </div>
                       </div>
                    </div>
                 </div>
                 <div class="form-group row pb-4">
                    <div class="col-lg-12">
                       <label class="control-label font-weight-bold font-weight-bold text-lg-right text-dark text-4 pt-2">Payment Details</label>
                    </div>
                    <div class="col-lg-5 offset-lg-1">
                       <div class="row">
                          <div class="col-lg-5">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Paid By</label>                            
                             <ng-select placeholder="Select Payer" name="paidBy" [(ngModel)]="fuelData.paidBy" >                               
                              <ng-option *ngFor="let driver of drivers"  value="{{driver.driverID}}">{{driver.firstName}} {{driver.lastName}}</ng-option>                            
                          
                        </ng-select>
                          </div>
                          <div class="col-lg-5">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Payment Mode</label>
                             <ng-select placeholder="Select Payment Mode" name="paymentMode" [(ngModel)]="fuelData.paymentMode">                           
                                   <ng-option value="Cash">Cash</ng-option>
                                   <ng-option value="Check">Check</ng-option>
                                   <ng-option value="Credit Card">Credit Card</ng-option>
                                   <ng-option value="EFT">EFT</ng-option>
                                   <ng-option value="FuelCard">Fuel Card</ng-option>
                             </ng-select>
                          </div>
                       </div>
                       <div class="row" *ngIf="fuelData.paymentMode === 'FuelCard'">
                        <div class="col-lg-5 offset-lg-5">
                           <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Fuel Card Number</label>
                           <input type="text" class="form-control" >
                        </div>
                     </div>
                    </div>
                    <div class="col-lg-5 offset-lg-1">
                       <div class="row">
                          <div class="col-lg-10">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Reference</label>
                             <input type="text" class="form-control" name="reference" [(ngModel)]="fuelData.reference" >
                          </div>
                       </div>
                       <div class="row mt-2">
                          <div class="col-lg-5">
                             <div class="checkbox-custom">
                                <input type="checkbox" name="reimburseToDriver" [(ngModel)]="fuelData.reimburseToDriver">
                                <label class="control-label font-weight-bold">Reimburse to Driver?</label>
                             </div>
                          </div>
                          <div class="col-lg-5">
                             <div class="checkbox-custom">
                                <input type="checkbox" name="deductFromPay" [(ngModel)]="fuelData.deductFromPay">
                                <label class="control-label font-weight-bold">Deduct from Pay?</label>
                             </div>
                          </div>
                       </div>
                    </div>
                 </div>
                 <div class="form-group row pb-4">
                    <div class="col-lg-12">
                       <label class="control-label font-weight-bold font-weight-bold text-lg-right text-dark text-4 pt-2">Fuel Stop Details</label>
                    </div>
                    <div class="col-lg-5 offset-lg-1">
                       <div class="row pt-2">
                          <div class="col-lg-10">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Country</label>
                             <ng-select placeholder="Select Country" name="countryID" [(ngModel)]="fuelData.countryID" (change)="getStates()">
                             
                                <ng-option *ngFor="let country of countries" value="{{country.countryID}}">{{country.countryName}}</ng-option>

                          
                             </ng-select>
                          </div>
                       </div>
                       <div class="row pt-2">
                          <div class="col-lg-10">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >State</label>
                             <ng-select placeholder="Select State" name="stateID"
                             [(ngModel)]="fuelData.stateID" (change)="getCities()">
                              
                                <ng-option *ngFor="let state of states" value="{{state.stateID}}">{{state.stateName}}</ng-option>
                              
                             </ng-select>
                          </div>
                       </div>
                    </div>
                    <div class="col-lg-5 offset-lg-1">
                       <div class="row pt-2">
                          <div class="col-lg-10">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >City</label>
                             <ng-select  placeholder="Select City" name="cityID"
                             [(ngModel)]="fuelData.cityID">
                                <ng-option *ngFor="let city of cities" value="{{city.cityID}}">{{city.cityName}}</ng-option>
                              
                             </ng-select>
                          </div>
                       </div>
                       <div class="row pt-2">
                          <div class="col-lg-10">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Vendor</label>
                             <ng-select  placeholder="Select Vendor" name="vendorID" [(ngModel)]="fuelData.vendorID">
                              
                                  <ng-option *ngFor = "let vendor of vendors" value="{{vendor.vendorID}}">{{vendor.vendorName}}</ng-option>
                              
                             </ng-select>
                          </div>
                       </div>
                    </div>
                 </div>
                 
                 <div class="form-group row pb-4">
                  <div class="col-lg-12">
                      <label class="control-label font-weight-bold font-weight-bold text-lg-right text-dark text-4 pt-2">Add Trip ID</label>
                   </div>
                    <div class="col-lg-5 offset-lg-1">
                      <div class="row pt-2">
                          <div class="col-lg-10">
                           <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Select Trip ID</label>
                           <ng-select  placeholder="Select Trip" name="tripID" [(ngModel)]="fuelData.tripID">
                              
                              <ng-option *ngFor = "let trip of trips" value="{{trip.tripID}}">{{trip.tripNo}}</ng-option>
                          
                         </ng-select>
                          </div>
                      </div>
                    </div>
                  
                </div>
                 <div class="form-group row pb-4">
                    <div class="col-lg-12">
                       <label class="control-label font-weight-bold font-bold text-lg-right text-dark text-4  pt-2">Additional Details</label>
                    </div>
                    <div class="col-lg-5 offset-lg-1">
                       <div class="row pt-2">
                          <div class="col-lg-10">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Average Gross Vehicle Weight</label>
                             <ng-select placeholder="Select Average Gross Vehicle Weight" name="avgGVW" [(ngModel)] ="fuelData.additionalDetails.avgGVW">
                               
                                   <ng-option value="10-15,000 lbs">10-15,000 lbs</ng-option>
                                   <ng-option value="15-20,000 lbs">15-20,000 lbs</ng-option>
                                   <ng-option value="20-25,000 lbs">20-25,000 lbs</ng-option>
                                   <ng-option value="25-30,000 lbs">25-30,000 lbs</ng-option>
                               
                             </ng-select>
                          </div>
                       </div>
                       <div class="form-group row" id="attachPhotoLine">
                          <div class="col-lg-10">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Attach Photo</label>
                             <input (change)="selectDocuments($event, 'uploadedPhotos')" name="additionalDetails.uploadedPhotos" type="file" multiple class="form-control border-0 p-0"> 
                           </div>
                          <div class="col-lg-2  mar-top-37">
                          </div>
                         
                       </div>
                       <div class="row" *ngIf = "fuelEntryImages?.length">
                        <div class="col-lg-6"  *ngFor="let photo of fuelEntryImages; let i=index">
                           <div class="vehicle-photo-box">
                              <img [src]="photo" width="100%" class="img-fluid" style="height: 180px; object-fit: cover;">
                              <hr class="m-3">
                              <div class="row">
                                 <div class="col-lg-8">Image {{i}}</div>
                                 <div class="col-lg-4 text-right">
                                    <i class="fas fa-times text-danger" (click)="deleteImage(i)"></i>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                    </div>
                    <div class="col-lg-5 offset-lg-1">
                       <div class="row pt-2">
                          <div class="col-lg-10">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Odometer Reading at Time of Fuelling(miles)</label>
                             <input class="form-control" type="text" name="odometer" [(ngModel)] ="fuelData.additionalDetails.odometer">
                             <span *ngIf="LastOdometerMiles"> Last Odometer Miles {{LastOdometerMiles}}</span>
                          </div>
                       </div>
                       <div class="row pt-2">
                          <div class="col-lg-10">
                             <label class="control-label font-weight-bold font-bold text-lg-right pt-2" >Description</label>
                             <textarea class="form-control" rows="3" name="description" [(ngModel)] ="fuelData.additionalDetails.description"></textarea>
                          </div>
                       </div>
                    </div>
                 </div>
                 <div class="form-group row">
                    <div class="col-lg-11 text-right">
                     <button type="button" class="btn btn-default mr-2"  (click)="cancel()" >Cancel</button> 
                     <button type="button" *ngIf="!entryID" (click)="addFuelEntry()" class="btn btn-success">Save</button> 
                     <button type="button" *ngIf="entryID" (click)="updateFuelEntry()" class="btn btn-success">Update</button>
                    </div>
                 </div>
              </form>
           </div>
        </div>
     </div>
    </section>
  </div>
</section>
