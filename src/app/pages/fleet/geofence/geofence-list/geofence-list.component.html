
<section class="body">

  <div class="inner-wrapper">
    
    <section role="main" class="content-body pt-0" style="padding-left: 15px;">
      <header class="page-header pr-5">
        <form>
         <div class="row pr-1 mr-1" style="padding-top:10px;">
              <div class="col-md-2 col-lg-2">
               <div class="input-group input-group-md mb-3">
                  <input type="text" autocomplete="off" placeholder="Search Geofence" name="geofenceName" [(ngModel)]="geofenceName" class="form-control" (input)="getSuggestions($event.target.value)">
                </div>
                <div *ngIf="suggestedGeofences?.length > 0" class="result-suggestions">
                  <ul>
                     <li *ngFor="let suggestedGeofence of suggestedGeofences" style="cursor: pointer;" (click)="setGeofence(suggestedGeofence.geofenceID, suggestedGeofence.geofenceName)"
                     >{{ suggestedGeofence.geofenceName }}</li>
                  </ul>
               </div>
               
              </div>
              <div class="col-md-2 col-lg-2">
                 <ng-select
                    [(ngModel)]="type" 
                    name="type"
                    placeholder="Select Type"
                    class="form-control populate">
                    <ng-option *ngFor="let item of geofenceTypes;" 
                        value="{{item.typeID}}"
                     > {{item.geofenceType}}
                     </ng-option>
                 </ng-select>
              </div>
              
              <div class="col-md-1 col-lg-1">
                 <button type="submit" (click)="fetchGeofences()" class="btn btn-sm btn-success">Search</button>
              </div>
              <div class="col-md-7 col-lg-7 text-right pr-1">
                 <div class="btn-group flex-wrap mr-2">
                    <button type="button" class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Actions<span class="caret"></span></button>
                    <div class="dropdown-menu" role="menu" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 38px, 0px);">
                       <!-- <a (click)="editGeofence()" class="dropdown-item text-1" href="javascript:;">Edit</a>
                       <a (click)="deleteGeofence()" class=" dropdown-item text-1" href="javascript:;">Delete</a> -->
                       <a class="dropdown-item text-1" href="javascript:;">Import</a>
                       <a class="dropdown-item text-1" href="javascript:;">Export</a>
                    </div>
                 </div>
                 <a routerLink="/fleet/geofence/add" class="btn btn-success btn-sm" style="color:white;"><i class="fas fa-plus"></i> Add Geo-Fence</a>
              </div>
           </div>
        </form>
     </header>

     
      <div class="row mt-3">
        <div class="col">
           <section class="card">
              <div class="card-body pl-0 pt-0 text-dark">
                 <div class="row">
                  <div class="col-lg-12">
                     <table class="hoshvalue table text-4 font-weight-bold">
                        <thead>
                           <tr>
                              <td style="width: 20%;" class="border-0 text-left">Geo-Fence Name</td>
                              <td style="width: 20%;" class="border-0">Location</td>
                              <td style="width: 20%;" class="border-0">Type</td>
                              <td style="width: 30%;" class="border-0">Description</td>
                              <td style="width: 10%;" class="border-0 text-right">Actions</td>
                           </tr>
                        </thead>
                     </table>
                  </div>
              </div>
              

                <div *ngFor="let geofence of geofences;let i = index" class="">
                  <table class="table m-0 text-left" style="cursor: pointer;">
                     <tbody>
                        <tr class="border_bottom">
                           <td style="width: 20%;" class="border-0 text-left" (click)="toggleAccordian(i, geofence.geofence.cords)">{{geofence.geofenceName}}</td>
                           <td style="width: 20%;" class="border-0" (click)="toggleAccordian(i, geofence.geofence.cords)">{{geofence.location}}</td>
                           <td style="width: 20%;" class="border-0" (click)="toggleAccordian(i, geofence.geofence.cords)">{{geofencesTypes[geofence.geofenceType]}}</td>
                           <td style="width: 30%;" class="border-0" (click)="toggleAccordian(i, geofence.geofence.cords)">{{geofence.description}}</td>
                           <td style="width: 10%;" class="border-0 text-right">
                              <div class="dropdown dropright">
                                 <button class="bg-transparent border-0" style="position: absolute;z-index: 9999;right: 5px;" type="button" id="dropdownMenuButton-{{i}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fas fa-ellipsis-v"></i>
                                 </button>
                                 <div class="dropdown-menu" attr.aria-labelledby="dropdownMenuButton-{{i}}">
                                    <a class="dropdown-item" routerLink="/fleet/geofence/edit/{{geofence.geofenceID}}">Edit</a>
                                    <a href="javascript:;" class="dropdown-item" (click)="deactivateAsset(geofence.isDeleted, geofence.geofenceID)">Delete</a>
                                 </div>
                               </div>
                           </td>
                        </tr>
                     </tbody>
                  </table>
                  <div *ngIf="visibleIndex === i" class="subheader">
                     <div id="map" style="height: 400px;"></div>
                  
                  </div>
               </div>
               <div *ngIf="!geofences?.length > 0" class="alert alert-info mt-3">
                     No Data Found
               </div>
            </div>

           </section>
        </div>
     </div>
      
    </section>
  </div>



</section>




