<!-- <ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "default" color = "#fff" type = "ball-clip-rotate"><p style="color: white" > Loading... </p></ngx-spinner> -->
<style>
   .extra {
      display: none;
   }
</style>
<section class="body">

  <div class="inner-wrapper">

    <section role="main" class="content-body pl-1 pt-0 pr-0">
      <header class="page-header pr19 pl11">
         <form class="form-horizontal" method="get">
            <div class="row" style="padding-top:10px;">
               <div class="col-md-2 col-lg-2">
                  <div class="input-group input-group-md mb-3">
                     <input type="text" autocomplete="off" placeholder="Search Asset" name="assetIdentification" [(ngModel)]="assetIdentification" class="form-control" (input)="getSuggestions($event.target.value)">
                   </div>

                  <div *ngIf="suggestedAssets?.length > 0" class="result-suggestions">
                     <ul>
                        <li *ngFor="let suggestedAsset of suggestedAssets" style="cursor: pointer;" (click)="setAsset(suggestedAsset.assetID, suggestedAsset.assetIdentification)"
                        > {{ suggestedAsset.assetIdentification }}</li>
                     </ul>
                  </div>
               </div>
               <div class="col-md-2 col-lg-2 pl-0 pr-0">
                  <ng-select class="form-control custom" name="assetType" [(ngModel)]="assetType" placeholder="Select Type">
                    <ng-option value="container">Container</ng-option>
                    <ng-option value="double_drop">Double Drop</ng-option>
                    <ng-option value="dump_trailer">Dump Trailer</ng-option>
                    <ng-option value="flat_bed">Flat bed</ng-option>
                    <ng-option value="lowboy">Lowboy</ng-option>
                    <ng-option value="stepDeck">StepDeck</ng-option>
                    <ng-option value="removable_gooseneck">Removable Gooseneck</ng-option>
                    <ng-option value="dry_van">Dry Van</ng-option>
                    <ng-option value="reefer">Reefer</ng-option>
                    <ng-option value="power_only">Power Only</ng-option>
                    <ng-option value="conestoga_trailer">Conestoga Trailer</ng-option>
                    <ng-option value="side_kit_trailer">Side Kit Trailer</ng-option>
                    <ng-option value="specialized_trailer">Specialized Trailer</ng-option>
                    <ng-option value="enclosed_trailer">Enclosed Trailer</ng-option>
                    <ng-option value="scrap_trailer">Scrap Trailer</ng-option>
                    <ng-option value="semi_trailer">Semi Trailer</ng-option>
                    <ng-option value="chassis">Chassis</ng-option>
                    <ng-option value="tank_trailer">Tank Trailer</ng-option>
                  </ng-select>
               </div>
               <div class="col-md-2 col-lg-2">
                  <button type="submit" (click)="searchFilter()" class="btn btn-sm btn-success mr-2">Search</button>
                  <button type="button" (click)="resetFilter()" class="btn btn-sm btn-success">Reset</button>
               </div>
               <div class="col-md-6 col-lg-6 text-right page-buttons pr-1">
                  <div class="btn-group flex-wrap" style="min-width:190px;">
                     <button type="button" class="mr-2 driverbtn btn btn-default btn-md dropdown-toggle toggleright" data-toggle="dropdown">Column Visibility <span class="caret"></span></button>
                     <div class="dropdown-menu dutystatwd" role="menu">
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" disabled [(ngModel)]="hideShow.vin"
                           name="vin" (change)="hideShowColumn()"> VIN </label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" disabled [(ngModel)]="hideShow.assetName"
                           name="assetName" (change)="hideShowColumn()"> Asset Name/Number </label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" disabled [(ngModel)]="hideShow.type"
                           name="type" (change)="hideShowColumn()"> Asset Type </label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" disabled [(ngModel)]="hideShow.plateNo"
                           name="plateNo" (change)="hideShowColumn()"> Licence Plate Number </label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" disabled [(ngModel)]="hideShow.lastLocation"
                           name="lastLocation" (change)="hideShowColumn()"> Last Location </label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" [(ngModel)]="hideShow.year"
                           name="year" (change)="hideShowColumn()"> Year </label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" disabled [(ngModel)]="hideShow.make"
                           name="make" (change)="hideShowColumn()"> Make </label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" [(ngModel)]="hideShow.model"
                           name="model" (change)="hideShowColumn()"> Model </label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" [(ngModel)]="hideShow.ownership"
                           name="ownership" (change)="hideShowColumn()"> Ownership </label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" disabled [(ngModel)]="hideShow.currentStatus"
                           name="currentStatus" (change)="hideShowColumn()"> Status </label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" [(ngModel)]="hideShow.group"
                              name="group" (change)="hideShowColumn()"> Group </label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" [(ngModel)]="hideShow.aceID"
                              name="aceID" (change)="hideShowColumn()"> ACE ID </label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" [(ngModel)]="hideShow.aciID"
                              name="aciID" (change)="hideShowColumn()"> ACI ID</label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" [(ngModel)]="hideShow.gvwr"
                              name="gvwr" (change)="hideShowColumn()"> GVWR </label>
                        </a>
                        <a class="dropdown-item text-1" href="javascript:;">
                           <label><input type="checkbox" [(ngModel)]="hideShow.gawr"
                              name="gawr" (change)="hideShowColumn()"> GAWR </label>
                        </a>
                     </div>
                  </div>
                  <button type="button" *ngIf="!environment" (click)="mapShow()" id="map_view_btn" class="btn btn-sm btn-default mr-2">Map View</button>
                  <button type="button" *ngIf="!environment" (click)="listView = true;mapView = false;" id="list_view_btn" class="btn btn-sm btn-success mr-2">List View</button>
                  <div class="btn-group flex-wrap mr-2" *ngIf="!environment">
                     <button type="button" disabled class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Actions<span class="caret"></span></button>
                     <div class="dropdown-menu" role="menu" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 38px, 0px);">
                        <a class="dropdown-item text-1" href="javascript:;">Import</a>
                        <a class="dropdown-item text-1" href="javascript:;">Export</a>
                     </div>
                  </div>
                  <a routerLink="/fleet/assets/add" class="btn btn-success btn-sm ml-2" style="color:white;"><i class="fas fa-plus"></i> Add Asset</a>
               </div>
            </div>
         </form>
      </header>
      <!-- MAP VIEW OF ASSETS -->
      <div class="mapclass vehiclemain" id="map_view" *ngIf="mapView">
         <div id="map" class="" style="height: calc(100vh - 110px);"></div>
         <div class="vehicleRmini" *ngIf="visible" id="arrowRvehicle">
            <a href="javascript:;" (click)="valuechange()"><i class="fas fa-arrow-right"></i></a>
         </div>
         <div class="vehicleLmini" *ngIf="!visible" id="arrowLvehicle">
            <a href="javascript:;" (click)="valuechange()"><i class="fas fa-arrow-left"></i></a>
         </div>
         <div class="vehicleminilist" *ngIf="visible" style="overflow-y: scroll; overflow-x: hidden; height: 100%;" id="vehicleMiniList">
            <div class="vehicleDetailMap">
               <a href="javascript:;">
                  <p class="mb-1 text-4 font-weight-semibold text-dark"> Asset Tracker</p>
                  <span class="driverstatus"><i class="fas fa-map-marker-alt"></i> Kingston, Toronto, ON K7L 5K4</span>
               </a>
            </div>
            <div class="vehicleDetailMap">
               <a href="javascript:;">
                  <p class="mb-1 text-4 font-weight-semibold text-dark"> Asset Gateway</p>
                  <span class="driverstatus"><i class="fas fa-map-marker-alt"></i> Crescent Road Vancouver, BC V6T 1Z2</span>
               </a>
            </div>
            <div class="vehicleDetailMap">
               <a href="javascript:;">
                  <p class="mb-1 text-4 font-weight-semibold text-dark">Asset Tracker</p>
                  <span class="driverstatus"><i class="fas fa-map-marker-alt"></i> Crt Brampton ON L6Z 3G4</span>
               </a>
            </div>
            <div class="vehicleDetailMap">
               <a href="javascript:;">
                  <p class="mb-1 text-4 font-weight-semibold text-dark">Asset Name 1</p>
                  <span class="driverstatus"><i class="fas fa-map-marker-alt"></i> McCallum Ave Regina SK S4S 0S4</span>
               </a>
            </div>
            <div class="vehicleDetailMap">
               <a href="javascript:;">
                  <p class="mb-1 text-4 font-weight-semibold text-dark">Asset Name 2</p>
                  <span class="driverstatus"><i class="fas fa-map-marker-alt"></i> Bourkevale Dr Winnipeg MB R3J 1P3</span>
               </a>
            </div>
            <div class="vehicleDetailMap">
               <a href="javascript:;">
                  <p class="mb-1 text-4 font-weight-semibold text-dark">Asset Name 3</p>
                  <span class="driverstatus"><i class="fas fa-map-marker-alt"></i> McCallum Ave Regina SK S4S 0S4</span>
               </a>
            </div>
            <div class="vehicleDetailMap">
               <a href="javascript:;">
                  <p class="mb-1 text-4 font-weight-semibold text-dark">Asset Name 4</p>
                  <span class="driverstatus"><i class="fas fa-map-marker-alt"></i> 2542 Cleary Crt Mississauga ON L5K 1Y3</span>
               </a>
            </div>
            <div class="vehicleDetailMap">
               <a href="javascript:;">
                  <p class="mb-1 text-4 font-weight-semibold text-dark">Asset Name 5</p>
                  <span class="driverstatus"><i class="fas fa-map-marker-alt"></i> Kingston, Toronto, ON K7L 5K4</span>
               </a>
            </div>
            <div class="vehicleDetailMap">
               <a href="javascript:;">
                  <p class="mb-1 text-4 font-weight-semibold text-dark">Asset Name 6</p>
                  <span class="driverstatus"><i class="fas fa-map-marker-alt"></i> Crescent Road Vancouver, BC V6T 1Z2</span>
               </a>
            </div>
            <div class="vehicleDetailMap">
               <a href="javascript:;">
                  <p class="mb-1 text-4 font-weight-semibold text-dark">Asset Name 7</p>
                  <span class="driverstatus"><i class="fas fa-map-marker-alt"></i> Crt Brampton ON L6Z 3G4</span>
               </a>
            </div>
            <div class="vehicleDetailMap">
               <a href="javascript:;">
                  <p class="mb-1 text-4 font-weight-semibold text-dark">Asset Name 8</p>
                  <span class="driverstatus"><i class="fas fa-map-marker-alt"></i> McCallum Ave Regina SK S4S 0S4</span>
               </a>
            </div>
            <div class="vehicleDetailMap">
               <a href="javascript:;">
                  <p class="mb-1 text-4 font-weight-semibold text-dark">Asset Name 9</p>
                  <span class="driverstatus"><i class="fas fa-map-marker-alt"></i> Bourkevale Dr Winnipeg MB R3J 1P3</span>
               </a>
            </div>
            <div class="vehicleDetailMap">
               <a href="javascript:;">
                  <p class="mb-1 text-4 font-weight-semibold text-dark">Asset Name 10</p>
                  <span class="driverstatus"><i class="fas fa-map-marker-alt"></i> 122 St Surrey BC V3V 4L4</span>
               </a>
            </div>
         </div>
      </div>

      <section class="m-2">
         <div class="row mb-3">
            <div class="col-lg-12">
               <div class="bg-white p-3 text-dark">
                  <div class="form-group row pt-3">
                     <div class="col-lg-12">
                        <!-- LIST VIEW OF ASSETS  -->
                        <div class="table-responsive">
                           <table class="row-border hover table table-bordered table-striped mb-0">
                              <thead>
                                 <tr>
                                    <th class="col0 minWidth200">VIN</th>
                                    <th class="col1 minWidth200">Asset Name/Number</th>
                                    <th class="col2 minWidth200">Asset Type</th>
                                    <th class="col6 minWidth200">Make</th>
                                    <th class="col4 minWidth200">Last Location</th>
                                    <th class="col3 minWidth200"> Licence Plate Number</th>
                                    <th class="col5 extra">Year</th>
            
                                    <th class="col7 extra">Model</th>
                                    <th class="col8 extra">Ownership</th>
                                    <th class="col10 extra">Group</th>
                                    <th class="col11 extra">ACE ID</th>
                                    <th class="col12 extra">ACI ID</th>
                                    <th class="col13 extra">GVWR</th>
                                    <th class="col14 extra">GAWR</th>
                                    <th class="col9 minWidth120">Status</th>
                                    <th class="minWidth50">Actions</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr *ngIf="allData.length == 0" class="text-center">
                                    <td colspan="15">{{ dataMessage }}</td>
                                </tr>
                                 <tr class="cursorpoint" *ngFor="let item of allData;let i = index">
                                    <td *ngIf="hideShow.vin" routerLink="/fleet/assets/detail/{{item.assetID}}">{{item.VIN}}</td>
                                    <td *ngIf="hideShow.assetName" routerLink="/fleet/assets/detail/{{item.assetID}}">{{item.assetIdentification}}</td>
                                    <td *ngIf="hideShow.type">{{item.assetType | titlecase}}</td>
                                    <td *ngIf="hideShow.make" >{{item.assetDetails.manufacturer ? manufacturersObjects[item.assetDetails.manufacturer] : '-'}}</td>
                                    <td *ngIf="hideShow.lastLocation" >Live Location</td>
                                    <td *ngIf="hideShow.plateNo">{{item.assetDetails.licencePlateNumber}}</td>
                                    <td *ngIf="hideShow.year" >{{item.assetDetails.year}}</td>
            
                                    <td *ngIf="hideShow.model" >{{item.assetDetails.model ? modelsObjects[item.assetDetails.model] : '-'}}</td>
                                    <td *ngIf="hideShow.ownership" >{{item.assetDetails.ownerShip ? item.assetDetails.ownerShip : '-'}}</td>
                                    <!-- extra columns -->
                                    <td *ngIf="hideShow.group" >{{item.groupID ? groupsList[item.groupID] : '-'}}</td>
                                    <td *ngIf="hideShow.aceID" >{{item.crossBorderDetails.ACE_ID ? item.crossBorderDetails.ACE_ID : '-'}}</td>
                                    <td *ngIf="hideShow.aciID" >{{item.crossBorderDetails.ACI_ID ? item.crossBorderDetails.ACI_ID : '-'}}</td>
                                    <td *ngIf="hideShow.gvwr" >{{item.assetDetails.GVWR ? item.assetDetails.GVWR : '-'}} {{item.assetDetails.GVWR_Unit}}</td>
                                    <td *ngIf="hideShow.gawr" >{{item.assetDetails.GAWR ? item.assetDetails.GAWR : '-'}} {{item.assetDetails.GAWR_Unit}}</td>
                                    <td *ngIf="hideShow.currentStatus"><span class="badge badge-dark p-1 text-uppercase">{{item.currentStatus}}</span></td>
                                    <td>
                                       <div class="dropdown dropright">
                                          <button class="bg-transparent border-0" type="button" id="dropdownMenuButton-{{i}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                             <i class="fas fa-ellipsis-v"></i>
                                          </button>
                                          <div class="dropdown-menu" attr.aria-labelledby="dropdownMenuButton-{{i}}">
                                             <a class="dropdown-item" routerLink="/fleet/assets/edit/{{item.assetID}}">Edit</a>
                                             <a class="dropdown-item" href="javascript:;" (click)="deleteAsset(item)">Delete</a>
                                          </div>
                                       </div>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
            
                        </div>
                        <div class="row mt-3 dtPaginate align-items-center" *ngIf="allData.length > 0">
                           <div class="col-6">
                               Showing {{ assetStartPoint }} to {{ assetEndPoint }} of {{ totalRecords }} enteries
                           </div>
                           <div class="col-6 text-right">
                               <button type="button" class="btn btn-default mr-2" (click)="prevResults()" [disabled]="assetPrev">Prev</button>
                               <button type="button" class="btn btn-default" (click)="nextResults()" [disabled]="assetNext">Next</button>
                           </div>
                       </div>
                     </div>
                     
                  </div>
                 
              
               </div>
            </div>
         </div>
      </section>

      
      
   </section>
</div>
</section>


<div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
   <div class="modal-dialog modal-sm" role="document">
     <div class="modal-content">
       <div class="modal-header">
         <h5 class="modal-title" id="confirmModalLabel">Are you sure you want to delete this asset?</h5>
         <button type="button" class="close" data-dismiss="modal" aria-label="Close">
           <span aria-hidden="true">&times;</span>
         </button>
       </div>
       <div class="modal-footer">
         <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
         <button type="button" class="btn btn-primary">Yes</button>
       </div>
     </div>
   </div>
 </div>
