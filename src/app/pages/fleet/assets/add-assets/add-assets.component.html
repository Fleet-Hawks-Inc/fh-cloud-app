<!----- <ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "default" color = "#fff" type = "ball-clip-rotate"><p style="color: white" > Loading... </p></ngx-spinner> ----->
<section class="body">


  <div class="inner-wrapper">
    <section role="main" class="content-body pl-0 pr-0 pt-0">
      <header class="page-header">
        <div class="row" style="padding-top:10px;">
          <div class="col-md-4 col-lg-4">
            <h4 class="text-4 font-weight-bold mt-0 mb-0 text-dark">{{pageTitle}}</h4>
          </div>
          <div class="col-md-8 col-lg-8 text-right"> <a routerLink="/fleet/assets/list"
              class="btn btn-default btn-sm"><i class="fas fa-list"></i> Assets List</a> </div>
        </div>
      </header>
      <div class="row">
        <div class="col pr-0">
          <div class="card-body text-dark">
            <form class="form-horizontal form-bordered" method="get" name="form" id="form_" >
              <div class=" row">
                <div class="col-lg-12">
                  <label
                    class="control-label font-weight-bold font-bold text-lg-right text-dark text-4 font-weight-bold pt-2">Basic
                    Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Asset
                        Name<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <input type="text" [(ngModel)]="assetsData.assetIdentification" name="assetIdentification " maxlength="20" minlength="2"
                        class="form-control" placeholder="eg. XYZ,123 etc." #aName="ngModel" required pattern="^[a-zA-Z0-9\s]+$">
                        <div *ngIf="aName.invalid && (aName.dirty || aName.touched)" class="text-danger">
                          <div *ngIf="aName.errors.required">
                            Asset name is required.
                          </div>
                          <div *ngIf="aName.errors.pattern">
                            Asset name contains no special character.
                          </div>
                        </div>
                    </div>

                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold pt-2 font-weight-bold text-lg-right">Group&nbsp;
                        <span class="text-1 optional-label-color">(optional)</span></label>


                      <ng-select class="form-control populate" [(ngModel)]="assetsData.groupID"
                        placeholder="Select group for asset" name="groupID" #groupSlt="ngModel" required>

                        <ng-option *ngFor="let group of groups" value="{{group.groupID}}">
                          {{group.groupName}}</ng-option>

                      </ng-select>
                      <div *ngIf="groupSlt.invalid && (groupSlt.dirty || groupSlt.touched)" class="text-danger">
                        <div *ngIf="groupSlt.errors.required">
                          Select Group.
                        </div>
                     </div>
                    </div>
                    <div class="col-lg-1 mar-top-37 pl-0">
                      <a data-toggle="modal" data-target="#addGroupModal" href="javascript:;"
                        class="modal-with-form btn cus-btn-padd btn-success"><i class="fas fa-plus"></i></a>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">VIN<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span> <i class="fas fa-exclamation-circle" data-toggle="tooltip"
                          data-placement="top" title="Vehicle Identification Number."></i></label>
                      <input type="text" [(ngModel)]="assetsData.VIN" name="VIN"
                        placeholder="17-18 digits Alphanumeric , eg. 78678678678678689" class="form-control" maxlength="18" #vName="ngModel" required pattern="^[0-9\-]{17,18}$">
                        <div *ngIf="vName.invalid && (vName.dirty || vName.touched)" class="text-danger">
                          <div>
                            <div *ngIf="vName.errors.required">
                              VIN is required.
                            </div>
                            <div *ngIf="vName.errors.pattern">
                               VIN contains 17-18 alphanumeric number only eg.78678678678678689
                            </div>
                          </div>
                        </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-10">

                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Start Date<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <input type="text" (click)="d12.toggle()" ngbDatepicker #d12="ngbDatepicker"
                        [(ngModel)]="assetsData.startDate" name="startDate" placeholder="yyyy/mm/dd"
                        class="form-control" #dSlt="ngModel" required>
                        <div *ngIf="dSlt.invalid && (dSlt.dirty || dSlt.touched)" class="text-danger">
                          <div>
                            <div *ngIf="dSlt.errors.required">
                            Start date is required and must follow yyyy/mm/dd format.
                            </div>
                          </div>

                        </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class=" row pt-3">
                <div class="col-lg-12">
                  <label
                    class="control-label font-weight-bold font-bold text-lg-right text-dark text-4 font-weight-bold pt-2">Asset
                    Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Asset
                        Type<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <!-- <ng-select [(ngModel)]="assetsData.assetDetails.assetType" name="assetDetails.assetType"
                        class="form-control populate" id="assetType" placeholder="Select asset type" #aSlt="ngModel" required>
                        <ng-option *ngFor="let type of allAssetTypes;" value="{{type.assetTypeID}}">
                          {{type.assetTypeName}}</ng-option>
                      </ng-select> -->
                      <ng-select [(ngModel)]="assetsData.assetDetails.assetType" name="assetDetails.assetType"
                      class="form-control populate" placeholder="Select year" #aSlt="ngModel" required >
                      <ng-option value="Container">Container</ng-option>
                      <ng-option value="Double Drop">Double Drop</ng-option>
                      <ng-option value="Dump Trailer">Dump Trailer</ng-option>
                      <ng-option value="Flat bed">Flat bed</ng-option>
                      <ng-option value="Lowboy">Lowboy</ng-option>
                      <ng-option value="StepDeck">StepDeck</ng-option>
                      <ng-option value="Removable Gooseneck">Removable Gooseneck</ng-option>
                      <ng-option value="Dry Van">Dry Van</ng-option>
                      <ng-option value="Reefer">Reefer</ng-option>
                      <ng-option value="Power Only">Power Only</ng-option>
                      <ng-option value="Conestoga Trailer">Conestoga Trailer</ng-option>
                      <ng-option value="Side Kit Trailer">Side Kit Trailer</ng-option>
                      <ng-option value="Specialized Trailer">Specialized Trailer</ng-option>
                      <ng-option value="Enclosed Trailer">Enclosed Trailer</ng-option>
                      <ng-option value="Scrap Trailer">Scrap Trailer</ng-option>
                      <ng-option value="Semi Trailer">Semi Trailer</ng-option>
                      <ng-option value="Chassis">Chassis</ng-option>
                      <ng-option value="Tank Trailer">Tank Trailer</ng-option>
                    </ng-select>
                      <!-- <div class="text-danger" [class.d-none]="aSlt.valid || aSlt.untouched">select asset type</div> -->
                      <div *ngIf="aSlt.invalid && (aSlt.dirty || aSlt.touched)" class="text-danger">
                        <div>
                          <div *ngIf="aSlt.errors.required">
                           Select Asset type is required.
                          </div>
                        </div>

                      </div>
                    </div>

                  </div>
                  <!-- <div class="row" id="reeferIftaDiv" *ngIf="assetsData.assetDetails.assetType == 'Reefer'">
                    <div class="col-lg-10 mt-2">
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" value="">
                          Is compliant for IFTA Reporting?
                        </label>
                      </div>
                    </div>
                  </div> -->
                  <div class="row mt-2">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Year<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.year" name="assetDetails.year"
                        class="form-control populate" placeholder="Select year" #ySlt="ngModel" required >

                        <ng-option *ngFor="let year of years;" value="{{year}}">{{year}}</ng-option>
                        <!-- <ng-option value="2019">2019</ng-option>
												<ng-option value="2018">2018</ng-option>
												<ng-option value="2017">2017</ng-option>
												<ng-option value="2016">2016</ng-option>
												<ng-option value="2015">2015</ng-option> -->

                      </ng-select>
                      <div *ngIf="ySlt.invalid && (aSlt.dirty || ySlt.touched)" class="text-danger">
                        <div>
                          <div *ngIf="ySlt.errors.required">
                            Select Year is required.
                          </div>
                        </div>

                      </div>

                    </div>
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold text-lg-right pt-2">
                        Status<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.currentStatus" name="assetDetails.currentStatus"
                        placeholder="Select asset status" #sSlt="ngModel" required >

                        <ng-option value="Active">Active</ng-option>
                        <ng-option value="Inactive">InActive</ng-option>

                      </ng-select>
                      <div *ngIf="sSlt.invalid && (sSlt.dirty || sSlt.touched)" class="text-danger">
                        <div>
                          <div *ngIf="sSlt.errors.required">
                           Select Status is required.
                          </div>
                        </div>

                      </div>
                    </div>
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Make&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.manufacturer" name="assetDetails.manufacturer"
                        class="form-control" (change)="resetModel()" placeholder="Select asset make">
                        <ng-option *ngFor="let item of manufacturers | async" id="{{item.manufacturerID}}"
                          value="{{item.manufacturerID}}">{{item.manufacturerName}}
                        </ng-option>
                      </ng-select>
                    </div>
                    <div class="col-lg-2  mar-top-37 pl-0">
                      <a href="javascript:;" data-toggle="modal" data-target="#addAssetMakeModal"
                        class="btn cus-btn-padd btn-success modal-with-form"><i class="fas fa-plus"></i></a>
                    </div>
                    <div class="col-lg-10 ">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Model&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.model" placeholder="Select asset model"
                        name="assetDetails.model" class="form-control" id="assetSelect">
                        <ng-container *ngFor="let model of models | async">
                          <ng-option *ngIf="model.manufacturerID == assetsData.assetDetails.manufacturer"
                            value="{{model.modelID}}">{{model.modelName}}</ng-option>
                        </ng-container>
                      </ng-select>
                    </div>
                    <div class="col-lg-2  mar-top-37 pl-0">
                      <a href="javascript:;" data-toggle="modal" data-target="#addAssetModelModal"
                        class="btn cus-btn-padd btn-success modal-with-form"><i class="fas fa-plus"></i></a>
                    </div>
                  </div>
                  <div class="row mt-2">
					<div class="col-lg-5">
						<label class="control-label font-weight-bold font-bold text-lg-right pt-2">Height<span
							class="mandfield text-2 ml-1"><sup>*</sup></span></label>
						<div class="row">
						  <div class="col-lg-6">
							<input [(ngModel)]="assetsData.assetDetails.height" name="assetDetails.height" min="0" type="number"
							  class="form-control" placeholder="eg. 10,20 etc." #heightTxt="ngModel" required>
                <div *ngIf="heightTxt.invalid && (heightTxt.dirty || heightTxt.touched)" class="text-danger">
                  <div>
                    <div *ngIf="heightTxt.errors.required">
                    Height must contains numbers only.
                    </div>
                  </div>

                </div>
						  </div>
						  <div class="col-lg-6 pl-0">
							<ng-select [(ngModel)]="assetsData.assetDetails.heightUnit" name="assetDetails.heightUnit"
							  placeholder="Select unit" #hName="ngModel" required >

							  <ng-option value="Feet">Feet</ng-option>
							  <ng-option value="Meter">Meter</ng-option>

							</ng-select>
              <div *ngIf="hName.invalid && (hName.dirty || hName.touched)" class="text-danger">
              <div *ngIf="hName.errors.required">
                 Select Height type is required.
              </div>
              </div>
						  </div>
						</div>
					</div>
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Length&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <div class="row">
                        <div class="col-lg-6">
                          <input [(ngModel)]="assetsData.assetDetails.length" name="assetDetails.length" min="0" type="number"
                            class="form-control" placeholder="eg. 10,20 etc." #length="ngModel" required>
                            <div *ngIf="length.invalid && (length.dirty || length.touched)" class="text-danger">
                              <div>
                                <div *ngIf="length.errors.required">
                                 Length must contains numbers only.
                                </div>
                              </div>

                            </div>
                        </div>
                        <div class="col-lg-6 pl-0"> <div *ngIf="sSlt.invalid && (sSlt.dirty || sSlt.touched)" class="text-danger">
                        <div>

                        </div>

                      </div>
                          <ng-select [(ngModel)]="assetsData.assetDetails.lengthUnit" name="assetDetails.lengthUnit"
                            placeholder="Select unit" #lType="ngModel" required>

                            <ng-option value="Feet">Feet</ng-option>
                            <ng-option value="Meters">Meters</ng-option>

                          </ng-select>
                          <div *ngIf="lType.invalid && (lType.dirty || lType.touched)" class="text-danger">
                            <div>
                              <div *ngIf="lType.errors.required">
                               Select Length Type.
                              </div>
                            </div>

                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Axles&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.axle" placeholder="eg. 5,10"
                        name="assetDetails.axle" >
                        <ng-option value="1">1</ng-option>
                        <ng-option value="2">2</ng-option>
                        <ng-option value="3">3</ng-option>
                        <ng-option value="4">4</ng-option>
                        <ng-option value="5">5</ng-option>
                        <ng-option value="6">6</ng-option>
                        <ng-option value="7">7</ng-option>
                        <ng-option value="8">8</ng-option>
                        <ng-option value="9">9</ng-option>
                        <ng-option value="10">10</ng-option>
                      </ng-select>
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">GVWR <i
                          class="fas fa-exclamation-circle" data-toggle="tooltip" data-placement="top"
                          title="The Gross Vehicle Weight Rating is basically the maximum total safe weight of your vehicle"></i>&nbsp;
                        <span class="text-1 optional-label-color">(optional)</span></label>
                      <div class="row">
                        <div class="col-lg-6">
                          <input  placeholder="eg. 100,200 etc"[(ngModel)]="assetsData.assetDetails.GVWR" name="assetDetails.GVWR" type="text"
                            class="form-control" #gvwr="ngModel" required pattern="^[0-9]+$">
                            <div *ngIf="gvwr.invalid && (gvwr.dirty || gvwr.touched)" class="text-danger">
                              <div>
                                <div *ngIf="gvwr.errors.required">
                                  GVWR must contain numbers only.
                                 </div>
                                <div *ngIf="gvwr.errors.pattern">
                                 GVWR must not contain uppercase,lowercase and any special character.
                                </div>
                              </div>

                            </div>
                        </div>
                        <div class="col-lg-6 pl-0">
                          <ng-select [(ngModel)]="assetsData.assetDetails.GVWR_Unit" name="assetDetails.GVWR_Unit"
                            (change)="gwr($event, 'GVWR_Unit')" data-pluginng-selectTwo class="form-control populate"
                            placeholder="Select unit" #gvwrType="ngModel" required>
                            <ng-option value="Pounds">Pounds</ng-option>
                            <ng-option value="Kilograms">Kilograms</ng-option>
                          </ng-select>
                          <div *ngIf="gvwrType.invalid && (gvwrType.dirty || gvwrType.touched)" class="text-danger">
                            <div>
                              <div *ngIf="gvwrType.errors.required">
                                Select Weight Type.
                               </div>

                            </div>

                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">GAWR <i
                          class="fas fa-exclamation-circle" data-toggle="tooltip" data-placement="top"
                          title="The Gross Axle Weight Rating is a unit that is applied to all kinds of vehicles esp vehicles that have multiple axles"></i>&nbsp;
                        <span class="text-1 optional-label-color">(optional)</span></label>
                      <div class="row">
                        <div class="col-lg-6">
                          <input  placeholder="eg. 100,200 etc" [(ngModel)]="assetsData.assetDetails.GAWR" name="assetDetails.GAWR" type="text"
                            class="form-control" #gawr="ngModel" required pattern="^[0-9]+$">
                            <div *ngIf="gawr.invalid && (gawr.dirty || gawr.touched)" class="text-danger">

                                <div *ngIf="gawr.errors.required">
                                  GAWR must contain numbers only.
                                 </div>
                                 <div *ngIf="gawr.errors.pattern">
                                  GAWR must not contain uppercase,lowercase and any special character.
                                 </div>



                            </div>
                        </div>
                        <div class="col-lg-6 pl-0">
                          <ng-select [(ngModel)]="assetsData.assetDetails.GAWR_Unit" name="assetDetails.GAWR_Unit"
                            class="form-control populate" (change)="gwr($event, 'GAWR_Unit')" placeholder="Select unit" #gawrType="ngModel" required >

                            <ng-option value="Pounds">Pounds</ng-option>
                            <ng-option value="Kilograms">Kilograms</ng-option>

                          </ng-select>
                          <div *ngIf="gawrType.invalid && (gawrType.dirty || gawrType.touched)" class="text-danger">

                            <div *ngIf="gawrType.errors.required">
                              Select Weight Type.
                             </div>




                        </div>

                        </div>
                      </div>
                    </div>
                  </div>


                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Ownership&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.ownerShip" name="assetDetails.ownerShip"
                        placeholder="Select ownership" class="form-control populate" #ownership="ngModel" required>

                        <ng-option value="Owned">Owned</ng-option>
                        <ng-option value="Leased">Leased</ng-option>
                        <ng-option value="Rented">Rented</ng-option>
                        <ng-option value="Owner Operator">Owner Operator</ng-option>
                      </ng-select>
                      <div *ngIf="ownership.invalid && (ownership.dirty || ownership.touched)" class="text-danger">

                        <div *ngIf="ownership.errors.required">
                          Select Ownership Type.
                         </div>




                    </div>
                    </div>

                    <div class="col-lg-5" *ngIf="assetsData.assetDetails.ownerShip == 'Owner Operator'">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Owner Operator</label>

                      <ng-select placeholder="Select Owner Operator"[(ngModel)]="assetsData.assetDetails.ownerOperator" name="assetDetails.ownerOperator"
                        class="form-control populate ">
                        <ng-option *ngFor="let item of ownOperators | async" value="{{item.operatorID}}">
                          {{item.companyName}}
                        </ng-option>

                      </ng-select>
                    </div>
                    <div class="col-lg-2  mar-top-37" *ngIf="assetsData.assetDetails.ownerShip == 'Owner Operator'">
                      <a href="javascript:;" data-toggle="modal" data-target="#addOwnerOperatorModal"
                        class="btn btn-sm btn-success modal-with-form"><i class="fas fa-plus"></i></a>
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Licence
                        Country<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.licenceCountryID"
                        name="assetDetails.licenceCountryID" (change)="getStates($event)" placeholder="Select country"
                        class="form-control populate" #lcName="ngModel" required >
                        <ng-option *ngFor="let country of countries" value="{{country.countryID}}">
                          {{country.countryName}}
                        </ng-option>

                      </ng-select>
                      <div *ngIf="lcName.invalid && (lcName.dirty || lcName.touched)" class="text-danger">
                        <div>
                          <div *ngIf="lcName.errors.required">
                            Licence country is required.
                          </div>
                        </div>

                      </div>

                    </div>
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Licence Province<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.licenceStateID" name="assetDetails.licenceStateID"
                        class="form-control populate" placeholder="Select Province" #lpName="ngModel" required>
                        <ng-option *ngFor="let state of states" value="{{state.stateID}}">
                          {{state.stateName}}
                        </ng-option>
                      </ng-select>
                      <div *ngIf="lpName.invalid && (lpName.dirty || lpName.touched)" class="text-danger">
                        <div>
                          <div *ngIf="lpName.errors.required">
                            Licence province is required.
                          </div>
                        </div>

                      </div>

                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Licence
                        Plate Number<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <input [(ngModel)]="assetsData.assetDetails.licencePlateNumber"
                        placeholder="eg. 345678 " name="assetDetails.licencePlateNumber"
                        class="form-control" type="text" maxlength="8" #pName="ngModel" required pattern="^[a-zA-Z0-9\s\-]+$">
                        <div *ngIf="pName.invalid && (pName.dirty || pName.touched)"  class="text-danger">
                          <div *ngIf="pName.errors.required">
                            Licence plate number is required.
                          </div>
                            <div *ngIf="pName.errors.pattern">
                            Licence plate number contains no special characters.
                            </div>



                        </div>
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Annual Safety Date (Set
                        Reminder)<span class="mandfield text-1 ml-1"><sup>*</sup></span></label>
                      <input type="text" (click)="d11.toggle()" ngbDatepicker #d11="ngbDatepicker"
                        name="assetDetails.annualSafetyDate" [(ngModel)]="assetsData.assetDetails.annualSafetyDate"
                        class="form-control" #dSlt="ngModel" required >
                        <div *ngIf="dSlt.invalid && (dSlt.dirty || dSlt.touched)" class="text-danger">
                          <div>
                            <div *ngIf="dSlt.errors.required">
                              Annual safety date is required.
                            </div>
                          </div>

                        </div>

                      </div>
                    <div class="col-lg-10">
                      <div class="checkbox mt-1">
                        <label>
                          <input type="checkbox" name="annualSafetyReminder"
                            [(ngModel)]="assetsData.assetDetails.annualSafetyReminder" value="true">
                          Set Reminder
                        </label>
                      </div>
                    </div>
                  </div>

                  <div class="row ">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Select
                        the Inspection Form<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select [(ngModel)]="assetsData.inspectionFormID" name="inspectionFormID" placeholder="Select inspection form" #iSlt="ngModel" required >
                        <ng-option *ngFor="let data of inspectionForms" value="{{ data.inspectionFormID }}"> {{
                          data.inspectionFormName }}</ng-option>
                      </ng-select>
                      <div *ngIf="iSlt.invalid && (iSlt.dirty || iSlt.touched)" class="text-danger">
                        <div>
                          <div *ngIf="iSlt.errors.required">
                            Inspection form is required.
                          </div>
                        </div>

                      </div>
                    </div>
                    <div class="col-lg-2  mar-top-37 pl-0">
                      <a href="/#/compliance/dvir/inspection-add" target="_blank" class="modal-with-form btn btn-success"><i
                          class="fas fa-plus"></i></a>
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Notes&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <textarea [(ngModel)]="assetsData.assetDetails.remarks" name="assetDetails.remarks"
                        class="form-control h-auto" rows="3" placeholder="Enter notes about asset"></textarea>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Insurance details -->
              <div class="row pt-3">
                <div class="col-lg-12">
                  <label class="control-label font-weight-bold font-weight-bold text-lg-right text-4 pt-2">Insurance
                    Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row ">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Date of
                        Issue&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <input [(ngModel)]="assetsData.insuranceDetails.dateOfIssue" name="insuranceDetails.dateOfIssue"
                        type="text" placeholder="yyyy/mm/dd" (click)="d.toggle()" ngbDatepicker #d="ngbDatepicker"
                        class="form-control" #issueDate="ngModel" required>
                        <div *ngIf="issueDate.invalid && (issueDate.dirty || issueDate.touched)" class="text-danger">
                          <div>
                            <div *ngIf="issueDate.errors.required">
                              Date of Issue must follow yyyy/mm/dd format.
                            </div>
                          </div>

                        </div>
                    </div>
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Premium
                        Amount&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <div class="row">
                        <div class="col-lg-6">
                          <input [(ngModel)]="assetsData.insuranceDetails.premiumAmount"
                            name="insuranceDetails.premiumAmount" type="text" placeholder="eg. 100,200"
                            class="form-control" #preAmount="ngModel" required >
                            <div *ngIf="preAmount.invalid && (preAmount.dirty || preAmount.touched)" class="text-danger">
                              <div>
                                <div *ngIf="preAmount.errors.required">
                                  Premium Amount must contain numbers only.
                                </div>

                              </div>

                            </div>
                        </div>
                        <div class="col-lg-6 pl-0">
                          <ng-select [(ngModel)]="assetsData.insuranceDetails.premiumCurrency"
                            name="insuranceDetails.premiumCurrency" placeholder="Select currency" #sltCurrency="ngModel" required>
                            <ng-option value="USD">USD</ng-option>
                            <ng-option value="CAD">CAD</ng-option>
                          </ng-select>
                          <div *ngIf="sltCurrency.invalid && (sltCurrency.dirty || sltCurrency.touched)" class="text-danger">
                            <div>
                              <div *ngIf="sltCurrency.errors.required">
                                Select Currency Type.
                              </div>

                            </div>

                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row pt-2">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Date of
                        Expiry&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <input [(ngModel)]="assetsData.insuranceDetails.dateOfExpiry" name="insuranceDetails.dateOfExpiry"
                        placeholder="yyyy/mm/dd" (click)="d1.toggle()" ngbDatepicker #d1="ngbDatepicker" type="text"
                        class="form-control" #dateExpiry="ngModel" required>
                        <div *ngIf="dateExpiry.invalid && (dateExpiry.dirty || dateExpiry.touched)" class="text-danger">
                          <div>
                            <div *ngIf="dateExpiry.errors.required">
                             Date of Expiry must follow yyyy/mm/dd format.
                            </div>

                          </div>

                        </div>
                    </div>
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Reminder
                        Before Expiry&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <div class="row">
                        <div class="col-lg-6"><input [(ngModel)]="assetsData.insuranceDetails.reminderBefore"
                            name="insuranceDetails.reminderBefore" min="0" type="number" placeholder="eg. 5,10"
                            class="form-control" #reminder="ngModel" required>
                            <div *ngIf="reminder.invalid && (reminder.dirty || reminder.touched)" class="text-danger">
                              <div>
                                <div *ngIf="reminder.errors.required">
                                 Reminder must contains numbers only.
                                </div>

                              </div>

                            </div>
                        </div>
                        <div class="col-lg-6 pl-0">
                          <ng-select [(ngModel)]="assetsData.insuranceDetails.reminderBeforeUnit"
                            name="insuranceDetails.reminderBeforeUnit" placeholder="Select unit" #remType="ngModel" required>

                            <ng-option value="Day(s)">Day(s)</ng-option>
                            <ng-option value="Week(s)">Week(s)</ng-option>
                            <ng-option value="Month(s)">Month(s)</ng-option>

                          </ng-select>
                          <div *ngIf="remType.invalid && (remType.dirty || remType.touched)" class="text-danger">
                            <div>
                              <div *ngIf="remType.errors.required">
                              Select Reminder Type.
                              </div>

                            </div>

                          </div>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Vendor&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <ng-select [(ngModel)]="assetsData.insuranceDetails.vendor" name="insuranceDetails.vendor"
                        placeholder="Select vendor" class="form-control populate" #vendorName="ngModel" required>
                        <ng-option *ngFor="let vendor of vendors | async" value="{{vendor.vendorID}}">
                          {{vendor.companyName}}
                        </ng-option>
                      </ng-select>
                      <div *ngIf="vendorName.invalid && (vendorName.dirty || vendorName.touched)" class="text-danger">
                        <div>
                          <div *ngIf="vendorName.errors.required">
                          Select Vendor.
                          </div>

                        </div>

                      </div>
                    </div>
                    <div class="col-lg-2  mar-top-37 pl-0">
                      <a href="javascript:;" data-toggle="modal" data-target="#addVendorModal"
                        class="btn cus-btn-padd btn-success modal-with-form"><i class="fas fa-plus"></i></a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group pt-3 row">
                <div class="col-lg-12">
                  <label class="control-label font-weight-bold font-bold text-lg-right text-dark text-4  pt-2">Cross
                    Border Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">ACI
                        ID&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <input [(ngModel)]="assetsData.crossBorderDetails.ACI_ID" name="ACI_ID"
                        placeholder="10 digits , eg. 4567895676" type="text" class="form-control" maxlength="10" #aciIdName="ngModel" required pattern="^[0-9]{2,10}$">
                        <div *ngIf="aciIdName.invalid && (aciIdName.dirty || aciIdName.touched)" class="text-danger">
                          <div>

                            <div *ngIf="aciIdName.errors.pattern">
                             ACI ID must contains 10 alphanumeric number only eg.4567895676
                             </div>
                          </div>

                        </div>
                    </div>

                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">ACE
                        ID&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <input [(ngModel)]="assetsData.crossBorderDetails.ACE_ID" name="ACE_ID"
                        placeholder="10 digits , eg. 4567895676" type="text" class="form-control" maxlength="10" #aceIdName="ngModel" required pattern="^[0-9]{2,10}$">
                        <div *ngIf="aceIdName.invalid && (aceIdName.dirty || aceIdName.touched)" class="text-danger">
                          <div>

                            <div *ngIf="aceIdName.errors.pattern">
                             ACE ID must contains 10 alphanumeric number only eg.4567895676
                             </div>
                          </div>

                        </div>
                    </div>

                  </div>
                </div>
              </div>
              <div class="form-group pt-3 row">
                <div class="col-lg-12">
                  <label
                    class="control-label font-weight-bold font-bold text-lg-right text-dark text-4  pt-2">Additional
                    Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Attach
                        Photo</label>
                      <input (change)="selectDocuments($event, 'uploadedPhotos')" name="uploadedPhotos" type="file"
                        multiple class="form-control border-0 p-0">
                    </div>

                  </div>
                  <div class="row mt-2" *ngIf='assetsImages?.length'>
                    <div class="col-lg-5" *ngFor="let photo of assetsImages;let i= index">
                      <div class="vehicle-photo-box">
                        <img src="{{photo.path}}" width="100%" class="img-fluid"
                          style="height: 180px; object-fit: cover;">
                        <hr class="m-3">
                        <div class="row">
                          <div class="col-lg-8">Image {{i+1}}</div>
                          <div class="col-lg-4 text-right">
                            <a href="javascript:;" (click)="delete('image',photo.name)" class="modal-with-form">
                              <i class="fas fa-times text-danger" (click)="delete('image',photo.name)"></i>
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Attach
                        Document</label>
                      <input (change)="selectDocuments($event, 'uploadedDocs')" name="uploadedDocs" type="file" multiple
                        class="form-control border-0 p-0">
                    </div>
                  </div>

                  <div class="row mt-2" *ngIf="assetsDocs?.length">
                    <div class="col-lg-10">
                      <div class="vehicle-common-box p-3">
                        <div class="row">
                          <div class="col-lg-6"><label class="control-label font-weight-bold text-3">Document(s)</label>
                          </div>
                          <div class="col-lg-6 text-right">
                          </div>
                        </div>
                        <hr class="solid mt-2">
                        <div class="row mb-1" *ngFor="let doc of assetsDocs;let d= index">
                          <div class="col-lg-9"><a href="javascript:;" data-toggle="modal" data-target="#viewDocModal"
                              (click)="setPDFSrc(doc.path)">Document {{d+1}}</a> </div>
                          <div class="col-lg-3 text-right">
                            <i class="far fa-file text-dak mr-1" (click)="setPDFSrc(doc.path)" data-toggle="modal"
                              data-target="#viewDocModal"></i>
                            <a href="javascript:;" (click)="delete('doc',doc.name)" class="modal-with-form"><i
                                class="fas fa-times text-danger"></i></a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group row">
                <div class="col-lg-12 text-right">
                  <div class="row">
                    <div class="col-5 offset-1">&nbsp;</div>
                    <div class="col-5 offset-1">
                      <div class="row">
                        <div class="col-10">
                          <a routerLink="/fleet/assets/list" class="btn cus-btn-padd btn-default mr-2">Cancel</a>
                          <!-- <a (click)="addAsset()" class="btn btn-success">Submit</a>  -->
                          <button [disabled]="submitDisabled" *ngIf="!assetID" (click)="addAsset()" class="btn cus-btn-padd btn-success"
                            id="nextBtn">Save</button>
                          <button [disabled]="submitDisabled" *ngIf="assetID" (click)="updateAsset()" class="btn cus-btn-padd btn-success">Update</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>

    </section>
  </div>
</section>
<!-- GROUP MODAL -->
<div class="modal fade" id="addGroupModal" tabindex="-1" role="dialog" aria-labelledby="addGroupModal"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 600px;" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Group</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <i class="far fa-window-close modal-dismiss" style="font-size:25px;"> </i>
        </button>
      </div>
      <div class="modal-body text-dark">
        <div class="card-body p-0">
          <form id="groupForm" class="form-horizontal form-bordered bg-white" method="get" name="form">
            <div class="form-row">
              <div class="col-lg-12">
                <label class="control-label font-weight-bold">Group Name</label>
                <input [(ngModel)]="groupData.groupName" name="groupName" type="text" placeholder="Enter group name"
                  class="form-control">
              </div>

            </div>
            <div class="form-row mt-2">
              <div class="col-lg-12">
                <label class="control-label font-weight-bold">Group Members&nbsp;<span
                    class="text-1 optional-label-color">(optional)</span></label>
                <ng-select [multiple]=true [(ngModel)]="groupData.groupMembers" name="groupMembers"
                  placeholder="Select group members" style="width: 100%;">
                  <ng-option *ngFor="let item of allAssets;" value={{item.assetID}}>
                    {{item.assetIdentification}}</ng-option>
                </ng-select>
              </div>
            </div>
            <div class="form-row mt-2">
              <div class="col-lg-12">
                <label class="control-label font-weight-bold text-lg-right">Description&nbsp; <span
                    class="text-1 optional-label-color">(optional)</span></label>
                <textarea [(ngModel)]="groupData.description" name="description" class="form-control" rows="4"
                  id="comment" placeholder="Enter group description"></textarea>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-footer text-right">
        <a class="btn btn-default" data-dismiss="modal">Cancel</a>
        <a href="javascript:;" class="btn btn-success" (click)="addGroup()">Save</a>
      </div>
    </div>
  </div>
</div>

<!-- VIEW DOCUMENT MODAL -->
<div class="modal fade" id="viewDocModal" tabindex="-1" role="dialog" aria-labelledby="viewDocModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewDocModalLabel">View Document</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <div class="form-group col-md-12">
            <div>
              <iframe [src]='pdfSrc' frameborder="0" width="100%" height="400px"> </iframe>

            </div>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>
