<!-------- -<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "default" color = "#fff" type = "ball-clip-rotate"><p style="color: white" > Loading... </p></ngx-spinner> ----->
<section class="body">


  <div class="inner-wrapper">
    <section role="main" class="content-body pl-0 pr-0 pt-0">
      <header class="page-header">
        <div class="row" style="padding-top:10px;">
          <div class="col-md-4 col-lg-4">
            <h4 class="text-4 font-weight-bold mt-0 mb-0 text-dark">{{pageTitle}}</h4>
          </div>
          <div class="col-md-8 col-lg-8 text-right"> <a routerLink="/fleet/assets/list"
              class="btn btn-default btn-sm"><i class="fas fa-list"></i> Assets List</a> </div>
        </div>
      </header>
      <div class="row">
        <div class="col pr-0">
          <div class="card-body text-dark">
            <form class="form-horizontal form-bordered" method="get" name="form" id="form_" #assetF="ngForm">
              <div class=" row">
                <div class="col-lg-12">
                  <label
                    class="control-label font-weight-bold font-bold text-lg-right text-dark text-4 font-weight-bold pt-2">Basic
                    Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Asset

                        Name<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <input type="text" [(ngModel)]="assetsData.assetIdentification" name="assetIdentification"
                        maxlength="20" minlength="2" class="form-control" placeholder="eg. Box asset" #aName="ngModel"
                        required pattern="^[a-zA-Z\s]+$">
                      <div *ngIf="aName.invalid && (aName.dirty || aName.touched)" class="text-danger">
                        <div *ngIf="aName.errors.required">
                          Asset name is required.
                        </div>
                        <div *ngIf="aName.errors.pattern">
                          Asset name contain letters only.
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold pt-2 font-weight-bold text-lg-right">Group&nbsp;
                        <span class="text-1 optional-label-color">(optional)</span></label>


                      <ng-select class="form-control populate" [(ngModel)]="assetsData.groupID"
                        placeholder="Select group for asset" name="groupID" #groupSlt="ngModel">

                        <ng-option *ngFor="let group of groups" value="{{group.groupID}}">
                          {{group.groupName}}</ng-option>

                      </ng-select>
                      <!-- <div *ngIf="groupSlt.invalid && (groupSlt.dirty || groupSlt.touched)" class="text-danger">
                        <div *ngIf="groupSlt.errors.required">
                          Select Group.
                        </div>
                     </div> -->
                    </div>
                    <div class="col-lg-1 mar-top-37 pl-0">
                      <a data-toggle="modal" data-target="#addGroupModal" href="javascript:;"
                        class="modal-with-form btn cus-btn-padd btn-success"><i class="fas fa-plus"></i></a>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">VIN<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span> <i class="fas fa-exclamation-circle"
                          data-toggle="tooltip" data-placement="top" title="Vehicle Identification Number."></i></label>
                      <input type="text" [(ngModel)]="assetsData.VIN" name="VIN"
                        placeholder="17-18 digits Alphanumeric,eg. 2G1WH55K5Y9322458" class="form-control"
                        maxlength="18" #vName="ngModel" required pattern="^[a-zA-Z0-9]{17,18}$">
                      <div *ngIf="vName.invalid && (vName.dirty || vName.touched)" class="text-danger">

                        <div *ngIf="vName.errors.required">
                          VIN is required.
                        </div>
                        <div *ngIf="vName.errors.pattern">
                          VIN must be between 17-18 alphanumeric characters only eg.2G1WH55K5Y9322458.
                        </div>

                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-10">

                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Start Date<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <input type="text" (click)="d12.toggle()" ngbDatepicker #d12="ngbDatepicker"
                        [(ngModel)]="assetsData.startDate" name="startDate" placeholder="yyyy/mm/dd"
                        class="form-control" #dSlt="ngModel" required>
                      <div *ngIf="dSlt.invalid && (dSlt.dirty || dSlt.touched)" class="text-danger">

                        <div *ngIf="dSlt.errors.required">
                          Start date is required.
                        </div>


                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class=" row pt-3">
                <div class="col-lg-12">
                  <label
                    class="control-label font-weight-bold font-bold text-lg-right text-dark text-4 font-weight-bold pt-2">Asset
                    Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Asset
                        Type<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <!-- <ng-select [(ngModel)]="assetsData.assetDetails.assetType" name="assetDetails.assetType"
                        class="form-control populate" id="assetType" placeholder="Select asset type" #aSlt="ngModel" required>
                        <ng-option *ngFor="let type of allAssetTypes;" value="{{type.assetTypeID}}">
                          {{type.assetTypeName}}</ng-option>
                      </ng-select> -->
                      <ng-select [(ngModel)]="assetsData.assetType" name="assetType" class="form-control populate"
                        placeholder="Select type" #aSlt="ngModel" required>
                        <ng-option value="container">Container</ng-option>
                        <ng-option value="double_drop">Double Drop</ng-option>
                        <ng-option value="dump_trailer">Dump Trailer</ng-option>
                        <ng-option value="flat_bed">Flat bed</ng-option>
                        <ng-option value="lowboy">Lowboy</ng-option>
                        <ng-option value="stepDeck">StepDeck</ng-option>
                        <ng-option value="removable_gooseneck">Removable Gooseneck</ng-option>
                        <ng-option value="dry_van">Dry Van</ng-option>
                        <ng-option value="reefer">Reefer</ng-option>
                        <ng-option value="power_only">Power Only</ng-option>
                        <ng-option value="conestoga_trailer">Conestoga Trailer</ng-option>
                        <ng-option value="side_kit_trailer">Side Kit Trailer</ng-option>
                        <ng-option value="specialized_trailer">Specialized Trailer</ng-option>
                        <ng-option value="enclosed_trailer">Enclosed Trailer</ng-option>
                        <ng-option value="scrap_trailer">Scrap Trailer</ng-option>
                        <ng-option value="semi_trailer">Semi Trailer</ng-option>
                        <ng-option value="chassis">Chassis</ng-option>
                        <ng-option value="tank_trailer">Tank Trailer</ng-option>
                      </ng-select>
                      <!-- <div class="text-danger" [class.d-none]="aSlt.valid || aSlt.untouched">select asset type</div> -->
                      <div *ngIf="aSlt.invalid && (aSlt.dirty || aSlt.touched)" class="text-danger">
                        <div *ngIf="aSlt.errors.required">
                          Asset type is required.
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- <div class="row" id="reeferIftaDiv" *ngIf="assetsData.assetDetails.assetType == 'Reefer'">
                    <div class="col-lg-10 mt-2">
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" value="">
                          Is compliant for IFTA Reporting?
                        </label>
                      </div>
                    </div>
                  </div> -->
                  <div class="row mt-2">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Year<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.year" name="assetDetails.year"
                        class="form-control populate" placeholder="Select year" #ySlt="ngModel" required>

                        <ng-option *ngFor="let year of years;" value="{{year}}">{{year}}</ng-option>
                        <!-- <ng-option value="2019">2019</ng-option>
												<ng-option value="2018">2018</ng-option>
												<ng-option value="2017">2017</ng-option>
												<ng-option value="2016">2016</ng-option>
												<ng-option value="2015">2015</ng-option> -->

                      </ng-select>
                      <div *ngIf="ySlt.invalid && (ySlt.dirty || ySlt.touched)" class="text-danger">
                        <div *ngIf="ySlt.errors.required">
                          Year is required.
                        </div>


                      </div>

                    </div>
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold text-lg-right pt-2">
                        Status<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select [(ngModel)]="assetsData.currentStatus" name="currentStatus"
                        placeholder="Select asset status" #sSlt="ngModel" required>

                        <ng-option value="active">Active</ng-option>
                        <ng-option value="inactive">InActive</ng-option>

                      </ng-select>
                      <div *ngIf="sSlt.invalid && (sSlt.dirty || sSlt.touched)" class="text-danger">
                        <div>
                          <div *ngIf="sSlt.errors.required">
                            Status is required.
                          </div>
                        </div>

                      </div>
                    </div>
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Make&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.manufacturer" name="assetDetails.manufacturer"
                        class="form-control" (change)="resetModel()" placeholder="Select asset make">
                        <ng-option *ngFor="let item of manufacturers | async" id="{{item.manufacturerID}}"
                          value="{{item.manufacturerID}}">{{item.manufacturerName}}
                        </ng-option>
                      </ng-select>
                    </div>
                    <div class="col-lg-2  mar-top-37 pl-0">
                      <a href="javascript:;" data-toggle="modal" data-target="#addAssetMakeModal"
                        class="btn cus-btn-padd btn-success modal-with-form"><i class="fas fa-plus"></i></a>
                    </div>
                    <div class="col-lg-10 ">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Model&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.model" placeholder="Select asset model"
                        name="assetDetails.model" class="form-control" id="assetSelect">
                        <ng-container *ngFor="let model of models | async">
                          <ng-option *ngIf="model.manufacturerID == assetsData.assetDetails.manufacturer"
                            value="{{model.modelID}}">{{model.modelName}}</ng-option>
                        </ng-container>
                      </ng-select>
                    </div>
                    <div class="col-lg-2  mar-top-37 pl-0">
                      <a href="javascript:;" data-toggle="modal" data-target="#addAssetModelModal"
                        class="btn cus-btn-padd btn-success modal-with-form"><i class="fas fa-plus"></i></a>
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Height<span
                          class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <div class="row">
                        <div class="col-lg-6">
                          <input [(ngModel)]="assetsData.assetDetails.height" name="assetDetails.height" min="0"
                            type="number" class="form-control" placeholder="eg.7-14 feet " #heightTxt="ngModel"
                            required>
                          <div *ngIf="heightTxt.invalid && (heightTxt.dirty || heightTxt.touched)" class="text-danger">
                            <div>
                              <div *ngIf="heightTxt.errors.required">
                                Height must contain numbers only.
                              </div>
                            </div>

                          </div>
                        </div>
                        <div class="col-lg-6 pl-0">
                          <ng-select [(ngModel)]="assetsData.assetDetails.heightUnit" name="assetDetails.heightUnit"
                            placeholder="Select unit" #hName="ngModel" required>

                            <ng-option value="Feet">Feet</ng-option>
                            <ng-option value="Meter">Meter</ng-option>

                          </ng-select>
                          <div *ngIf="hName.invalid && (hName.dirty || hName.touched)" class="text-danger">
                            <div *ngIf="hName.errors.required">
                              Height type is required.
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Length&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <div class="row">
                        <div class="col-lg-6">
                          <input [(ngModel)]="assetsData.assetDetails.length" name="assetDetails.length" min="0"
                            type="number" class="form-control" placeholder="eg. 10-26 feet" #length="ngModel">
                          <!-- <div *ngIf="length.invalid && (length.dirty || length.touched)" class="text-danger">

                                <div *ngIf="length.errors.required">
                                 Length must contains numbers only.
                                </div>


                            </div> -->
                        </div>
                        <div class="col-lg-6 pl-0">
                          <div *ngIf="sSlt.invalid && (sSlt.dirty || sSlt.touched)" class="text-danger">
                            <div>

                            </div>

                          </div>
                          <ng-select [(ngModel)]="assetsData.assetDetails.lengthUnit" name="assetDetails.lengthUnit"
                            placeholder="Select unit" #lType="ngModel">

                            <ng-option value="Feet">Feet</ng-option>
                            <ng-option value="Meters">Meters</ng-option>

                          </ng-select>
                          <!-- <div *ngIf="lType.invalid && (lType.dirty || lType.touched)" class="text-danger">
                            <div>
                              <div *ngIf="lType.errors.required">
                               Select Length Type.
                              </div>
                            </div>

                          </div> -->
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Axles&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.axle" placeholder="eg. Single, Double"
                        name="assetDetails.axle">
                        <ng-option value="1">1</ng-option>
                        <ng-option value="2">2</ng-option>
                        <ng-option value="3">3</ng-option>
                        <ng-option value="4">4</ng-option>
                        <ng-option value="5">5</ng-option>
                        <ng-option value="6">6</ng-option>
                        <ng-option value="7">7</ng-option>
                        <ng-option value="8">8</ng-option>
                        <ng-option value="9">9</ng-option>
                        <ng-option value="10">10</ng-option>
                      </ng-select>
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">GVWR <i
                          class="fas fa-exclamation-circle" data-toggle="tooltip" data-placement="top"
                          title="The Gross Vehicle Weight Rating is basically the maximum total safe weight of your vehicle"></i>&nbsp;
                        <span class="text-1 optional-label-color">(optional)</span></label>
                      <div class="row">
                        <div class="col-lg-6">
                          <input placeholder="eg. 6000 kg " [(ngModel)]="assetsData.assetDetails.GVWR"
                            name="assetDetails.GVWR" type="text" class="form-control" #gvwr="ngModel">
                          <!-- <div *ngIf="gvwr.invalid && (gvwr.dirty || gvwr.touched)" class="text-danger">


                                <div *ngIf="gvwr.errors.pattern">
                                 GVWR must contain numbers only.
                                </div>


                            </div> -->
                        </div>
                        <div class="col-lg-6 pl-0">
                          <ng-select [(ngModel)]="assetsData.assetDetails.GVWR_Unit" name="assetDetails.GVWR_Unit"
                            (change)="gwr($event, 'GVWR_Unit')" data-pluginng-selectTwo class="form-control populate"
                            placeholder="Select unit" #gvwrType="ngModel">
                            <ng-option value="Pounds">Pounds</ng-option>
                            <ng-option value="Kilograms">Kilograms</ng-option>
                          </ng-select>
                          <!-- <div *ngIf="gvwrType.invalid && (gvwrType.dirty || gvwrType.touched)" class="text-danger">
                            <div>
                              <div *ngIf="gvwrType.errors.required">
                                Select Weight Type.
                               </div>

                            </div>

                          </div> -->
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">GAWR <i
                          class="fas fa-exclamation-circle" data-toggle="tooltip" data-placement="top"
                          title="The Gross Axle Weight Rating is a unit that is applied to all kinds of vehicles esp vehicles that have multiple axles"></i>&nbsp;
                        <span class="text-1 optional-label-color">(optional)</span></label>
                      <div class="row">
                        <div class="col-lg-6">
                          <input placeholder="eg. 6000 kg" [(ngModel)]="assetsData.assetDetails.GAWR"
                            name="assetDetails.GAWR" type="text" class="form-control" #gawr="ngModel">
                          <!-- <div *ngIf="gawr.invalid && (gawr.dirty || gawr.touched)" class="text-danger">

                                <div *ngIf="gawr.errors.required">
                                  GAWR must contain numbers only.
                                 </div> 
                                 <div *ngIf="gawr.errors.pattern">
                                  GAWR must contain numbers only.
                                 </div>



                            </div> -->
                        </div>
                        <div class="col-lg-6 pl-0">
                          <ng-select [(ngModel)]="assetsData.assetDetails.GAWR_Unit" name="assetDetails.GAWR_Unit"
                            class="form-control populate" (change)="gwr($event, 'GAWR_Unit')" placeholder="Select unit"
                            #gawrType="ngModel">

                            <ng-option value="Pounds">Pounds</ng-option>
                            <ng-option value="Kilograms">Kilograms</ng-option>

                          </ng-select>
                          <!-- <div *ngIf="gawrType.invalid && (gawrType.dirty || gawrType.touched)" class="text-danger">

                            <div *ngIf="gawrType.errors.required">
                              Select Weight Type.
                             </div>




                        </div> -->

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Ownership&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.ownerShip" name="assetDetails.ownerShip"
                        placeholder="Select ownership" class="form-control populate">
                        <ng-option value="owned">Owned</ng-option>
                        <ng-option value="leased">Leased</ng-option>
                        <ng-option value="rented">Rented</ng-option>
                        <ng-option value="ownerOperator">Owner Operator</ng-option>
                      </ng-select>
                    </div>

                    <div class="col-lg-5" *ngIf="assetsData.assetDetails.ownerShip == 'ownerOperator'">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Owner Operator</label>

                      <ng-select placeholder="Select Owner Operator" [(ngModel)]="assetsData.assetDetails.ownerOperator"
                        name="assetDetails.ownerOperator" class="form-control populate ">
                        <ng-option *ngFor="let item of ownOperators | async" value="{{item.contactID}}">
                          {{item.companyName}}
                        </ng-option>

                      </ng-select>
                      <!-- <div *ngIf="sltO.invalid && (sltO.dirty || sltO.touched)" class="text-danger">
                        <div *ngIf="sltO.errors.required">
                          Select valid owner operator from the list is required.
                        </div>

                      </div> -->
                    </div>
                    <div class="col-lg-2  mar-top-37" *ngIf="assetsData.assetDetails.ownerShip == 'ownerOperator'">
                      <a href="javascript:;" data-toggle="modal" data-target="#addOwnerOperatorModal"
                        class="btn btn-sm btn-success modal-with-form"><i class="fas fa-plus"></i></a>
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Licence
                        Country<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.licenceCountryCode"
                        name="assetDetails.licenceCountryCode" (change)="getStates($event)" placeholder="Select country"
                        class="form-control populate" #lcName="ngModel" required>
                        <!-- <ng-option *ngFor="let country of countries" value="{{country.countryID}}">
                          {{country.countryName}}
                        </ng-option> -->
                        <ng-option value="CA">Canada</ng-option>
                        <ng-option value="US">United States of America</ng-option>
                      </ng-select>
                      <div *ngIf="lcName.invalid && (lcName.dirty || lcName.touched)" class="text-danger">
                        <div *ngIf="lcName.errors.required">
                          Licence country is required.
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Licence Province/State
                        <span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select [(ngModel)]="assetsData.assetDetails.licenceStateCode"
                        name="assetDetails.licenceStateCode" class="form-control populate" placeholder="Select Province"
                        #lpName="ngModel" required>
                        <ng-option *ngFor="let state of states" value="{{state.stateCode}}">
                          {{state.stateName}}
                        </ng-option>
                      </ng-select>
                      <div *ngIf="lpName.invalid && (lpName.dirty || lpName.touched)" class="text-danger">
                        <div *ngIf="lpName.errors.required">
                          Licence Province/State is required.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Licence
                        Plate Number<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <input [(ngModel)]="assetsData.assetDetails.licencePlateNumber" placeholder="eg. CAL 890 "
                        name="assetDetails.licencePlateNumber" class="form-control" type="text" maxlength="8"
                        #pName="ngModel" required pattern="^[a-zA-Z0-9\s]{7,8}$">
                      <div *ngIf="pName.invalid && (pName.dirty || pName.touched)" class="text-danger">
                        <div *ngIf="pName.errors.required">
                          Licence plate number is required.
                        </div>
                        <div *ngIf="pName.errors.pattern">
                          Licence plate number must be between 7-8 alphanumeric characters only.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Annual Safety Date (Set
                        Reminder)<span class="mandfield text-1 ml-1"><sup>*</sup></span></label>
                      <input type="text" (click)="d11.toggle()" ngbDatepicker #d11="ngbDatepicker"
                        name="assetDetails.annualSafetyDate" [(ngModel)]="assetsData.assetDetails.annualSafetyDate"
                        class="form-control" #dSlt1="ngModel" required>
                      <div *ngIf="dSlt1.invalid && (dSlt1.dirty || dSlt1.touched)" class="text-danger">
                        <div *ngIf="dSlt1.errors.required">
                          Annual safety date is required.
                        </div>
                      </div>

                    </div>
                    <div class="col-lg-10">
                      <div class="checkbox mt-1">
                        <label>
                          <input type="checkbox" name="annualSafetyReminder"
                            [(ngModel)]="assetsData.assetDetails.annualSafetyReminder" value="true">
                          Set Reminder
                        </label>
                      </div>
                    </div>
                  </div>

                  <div class="row ">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Select
                        the Inspection Form<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                      <ng-select [(ngModel)]="assetsData.inspectionFormID" name="inspectionFormID"
                        placeholder="Select inspection form" #iSlt="ngModel" required>
                        <ng-option *ngFor="let data of inspectionForms" value="{{ data.inspectionFormID }}"> {{
                          data.inspectionFormName }}</ng-option>
                      </ng-select>
                      <div *ngIf="iSlt.invalid && (iSlt.dirty || iSlt.touched)" class="text-danger">

                        <div *ngIf="iSlt.errors.required">
                          Inspection form is required.
                        </div>


                      </div>
                    </div>
                    <div class="col-lg-2  mar-top-37 pl-0">
                      <a href="/#/compliance/dvir/inspection-add" target="_blank"
                        class="modal-with-form btn btn-success"><i class="fas fa-plus"></i></a>
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Notes&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <textarea [(ngModel)]="assetsData.assetDetails.remarks" name="assetDetails.remarks"
                        class="form-control h-auto" rows="3" placeholder="Enter notes about asset" #aNotes="ngModel" pattern ="^[\s\S]{2,500}$"></textarea>
                        <div *ngIf="aNotes.invalid && (aNotes.dirty || aNotes.touched)" class="text-danger">
                          <div *ngIf="aNotes.errors.pattern">
                           Only 500 characters are allowed.
                          </div>

                       </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Insurance details -->
              <div class="row pt-3">
                <div class="col-lg-12">
                  <label class="control-label font-weight-bold font-weight-bold text-lg-right text-4 pt-2">Insurance
                    Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row ">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Date of
                        Issue&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <input [(ngModel)]="assetsData.insuranceDetails.dateOfIssue" name="insuranceDetails.dateOfIssue"
                        type="text" placeholder="yyyy/mm/dd" (click)="d.toggle()" ngbDatepicker #d="ngbDatepicker"
                        class="form-control">

                    </div>
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Premium
                        Amount&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <div class="row">
                        <div class="col-lg-6">
                          <input [(ngModel)]="assetsData.insuranceDetails.premiumAmount"
                            name="insuranceDetails.premiumAmount" type="number" placeholder="eg. 100,200"
                            class="form-control" #preAmount="ngModel">
                          <!-- <div *ngIf="preAmount.invalid && (preAmount.dirty || preAmount.touched)" class="text-danger">
                              <div>
                                <div *ngIf="preAmount.errors.required">
                                  Premium Amount must contain numbers only.
                                </div>

                              </div>

                            </div> -->
                        </div>
                        <div class="col-lg-6 pl-0">
                          <ng-select [(ngModel)]="assetsData.insuranceDetails.premiumCurrency"
                            name="insuranceDetails.premiumCurrency" placeholder="Select currency"
                            #sltCurrency="ngModel">
                            <ng-option value="USD">USD</ng-option>
                            <ng-option value="CAD">CAD</ng-option>
                          </ng-select>
                          <!-- <div *ngIf="sltCurrency.invalid && (sltCurrency.dirty || sltCurrency.touched)" class="text-danger">
                            <div>
                              <div *ngIf="sltCurrency.errors.required">
                                Select Currency Type.
                              </div>

                            </div>

                          </div> -->
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row pt-2">
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Date of
                        Expiry&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <input [(ngModel)]="assetsData.insuranceDetails.dateOfExpiry" name="insuranceDetails.dateOfExpiry"
                        placeholder="yyyy/mm/dd" (click)="d1.toggle()" ngbDatepicker #d1="ngbDatepicker" type="text"
                        class="form-control">

                    </div>
                    <div class="col-lg-5">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Reminder
                        Before Expiry&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <div class="row">
                        <div class="col-lg-6"><input [(ngModel)]="assetsData.insuranceDetails.reminderBefore"
                            name="insuranceDetails.reminderBefore" min="0" type="number" placeholder="eg. 5,10"
                            class="form-control" #reminder="ngModel">
                          <!-- <div *ngIf="reminder.invalid && (reminder.dirty || reminder.touched)" class="text-danger">
                              <div>
                                <div *ngIf="reminder.errors.required">
                                 Reminder must contains numbers only.
                                </div>

                              </div>

                            </div> -->
                        </div>
                        <div class="col-lg-6 pl-0">
                          <ng-select [(ngModel)]="assetsData.insuranceDetails.reminderBeforeUnit"
                            name="insuranceDetails.reminderBeforeUnit" placeholder="Select unit" #remType="ngModel">

                            <ng-option value="Day(s)">Day(s)</ng-option>
                            <ng-option value="Week(s)">Week(s)</ng-option>
                            <ng-option value="Month(s)">Month(s)</ng-option>

                          </ng-select>
                          <!-- <div *ngIf="remType.invalid && (remType.dirty || remType.touched)" class="text-danger">
                            <div>
                              <div *ngIf="remType.errors.required">
                              Select Reminder Type.
                              </div>

                            </div>

                          </div> -->

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold text-lg-right pt-2">Vendor&nbsp; <span
                          class="text-1 optional-label-color">(optional)</span></label>
                      <ng-select [(ngModel)]="assetsData.insuranceDetails.vendor" name="insuranceDetails.vendor"
                        placeholder="Select vendor" class="form-control populate" #vendorName="ngModel">
                        <ng-option *ngFor="let vendor of vendors | async" value="{{vendor.contactID}}">
                          {{vendor.companyName}}
                        </ng-option>
                      </ng-select>
                      <!-- <div *ngIf="vendorName.invalid && (vendorName.dirty || vendorName.touched)" class="text-danger">
                        <div>
                          <div *ngIf="vendorName.errors.required">
                          Select Vendor.
                          </div>

                        </div>

                      </div> -->
                    </div>
                    <div class="col-lg-2  mar-top-37 pl-0">
                      <a href="javascript:;" data-toggle="modal" data-target="#addVendorModal"
                        class="btn cus-btn-padd btn-success modal-with-form"><i class="fas fa-plus"></i></a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group pt-3 row">
                <div class="col-lg-12">
                  <label class="control-label font-weight-bold font-bold text-lg-right text-dark text-4  pt-2">Cross
                    Border Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">ACI
                        ID&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <input [(ngModel)]="assetsData.crossBorderDetails.ACI_ID" name="ACI_ID"
                        placeholder="10 digits , eg. 4567895676" type="text" class="form-control" maxlength="10"
                        #aciIdName="ngModel" pattern="^[0-9]{2,10}$">
                      <div *ngIf="aciIdName.invalid && (aciIdName.dirty || aciIdName.touched)" class="text-danger">
                        <div>

                          <div *ngIf="aciIdName.errors.pattern">
                            ACI ID must contain 10 numbers only eg.4567895676
                          </div>
                        </div>

                      </div>
                    </div>

                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">ACE
                        ID&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <input [(ngModel)]="assetsData.crossBorderDetails.ACE_ID" name="ACE_ID"
                        placeholder="10 digits , eg. 4567895676" type="text" class="form-control" maxlength="10"
                        #aceIdName="ngModel" pattern="^[0-9]{2,10}$">
                      <div *ngIf="aceIdName.invalid && (aceIdName.dirty || aceIdName.touched)" class="text-danger">
                        <div>

                          <div *ngIf="aceIdName.errors.pattern">
                            ACE ID must contain 10 numbers only eg.4567895674
                          </div>
                        </div>

                      </div>
                    </div>

                  </div>
                </div>
              </div>
              <div class="form-group pt-3 row">
                <div class="col-lg-12">
                  <label
                    class="control-label font-weight-bold font-bold text-lg-right text-dark text-4  pt-2">Additional
                    Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Attach
                        Photo &nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <input (change)="selectDocuments($event, 'uploadedPhotos')" name="uploadedPhotos" type="file"
                        multiple class="form-control border-0 p-0">
                    </div>

                  </div>
                  <div class="row mt-2" *ngIf='assetsImages?.length'>
                    <div class="col-lg-5" *ngFor="let photo of assetsImages;let i= index">
                      <div class="vehicle-photo-box">
                        <img src="{{photo.path}}" width="100%" class="img-fluid"
                          style="height: 180px; object-fit: cover;">
                        <hr class="m-3">
                        <div class="row">
                          <div class="col-lg-8">Image {{i+1}}</div>
                          <div class="col-lg-4 text-right">
                            <a href="javascript:;"  class="modal-with-form">
                              <i class="fas fa-times text-danger" (click)="delete('image',photo.name,i)"></i>
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row pt-2">
                    <div class="col-lg-10">
                      <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Attach
                        Document &nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      <input (change)="selectDocuments($event, 'uploadedDocs')" name="uploadedDocs" type="file" multiple
                        class="form-control border-0 p-0">
                    </div>
                  </div>

                  <div class="row mt-2" *ngIf="assetsDocs?.length">
                    <div class="col-lg-10">
                      <div class="vehicle-common-box p-3">
                        <div class="row">
                          <div class="col-lg-6"><label class="control-label font-weight-bold text-3">Document(s)</label>
                          </div>
                          <div class="col-lg-6 text-right">
                          </div>
                        </div>
                        <hr class="solid mt-2">
                        <div class="row mb-1" *ngFor="let doc of assetsDocs;let d= index">
                          <div class="col-lg-9"><a href="javascript:;" data-toggle="modal" data-target="#viewDocModal"
                              (click)="setPDFSrc(doc.path)">Document {{d+1}}</a> </div>
                          <div class="col-lg-3 text-right">
                            <i class="far fa-file text-dak mr-1" (click)="setPDFSrc(doc.path)" data-toggle="modal"
                              data-target="#viewDocModal"></i>
                            <a href="javascript:;" (click)="delete('doc',doc.name,d)" class="modal-with-form"><i
                                class="fas fa-times text-danger"></i></a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group row">
                <div class="col-lg-12 text-right">
                  <div class="row">
                    <div class="col-5 offset-1">&nbsp;</div>
                    <div class="col-5 offset-1">
                      <div class="row">
                        <div class="col-10">
                          <a routerLink="/fleet/assets/list" class="btn cus-btn-padd btn-default mr-2">Cancel</a>
                          <!-- <a (click)="addAsset()" class="btn btn-success">Submit</a>  -->

                          <!-- if there is some error in validation  -->

                          <button [disabled]="!assetF.form.valid" *ngIf="!assetID && !assetF.form.valid"
                            (click)="addAsset()" class="btn cus-btn-padd btn-success" id="nextBtn">Save</button>
                          
                            <!-- if validations are ok and now the button will disable on submit click  -->

                          <button [disabled]="submitDisabled" *ngIf="!assetID && assetF.form.valid" (click)="addAsset()"
                            class="btn cus-btn-padd btn-success" id="nextBtn">Save</button>
                          
                            <!-- update case -->
                          <button [disabled]="!assetF.form.valid" *ngIf="assetID && !assetF.form.valid"
                            (click)="updateAsset()" class="btn cus-btn-padd btn-success">Update</button>
                          <button [disabled]="submitDisabled" *ngIf="assetID && assetF.form.valid"
                            (click)="updateAsset()" class="btn cus-btn-padd btn-success">Update</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>

    </section>
  </div>
</section>
<!-- GROUP MODAL -->
<div class="modal fade" id="addGroupModal" tabindex="-1" role="dialog" aria-labelledby="addGroupModal"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 600px;" role="document">
    <div class="modal-content">
      <form id="groupForm" class="form-horizontal form-bordered bg-white" method="get" name="form" #groupForm="ngForm">
        <div class="modal-header">
          <h5 class="modal-title">Add Group</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <i class="far fa-window-close modal-dismiss" style="font-size:25px;"> </i>
          </button>
        </div>
        <div class="modal-body text-dark">
          <div class="card-body p-0">

            <div class="form-row">
              <div class="col-lg-12">
                <label class="control-label font-weight-bold">Group Name <span
                    class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                <input [(ngModel)]="groupData.groupName" name="groupName" type="text" placeholder="Enter group name"
                  class="form-control" #aAsset="ngModel" required pattern="^[a-zA-Z\s]+$">
                <div *ngIf="aAsset.invalid && (aAsset.dirty || aAsset.touched)" class="text-danger">
                  <div *ngIf="aAsset.errors.required">
                    Group name is required.
                  </div>
                  <div *ngIf="aAsset.errors.pattern">
                    Group name must contain letters only.
                  </div>
                </div>

              </div>

            </div>
            <div class="form-row mt-2">
              <div class="col-lg-12">
                <label class="control-label font-weight-bold">Group Members&nbsp;<span
                    class="text-1 optional-label-color">(optional)</span></label>
                <ng-select [multiple]=true [(ngModel)]="groupData.groupMembers" name="groupMembers"
                  placeholder="Select group members" style="width: 100%;">
                  <ng-option *ngFor="let item of allAssets;" value={{item.assetID}}>
                    {{item.assetIdentification}}</ng-option>
                </ng-select>
              </div>
            </div>
            <div class="form-row mt-2">
              <div class="col-lg-12">
                <label class="control-label font-weight-bold text-lg-right">Description&nbsp; <span
                    class="text-1 optional-label-color">(optional)</span></label>
                <textarea [(ngModel)]="groupData.description" name="description" class="form-control" rows="4"
                  id="comment" placeholder="Enter group description"></textarea>
              </div>
            </div>

          </div>
        </div>
        <div class="modal-footer text-right">
          <a class="btn btn-default" data-dismiss="modal">Cancel</a>
          <button href="javascript:;" class="btn btn-success" (click)="addGroup()"
            [disabled]="!groupForm.form.valid">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- VIEW DOCUMENT MODAL -->
<div class="modal fade" id="viewDocModal" tabindex="-1" role="dialog" aria-labelledby="viewDocModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewDocModalLabel">View Document</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <div class="form-group col-md-12">
            <div>
              <iframe [src]='pdfSrc' frameborder="0" width="100%" height="400px"> </iframe>

            </div>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>