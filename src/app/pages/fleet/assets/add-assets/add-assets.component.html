<!----- -<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "default" color = "#fff" type = "ball-clip-rotate"><p style="color: white" > Loading... </p></ngx-spinner> ----->
<section class="body">


  <div class="inner-wrapper">
    <section role="main" class="content-body pl-1 pr-0 pt-0">
      <header class="page-header pr8 pl11">
        <div class="row" style="padding-top:10px;">
          <div class="col-md-4 col-lg-4">
            <h4 class="text-4 font-weight-bold mt-0 mb-0 text-dark">{{pageTitle}}</h4>
          </div>
          <div class="col-md-8 col-lg-8 text-right"> <a routerLink="/fleet/assets/list"
              class="btn btn-default btn-sm"><i class="fas fa-list"></i> Assets List</a> </div>
        </div>
      </header>

      <section class="m-2">
        <form class="form-horizontal form-bordered" method="get" name="form" id="form_"
        (ngSubmit)="assetID ? (assetF.form.valid ? onUpdateAsset() : scrollError()): (assetF.form.valid ? onAddAsset() : scrollError())" novalidate #assetF="ngForm" ngNativeValidate>

        <div class="row mb-3">
         <div class="col-lg-12">
          <div class="bg-white p-3 text-dark">
           <div class="form-group row adddriverpl pt-3">
              <div class="col-lg-10">
               <label class="control-label font-weight-bold font-weight-bold text-lg-right text-5">Basic Details</label>
              </div>
              <div class="col-lg-5 mb-3">
               <div class="row">
                <div class="col-lg-12">

                 <!-- <label class="control-label font-weight-bold text-lg-right pt-2">Height <span class="mandfield text-2 ml-1"><sup>*</sup></span> </label> -->

                 <div class="row">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Asset Name/Number <span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                    <input type="text" [(ngModel)]="assetsData.assetIdentification" name="assetIdentification" maxlength="20"
                      class="form-control" placeholder="eg. Box asset" #aName="ngModel" required pattern="^[a-zA-Z0-9\s]+$"
                      [ngClass]="{ 'error' : assetF.submitted && aName.invalid }" [disabled]="editDisabled">
                      <div *ngIf="aName.invalid && assetF.submitted" class="text-danger">
                        <div *ngIf="aName.errors.required">
                          Asset name/number is required.
                        </div>
                        <div *ngIf="aName.errors.pattern">
                          Asset name/number must contain alphanumeric characters.
                        </div>
                      </div>
                  </div>

                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold pt-2 font-weight-bold text-lg-right">Group</label>


                    <ng-select class="form-control populate" [(ngModel)]="assetsData.groupID"
                      placeholder="Select group for asset" name="groupID" #groupSlt="ngModel" >

                      <ng-option *ngFor="let group of groups" value="{{group.groupID}}">
                        {{group.groupName}}</ng-option>

                    </ng-select>
                    <!-- <div *ngIf="groupSlt.invalid && (groupSlt.dirty || groupSlt.touched)" class="text-danger">
                      <div *ngIf="groupSlt.errors.required">
                        Select Group.
                      </div>
                   </div> -->
                  </div>
                  <div class="col-2 mar-top-37 pl-0">
                    <a data-toggle="modal" data-target="#addGroupModal" href="javascript:;"
                      class="modal-with-form btn cus-btn-padd btn-success mr-2"><i class="fas fa-plus"></i></a>
                    <a class="modal-with-form btn cus-btn-padd btn-success text-light" (click)="getGroups()" data-toggle="tooltip" href="javascript:;" title="Refresh groups data"><i class="fas fa-sync"></i></a>
                  </div>
                 </div>
                </div>
               </div>
              </div>
              <div class="col-lg-5 offset-lg-1 mb-3">
               <div class="row">
                <div class="col-lg-10" *ngIf="isRequired">
                  <label class="control-label font-weight-bold font-bold text-lg-right pt-2">VIN<span class="mandfield text-2 ml-1"><sup>*</sup></span> <i class="fas fa-exclamation-circle" data-toggle="tooltip"
                      data-placement="top" title="Vehicle Identification Number."></i></label>
                  <input type="text" [(ngModel)]="assetsData.VIN" name="VIN"  [ngClass]="{ 'error' : assetF.submitted && vName.invalid }"
                    placeholder="17-18 Alphanumeric characters , eg. 2G1WH55K5Y9322458" class="form-control placeholder-lowercase" maxlength="18" #vName="ngModel"
                    [required]="isRequired">
                    <div *ngIf="vName.invalid && assetF.submitted" class="text-danger">

                        <div *ngIf="vName.errors.required">
                          VIN is required.
                        </div>
                    </div>
                </div>
                <div class="col-lg-10">

                  <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Start Date<span
                      class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                  <input type="text" (click)="d12.toggle()" ngbDatepicker #d12="ngbDatepicker" readonly
                    [(ngModel)]="assetsData.startDate" name="startDate" placeholder="yyyy/mm/dd"  [ngClass]="{ 'error' : assetF.submitted && sd1.invalid }"
                    class="form-control" #sd1="ngModel" required [minDate]="dateMinLimit" [maxDate]="futureDatesLimit">
                    <div *ngIf="sd1.invalid && assetF.submitted" class="text-danger">
                        <div *ngIf="sd1.errors.required">
                        Start date is required.
                        </div>
                    </div>
                </div>
               </div>
              </div>
           </div>
          </div>
         </div>
        </div>
        <div class="row mb-3">
          <div class="col-lg-12">
           <div class="bg-white p-3 text-dark">
            <div class="form-group row adddriverpl pt-3">
               <div class="col-lg-10">
                <label class="control-label font-weight-bold font-weight-bold text-lg-right text-5">Asset Details</label>
               </div>
               <div class="col-lg-5 mb-3">
                <div class="row">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Asset
                      Type<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                    <!-- <ng-select [(ngModel)]="assetsData.assetDetails.assetType" name="assetDetails.assetType"
                      class="form-control populate" id="assetType" placeholder="Select asset type" #aSlt="ngModel" required>
                      <ng-option *ngFor="let type of allAssetTypes;" value="{{type.assetTypeID}}">
                        {{type.assetTypeName}}</ng-option>
                    </ng-select> -->
                    <ng-select [(ngModel)]="assetsData.assetType" name="assetType" [ngClass]="{ 'error' : assetF.submitted && aSlt.invalid }"
                    class="form-control populate" placeholder="Select type" #aSlt="ngModel" required >
                    <ng-option value="container">Container</ng-option>
                  <ng-option value="double_drop">Double Drop</ng-option>
                  <ng-option value="dump_trailer">Dump Trailer</ng-option>
                  <ng-option value="flat_bed">Flat bed</ng-option>
                  <ng-option value="lowboy">Lowboy</ng-option>
                  <ng-option value="stepDeck">StepDeck</ng-option>
                  <ng-option value="removable_gooseneck">Removable Gooseneck</ng-option>
                  <ng-option value="dry_van">Dry Van</ng-option>
                  <ng-option value="reefer">Reefer</ng-option>
                  <ng-option value="power_only">Power Only</ng-option>
                  <ng-option value="conestoga_trailer">Conestoga Trailer</ng-option>
                  <ng-option value="side_kit_trailer">Side Kit Trailer</ng-option>
                  <ng-option value="specialized_trailer">Specialized Trailer</ng-option>
                  <ng-option value="enclosed_trailer">Enclosed Trailer</ng-option>
                  <ng-option value="scrap_trailer">Scrap Trailer</ng-option>
                  <ng-option value="semi_trailer">Semi Trailer</ng-option>
                  <ng-option value="chassis">Chassis</ng-option>
                  <ng-option value="tank_trailer">Tank Trailer</ng-option>
                  </ng-select>
                    <!-- <div class="text-danger" [class.d-none]="aSlt.valid || aSlt.untouched">select asset type</div> -->
                    <div *ngIf="aSlt.invalid && assetF.submitted" class="text-danger">
                        <div *ngIf="aSlt.errors.required">
                          Asset type is required.
                        </div>
                    </div>
                  </div>
                </div>
                <!-- <div class="row" id="reeferIftaDiv" *ngIf="assetsData.assetDetails.assetType == 'Reefer'">
                  <div class="col-lg-10 mt-2">
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" value="">
                        Is compliant for IFTA Reporting?
                      </label>
                    </div>
                  </div>
                </div> -->
                <div class="row mt-2">

                  <div class="col-lg-5">
                    <label class="control-label font-weight-bold text-lg-right pt-2">
                      Status<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                    <ng-select [clearable]="false" [(ngModel)]="assetsData.currentStatus" name="currentStatus"
                      placeholder="Select asset status" #sSlt="ngModel" required [ngClass]="{ 'error' : assetF.submitted && sSlt.invalid }">

                      <ng-option value="active">Active</ng-option>
                      <ng-option value="inactive">InActive</ng-option>

                    </ng-select>
                    <div *ngIf="sSlt.invalid && assetF.submitted" class="text-danger">

                        <div *ngIf="sSlt.errors.required">
                          Status is required.
                        </div>


                    </div>
                  </div>
                  <div class="col-lg-5" *ngIf="isRequired">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Year<span
                        class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                    <ng-select [(ngModel)]="assetsData.assetDetails.year" name="assetDetails.year"
                      class="form-control populate" placeholder="Select year" #ySlt="ngModel" required [ngClass]="{ 'error' : assetF.submitted && ySlt.invalid }" >

                      <ng-option *ngFor="let year of years;" value="{{year}}">{{year}}</ng-option>
                    </ng-select>
                    <div *ngIf="ySlt.invalid && assetF.submitted" class="text-danger">
                    <div *ngIf="ySlt.errors.required">
                          Year is required.
                        </div>


                    </div>

                  </div>
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Make</label>
                    <ng-select (change)="fetchModels()" [(ngModel)]="assetsData.assetDetails.manufacturer" name="assetDetails.manufacturer"
                      class="form-control"  placeholder="Select asset make">
                      <ng-option *ngFor="let item of manufacturers" id="{{item.manufacturerID}}"
                        value="{{item}}">{{item}}
                      </ng-option>
                    </ng-select>
                  </div>
                  <div class="col-lg-2  mar-top-37 pl-0">
                    <!-- <a href="javascript:;" data-toggle="modal" data-target="#addAssetMakeModal"
                      class="btn cus-btn-padd btn-success modal-with-form mr-1"><i class="fas fa-plus"></i></a> -->
                    <!-- <a class="modal-with-form btn cus-btn-padd btn-success text-light" (click)="getManufactures()" data-toggle="tooltip" href="javascript:;" title="Refresh manufacturers data"><i class="fas fa-sync"></i></a> -->
                  </div>
                  <div class="col-lg-10 ">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Model</label>
                    <ng-select  [(ngModel)]="assetsData.assetDetails.model"
                      name="model" class="form-control" id="assetSelect">

                        <ng-option *ngFor="let model of models"
                          value="{{model}}">{{model}}</ng-option>

                    </ng-select>
                  </div>
                  <div class="col-lg-2  mar-top-37 pl-0">
                    <!-- <a href="javascript:;" (click)="openProgram('models')"
                      class="btn cus-btn-padd btn-success modal-with-form mr-1"><i class="fas fa-plus"></i></a>
                    <a class="modal-with-form btn cus-btn-padd btn-success text-light" (click)="getModels()" data-toggle="tooltip" href="javascript:;" title="Refresh models data"><i class="fas fa-sync"></i></a> -->
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-lg-5">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Height</label>
                    <div class="row">
                      <div class="col-lg-6">
                      <input [(ngModel)]="assetsData.assetDetails.height" name="assetDetails.height" min="0" type="number"
                        class="form-control" placeholder="eg.170.4 inch or 14.2 feet" #heightTxt="ngModel">
                        <!-- <div *ngIf="heightTxt.invalid && (heightTxt.dirty || heightTxt.touched)" class="text-danger">

                            <div *ngIf="heightTxt.errors.required">
                            Height must contain numbers.
                            </div>


                        </div> -->
                      </div>
                      <div class="col-lg-6 pl-0">
                      <ng-select [(ngModel)]="assetsData.assetDetails.heightUnit" name="assetDetails.heightUnit"
                        placeholder="Select unit" #hName="ngModel"  >

                        <ng-option value="Feet">Feet</ng-option>
                        <ng-option value="Meter">Meter</ng-option>

                      </ng-select>
                      <!-- <div *ngIf="hName.invalid && (hName.dirty || hName.touched)" class="text-danger">
                      <div *ngIf="hName.errors.required">
                        Height type is required.
                      </div>
                      </div> -->
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Length</label>
                    <div class="row">
                      <div class="col-lg-6">
                        <input [(ngModel)]="assetsData.assetDetails.length" name="assetDetails.length" min="0" type="number"
                          class="form-control" placeholder="eg. 10â€“26 feet " #length="ngModel" >
                          <!-- <div *ngIf="length.invalid && (length.dirty || length.touched)" class="text-danger">

                              <div *ngIf="length.errors.required">
                               Length must contains numbers only.
                              </div>


                          </div> -->
                      </div>
                      <div class="col-lg-6 pl-0"> <div *ngIf="sSlt.invalid && (sSlt.dirty || sSlt.touched)" class="text-danger">
                      <div>

                      </div>

                    </div>
                        <ng-select [(ngModel)]="assetsData.assetDetails.lengthUnit" name="assetDetails.lengthUnit"
                          placeholder="Select unit" #lType="ngModel" >

                          <ng-option value="Feet">Feet</ng-option>
                          <ng-option value="Meters">Meters</ng-option>

                        </ng-select>
                        <!-- <div *ngIf="lType.invalid && (lType.dirty || lType.touched)" class="text-danger">
                          <div>
                            <div *ngIf="lType.errors.required">
                             Select Length Type.
                            </div>
                          </div>

                        </div> -->
                      </div>
                    </div>
                  </div>

                  <div class="col-lg-5">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Axles</label>
                    <ng-select [(ngModel)]="assetsData.assetDetails.axle" placeholder="eg. 5,10"
                      name="assetDetails.axle" >
                      <ng-option value="1">1</ng-option>
                      <ng-option value="2">2</ng-option>
                      <ng-option value="3">3</ng-option>
                      <ng-option value="4">4</ng-option>
                      <ng-option value="5">5</ng-option>
                      <ng-option value="6">6</ng-option>
                      <ng-option value="7">7</ng-option>
                      <ng-option value="8">8</ng-option>
                      <ng-option value="9">9</ng-option>
                      <ng-option value="10">10</ng-option>
                    </ng-select>
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-lg-5">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">GVWR <i
                        class="fas fa-exclamation-circle" data-toggle="tooltip" data-placement="top"
                        title="The Gross Vehicle Weight Rating is basically the maximum total safe weight of your vehicle"></i></label>
                    <div class="row">
                      <div class="col-lg-6">
                        <input  placeholder="eg. 6350 Kg or 14000 Pounds"[(ngModel)]="assetsData.assetDetails.GVWR" name="assetDetails.GVWR" type="text"
                          class="form-control" >
                          <!-- <div *ngIf="gvwr.invalid && (gvwr.dirty || gvwr.touched)" class="text-danger">


                              <div *ngIf="gvwr.errors.pattern">
                               GVWR must contain numbers.
                              </div>


                          </div> -->
                      </div>
                      <div class="col-lg-6 pl-0">
                        <ng-select [(ngModel)]="assetsData.assetDetails.GVWR_Unit" name="assetDetails.GVWR_Unit"
                          (change)="gwr($event, 'GVWR_Unit')" data-pluginng-selectTwo class="form-control populate"
                          placeholder="Select unit" #gvwrType="ngModel" >
                          <ng-option value="Pounds">Pounds</ng-option>
                          <ng-option value="Kilograms">Kilograms</ng-option>
                        </ng-select>
                        <!-- <div *ngIf="gvwrType.invalid && (gvwrType.dirty || gvwrType.touched)" class="text-danger">
                          <div>
                            <div *ngIf="gvwrType.errors.required">
                              Select Weight Type.
                             </div>

                          </div>

                        </div> -->
                      </div>
                    </div>
                  </div>

                  <div class="col-lg-5">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">GAWR <i
                        class="fas fa-exclamation-circle" data-toggle="tooltip" data-placement="top"
                        title="The Gross Axle Weight Rating is a unit that is applied to all kinds of vehicles esp vehicles that have multiple axles"></i>&nbsp;
                      </label>
                    <div class="row">
                      <div class="col-lg-6">
                        <input  placeholder="eg. 5669 kg or 1250 Pounds " [(ngModel)]="assetsData.assetDetails.GAWR" name="assetDetails.GAWR" type="text"
                          class="form-control" >
                          <!-- <div *ngIf="gawr.invalid && (gawr.dirty || gawr.touched)" class="text-danger">

                              <div *ngIf="gawr.errors.required">
                                GAWR must contain numbers only.
                               </div>
                               <div *ngIf="gawr.errors.pattern">
                                GAWR must contain numbers.
                               </div>



                          </div> -->
                      </div>
                      <div class="col-lg-6 pl-0">
                        <ng-select [(ngModel)]="assetsData.assetDetails.GAWR_Unit" name="assetDetails.GAWR_Unit"
                          class="form-control populate" (change)="gwr($event, 'GAWR_Unit')" placeholder="Select unit" #gawrType="ngModel"  >

                          <ng-option value="Pounds">Pounds</ng-option>
                          <ng-option value="Kilograms">Kilograms</ng-option>

                        </ng-select>
                        <!-- <div *ngIf="gawrType.invalid && (gawrType.dirty || gawrType.touched)" class="text-danger">

                          <div *ngIf="gawrType.errors.required">
                            Select Weight Type.
                           </div>




                      </div> -->

                      </div>
                    </div>
                  </div>
                </div>
               </div>
               <div class="col-lg-5 offset-lg-1 mb-3">
                <div class="row">
                  <div class="col-lg-5">
                    <label class="control-label font-weight-bold text-lg-right pt-2">Ownership</label>
                    <ng-select (change)="changeComp($event)" [(ngModel)]="assetsData.assetDetails.ownerShip" name="assetDetails.ownerShip"
                      placeholder="Select ownership" class="form-control populate">
                      <ng-option value="owned">Owned</ng-option>
                      <ng-option value="leased">Leased</ng-option>
                      <ng-option value="rented">Rented</ng-option>
                      <ng-option value="interchange">Interchange</ng-option>
                      <ng-option value="ownerOperator">Owner Operator</ng-option>
                    </ng-select>
                  </div>

                  <div class="col-lg-5" *ngIf="assetsData.assetDetails.ownerShip == 'rented'">
                    <label class="control-label font-weight-bold text-lg-right pt-2">Rented Company Name</label>

                    <input placeholder="Select Rented Company Name"[(ngModel)]="assetsData.assetDetails.rentCompany" name="assetDetails.rentCompany"
                      class="form-control populate " />
                  </div>
                  <div class="col-lg-5" *ngIf="assetsData.assetDetails.ownerShip == 'ownerOperator'">
                    <label class="control-label font-weight-bold text-lg-right pt-2">Owner Operator</label>

                    <ng-select placeholder="Select Owner Operator"[(ngModel)]="assetsData.assetDetails.ownerOperator" name="assetDetails.ownerOperator"
                      class="form-control populate ">
                      <ng-option *ngFor="let item of ownOperators" value="{{item.contactID}}">
                        {{item.companyName}}
                      </ng-option>

                    </ng-select>
                    <!-- <div *ngIf="sltO.invalid && (sltO.dirty || sltO.touched)" class="text-danger">
                      <div *ngIf="sltO.errors.required">
                        Select valid owner operator from the list is required.
                      </div>

                    </div> -->
                  </div>
                  <div class="col-lg-2  mar-top-37 pl-0" *ngIf="assetsData.assetDetails.ownerShip == 'ownerOperator'">
                    <a href="javascript:;" (click)="openModal('form');"
                      class="btn btn-sm btn-success modal-with-form mr-2"><i class="fas fa-plus"></i></a>
                    <a href="javascript:;" (click)="refreshOpData()"
                      data-toggle="tooltip" title="Refresh ownerOperator data"
                      class="btn btn-success btn-sm modal-with-form"><i
                          class="fas fa-sync"></i></a>
                  </div>
                </div>
                <div class="row mt-2" *ngIf="isRequired">
                  <div class="col-lg-5">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Licence
                      Country<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                    <ng-select [(ngModel)]="assetsData.assetDetails.licenceCountryCode"
                      name="assetDetails.licenceCountryCode" (change)="getStates($event)" placeholder="Select country"
                      class="form-control populate" #lcName="ngModel" required [ngClass]="{ 'error' : assetF.submitted && lcName.invalid }">
                      <!-- <ng-option *ngFor="let country of countries" value="{{country.countryID}}">
                        {{country.countryName}}
                      </ng-option> -->
                      <ng-option value="CA">Canada</ng-option>
                      <ng-option value="US">United States</ng-option>
                    </ng-select>
                    <div *ngIf="lcName.invalid && assetF.submitted" class="text-danger">
                        <div *ngIf="lcName.errors.required">
                          Licence country is required.
                        </div>
                    </div>
                  </div>
                  <div class="col-lg-5">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Licence Province/State<span
                        class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                    <ng-select [(ngModel)]="assetsData.assetDetails.licenceStateCode" name="assetDetails.licenceStateCode"
                      class="form-control populate" placeholder="Select Province/State" #lpName="ngModel" required
                      [ngClass]="{ 'error' : assetF.submitted && lpName.invalid }">
                      <ng-option *ngFor="let state of states" value="{{state.stateCode}}">
                        {{state.stateName}}
                      </ng-option>
                    </ng-select>
                    <div *ngIf="lpName.invalid && assetF.submitted" class="text-danger">
                        <div *ngIf="lpName.errors.required">
                          Licence province/state is required.
                        </div>
                    </div>
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Licence
                      Plate Number<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                    <input [(ngModel)]="assetsData.assetDetails.licencePlateNumber"
                      placeholder="eg. CAL 745" name="assetDetails.licencePlateNumber"
                      class="form-control placeholder-lowercase" type="text" maxlength="8" #pName="ngModel"
                      [ngClass]="{ 'error' : assetF.submitted && pName.invalid }" required pattern="^[a-zA-Z0-9\s]{6,8}$">
                      <div *ngIf="pName.invalid && assetF.submitted"  class="text-danger">
                        <div *ngIf="pName.errors.required">
                          Licence plate number is required.
                        </div>
                          <div *ngIf="pName.errors.pattern">
                            Licence plate number must be between 6-8 alphanumeric characters.
                          </div>
                      </div>
                  </div>
                </div>
                <div class="row mt-2" *ngIf="isRequired">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold text-lg-right pt-2">Annual Safety Date (Set
                      Reminder)<span class="mandfield text-1 ml-1"><sup>*</sup></span></label>
                    <input type="text" (click)="d11.toggle()" ngbDatepicker #d11="ngbDatepicker"
                      name="assetDetails.annualSafetyDate" placeholder="yyyy/mm/dd"[(ngModel)]="assetsData.assetDetails.annualSafetyDate"
                      class="form-control" #dSlt="ngModel" required [minDate]="dateMinLimit" [maxDate]="futureDatesLimit"
                       [ngClass]="{ 'error' : assetF.submitted && dSlt.invalid }">
                      <div *ngIf="dSlt.invalid && assetF.submitted" class="text-danger">
                          <div *ngIf="dSlt.errors.required">
                            Annual safety date is required.
                          </div>
                                                </div>

                    </div>
                  <div class="col-lg-10">
                    <div class="checkbox mt-1">
                      <label>
                        <input type="checkbox" name="annualSafetyReminder"
                          [(ngModel)]="assetsData.assetDetails.annualSafetyReminder" value="true">
                        Set Notification (30 Days Before Expiry)
                      </label>
                    </div>
                  </div>
                </div>

                <div class="row ">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Select
                      the Inspection Form<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                    <ng-select [(ngModel)]="assetsData.inspectionFormID" name="inspectionFormID" placeholder="Select inspection form" #iSlt="ngModel" required
                      [ngClass]="{ 'error' : assetF.submitted && iSlt.invalid }">
                      <ng-option *ngFor="let data of inspectionForms" value="{{ data.inspectionFormID }}"> {{
                        data.inspectionFormName }}</ng-option>
                    </ng-select>
                    <div *ngIf="iSlt.invalid && assetF.submitted" class="text-danger">

                        <div *ngIf="iSlt.errors.required">
                          Inspection form is required.
                        </div>


                    </div>
                  </div>
                  <div class="col-lg-2  mar-top-37 pl-0">
                    <a href="/#/compliance/dvir/inspection-add" target="_blank" class="modal-with-form cus-btn-padd btn btn-success"><i
                        class="fas fa-plus"></i></a>
                    <a (click)="getInspectionForms();"target="_blank" aria-hidden="true" class="ml-1 mmodal-with-form cus-btn-padd btn btn-success"><i style="color:#fff;"
                          class="fas fa-sync-alt"></i></a>
                  </div>
                </div>

                <div class="row mt-2">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Notes <span *ngIf="!isRequired"
                      class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                    <textarea [ngClass]="{ 'error' : assetF.submitted && aNotes.invalid }" [(ngModel)]="assetsData.assetDetails.remarks" name="assetDetails.remarks"
                      class="form-control h-auto" rows="3" placeholder="Enter notes about asset" #aNotes="ngModel"  [required]="!isRequired"></textarea>
                      <div *ngIf="aNotes.invalid && assetF.submitted" class="text-danger">
                        <div *ngIf="aNotes.errors.required">
                          Notes is required.
                        </div>
                        <div *ngIf="aNotes.errors.pattern">
                         Only 500 characters are allowed.
                        </div>

                     </div>
                  </div>
                </div>
               </div>
            </div>
           </div>
          </div>
         </div>

         <div class="row mb-3">
          <div class="col-lg-12">
           <div class="bg-white p-3 text-dark">
            <div class="form-group row adddriverpl pt-3">
               <div class="col-lg-10">
                <label class="control-label font-weight-bold font-weight-bold text-lg-right text-5">Insurance Details</label>
               </div>
               <div class="col-lg-5 mb-3">
                <div class="row ">
                  <div class="col-lg-5">
                    <label class="control-label font-weight-bold text-lg-right pt-2">Date of
                      Issue</label>
                    <input [(ngModel)]="assetsData.insuranceDetails.dateOfIssue" name="insuranceDetails.dateOfIssue"
                      type="text" placeholder="yyyy/mm/dd" (click)="d.toggle()" ngbDatepicker #d="ngbDatepicker"
                      class="form-control" [minDate]="dateMinLimit" [maxDate]="futureDatesLimit">

                  </div>
                  <div class="col-lg-5">
                    <label class="control-label font-weight-bold text-lg-right pt-2">Premium
                      Amount</label>
                    <div class="row">
                      <div class="col-lg-6">
                        <input [(ngModel)]="assetsData.insuranceDetails.premiumAmount"
                          name="insuranceDetails.premiumAmount" type="number" placeholder="eg. 100,200"
                          class="form-control" #preAmount="ngModel"  >
                          <!-- <div *ngIf="preAmount.invalid && (preAmount.dirty || preAmount.touched)" class="text-danger">
                            <div>
                              <div *ngIf="preAmount.errors.required">
                                Premium Amount must contain numbers only.
                              </div>

                            </div>

                          </div> -->
                      </div>
                      <div class="col-lg-6 pl-0">
                        <ng-select [(ngModel)]="assetsData.insuranceDetails.premiumCurrency"
                          name="insuranceDetails.premiumCurrency" placeholder="Select currency" #sltCurrency="ngModel">
                          <ng-option value="USD">USD</ng-option>
                          <ng-option value="CAD">CAD</ng-option>
                        </ng-select>
                        <!-- <div *ngIf="sltCurrency.invalid && (sltCurrency.dirty || sltCurrency.touched)" class="text-danger">
                          <div>
                            <div *ngIf="sltCurrency.errors.required">
                              Select Currency Type.
                            </div>

                          </div>

                        </div> -->
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row pt-2">
                  <div class="col-lg-5">
                    <label class="control-label font-weight-bold text-lg-right pt-2">Date of
                      Expiry</label>
                    <input [(ngModel)]="assetsData.insuranceDetails.dateOfExpiry" name="insuranceDetails.dateOfExpiry"
                      placeholder="yyyy/mm/dd" (click)="d1.toggle()" ngbDatepicker #d1="ngbDatepicker" type="text"
                      class="form-control" [minDate]="dateMinLimit" [maxDate]="futureDatesLimit">

                  </div>
                  <div class="col-lg-5">
                    <label class="control-label font-weight-bold text-lg-right pt-2">Reminder
                      Before Expiry</label>
                    <div class="row">
                      <div class="col-lg-6"><input [(ngModel)]="assetsData.insuranceDetails.reminderBefore"
                          name="insuranceDetails.reminderBefore" min="0" type="number" placeholder="eg. 5,10"
                          class="form-control" #reminder="ngModel" >
                          <!-- <div *ngIf="reminder.invalid && (reminder.dirty || reminder.touched)" class="text-danger">
                            <div>
                              <div *ngIf="reminder.errors.required">
                               Reminder must contains numbers only.
                              </div>

                            </div>

                          </div> -->
                      </div>
                      <div class="col-lg-6 pl-0">
                        <ng-select [(ngModel)]="assetsData.insuranceDetails.reminderBeforeUnit"
                          name="insuranceDetails.reminderBeforeUnit" placeholder="Select unit" #remType="ngModel" >

                          <ng-option value="Day(s)">Day(s)</ng-option>
                          <ng-option value="Week(s)">Week(s)</ng-option>
                          <ng-option value="Month(s)">Month(s)</ng-option>

                        </ng-select>
                        <!-- <div *ngIf="remType.invalid && (remType.dirty || remType.touched)" class="text-danger">
                          <div>
                            <div *ngIf="remType.errors.required">
                            Select Reminder Type.
                            </div>

                          </div>

                        </div> -->

                      </div>
                    </div>
                  </div>
                </div>
               </div>
               <div class="col-lg-5 offset-lg-1 mb-3">
                <div class="row">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold text-lg-right pt-2">Vendor</label>
                    <ng-select [(ngModel)]="assetsData.insuranceDetails.vendor" name="insuranceDetails.vendor"
                      placeholder="Select vendor" class="form-control populate" #vendorName="ngModel" >
                      <ng-option *ngFor="let vendor of vendors" value="{{vendor.contactID}}">
                        {{vendor.companyName}}
                      </ng-option>
                    </ng-select>
                    <!-- <div *ngIf="vendorName.invalid && (vendorName.dirty || vendorName.touched)" class="text-danger">
                      <div>
                        <div *ngIf="vendorName.errors.required">
                        Select Vendor.
                        </div>

                      </div>

                    </div> -->
                  </div>
                  <div class="col-lg-2  mar-top-37 pl-0">
                    <a href="javascript:;" (click)="openModal('form');"
                      class="btn btn-sm btn-success modal-with-form mr-1"><i class="fas fa-plus"></i></a>
                    <a href="javascript:;" (click)="refreshVendorData()"
                    data-toggle="tooltip" title="Refresh vendor data"
                    class="btn btn-success btn-sm modal-with-form"><i
                        class="fas fa-sync"></i></a>
                  </div>
                </div>
               </div>
            </div>
           </div>
          </div>
         </div>

         <div class="row mb-3">
          <div class="col-lg-12">
             <div class="bg-white p-3 text-dark">
                <div class="row adddriverpl pt-2">

                   <div class="col-lg-10">
                      <label class="control-label font-weight-bold  text-lg-right text-5 pt-2">Purchase
                         Detail</label>
                   </div>

                   <div class="col-lg-5 mb-3 pb-1">
                      <div class="d-flex">
                         <div class="col-lg-10 pl-0">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Purchase Vendor
                            </label>
                            <ng-select placeholder="Select Vendor" name="purchase.purchaseVendorID"
                               [(ngModel)]="assetsData.purchase.purchaseVendorID" placeholder="Select purchase vendor">
                               <ng-option *ngFor="let vendor of vendors" value="{{vendor.contactID}}">
                                  {{vendor.companyName}}</ng-option>
                            </ng-select>
                         </div>
                         <div class="col-lg-2  mar-top-37 pl-0">
                            <a href="javascript:;" (click)="openModal('form');"
                               class="btn cus-btn-padd btn-success modal-with-form mr-2" >
                               <em class="fas fa-plus"></em></a>
                               <a class="btn btn-success btn-sm modal-with-form" (click)="refreshVendorData()" data-toggle="tooltip" href="javascript:;" title="Refresh vendor data"><i class="fas fa-sync"></i></a>
                         </div>
                      </div>

                      <div class="row pr-3">
                         <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Purchase Price
                               </label>
                            <input class="form-control" name="purchase.purchasePrice" type="number" min="0"
                               [(ngModel)]="assetsData.purchase.purchasePrice" placeholder="eg. 10000 ">
                         </div>

                         <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">&nbsp;</label>
                            <ng-select class="form-control populate" name="purchase.purchasePriceCurrency"
                               [(ngModel)]="assetsData.purchase.purchasePriceCurrency" placeholder="Select currency">
                               <ng-option value="USD">USD</ng-option>
                               <ng-option value="CAD">CAD</ng-option>
                            </ng-select>
                         </div>
                         <div class="col-lg-2 mar-top-37 p-0">
                            <label class="mb-1 mt-2">
                               <input type="checkbox" checked name="purchase.gst"
                                  [(ngModel)]="assetsData.purchase.gstInc">
                               GST Included
                            </label>
                         </div>
                      </div>
                      <div class="row pr-3">
                         <div class="col-lg-10 ">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Purchase Date</label>
                            <input (click)="d7.toggle()" readonly ngbDatepicker #d7="ngbDatepicker" class="form-control"
                               Placeholder="yyyy/mm/dd" name="purchase.purchaseDate"
                               [(ngModel)]="assetsData.purchase.purchaseDate" [minDate]="dateMinLimit" [maxDate]="futureDatesLimit">
                         </div>
                      </div>
                      <div class="row pr-3">
                         <div class="col-lg-5 ">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Purchase Odometer in Miles
                               </label>
                            <input type="text" class="form-control" name="purchase.purchaseOdometer"
                               [(ngModel)]="assetsData.purchase.purchaseOdometer" placeholder="eg. 4500">
                         </div>
                         <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Add Purchase Document(s)</label>
                            <input (change)="selectDocuments($event, 'purchase')" name="purchaseDocs"
                               type="file" multiple class="form-control border-0 p-0">
                         </div>
                      </div>
                      <div class="row pr-3">
                         <div class="col-lg-10 mt-2 " *ngIf="pDocs.length > 0">
                            <div class="vehicle-common-box p-3">
                               <div class="row">
                                  <div class="col-lg-6"><label class="control-label font-weight-bold text-3">
                                        Document(s)</label></div>
                                  <div class="col-lg-6 text-right">
                                  </div>
                               </div>
                               <hr class="solid mt-2">
                               <div class="row mb-1" *ngFor="let item of pDocs;let d= index">
                                  <div class="col-lg-9"><a href="javascript:;" data-toggle="modal"
                                        data-target="#viewDocModal" (click)="setPDFSrc(item.path)">Document
                                        {{d+1}}</a> </div>
                                  <div class="col-lg-3 text-right">
                                     <i class="far fa-file text-dak mr-1" (click)="setPDFSrc(item.path)"
                                        data-toggle="modal" data-target="#viewDocModal"></i>
                                     <a href="javascript:;" (click)="deleteDocument('purchase', item.name)"
                                        class="modal-with-form"><i class="fas fa-times text-danger"></i></a>
                                  </div>
                               </div>
                            </div>
                         </div>
                      </div>

                   </div>

                   <div class="col-lg-5 offset-lg-1 mb-3 pb-1">
                      <div class="d-flex">
                         <div class="col-lg-7 pl-0">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Warranty Expiration
                               Date</label>
                            <input (click)="d6.toggle()" readonly ngbDatepicker #d6="ngbDatepicker" class="form-control"
                               Placeholder="yyyy/mm/dd" name="purchase.warrantyExpirationDate"
                               [(ngModel)]="assetsData.purchase.warrantyExpirationDate" [minDate]="dateMinLimit" [maxDate]="futureDatesLimit">
                         </div>
                         <div class="col-lg-3 text-right">
                            <label class="control-label font-weight-bold text-lg-right pt-2">&nbsp;</label>
                            <div class="checkbox mt-1">
                               <label>
                                  <input type="checkbox" name="purchase.warrantyExpirationDateReminder"
                                     [(ngModel)]="assetsData.purchase.warrantyExpirationDateReminder">
                                  Set Reminder (30 Days Before Expiry)
                               </label>
                            </div>
                         </div>
                      </div>
                      <div class="col-lg-10 pl-0 pr-1">
                         <label class="control-label font-weight-bold text-lg-right pt-2">Warranty Expiration
                            Meter
                            </label>
                         <input type="number" class="form-control" name="purchase.warrantyExpirationMeter"
                            min="0" [(ngModel)]="assetsData.purchase.warrantyExpirationMeter" placeholder="eg. 100 , 200">
                      </div>
                      <div class="col-lg-10 pl-0 pr-1">
                         <label class="control-label font-weight-bold text-lg-right pt-2">Purchase Comments
                            </label>
                         <textarea type="text" rows="3" class="form-control heighta"
                            name="purchase.purchaseComments" [(ngModel)]="assetsData.purchase.purchaseComments"
                            placeholder="Add comments about vehicle purchase" #pComments="ngModel"
                            pattern="^[\s\S]{1,500}$"></textarea>
                         <div *ngIf="pComments.invalid && (pComments.dirty || pComments.touched)"
                            class="text-danger">
                            <div *ngIf="pComments.errors.pattern">
                               Only 500 characters are allowed.
                            </div>

                         </div>
                      </div>
                   </div>
                </div>
             </div>
          </div>
         </div>

        <div class="row mb-3">
          <div class="col-lg-12">
            <div class="bg-white p-3 text-dark">
                <div class="row adddriverpl pt-2">

                  <div class="col-lg-10">
                      <label class="control-label font-weight-bold  text-lg-right text-5 pt-2">Loan
                        Detail</label>
                  </div>

                  <div class="col-lg-5 mb-3 pb-1">
                      <div class="row">
                        <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Loan Vendor</label>
                            <ng-select placeholder="Select Vendor" name="loan.loanVendorID"
                              [(ngModel)]="assetsData.loan.loanVendorID">
                              <ng-option *ngFor="let vendor of vendors" value="{{vendor.contactID}}">
                                  {{vendor.companyName}}
                              </ng-option>
                            </ng-select>
                        </div>
                        <div class="col-lg-2  mar-top-37 pl-0">
                            <a href="javascript:;" (click)="openModal('form');"
                              class="btn cus-btn-padd btn-success modal-with-form mr-2" >
                              <em class="fas fa-plus"></em></a>
                              <a class="btn btn-success btn-sm modal-with-form" (click)="refreshVendorData()" data-toggle="tooltip" href="javascript:;" title="Refresh vendor data"><i class="fas fa-sync"></i></a>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Amount of Loan
                              </label>
                            <div class="row">
                              <div class="col-lg-6">
                                  <input type="number" min="0" class="form-control" name="loan.amountOfLoan"
                                    [(ngModel)]="assetsData.loan.amountOfLoan" placeholder="eg. 10000, 20000">
                              </div>
                              <div class="col-lg-6">
                                  <ng-select class="form-control populate" name="loan.amountOfLoanCurrency"
                                    [(ngModel)]="assetsData.loan.amountOfLoanCurrency" placeholder="Select currency">
                                    <optgroup label="">
                                        <ng-option value="USD">USD</ng-option>
                                        <ng-option value="CAD">CAD</ng-option>
                                    </optgroup>
                                  </ng-select>
                              </div>
                            </div>

                        </div>
                        <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Annual % Rate</label>
                            <input type="number" min="0" class="form-control" name="loan.annualPercentageRate"
                              [(ngModel)]="assetsData.loan.annualPercentageRate" placeholder="eg. 2,3">
                        </div>
                        <div class="col-lg-2 mar-top-37 p-0">
                            <label class="mb-1 mt-2">
                              <input type="checkbox" checked name="loan.gst"
                                  [(ngModel)]="assetsData.loan.gstInc">
                              GST Included
                            </label>
                        </div>
                        <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Down Payment</label>
                            <div class="row">
                              <div class="col-lg-6">
                                  <input type="number" min="0" class="form-control" name="loan.downPayment"
                                    [(ngModel)]="assetsData.loan.downPayment" placeholder="eg. 5000 ">
                              </div>
                              <div class="col-lg-6">
                                  <ng-select class="form-control populate" name="loan.downPaymentCurrency"
                                    [(ngModel)]="assetsData.loan.downPaymentCurrency" placeholder="Select currency">
                                    <optgroup label="">
                                        <ng-option value="USD">USD</ng-option>
                                        <ng-option value="CAD">CAD</ng-option>
                                    </optgroup>
                                  </ng-select>
                              </div>
                            </div>
                        </div>

                        <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Date of Loan</label>
                            <input (click)="d8.toggle()" readonly ngbDatepicker #d8="ngbDatepicker" class="form-control"
                              Placeholder="yyyy/mm/dd" name="loan.dateOfLoan" [(ngModel)]="assetsData.loan.dateOfLoan" [minDate]="dateMinLimit" [maxDate]="futureDatesLimit">
                        </div>
                        <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Loan End Date</label>
                            <input (click)="d9.toggle()" readonly ngbDatepicker #d9="ngbDatepicker" class="form-control"
                              Placeholder="yyyy/mm/dd" name="loan.loadEndDate" [(ngModel)]="assetsData.loan.loadEndDate" [minDate]="dateMinLimit" [maxDate]="futureDatesLimit">
                        </div>
                        <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Loan Due Date</label>
                            <input (click)="d10.toggle()" readonly ngbDatepicker #d10="ngbDatepicker" class="form-control"
                              Placeholder="yyyy/mm/dd" name="loan.loanDueDate" [(ngModel)]="assetsData.loan.loanDueDate" [minDate]="dateMinLimit" [maxDate]="futureDatesLimit">
                        </div>
                        <div class="col-lg-2 px-0 pt-4">
                            <div class="checkbox mt-0">
                              <label class="m-0">
                                  <input type="checkbox" name="loan.lReminder"
                                    [(ngModel)]="assetsData.loan.lReminder">
                                  Set Reminder (7 Days Before Due)
                              </label>
                            </div>
                        </div>
                        <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Add Loan Document(s)</label>
                            <input (change)="selectDocuments($event, 'loan')" name="loanDocs"
                              type="file" multiple class="form-control border-0 p-0">
                        </div>
                        <div class="col-lg-10 mt-2" *ngIf="lDocs.length > 0">
                            <div class="vehicle-common-box p-3">
                              <div class="row">
                                  <div class="col-lg-6"><label class="control-label font-weight-bold text-3">
                                        Document(s)</label></div>
                                  <div class="col-lg-6 text-right">
                                  </div>
                              </div>
                              <hr class="solid mt-2">
                              <div class="row mb-1" *ngFor="let item of lDocs;let d= index">
                                  <div class="col-lg-9"><a href="javascript:;" data-toggle="modal"
                                        data-target="#viewDocModal" (click)="setPDFSrc(item.path)">Document
                                        {{d+1}}</a> </div>
                                  <div class="col-lg-3 text-right">
                                    <i class="far fa-file text-dak mr-1" (click)="setPDFSrc(item.path)"
                                        data-toggle="modal" data-target="#viewDocModal"></i>
                                    <a href="javascript:;" (click)="deleteDocument('loan', item.name)"
                                        class="modal-with-form"><i class="fas fa-times text-danger"></i></a>
                                  </div>
                              </div>
                            </div>
                        </div>
                      </div>
                  </div>
                  <div class="col-lg-5 offset-lg-1 mb-3 pb-1">
                      <div class="row">
                        <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Number of Payments
                              </label>
                            <input type="number" min="0" class="form-control" name="loan.numberOfPayments"
                              [(ngModel)]="assetsData.loan.numberOfPayments" placeholder="eg. 10,20">
                        </div>

                        <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Monthly Payment
                              </label>
                            <div class="row">
                              <div class="col-lg-6">
                                  <input type="number" min="0" class="form-control" name="loan.monthlyPayment"
                                    [(ngModel)]="assetsData.loan.monthlyPayment" placeholder="eg. 1000, 2000">
                              </div>
                              <div class="col-lg-6">
                                  <ng-select class="form-control populate" name="loan.monthlyPaymentCurrency"
                                    [(ngModel)]="assetsData.loan.monthlyPaymentCurrency" placeholder="Select currency">
                                    <optgroup label="">
                                        <ng-option value="USD">USD</ng-option>
                                        <ng-option value="CAD">CAD</ng-option>
                                    </optgroup>
                                  </ng-select>
                              </div>
                            </div>
                        </div>
                        <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Notes</label>
                            <textarea class="form-control heighta" rows="3" name="loan.notes"
                              [(ngModel)]="assetsData.loan.notes" placeholder="Enter notes about the loan of vehicle"
                              #notes3="ngModel" pattern="^[\s\S]{1,500}$"></textarea>
                            <div *ngIf="notes3.invalid && (notes3.dirty || notes3.touched)" class="text-danger">
                              <div *ngIf="notes3.errors.pattern">
                                  Only 500 characters are allowed.
                              </div>

                            </div>
                        </div>
                      </div>
                  </div>
                </div>

            </div>
          </div>
      </div>
         <div class="row mb-3">
          <div class="col-lg-12">
           <div class="bg-white p-3 text-dark">
            <div class="form-group row adddriverpl pt-3">
               <div class="col-lg-10">
                <label class="control-label font-weight-bold font-weight-bold text-lg-right text-5">Cross Border Details</label>
               </div>
               <div class="col-lg-5 mb-3">
                <div class="row pt-2">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">ACI
                      ID</label>
                    <input [(ngModel)]="assetsData.crossBorderDetails.ACI_ID" name="ACI_ID"
                      placeholder="10 digits , eg. 4567895676" type="text" class="form-control" >
                      <!-- <div *ngIf="aciIdName.invalid && (aciIdName.dirty || aciIdName.touched)" class="text-danger">
                        <div>

                          <div *ngIf="aciIdName.errors.pattern">
                           ACI ID must contain 10 numbers eg.4567895676
                           </div>
                        </div>

                      </div> -->
                  </div>

                </div>
               </div>
               <div class="col-lg-5 offset-lg-1 mb-3">
                <div class="row pt-2">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">ACE
                      ID</label>
                    <input [(ngModel)]="assetsData.crossBorderDetails.ACE_ID" name="ACE_ID"
                      placeholder="10 digits , eg. 4567895676" type="text" class="form-control">
                      <!-- <div *ngIf="aceIdName.invalid && (aceIdName.dirty || aceIdName.touched)" class="text-danger">
                        <div>

                          <div *ngIf="aceIdName.errors.pattern">
                           ACE ID must contain 10 numbers eg.4567895676
                           </div>
                        </div>

                      </div> -->
                  </div>

                </div>
               </div>
            </div>
           </div>
          </div>
         </div>

         <div class="row mb-3">
          <div class="col-lg-12">
           <div class="bg-white p-3 text-dark">
            <div class="form-group row adddriverpl pt-3">
               <div class="col-lg-10">
                <label class="control-label font-weight-bold font-weight-bold text-lg-right text-5">Additional Details</label>
               </div>
               <div class="col-lg-5 mb-3">
                <div class="row pt-2">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Attach
                      Photo</label>
                    <input (change)="selectDocuments($event, 'uploadedPhotos')" name="uploadedPhotos" type="file"
                      multiple class="form-control p-0">
                  </div>

                </div>
                <div class="row mt-2" *ngIf='assetsImages?.length > 0'>
                  <div class="col-lg-5" *ngFor="let photo of assetsImages;let i= index">
                    <div class="vehicle-photo-box">
                      <img src="{{photo.path}}" width="100%" class="img-fluid"
                        style="height: 180px; object-fit: cover;">
                      <hr class="m-3">
                      <div class="row">
                        <div class="col-lg-8">Image {{i+1}}</div>
                        <div class="col-lg-4 text-right">
                          <a href="javascript:;"  class="modal-with-form">
                            <i class="fas fa-times text-danger" (click)="deleteDocument('image',photo.name)"></i>
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
               </div>
               <div class="col-lg-5 offset-lg-1 mb-3">
                <div class="row pt-2">
                  <div class="col-lg-10">
                    <label class="control-label font-weight-bold font-bold text-lg-right pt-2">Attach
                      Document</label>
                    <input (change)="selectDocuments($event, 'uploadedDocs')" name="uploadedDocs" type="file" multiple
                      class="form-control p-0">
                  </div>
                </div>

                <div class="row mt-2" *ngIf="assetsDocs?.length > 0">
                  <div class="col-lg-10">
                    <div class="vehicle-common-box p-3">
                      <div class="row">
                        <div class="col-lg-6"><label class="control-label font-weight-bold text-3">Document(s)</label>
                        </div>
                        <div class="col-lg-6 text-right">
                        </div>
                      </div>
                      <hr class="solid mt-2">
                      <div class="row mb-1" *ngFor="let doc of assetsDocs;let d= index">
                        <div class="col-lg-9"><a href="javascript:;" data-toggle="modal" data-target="#viewDocModal"
                            (click)="setPDFSrc(doc.path)">Document {{d+1}}</a> </div>
                        <div class="col-lg-3 text-right">
                          <i class="far fa-file text-dak mr-1" (click)="setPDFSrc(doc.path)" data-toggle="modal"
                            data-target="#viewDocModal"></i>
                          <a href="javascript:;" (click)="deleteDocument('doc',doc.name)" class="modal-with-form"><i
                              class="fas fa-times text-danger"></i></a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
               </div>
            </div>

            <div class="form-group adddriverpl row">
              <div class="col-lg-11 text-right pb-3">
                <div class="row">

                  <div class="col-12">
                    <div class="row">
                      <div class="col-11 pr-0">
                        <button type="button" (click)="cancel()" class="btn cus-btn-padd btn-default mr-2">Cancel</button>
                        <button type="submit" *ngIf="!assetID" [disabled]="submitDisabled" class="cus-btn-padd btn btn-success" >Save</button>
                        <button type="submit"  *ngIf="assetID" [disabled]="submitDisabled" class="btn cus-btn-padd btn-success" >Update</button>
                        <!-- if there is some error in validation  -->

                        <!-- <button [disabled]="!assetF.form.valid" *ngIf="!assetID && !assetF.form.valid"
                        (click)="addAsset()" class="btn cus-btn-padd btn-success" id="nextBtn">Save</button> -->

                        <!-- if validations are ok and now the button will disable on submit click  -->

                      <!-- <button [disabled]="submitDisabled" *ngIf="!assetID && assetF.form.valid" (click)="addAsset()"
                        class="btn cus-btn-padd btn-success" id="nextBtn">Save</button> -->

                        <!-- update case -->
                      <!-- <button [disabled]="!assetF.form.valid" *ngIf="assetID && !assetF.form.valid"
                        (click)="updateAsset()" class="btn cus-btn-padd btn-success">Update</button>
                      <button [disabled]="submitDisabled" *ngIf="assetID && assetF.form.valid"
                        (click)="updateAsset()" class="btn cus-btn-padd btn-success">Update</button> -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>


           </div>
          </div>
         </div>

      </form>
     </section>



    </section>
  </div>
</section>
<!-- GROUP MODAL -->
<div class="modal fade" id="addGroupModal" tabindex="-1" role="dialog" aria-labelledby="addGroupModal"
  aria-hidden="true" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 600px;" role="document">
    <div class="modal-content">
      <form id="groupForm" class="form-horizontal form-bordered bg-white" method="get" name="form" #groupForm="ngForm"
       (ngSubmit)="groupForm.form.valid && addGroup()" novalidate>
      <div class="modal-header">
        <h5 class="modal-title">Add Group</h5>
        <button type="button" (click)="clearAssetGroup()" class="close" data-dismiss="modal" aria-label="Close">
          <i class="far fa-window-close modal-dismiss" style="font-size:25px;"> </i>
        </button>
      </div>
      <div class="modal-body text-dark">
        <div class="card-body p-0">
            <div class="form-row">
              <div class="col-lg-12">
                <label class="control-label font-weight-bold">Group Name <span
                  class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                <input [(ngModel)]="groupData.groupName" name="groupName" type="text" placeholder="Enter group name"
                  class="form-control" #aAsset="ngModel" required pattern="^[a-zA-Z\s]+$"
                  [ngClass]="{ 'error' : groupForm.submitted && aAsset.invalid }">
                  <div *ngIf="aAsset.invalid && groupForm.submitted" class="text-danger">
                    <div *ngIf="aAsset.errors.required">
                      Group name is required.
                    </div>
                    <div *ngIf="aAsset.errors.pattern">
                        Group name must contain letters.
                    </div>
                  </div>
              </div>
            </div>
            <div class="form-row mt-2">
              <div class="col-lg-12">
                <label class="control-label font-weight-bold">Group Members</label>
                <ng-select [multiple]=true [(ngModel)]="groupData.groupMembers" name="groupMembers"
                  placeholder="Select group members" style="width: 100%;">
                  <ng-option *ngFor="let item of allAssets;" value={{item.assetID}}>
                    {{item.assetIdentification}}</ng-option>
                </ng-select>
              </div>
            </div>
            <div class="form-row mt-2">
              <div class="col-lg-12">
                <label class="control-label font-weight-bold text-lg-right">Description</label>
                <textarea [(ngModel)]="groupData.description" name="description" class="form-control heighta" rows="4"
                  id="comment" placeholder="Enter group description" #desName246="ngModel"
                  pattern="^[\s\S]{1,500}$"></textarea>
                  <div *ngIf="desName246.invalid && (desName246.dirty || desName246.touched)" class="text-danger">
                    <div *ngIf="desName246.errors.pattern">
                      Only 500 characters are allowed.
                    </div>
                  </div>
              </div>
            </div>
        </div>
      </div>
      <div class="modal-footer text-right">
        <a class="btn btn-default" data-dismiss="modal">Cancel</a>
        <button type="submit" class="btn btn-success" [disabled]="groupSubmitDisabled">Save</button>
      </div>
    </form>
    </div>
  </div>
</div>

<!-- VIEW DOCUMENT MODAL -->
<div class="modal fade" id="viewDocModal" tabindex="-1" role="dialog" aria-labelledby="viewDocModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewDocModalLabel">View Document</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <div class="form-group col-md-12">
            <div>
              <iframe [src]='pdfSrc' frameborder="0" width="100%" height="400px"> </iframe>

            </div>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>
