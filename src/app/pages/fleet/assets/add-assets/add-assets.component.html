<!-- <ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "default" color = "#fff" type = "ball-clip-rotate"><p style="color: white" > Loading... </p></ngx-spinner> -->
<section class="body">
	<!-- start: header -->
	<app-header></app-header>

	<!-- end: header -->

	<div class="inner-wrapper">
		<!-- start: sidebar -->
		<app-sidebar></app-sidebar>
		<!-- end: sidebar -->
		<section role="main" class="content-body pl-0 pr-0 pt-0">
			<header class="page-header pr-5">
				<div class="row pr-1 mr-1" style="padding-top:10px;">
					<div class="col-md-4 col-lg-4"><h4 class="text-4 font-weight-bold mt-0 mb-0 text-dark">{{pageTitle}}</h4> </div>
					<div class="col-md-8 col-lg-8 text-right pr-1"> <a routerLink="/fleet/assets/list"
							class="btn btn-default btn-sm"><i class="fas fa-list"></i> Assets List</a> </div>
				</div>
			</header>
			<div class="row">
				<div class="col pr-0">
					<div class="card-body text-dark">
						<form class="form-horizontal form-bordered" method="get" name="form" id="form_">
							<div class=" row">
								<div class="col-lg-12">
									<label
										class="control-label font-weight-bold font-bold text-lg-right text-dark text-4 font-weight-bold pt-2">Basic
										Details</label>
								</div>
								<div class="col-lg-5 offset-lg-1">
									<div class="row">
										<div class="col-lg-10">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">Asset
												Name/Number</label>
											<input type="text" [(ngModel)]="assetsData.assetIdentification" name="assetIdentification"
                        class="form-control"> 
                    </div>
                    <div class="col-lg-10">
                      <label
                       class="control-label font-weight-bold pt-2 font-weight-bold text-lg-right"
                       >Group</label>
 
 
                          <select
                           data-plugin-selectTwo
                           class="form-control populate"
                           [(ngModel)]="assetsData.groupID"
                           name="groupID"
                           >
                           <optgroup label="">
                           <option *ngFor="let group of groups" value="{{group.groupID}}">{{group.groupName}}</option>
                           </optgroup>
                          </select>
 
 
 
                     </div>
                     <div class="col-lg-1 mar-top-37  pl-0">
                     <a data-toggle="modal" data-target="#addGroupModal"  href="javascript:;" class="modal-with-form btn btn-sm btn-success"><i class="fas fa-plus"></i></a>
                    </div>
									</div>
								</div>
								<div class="col-lg-5 offset-lg-1">
									<div class="row">
										<div class="col-lg-10">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">VIN</label>
											<input type="text" [(ngModel)]="assetsData.VIN" name="VIN" class="form-control"> </div>
									</div>
								</div>
							</div>
							<div class=" row pt-3">
								<div class="col-lg-12">
									<label
										class="control-label font-weight-bold font-bold text-lg-right text-dark text-4 font-weight-bold pt-2">Asset
										Details</label>
								</div>
								<div class="col-lg-5 offset-lg-1">
									<div class="row">
										<div class="col-lg-5">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">Asset
												Type</label>
											<select data-plugin-selectTwo [(ngModel)]="assetsData.assetDetails.assetType" name="assetDetails.assetType" class="form-control populate" id="assetType" >
												<optgroup label="">
                          <option *ngFor="let type of allAssetTypes;" value="{{type.code}}">{{type.description}}</option>
                        </optgroup>
											</select>
										</div>
										<div class="col-lg-5">
											<label class="control-label font-weight-bold text-lg-right pt-2">Asset Status</label>
											<select [(ngModel)]="assetsData.assetDetails.currentStatus" name="assetDetails.currentStatus" data-plugin-selectTwo class="form-control populate">
												<optgroup label="">
													<option value="Active">Active</option>
													<option value="Inactive">InActive</option>
												</optgroup>
											</select>
										</div>
									</div>
									<div class="row" id="reeferIftaDiv" *ngIf="assetsData.assetDetails.assetType == 'Reefer'">
										<div class="col-lg-10 mt-2">
											<div class="checkbox">
												<label>
													<input type="checkbox" value="">
													Is compliant for IFTA Reporting?
												</label>
											</div>
										</div>
									</div>
									<div class="row mt-2">
										<div class="col-lg-3">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">Year</label>
											<select [(ngModel)]="assetsData.assetDetails.year" name="assetDetails.year" data-plugin-selectTwo class="form-control populate">
												<optgroup label="">
													<option value="2020">2020</option>
													<option value="2019">2019</option>
													<option value="2018">2018</option>
													<option value="2017">2017</option>
													<option value="2016">2016</option>
													<option value="2015">2015</option>
												</optgroup>
											</select>
										</div>
										<div class="col-lg-4 pl-0">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">Make</label>
											<select 
												data-plugin-selectTwo
												[(ngModel)]="assetsData.assetDetails.manufacturer" 
												name="assetDetails.manufacturer" 
												class="form-control"
												(change)="getModels($event)">
												<option *ngFor="let item of manufacturers" id="{{item.manufacturerID}}" value="{{item.name}}">{{item.name}}</option>
											</select> 
										</div>
										<div class="col-lg-3 pl-0">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">Model</label>
											<select 
											data-plugin-selectTwo
											[(ngModel)]="assetsData.assetDetails.model" 
											name="assetDetails.model" 
											class="form-control">
											<option *ngFor="let val of models" value="{{val.name}}">{{val.name}}</option>
											</select> 
										</div>
									</div>
									<div class="row mt-2">
										<div class="col-lg-5">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">Length</label>
											<div class="row">
												<div class="col-lg-6">
													<input [(ngModel)]="assetsData.assetDetails.length" name="assetDetails.length" type="number" class="form-control"> </div>
												<div class="col-lg-6 pl-0">
													<select [(ngModel)]="assetsData.assetDetails.lengthUnit" name="assetDetails.lengthUnit" data-plugin-selectTwo class="form-control populate">
														<optgroup label="">
															<option value="Feet">Feet</option>
															<option value="Meters">Meters</option>
														</optgroup>
													</select>
												</div>
											</div>
										</div>
										<div class="col-lg-5">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">Axles</label>
											<select [(ngModel)]="assetsData.assetDetails.axle" name="assetDetails.axle" data-plugin-selectTwo class="form-control populate">
												<optgroup label="">
													<option value="1">1</option>
													<option value="2">2</option>
													<option value="3">3</option>
													<option value="4">4</option>
													<option value="5">5</option>
													<option value="6">6</option>
													<option value="7">7</option>
													<option value="8">8</option>
													<option value="9">9</option>
													<option value="10">10</option>
												</optgroup>
											</select>
										</div>
									</div>
									<div class="row mt-2">
										<div class="col-lg-5">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">GVWR</label>
											<div class="row">
												<div class="col-lg-6">
													<input [(ngModel)]="assetsData.assetDetails.GVWR" name="assetDetails.GVWR" type="text" class="form-control"> </div>
												<div class="col-lg-6 pl-0">
													<select 
														[(ngModel)]="assetsData.assetDetails.GVWR_Unit" 
                            name="assetDetails.GVWR_Unit" 
                            (change)="gwr($event.target.value, 'GVWR_Unit')"
														data-plugin-selectTwo 
														class="form-control populate">
														<optgroup label="">
															<option value="Pounds">Pounds</option>
															<option value="Kilograms">Kilograms</option>
														</optgroup>
													</select>
												</div>
											</div>
										</div>
										
										<div class="col-lg-5">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">GAWR</label>
											<div class="row">
												<div class="col-lg-6">
													<input [(ngModel)]="assetsData.assetDetails.GAWR" name="assetDetails.GAWR" type="text" class="form-control"> </div>
												<div class="col-lg-6 pl-0">
                          <select 
                            [(ngModel)]="assetsData.assetDetails.GAWR_Unit" 
                            name="assetDetails.GAWR_Unit" 
                            data-plugin-selectTwo 
                            class="form-control populate"
                            (change)="gwr($event.target.value, 'GAWR_Unit')"
                            >
														<optgroup label="">
															<option value="Pounds">Pounds</option>
															<option value="Kilograms">Kilograms</option>
														</optgroup>
													</select>
												</div>
											</div>
										</div>
									</div>


								</div>
								<div class="col-lg-5 offset-lg-1">
									<div class="row">
										<div class="col-lg-5">
											<label
												class="control-label font-weight-bold text-lg-right pt-2">Ownership</label>
											<select [(ngModel)]="assetsData.assetDetails.ownerShip" name="assetDetails.ownerShip" data-plugin-selectTwo class="form-control populate">
												<optgroup label="">
													<option value="Owned">Owned</option>
													<option value="Leased">Leased</option>
													<option value="Rented">Rented</option>
													<option value="Customer">Customer</option>
												</optgroup>
											</select>
										</div>


									</div>
									<div class="row mt-2">
										<div class="col-lg-5">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">Licence Country</label>
                        <select 
                          [(ngModel)]="assetsData.assetDetails.licenceCountryID" 
                          name="assetDetails.licenceCountryID"
                          (change)="getStates()"
                          class="form-control populate"
                        >	
                        <option *ngFor="let country of countries"
                          value="{{country.countryID}}"
                        >
                        {{country.countryName}}
                        </option>	
                      </select>
											
                    </div>
                    <div class="col-lg-5">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">Licence State/Province</label>
                        <select 
                          [(ngModel)]="assetsData.assetDetails.licenceStateID" 
                          name="assetDetails.licenceStateID"
                          class="form-control populate"
                        >		
                        <option *ngFor="let state of states"
                          value="{{state.stateID}}"
                        >
                        {{state.stateName}}
                        </option>	
                      </select>
											
										</div>
									</div>
									<div class="row mt-2">
										<div class="col-lg-10">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">Licence Plate Number</label>
											<input [(ngModel)]="assetsData.assetDetails.licencePlateNumber" name="assetDetails.licencePlateNumber" class="form-control" type="text"> </div>
									</div>
									<div class="row mt-2">
										<div class="col-lg-10">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">Notes</label>
											<textarea [(ngModel)]="assetsData.assetDetails.remarks" name="assetDetails.remarks" class="form-control" rows="3"></textarea>
										</div>
									</div>
								</div>
							</div>
							<!-- Insurance details -->
							<div class="row pt-3">
								<div class="col-lg-12">
									<label
										class="control-label font-weight-bold font-weight-bold text-lg-right text-4 pt-2">Insurance Details</label>
								</div>
								<div class="col-lg-5 offset-lg-1">
									<div class="row ">
										<div class="col-lg-5">
											<label class="control-label font-weight-bold text-lg-right pt-2">Date of Issue</label>
                      <input 
                        [(ngModel)]="assetsData.insuranceDetails.dateOfIssue" name="insuranceDetails.dateOfIssue" 
                        type="text" 
                        placeholder="DD/MM/YYYY"
                        (click)="d.toggle()" ngbDatepicker #d="ngbDatepicker"
                        class="form-control"> 
                      </div>
										<div class="col-lg-5">
											<label class="control-label font-weight-bold text-lg-right pt-2">Premium Amount</label>
											<div class="row">
												<div class="col-lg-6">
													<input [(ngModel)]="assetsData.insuranceDetails.premiumAmount" name="insuranceDetails.premiumAmount" type="text" class="form-control">
												</div>
												<div class="col-lg-6 pl-0">
													<select [(ngModel)]="assetsData.insuranceDetails.premiumCurrency" name="insuranceDetails.premiumCurrency" data-plugin-selectTwo class="form-control populate">
														<optgroup label="">
															<option value="USD">USD</option>
															<option value="CAD">CAD</option>
														</optgroup>
													</select>
												</div>
											</div>
										</div>
									</div>
									<div class="row pt-2">
										<div class="col-lg-5">
											<label class="control-label font-weight-bold text-lg-right pt-2">Date of Expiry</label>
                      <input 
                        [(ngModel)]="assetsData.insuranceDetails.dateOfExpiry" 
                        name="insuranceDetails.dateOfExpiry" 
                        placeholder="DD/MM/YYYY"
                        (click)="d1.toggle()" ngbDatepicker #d1="ngbDatepicker"
                        type="text" class="form-control">
										</div>
										<div class="col-lg-5">
											<label class="control-label font-weight-bold text-lg-right pt-2">Reminder Before Expiry</label>
											<div class="row">
												<div class="col-lg-6"><input [(ngModel)]="assetsData.insuranceDetails.reminderBefore" name="insuranceDetails.reminderBefore" type="number" class="form-control">
												</div>
												<div class="col-lg-6 pl-0">
													<select [(ngModel)]="assetsData.insuranceDetails.reminderBeforeUnit" name="insuranceDetails.reminderBeforeUnit" data-plugin-selectTwo class="form-control populate">
														<optgroup label="">
															<option value="Day(s)">Day(s)</option>
															<option value="Week(s)">Week(s)</option>
															<option value="Month(s)">Month(s)</option>
														</optgroup>
													</select>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-lg-5 offset-lg-1">
									<div class="row">
										<div class="col-lg-10">
											<label
												class="control-label font-weight-bold text-lg-right pt-2">Vendor</label>
											<select [(ngModel)]="assetsData.insuranceDetails.vendor" name="insuranceDetails.vendor" data-plugin-selectTwo class="form-control populate">
												<optgroup label="">
													<option 
														*ngFor="let vendor of vendors" 
														value="{{vendor.vendorName}}">
														{{vendor.vendorName}}
													</option>
												</optgroup>
											</select>
										</div>
										<div class="col-lg-2  mar-top-37">
											<a href="javascript:;" data-toggle="modal" data-target="#addVendorModal" class="btn btn-sm btn-success modal-with-form"><i
													class="fas fa-plus"></i></a>
										</div>
									</div>
								</div>
							</div>
							<div class="form-group pt-3 row">
								<div class="col-lg-12">
									<label
										class="control-label font-weight-bold font-bold text-lg-right text-dark text-4  pt-2">Cross
										Border Details</label>
								</div>
								<div class="col-lg-5 offset-lg-1">
									<div class="row pt-2">
										<div class="col-lg-10">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">ACI
												ID</label>
											<input [(ngModel)]="assetsData.crossBorderDetails.ACI_ID" name="ACI_ID" type="text" class="form-control">
										</div>

									</div>
								</div>
								<div class="col-lg-5 offset-lg-1">
									<div class="row pt-2">
										<div class="col-lg-10">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">ACE
												ID</label>
											<input [(ngModel)]="assetsData.crossBorderDetails.ACE_ID" name="ACE_ID" type="text"  class="form-control"> </div>

									</div>
								</div>
							</div>
							<div class="form-group pt-3 row">
								<div class="col-lg-12">
									<label
										class="control-label font-weight-bold font-bold text-lg-right text-dark text-4  pt-2">Additional
										Details</label>
								</div>
								<div class="col-lg-5 offset-lg-1">
									<div class="row pt-2">
										<div class="col-lg-10">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">Attach Photo</label>
											<input (change)="selectDocuments($event, 'uploadedPhotos')" name="uploadedPhotos" type="file" multiple class="form-control border-0 p-0"> 
										</div>
										
									</div>
								</div>
								<div class="col-lg-5 offset-lg-1">
									<div class="row pt-2">
										<div class="col-lg-10">
											<label
												class="control-label font-weight-bold font-bold text-lg-right pt-2">Attach Document</label>
											<input (change)="selectDocuments($event, 'uploadedDocs')" name="uploadedDocs" type="file" multiple class="form-control border-0 p-0"> 
										</div>
										
									</div>
								</div>
							</div>
							<div class="form-group row">
								<div class="col-lg-11 text-right"> 
									<a routerLink="/fleet/assets/list" class="btn btn-default mr-2">Cancel</a> 
                  <!-- <a (click)="addAsset()" class="btn btn-success">Submit</a>  -->
                  <a href="javascript:;" *ngIf="!assetID" (click)="addAsset()" class="btn btn-success" id="nextBtn">Save</a> 
                  <a href="javascript:;" *ngIf="assetID" (click)="updateAsset()" class="btn btn-success">Update</a> 
                </div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</section>
  </div>
</section>

<div class="modal fade" id="addGroupModal" tabindex="-1" role="dialog" aria-labelledby="addGroupModal" aria-hidden="true">
  <div class="modal-dialog" style="max-width: 600px;" role="document">
    <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title">Add Group</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <i class="far fa-window-close modal-dismiss" style="font-size:25px;"> </i>
              </button>
    </div>
    <div class="modal-body text-dark">
              <div class="card-body p-0">
        <form id="groupForm" class="form-horizontal form-bordered bg-white" method="get" name="form">
           <div class="form-row">
            <div class="form-group col-lg-12 mb-0">
             <label class="control-label font-weight-bold">Group Name</label>
             <input [(ngModel)]="groupData.groupName" name="groupName" type="text" class="form-control"> 
            </div>
            <div class="form-group col-lg-12">
             <label class="control-label font-weight-bold">Group Members</label>
            <ng-select [multiple]=true [(ngModel)]="groupData.groupMembers" name="groupMembers" style="width: 100%;">
              <ng-option *ngFor="let item of allAssets;" value={{item.assetID}}>{{item.assetIdentification}}</ng-option>
            </ng-select>
          </div>
           </div>
           <div class="form-row">
            <div class="form-group col-lg-12">
             <div class="row">
              <div class="col-lg-12">
                 <label class="control-label font-weight-bold text-lg-right pt-2">Description</label>
                 <textarea [(ngModel)]="groupData.description" name="description" class="form-control" rows="4" id="comment"></textarea>
              </div>
             </div>
            </div>
           </div>
        </form>
       </div>
    </div>
    <div class="modal-footer text-right">
      <a class="btn btn-success" (click)="addGroup()">Save</a>
      <a class="btn btn-default modal-dismiss">Cancel</a>
    </div>
  </div>
</div>
</div>
