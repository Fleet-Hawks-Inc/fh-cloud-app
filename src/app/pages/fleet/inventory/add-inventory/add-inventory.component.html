<section class="body">
  <!-- start: header -->
  <app-header></app-header>

  <!-- end: header -->

  <div class="inner-wrapper">
    <!-- start: sidebar -->
    <app-sidebar></app-sidebar>
    <!-- end: sidebar -->

    <section role="main" class="content-body pl-0 pr-0 pt-0">
      <header class="page-header pr-5">
        <div class="row pr-1 mr-1" style="padding-top:10px;">
          <div class="col-md-4 col-lg-4">
            <h4 class="text-4 font-weight-bold mt-0 mb-0 text-dark">New Part</h4>
          </div>
          <div class="col-md-8 col-lg-8 text-right pr-1">
            <a routerLink="/fleet/inventory/list" class="btn btn-default btn-sm" ><i class="fas fa-list"></i> Inventory List</a>
          </div>
        </div>
      </header>
      <div class="row">
        <div class="col pr-0">
          <div class="card-body text-dark">
            <form class="form-horizontal form-bordered" method="get" id="form">
              <div class="row">
                <div class="col-lg-12">
                  <label class="control-label font-weight-bold text-lg-right text-dark text-4 font-weight-bold pt-2">Inventory Details</label>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-10">
                      <label
                        class="control-label font-weight-bold text-lg-right pt-2"
                        >Part Number</label >
                      <input
                        type="text"
                        name="partNumber"
                        [(ngModel)]="partNumber"
                        class="form-control"
                      />
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-10">
                      <label
                        class="control-label font-weight-bold text-lg-right pt-2"
                        >Name</label
                      >
                      <input
                        name="name"
                        [(ngModel)]="name"
                        type="text"
                        class="form-control"
                      />
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-10">
                      <label
                        class="control-label font-weight-bold text-lg-right pt-2"
                        >Category</label
                      >
                      <select
                        data-plugin-selectTwo
                        class="form-control populate"
                        name="categoryID"
                        [(ngModel)]="categoryID"
                      >
                        <optgroup label="Select Category">
                          <option
                            *ngFor="let group of itemGroups"
                            value="{{ group.groupID }}"
                          >
                            {{ group.groupName }}
                          </option>
                        </optgroup>
                      </select>
                    </div>
                    <div class="col-lg-2 mar-top-37">
                      <a
                        (click)="showCategoryModal()"
                        [routerLink]=""
                        class="btn btn-sm btn-success modal-with-form"
                        ><i class="fas fa-plus"></i
                      ></a>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-5">
                      <label
                        class="control-label font-weight-bold text-lg-right pt-2"
                        >Unit Cost (base)</label >
                      <div class="row">
                        <div class="col-lg-6">
                          <input
                            type="number"
                            class="form-control"
                            name="cost"
                            [(ngModel)]="cost"
                          />
                        </div>
                        <div class="col-lg-6 pl-0">
                          <select
                            name="costUnit"
                            [(ngModel)]="costUnit"
                            data-plugin-selectTwo
                            class="form-control populate"
                          >
                            <optgroup label="Select Unit">
                              <option value="Each">Each</option>
                              <option value="Gallon">Gallon</option>
                              <option value="Quart">Quart</option>
                              <option value="Set">Set</option>
                              <option value="Tube">Tube</option>
                            </optgroup>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-5">
                      <label
                        class="control-label font-weight-bold text-lg-right pt-2"
                        >Quantity</label
                      >
                      <input
                        type="number"
                        class="form-control"
                        name="quantity"
                        [(ngModel)]="quantity"
                      />
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-10">
                      <label
                        class="control-label font-weight-bold text-lg-right pt-2"
                        >Description</label
                      >
                      <textarea
                        class="form-control"
                        rows="4"
                        name="description"
                        [(ngModel)]="description"
                      ></textarea>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row mt-2">
                <div class="col-lg-12">
                  <div class="row">
                    <div class="col-lg-6">
                      <label
                        class="control-label font-weight-bold text-dark text-4 pt-2"
                        >Warehouse Details</label
                      >
                    </div>
                    <div class="col-lg-5">
                      <label
                        class="control-label font-weight-bold text-dark text-4 pt-2"
                        >Inventory Tracking</label
                      >
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-10">
                      <label class="control-label pt-2 font-weight-bold"
                        >Select Warehouse</label
                      >
                      <select
                        name="warehouseID"
                        [(ngModel)]="warehouseID"
                        data-plugin-selectTwo
                        class="form-control populate"
                      >
                        <optgroup label="Select">
                          <option
                            *ngFor="let warehouse of warehouses"
                            value="{{ warehouse.warehouseID }}"
                          >
                            {{ warehouse.warehouseName }}
                          </option>
                        </optgroup>
                      </select>
                    </div>
                    <div class="col-lg-2 mar-top-37">
                      <a
                        [routerLink]=""
                        (click)="showWarehoseModal()"
                        class="modal-with-form btn btn-sm btn-success"
                        ><i class="fas fa-plus"></i
                      ></a>
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-10">
                      <div class="row">
                        <div class="col-lg-4">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2"
                            >Aisle</label
                          >
                        </div>
                        <div class="col-lg-4">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2"
                            >Row</label
                          >
                        </div>
                        <div class="col-lg-4">
                          <label
                            class="control-label font-weight-bold text-lg-right pt-2"
                            >Bin</label
                          >
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-4">
                          <input
                            type="text"
                            class="form-control"
                            name="aisle"
                            [(ngModel)]="aisle"
                          />
                        </div>
                        <div class="col-lg-4">
                          <input
                            type="text"
                            class="form-control"
                            name="row"
                            [(ngModel)]="row"
                          />
                        </div>
                        <div class="col-lg-4">
                          <input
                            type="text"
                            class="form-control"
                            name="bin"
                            [(ngModel)]="bin"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-lg-10">
                      <label
                        class="control-label font-weight-bold text-lg-right pt-2"
                        >Vendor</label
                      >
                      <select
                        data-plugin-selectTwo
                        class="form-control populate"
                        name="warehouseVendorID"
                        [(ngModel)]="warehouseVendorID"
                      >
                        <optgroup label="Select Vendor">
                          <option
                            *ngFor="let vendor of vendors"
                            value="{{ vendor.vendorID }}"
                          >
                            {{ vendor.companyName }}
                          </option>
                        </optgroup>
                      </select>
                    </div>
                    <div class="col-lg-2 mar-top-37">
                      <a
                        [routerLink]=""
                        class="btn btn-sm btn-success modal-with-form"
                        ><i class="fas fa-plus"></i
                      ></a>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div>
                    <div class="row">
                      <div class="col-lg-3">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Quantity</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          name="trackingQuantity"
                          [(ngModel)]="trackingQuantity"
                        />
                      </div>
                    </div>
                    <div class="row mt-2">
                      <div class="col-lg-3">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Reorder Point</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          name="reorderPoint"
                          [(ngModel)]="reorderPoint"
                        />
                      </div>
                      <div class="col-lg-3 mx-4">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Reorder Quantity</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          name="reorderQuality"
                          [(ngModel)]="reorderQuality"
                        />
                      </div>
                      <!-- <div class="col-lg-3">
                                   <label class="control-label font-weight-bold  text-lg-right pt-2" >Max. Quantity</label>
                                   <input type="number" class="form-control">
                                </div> -->
                    </div>
                    <div class="row mt-2">
                      <div class="col-lg-3">
                        <label
                          class="control-label font-weight-bold text-lg-right pt-2"
                          >Lead Time</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          name="leadTime"
                          [(ngModel)]="leadTime"
                        />
                      </div>
                      <div class="col-lg-6 mx-4">
                        <label class="font-weight-bold text-lg-right pt-2"
                          >Preferred Vendor</label
                        >
                        <select
                          data-plugin-selectTwo
                          class="form-control populate"
                          name="preferredVendorID"
                          [(ngModel)]="preferredVendorID"
                        >
                          <optgroup label="Select">
                            <option
                              *ngFor="let vendor of vendors"
                              value="{{ vendor.vendorID }}"
                            >
                              {{ vendor.companyName }}
                            </option>
                          </optgroup>
                        </select>
                      </div>
                      <div class="col-lg-2 mar-top-37 pl-0">
                        <a
                          [routerLink]=""
                          class="btn btn-sm btn-success modal-with-form"
                          ><i class="fas fa-plus"></i
                        ></a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row mt-2">
                <div class="col-lg-12">
                  <label
                    class="control-label font-weight-bold text-lg-right text-dark text-4 pt-2"
                    >Additional Details</label
                  >
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row mt-2">
                    <div class="col-lg-10">
                      <div class="row">
                        <div class="col-lg-12">
                          <label
                            class="control-label font-weight-bold text-lg-right text-dark text-4 pt-2"
                            >Warranty</label
                          >
                        </div>
                      </div>
                      <div class="row mt-2">
                        <div class="col-lg-4">
                          <label
                            class="control-label font-weight-bold text-lg-right text-dark text-4 pt-2"
                            >Days</label
                          >
                          <input
                            type="number"
                            class="form-control"
                            name="days"
                            [(ngModel)]="days"
                          />
                        </div>
                        <div class="col-lg-4">
                          <label
                            class="control-label font-weight-bold text-lg-right text-dark text-4 pt-2"
                            >Time</label
                          >
                          <input
                            type="number"
                            class="form-control"
                            name="time"
                            [(ngModel)]="time"
                          />
                        </div>
                      </div>

                      <div class="row mt-2">
                        <div class="col-lg-12">
                          <label
                            class="control-label font-weight-bold text-lg-right text-dark text-4 pt-2"
                            >Notes</label
                          >
                          <textarea
                            class="form-control"
                            rows="3"
                            name="notes"
                            [(ngModel)]="notes"
                          ></textarea>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                  <div class="row">
                    <div class="col-lg-10">
                      <label
                        class="control-label font-weight-bold text-lg-right pt-2"
                        >Attach Photo</label >
                      <input
                        (change)="selectDocuments($event, 'uploadedPhotos')"
                        type="file"
                        class="form-control border-0 p-0"
                        multiple
                      />
                    </div>
                    <div class="col-lg-2 mar-top-37">
                      <!-- <a href="" class="btn btn-sm btn-success"><i class="fas fa-plus"></i></a> -->
                    </div>
                  </div>
                  <div class="row mt-2" *ngIf = 'inventoryImages?.length'>
                    <div class="col-lg-5" *ngFor="let photo of inventoryImages;let i= index">
                       <div class="vehicle-photo-box">
                          <img [src]="photo.path" width="100%" class="img-fluid"
                             style="height: 180px; object-fit: cover;">
                          <hr class="m-3">
                          <div class="row">
                             <div class="col-lg-8">Image {{i+1}}</div>
                             <div class="col-lg-4 text-right">
                              <i class="fas fa-times text-danger"  (click)="delete('image',photo.name)"></i>
                               
                             </div>
                          </div>
                       </div>
                    </div>
                 </div>
                  <div class="row mt-2">
                    <div class="col-lg-10">
                      <label
                        class="control-label font-weight-bold text-lg-right pt-2">Attach Document</label
                      >
                      <input
                        (change)="selectDocuments($event, 'uploadedDocs')"
                        type="file"
                        class="form-control border-0 p-0"
                        multiple
                      />
                    </div>
                    <div class="col-lg-2 mar-top-37">
                      <!-- <a href="" class="btn btn-sm btn-success"><i class="fas fa-plus"></i></a> -->
                    </div>
                  </div>
                  <div class="row mt-2" *ngIf="inventoryDocs?.length">
                    <div class="col-lg-10">
                       <div class="vehicle-common-box p-3">
                          <div class="row">
                             <div class="col-lg-6"><label
                                   class="control-label font-weight-bold text-3">Document(s)</label></div>
                             <div class="col-lg-6 text-right">
                             </div>
                          </div>
                          <hr class="solid mt-2">
                          <div class="row mb-1" *ngFor="let doc of inventoryDocs;let d= index">
                             <div class="col-lg-9" > <a href="{{doc.path}}" target="_blank">Document No. {{d+1}}</a></div> 
                             <div class="col-lg-3 text-right">  
                              <!-- <i class="far fa-file text-dak mr-1" (click)="setPDFSrc(doc.path)" data-toggle="modal" data-target="#viewDocModal"></i>                               -->
                                <i class="fas fa-times text-danger" (click)="delete('doc',doc.name)"></i>
                             </div>
                          </div>
                       </div>
                    </div>
                 </div>
                </div>
              </div>
              <div class="form-group row">
                <div class="col-lg-11 text-right">
                  <button type="button" class="btn btn-default mr-2" onclick="goBack()" >
                    Cancel
                  </button>
                  <a href="javascript:;" *ngIf="!itemID" (click)="addInventory()" class="btn btn-success">Submit</a>
                  <a href="javascript:;" *ngIf="itemID" (click)="updateInventory()" class="btn btn-success">Update</a>
                </div>
              </div>
              <div class="form-group row">
                <div class="col-lg-12">
                  <!-- <p class="text text-danger" *ngIf="hasError">{{Error}}</p> -->
                  <p class="text text-success" *ngIf="hasSuccess">
                    {{ Success }}
                  </p>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>
  </div>
</section>

<div
  class="modal fade"
  id="categoryModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="addInventoryCategoryModal"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Inventory Category</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <i class="far fa-window-close modal-dismiss" style="font-size: 25px">
          </i>
        </button>
      </div>
      <div class="modal-body text-dark" id="groupForm">
        <form form>
          <div class="form-row">
            <div class="form-group col-lg-12">
              <label class="control-label font-weight-bold"
                >Category Name</label
              >
              <input
                type="text"
                class="form-control"
                [(ngModel)]="groupName"
                name="groupName"
              />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-lg-12">
              <div class="row">
                <div class="col-lg-12">
                  <label
                    class="control-label font-weight-bold text-lg-right pt-2"
                    >Description</label
                  >
                  <textarea
                    class="form-control"
                    rows="2"
                    id="comment"
                    [(ngModel)]="groupDescription"
                    name="groupDescription"
                  ></textarea>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group row">
            <div class="col-lg-12">
              <!-- <p class="text text-danger" *ngIf="hasError">{{Error}}</p> -->
              <p class="text text-success" *ngIf="hasGroupSuccess">
                {{ groupSuccess }}
              </p>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Close
        </button>
        <button
          type="button"
          class="btn btn-success"
          [routerLink]=""
          (click)="addGroup()"
        >
          Submit
        </button>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="warehouseModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="addInventorywarehouseModal"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Warehouse</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <i class="far fa-window-close modal-dismiss" style="font-size: 25px">
          </i>
        </button>
      </div>
      <div class="modal-body text-dark">
        <form id="warehoseForm">
          <div class="form-row">
            <div class="form-group col-lg-12">
              <label class="control-label font-weight-bold"
                >Warehouse Name</label
              >
              <input type="text" class="form-control"  name="warehouseName"
              [(ngModel)]="warehouseName"/>
            </div>
          </div>
          <div class="form-row pt-3">
            <div class="form-group col-lg-12">
              <label class="control-label text-4 font-weight-bold"
                >Address</label
              >
              <div class="row">
                <div class="col-lg-6">
                  <label
                    class="control-label font-weight-bold text-lg-right pt-2"
                    >Select Country</label
                  >
                  <select
                  data-plugin-selectTwo
                  class="form-control populate"
                  name="countryID"
                  [(ngModel)]="countryID"
                  (change)="getStates()"
                >
                  <optgroup label="Select Country">
                    <option *ngFor="let country of countries" value="{{country.countryID}}">{{country.countryName}}</option>

                  </optgroup>
                </select>
                </div>
                <div class="col-lg-6">
                  <label
                    class="control-label font-weight-bold text-lg-right pt-2"
                    >Select State</label
                  >
                  <select
                  data-plugin-selectTwo
                  class="form-control populate"
                  name="stateID"
                  [(ngModel)]="stateID"
                  (change)="getCities()"
                >
                  <optgroup label="Select State">
                    
                         <option *ngFor="let state of states" value="{{state.stateID}}">{{state.stateName}}</option>
                     
                  </optgroup>
                </select>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-6">
                  <label
                    class="control-label font-weight-bold text-lg-right pt-2"
                    >Select City</label
                  >
                  <select
                  data-plugin-selectTwo
                  class="form-control populate"
                  name="cityID"
                  [(ngModel)]="cityID"
                >
                  <optgroup label="Select City">
                    <option *ngFor="let city of cities" value="{{city.cityID}}">{{city.cityName}}</option>

                  </optgroup>
                </select>
                </div>
                <div class="col-lg-6">
                  <label
                    class="control-label font-weight-bold text-lg-right pt-2"
                    >ZIP Code</label
                  >
                  <input type="text" class="form-control"  name="zipCode"
                  [(ngModel)]="zipCode"/>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-12">
                  <label
                    class="control-label font-weight-bold text-lg-right pt-2"
                    >Street Address</label
                  >
                  <input type="text" class="form-control"  name="address"
                  [(ngModel)]="address"/>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group row">
            <div class="col-lg-12">
              <!-- <p class="text text-danger" *ngIf="hasError">{{Error}}</p> -->
              <p class="text text-success" *ngIf="hasWarehouseSuccess">
                {{ warehouseSuccess }}
              </p>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Close
        </button>
        <button type="button" class="btn btn-success" [routerLink]=""
        (click)="addWarehouse()">Submit</button>
      </div>
    </div>
  </div>
</div>
 <!-- VIEW DOCUMENT MODAL -->
 <div class="modal fade" id="viewDocModal" tabindex="-1" role="dialog" aria-labelledby="viewDocModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewDocModalLabel">View Document</h5>
        <button type="button" (click)="setSrcValue()" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">                          
           <div class="form-row">
              <div class="form-group col-md-12">
                 <div>
                    <iframe [src]='pdfSrc'
                    frameborder="0" width="100%" height="400px"> </iframe>

                 </div>
              </div>
           </div>
       
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" (click)="setSrcValue()" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>