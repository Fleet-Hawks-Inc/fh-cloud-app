<section class="body">
  <div class="inner-wrapper">
    <section role="main" class="content-body pr-0 pl-0 pt-0">
      <header class="page-header pr8 pl11">
        <div class="row" style="padding-top: 10px">
          <div class="col-md-4 col-lg-4">
            <h4 class="font-weight-bold text-4 mt-0 mb-0 text-dark">
              Total Miles Calculator
            </h4>
          </div>
          <div class="col-md-8 col-lg-8 text-right"></div>
        </div>
      </header>

      <section class="m-2">
        <div class="row mb-3">
          <div class="col-lg-12">
            <div class="bg-white p-3 text-dark">
              <div class="form-group row adddriverpl pt-3">
                <div class="col-lg-12 mb-3">
                  <div
                    class="row mb-2"
                    *ngFor="let item of routeData.location; let i = index"
                  >
                    <div class="col-lg-4 mb-2">
                      <div class="col-lg-12">
                        <label
                          class="control-label font-weight-bold text-4 text-lg-right pt-2 text-underline"
                          >Source Location</label
                        >
                      </div>

                      <div class="col-lg-12">
                        <label
                          class="control-label font-weight-bold pt-2 text-lg-right"
                          >Address<span class="mandfield text-2 ml-1"
                            ><sup>*</sup></span
                          ></label
                        >
                        <input
                          class="form-control"
                          name="sourceAddress{{ i }}"
                          required
                          autocomplete="nope"
                          [(ngModel)]="item.sourceAddress"
                          #sAddress="ngModel"
                          (keyup)="searchTerm.next($event)"
                          placeholder="eg. 02, Fleet Hawks Inc,Alberta,Canada"
                        />
                        <div
                          *ngIf="
                            sAddress.invalid &&
                            (sAddress.dirty || sAddress.touched)
                          "
                          class="text-danger"
                        >
                          <div *ngIf="sAddress.errors.required">
                            Source address is required.
                          </div>
                        </div>
                        <div
                          class="bg-white map-search__results row mt-1 ml-0"
                          style="display: none; width: 93%"
                        >
                          <ul
                            class="pl-0 m-0 text-left"
                            style="list-style: none"
                            *ngIf="searchResults"
                          >
                            <li *ngFor="let item of searchResults">
                              <a
                                href="javascript:;"
                                (click)="assignLocation('source', item, i)"
                                title="{{ item.address }}"
                                >{{ item.address }}</a
                              >
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-4">
                      <div class="row mb-2">
                        <div class="col-lg-12">
                          <label
                            class="control-label font-weight-bold text-4 text-lg-right pt-2 text-underline"
                            >Destination Location</label
                          >
                        </div>

                        <div class="col-lg-12">
                          <label
                            class="control-label font-weight-bold pt-2 text-lg-right"
                            >Address<span class="mandfield text-2 ml-1"
                              ><sup>*</sup></span
                            ></label
                          >
                          <input
                            class="form-control col-lg-12"
                            name="destAddress{{ i }}"
                            required
                            (keyup)="searchTerm.next($event)"
                            autocomplete="nope"
                            [(ngModel)]="item.destAddress"
                            #dAddress="ngModel"
                            placeholder="eg. 02, Fleet Hawks Inc,Alberta,Canada"
                          />
                          <div
                            *ngIf="
                              dAddress.invalid &&
                              (dAddress.dirty || dAddress.touched)
                            "
                            class="text-danger"
                          >
                            <div *ngIf="dAddress.errors.required">
                              Destination address is required.
                            </div>
                          </div>
                          <div
                            class="bg-white map-search__results w100 row mt-1 ml-0"
                            style="display: none"
                          >
                            <ul
                              class="m-0 pl-0 text-left"
                              style="list-style: none"
                              *ngIf="searchResults"
                            >
                              <li *ngFor="let item of searchResults">
                                <a
                                  href="javascript:;"
                                  (click)="
                                    assignLocation('destination', item, i)
                                  "
                                  title="{{ item.address }}"
                                  >{{ item.address }}</a
                                >
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-2 text-right pt-3">
                      <div class="col-lg-12">
                        <label
                          class="control-label font-weight-bold text-4 text-lg-right pt-2 pl-10 text-centre text-underline"
                          >Miles</label
                        >
                        <p class="mt-20 text-4 font-weight-semibold text-dark">
                          {{ item.miles }}
                        </p>
                      </div>
                    </div>
                    <div class="col-lg-2 text-right mar-top-30">
                      <a
                        class="btn btn-dark mr-2"
                        href="javascript:;"
                        style="color: white"
                        (click)="clearAddress(i)"
                        >Clear</a
                      >
                      <a
                        class="btn btn-success"
                        *ngIf="i == 0"
                        (click)="addAddress(routeData)"
                        href="javascript:;"
                        ><i class="fa fa-plus fa-fw" style="color: white"></i
                      ></a>
                      <a
                        *ngIf="i != 0"
                        (click)="removeAddress(i)"
                        class="btn btn-danger"
                        href="javascript:;"
                        ><i class="fa fa-minus fa-fw" style="color: white"></i
                      ></a>
                    </div>
                  </div>
                  <div class="row">
                    <div class="font-weight-bold pt-2 col-lg-10 text-right">
                      Total Miles &nbsp; &nbsp;
                      {{ routeData.location.totalMiles }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </section>
  </div>
</section>
