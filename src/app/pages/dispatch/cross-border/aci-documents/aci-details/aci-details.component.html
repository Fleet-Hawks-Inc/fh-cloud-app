<section class="body text-dark">

    <div class="inner-wrapper">

        <section role="main" class="content-body text-capitalize">
            <header class="page-header">
                <h2>{{title}}</h2>
                <div class="right-wrapper text-right pt-2 pr-2">
                    <a routerLink="/dispatch/cross-border/aci-manifest/{{mID}}" class="btn btn-default btn-sm mr-2"><i
                            class="fas fa-pencil-alt"></i> Edit Manifest</a>
                    <p-splitButton label="Send To CBSA" [menuStyle]="{'width':'300px'}" [model]="items"
                        styleClass="p-button-sm mr-2 text-left">
                    </p-splitButton>
                    <!-- <div class="btn-group btn-group1 flex-wrap mr-1">
                        <button type="button" class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown"
                            aria-expanded="false">Send To CBSA<span class="caret"></span></button>
                        <div class="dropdown-menu" role="menu" x-placement="bottom-start"
                            style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 38px, 0px);">

                            <a class="dropdown-item text-1" href="javascript:;" (click)="sendCBSAFn()">Send Trip and
                                Shipments</a>
                            <a class="dropdown-item text-1" href="javascript:;">Change Trip and Shipments</a>
                            <a class="dropdown-item text-1" (click)="amendManifest()">Amend Trip and Shipments(Use After
                                Arrival)</a>
                            <a class="dropdown-item text-1" (click)="cancelManifest(mID)">Cancel Trip and Shipments</a>
                            <a class="dropdown-item text-1" href="javascript:;">Send Trip Only(Shipments already on file
                                or empty)</a>
                            <a class="dropdown-item text-1" href="javascript:;">Change Trip Only(Shipments will not be
                                changed.If adding shipment,it must be on file)</a>
                            <a class="dropdown-item text-1" href="javascript:;">Amend Trip Only(Shipments will not be
                                amended)</a>
                            <a class="dropdown-item text-1" href="javascript:;">Cancel Trip Only</a>
                        </div>
                    </div> -->
                    <a [routerLink]="['/dispatch', 'cross-border','manifests']" class="btn btn-default btn-sm"><i
                            class="fas fa-list"></i> ACI Manifests</a>
                </div>
            </header>
            <div class="ACI-main__wrapper p-4 bg-white">
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header border back-color-gray p-2">
                                <h4 class="m-0">Trip Number<b> {{tripNumber}}</b></h4>
                            </div>
                            <div class="card-body border">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <table class="table table-bordered m-0">
                                            <tbody>
                                                <tr>
                                                    <th width="40%" class="back-color-gray"> Canadian Port of Entry:
                                                    </th>
                                                    <td>{{portOfEntry}} - {{canadianPortsObjects[portOfEntry]}}</td>
                                                </tr>
                                                <tr>
                                                    <th width="40%" class="back-color-gray">Estimated Arrival
                                                        Date/Time/ETA time zone :</th>
                                                    <td>{{estimatedArrivalDateTime}}
                                                        &nbsp;
                                                        <span *ngIf="estimatedArrivalTimeZone == 'PST'">Pacific Standard
                                                            Time</span>
                                                        <span *ngIf="estimatedArrivalTimeZone == 'AST'">Atlantic
                                                            Standard Time</span>
                                                        <span *ngIf="estimatedArrivalTimeZone == 'CST'">Central Standard
                                                            Time</span>
                                                        <span *ngIf="estimatedArrivalTimeZone == 'EST'">Eastern Standard
                                                            Time</span>
                                                        <span *ngIf="estimatedArrivalTimeZone == 'MST'">Mountain
                                                            Standard Time</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th width="40%" class="back-color-gray">Sub Location/Warehouse:</th>
                                                    <td>{{subLocation}} - {{subLocationObjects[subLocation]}}</td>
                                                </tr>


                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-lg-6">
                                        <table class="table table-bordered m-0">
                                            <tbody>
                                                <tr>
                                                    <th width="40%" class="back-color-gray">Created:</th>
                                                    <td>{{timeCreated}} <span *ngIf="createdBy != ''">By
                                                            {{createdBy}}</span></td>
                                                </tr>
                                                <tr>
                                                    <th width="40%" class="back-color-gray">Last Edited:</th>
                                                    <td>{{timeModified}} <span *ngIf="modifiedBy != ''">By
                                                            {{modifiedBy}}</span></td>
                                                </tr>
                                                <tr>
                                                    <th width="40%" class="back-color-gray">Status:
                                                        <div class="btn-group btn-group1 flex-wrap mr-1">
                                                            <span class="fas fa-pencil-alt dropdown-toggle"
                                                                data-toggle="dropdown" aria-expanded="false"></span>
                                                            <div class="dropdown-menu" role="menu"
                                                                x-placement="bottom-start"
                                                                style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 38px, 0px);">
                                                                <a class="dropdown-item text-1" href="javascript:;"
                                                                    (click)="setStatus('Draft')">Draft</a>
                                                                <a class="dropdown-item text-1" href="javascript:;"
                                                                    (click)="setStatus('Cancelled')">Cancelled</a>
                                                                <a class="dropdown-item text-1" href="javascript:;"
                                                                    (click)="setStatus('Transmitted_to_CBSA')">Transmitted
                                                                    to CBSA</a>
                                                                <a class="dropdown-item text-1" href="javascript:;"
                                                                    (click)="setStatus('CBSA_Returned_Error')">CBSA
                                                                    Returned Error</a>
                                                                <a class="dropdown-item text-1" href="javascript:;"
                                                                    (click)="setStatus('On_File_with_CBSA')">On
                                                                    File with CBSA</a>
                                                                <a class="dropdown-item text-1" href="javascript:;"
                                                                    (click)="setStatus('On_File_with_Match_Notice')">On
                                                                    File with Match Notice</a>
                                                                <a class="dropdown-item text-1" href="javascript:;"
                                                                    (click)="setStatus('On_File_with_Transaction_Number(s)')">On
                                                                    File with Transaction Number(s)</a>
                                                                <a class="dropdown-item text-1" href="javascript:;"
                                                                    (click)="setStatus('Arrival_Reported_at_Border')">Arrival
                                                                    Reported at Border</a>
                                                                <a class="dropdown-item text-1" href="javascript:;"
                                                                    (click)="setStatus('Rejected_After_Arrival_at_Border')">Rejected
                                                                    After Arrival at Border</a>
                                                                <a class="dropdown-item text-1" href="javascript:;"
                                                                    (click)="setStatus('Released')">Released</a>
                                                            </div>
                                                        </div>
                                                    </th>
                                                    <td><b class="badge text-uppercase"
                                                            [ngClass]="[(currentStatus == 'Cancelled Manifest') ? 'cancel-color' :
                                         (currentStatus == 'Transmitted to CBP') ? 'transmitted-color' :
                                         (currentStatus == 'Truck Released at Border') ? 'truck-release-color' :
                                         (currentStatus == 'Complete Manifest and Entry Numbers On File with CBP') ? 'complete-file-color' :
                                         (currentStatus == 'CBP Returned Error') ? 'returned-color' :
                                         (currentStatus == 'Truck Arrived at Border') ? 'truck-arr-color ' :
                                         (currentStatus == 'Preliminary Manifest On File with CBP') ? 'preliminary-color ' :
                                         (currentStatus == 'Complete Manifest On File with CBP') ? 'complete-cbp-color' :  'draft-color']">
                                                            {{status}}</b></td>
                                                </tr>
                                                <!-- <tr>
                                                    <th width="40%" class="back-color-gray">Trip On File With CBSA:</th>
                                                    <td>Draft</td>
                                                </tr>
                                                <tr>
                                                    <th width="40%" class="back-color-gray">Prior Notice Requirement:
                                                    </th>
                                                    <td>Draft</td>
                                                </tr> -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row mt-3" *ngIf="borderResponses ?.length">
                    <div class="col-12">
                        <div class="card">
                            <div
                                class="card-header border back-color-gray p-2 d-flex justify-content-between align-items-center">
                                <h4 class="m-0 ">ACI eManifest History</h4>
                                <div class=" pull-right">
                                    <!-- <button type="button" data-toggle="modal" data-target="#statusModal" class="btn btn-sm btn-success">View All History</button> -->
                                </div>
                            </div>
                            <div class="card-body border">
                                <table class="table  table-responsive-md table-bordered table-striped mb-0">
                                    <thead>
                                        <tr>
                                            <th>Sr.</th>
                                            <th>Date/Time</th>
                                            <th>Status</th>
                                            <th>Status Messages</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let response of borderResponses; let i = index">
                                            <td>{{i+1}}</td>
                                            <td>{{response.dateTime}}</td>
                                            <td>
                                                <span *ngIf="response.type">{{response.type}}</span>
                                                <span *ngIf="!response.type">{{response.status}}</span>
                                            </td>
                                            <td>
                                                <div *ngIf="response.sendRequest">
                                                    {{response.sendRequest.type}}
                                                </div>
                                                <b>{{response.message}}</b>&nbsp;&nbsp;
                                                <ul class="p-0 ml-3 mt-3" *ngIf="response.errors">
                                                    <li *ngFor="let error of response.errors; let s = index;">
                                                        {{error.note}}
                                                        <span *ngIf="s != response.errors.length-1">,</span><br>
                                                    </li>
                                                </ul>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- SHIPMENT DIV -->
                <div class="row mt-3" *ngIf="shipments.length > 0">
                    <div class="col-12">
                        <div class="card">
                            <div
                                class="card-header border back-color-gray p-2 d-flex justify-content-between align-items-center">
                                <h4 class="m-0 ">ACI Shipments <b> {{tripNumber}}</b></h4>
                                <div class=" pull-right">
                                    <!-- <div class="btn-group btn-group1 flex-wrap mr-1">
                                    <button type="button" class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Set Status<span class="caret"></span></button>
                                    <div class="dropdown-menu" role="menu" x-plACIment="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 38px, 0px);">
                                        <a class="dropdown-item text-1" href="">Draft</a>
                                        <a class="dropdown-item text-1" href="">Cancelled</a>
                                        <a class="dropdown-item text-1" href="">Transmitted to CBSA</a>
                                        <a class="dropdown-item text-1" href="">CBSA Returned Error</a>
                                        <a class="dropdown-item text-1" href="">On File with CBSA</a>
                                        <a class="dropdown-item text-1" href="">On File with Match Notice</a>
                                        <a class="dropdown-item text-1" href="">On File with Transaction Number(s)</a>
                                        <a class="dropdown-item text-1" href="">Arrival Reported at Border</a>
                                        <a class="dropdown-item text-1" href="">Rejected After Arrival at Border</a>
                                        <a class="dropdown-item text-1" href="">Released</a>
                                    </div>
                                </div> -->
                                    <!-- <a routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID }}"
                                        class="btn btn-success btn-sm"><i class="fas fa-plus"></i> Add Shipment</a> -->
                                </div>
                            </div>
                            <div class="card-body border">
                                <table class="table  table-responsive-md table-bordered table-striped mb-0">
                                    <thead>
                                        <tr>
                                            <th>Cargo Control#</th>
                                            <th>Consignor</th>
                                            <th>Consignee</th>
                                            <th>Quantity</th>
                                            <th>Last Edited</th>
                                            <th>Loaded On</th>
                                            <!-- <th width="10%">Actions</th> -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let shipment of shipments" data-toggle="tooltip"
                                            data-placement="top" style="cursor: pointer;"
                                            title="Click to see shipment details">
                                            <td (click)="showShipmentDetails(shipment.shipmentID)" class="text-success">
                                                <strong>{{shipment.cargoControlNumber}}</strong>
                                            </td>

                                            <td (click)="showShipmentDetails(shipment.shipmentID)">
                                                {{shipment.shipper.name}}<br>
                                                {{shipment.shipper.address.addressLine}},
                                                {{shipment.shipper.address.city}},
                                                {{shipment.shipper.address.stateProvince}},
                                                {{shipment.shipper.address.country}},
                                                {{shipment.shipper.address.postalCode}}

                                            </td>
                                            <td (click)="showShipmentDetails(shipment.shipmentID)">
                                                {{shipment.consignee.name}}<br>
                                                {{shipment.consignee.address.addressLine}},
                                                {{shipment.consignee.address.city}},
                                                {{shipment.consignee.address.stateProvince}},
                                                {{shipment.consignee.address.country}},
                                                {{shipment.consignee.address.postalCode}}
                                            </td>
                                            <td (click)="showShipmentDetails(shipment.shipmentID)"><span
                                                    *ngFor="let commodity of shipment.commodities; let s= index;">{{commodity.quantity}}
                                                    {{packagingUnitsObjects[commodity.packagingUnit]}}<span
                                                        *ngIf="s != shipment.commodities.length-1">,</span></span>
                                            </td>
                                            <td (click)="showShipmentDetails(shipment.shipmentID)">{{timeModified}}
                                                <span *ngIf="modifiedBy != ''">By
                                                    {{modifiedBy}}</span>
                                            </td>
                                            <td (click)="showShipmentDetails(shipment.shipmentID)">
                                                <span *ngIf="shipment.loadedOn.type == 'TRUCK'">Vehicle </span>
                                                <span *ngIf="shipment.loadedOn.type == 'CONTAINER'">Container</span>
                                                <span *ngIf="shipment.loadedOn.type == 'TRAILER'">Asset
                                                </span>[{{shipment.loadedOn.number}}]
                                            </td>
                                            <!-- <td class="actions"> <a
                                                    routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID }}"><i
                                                        class="fas fa-pencil-alt black_color"></i> Edit</a>
                                            </td> -->
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- DRIVER DIV -->
                <div class="row mt-3">
                    <div class="col-12">
                        <div class="card">
                            <div
                                class="card-header border back-color-gray p-2 d-flex justify-content-between align-items-center">
                                <h4 class="m-0 ">Drivers,Co-Drivers and Passengers</h4>
                                <!-- <div class=" pull-right">
                                    <a routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID}}"
                                        class="btn btn-success btn-sm mr-1"><i class="fas fa-plus"></i> Add Co-Driver</a>
                                    <a routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID}}"
                                        class="btn btn-success btn-sm"><i class="fas fa-plus"></i> Add Passenger</a>
                                </div> -->
                            </div>
                            <div class="card-body border">
                                <table class="table  table-responsive-md table-bordered table-striped mb-0">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Type</th>
                                            <th>Driver#</th>
                                            <th>Documents</th>
                                            <!-- <th width="10%">Action</th> -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr data-toggle="tooltip" data-placement="top" style="cursor: pointer;"
                                            title="Click to see main driver details">
                                            <td (click)="showMainDriverDetails()" class="text-success">
                                                <strong>{{mainDriver.firstName}} {{mainDriver.lastName}}</strong>
                                            </td>
                                            <td (click)="showMainDriverDetails()">Main Driver
                                            </td>
                                            <td (click)="showMainDriverDetails()">
                                                {{mainDriver.driverNumber}}</td>
                                            <td (click)="showMainDriverDetails()"><span
                                                    *ngFor="let document of mainDriver.travelDocuments; let s= index;">{{document.number}}<span
                                                        *ngIf="s != mainDriver.travelDocuments.length-1">,</span></span>
                                            </td>
                                            <!-- <td class="actions">
                                                <a
                                                    routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID }}"><i
                                                        class="fas fa-pencil-alt black_color"></i> Edit</a>
                                            </td> -->
                                        </tr>
                                        <tr *ngFor="let driver of drivers" data-toggle="tooltip" data-placement="top"
                                            style="cursor: pointer;" title="Click to see co-driver details">
                                            <td (click)="showDriverDetails(driver.driverID)" class="text-success">
                                                {{driver.firstName}} {{driver.lastName}}</td>
                                            <td (click)="showDriverDetails(driver.driverID)">
                                                Co-Driver</td>
                                            <td (click)="showDriverDetails(driver.driverID)">
                                                {{driver.driverNumber}}</td>
                                            <td (click)="showDriverDetails(driver.driverID)">
                                                <span
                                                    *ngFor="let document of driver.travelDocuments; let s= index;">{{document.number}}<span
                                                        *ngIf="s != driver.travelDocuments.length-1">,</span></span>
                                            </td>
                                            <!-- <td class="actions">
                                                <a
                                                    routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID }}"><i
                                                        class="fas fa-pencil-alt black_color"></i> Edit</a>
                                            </td> -->
                                        </tr>
                                        <tr *ngFor="let passenger of passengers" data-toggle="tooltip"
                                            data-placement="top" style="cursor: pointer;"
                                            title="Click to see passenger details">

                                            <td (click)="showPassengerDetails(passenger.passengerID)"
                                                class="text-success">
                                                <strong>{{passenger.firstName}} {{passenger.lastName}}</strong>
                                            </td>
                                            <td (click)="showPassengerDetails(passenger.passengerID)">Passenger</td>
                                            <td (click)="showPassengerDetails(passenger.passengerID)">--</td>
                                            <td (click)="showPassengerDetails(passenger.passengerID)"><span
                                                    *ngFor="let document of passenger.travelDocuments; let s= index;">{{document.number}}<span
                                                        *ngIf="s != passenger.travelDocuments.length-1">,</span></span>
                                            </td>
                                            <!-- <td class="actions">
                                                <a
                                                    routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID }}"><i
                                                        class="fas fa-pencil-alt black_color"></i> Edit</a>
                                            </td> -->
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- TRUCK DIV-->
                <div class="row mt-3">
                    <div class="col-12">
                        <div class="card">
                            <div
                                class="card-header border back-color-gray p-2 d-flex justify-content-between align-items-center">
                                <h4 class="m-0 ">Vehicle on <b> {{tripNumber}}</b></h4>
                                <!-- <div class=" pull-right">
                                    <a routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID }}"
                                        class="btn btn-success btn-sm"> <i class="fas fa-plus"></i> Set IIT/Exemption(s)</a>
                                </div> -->
                            </div>
                            <div class="card-body border">
                                <table class="table  table-responsive-md table-bordered table-striped mb-0">
                                    <thead>
                                        <tr>
                                            <th width="15%">Vehicle Name</th>
                                            <th width="15%">Vehicle Type</th>
                                            <th width="10%">Licence Plate #</th>
                                            <th width="10%">Licence Province</th>
                                            <th width="10%">Licence Country</th>
                                            <th width="15%">IIT/Exemption(s)</th>
                                            <th width="15%">Seal Numbers</th>
                                            <!-- <th width="10%">Actions</th> -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr (click)="trucksModel = true;" style="cursor: pointer;">
                                            <td data-toggle="tooltip" data-placement="top" class="text-success"
                                                title="Click to see details of vehicle">
                                                <strong>{{truck.number}}</strong>
                                            </td>
                                            <td data-toggle="tooltip" data-placement="top"
                                                title="Click to see details of vehicle">
                                                {{vehicleTypeObjects[truck.type]}}</td>
                                            <td data-toggle="tooltip" data-placement="top"
                                                title="Click to see details of vehicle">{{truck.licensePlate.number}}
                                            </td>
                                            <td data-toggle="tooltip" data-placement="top"
                                                title="Click to see details of vehicle">
                                                {{truck.licensePlate.stateProvince}}</td>
                                            <td data-toggle="tooltip" data-placement="top"
                                                title="Click to see details of vehicle">{{truck.licensePlate.country}}
                                            </td>
                                            <td data-toggle="tooltip" data-placement="top"
                                                title="Click to see details of vehicle"><span
                                                    *ngFor="let cargo of truck.cargoExemptions; let s= index;">{{cargoExemptionTypeObjects[cargo]}}<span
                                                        *ngIf="s != truck.cargoExemptions.length-1">,</span>&nbsp;</span>
                                            </td>
                                            <td data-toggle="tooltip" data-placement="top"
                                                title="Click to see details of vehicle"><span
                                                    *ngFor="let seal of truck.sealNumbers;let s= index;">{{seal}}<span
                                                        *ngIf="s != truck.sealNumbers.length-1">,</span></span></td>
                                            <!-- <td class="actions">
                                                <a
                                                    routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID }}"><i
                                                        class="fas fa-pencil-alt black_color"></i> Edit</a>

                                            </td> -->
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- TRAILER DIV-->
                <div class="row mt-3" *ngIf="trailers?.length">
                    <div class="col-12">
                        <div class="card">
                            <div
                                class="card-header border back-color-gray p-2 d-flex justify-content-between align-items-center">
                                <h4 class="m-0 ">Assets on <b> {{tripNumber}}</b></h4>
                                <div class=" pull-right">
                                    <!-- <a routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID}}"
                                        class="btn btn-success btn-sm mr-1"> Set Cargo Exemption</a> -->
                                    <!-- <a routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID}}"
                                        class="btn btn-success btn-sm"><i class="fas fa-plus"></i> Add Asset</a> -->
                                </div>
                            </div>
                            <div class="card-body border">
                                <table class="table  table-responsive-md table-bordered table-striped mb-0">
                                    <thead>
                                        <tr>
                                            <th width="15%">Asset Name</th>
                                            <th width="15%">Asset Type</th>
                                            <th width="15%">Licence Plate #</th>
                                            <th width="15%">Licence Province</th>
                                            <th width="15%">IIT/Exemption(s)</th>
                                            <th width="15%">Seal Numbers</th>
                                            <!-- <th width="10%">Actions</th> -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let trailer of trailers">
                                            <td>
                                                {{trailer.number}}
                                            </td>
                                            <td><span *ngIf="trailer.type === 'OE'">Others</span>
                                                <span
                                                    *ngIf="trailer.type !== 'OE'">{{assetTypeCode[trailer.type]}}</span>
                                            </td>
                                            <td>{{trailer.licensePlate.number}}</td>
                                            <td>{{stateCodeToName[trailer.licensePlate.stateProvince]}}</td>
                                            <td><span
                                                    *ngFor="let cargo of trailer.cargoExemptions; let s= index;">{{cargoExemptionTypeObjects[cargo]}}<span
                                                        *ngIf="s != trailer.cargoExemptions.length-1">,</span></span>
                                            </td>
                                            <td><span
                                                    *ngFor="let seal of trailer.sealNumbers;let s= index;">{{seal}}<span
                                                        *ngIf="s != trailer.sealNumbers.length-1">,</span> </span></td>
                                            <!-- <td class="actions">
                                                <a
                                                    routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID}}"><i
                                                        class="fas fa-pencil-alt black_color"></i> Edit</a>

                                            </td> -->
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>


                <!-- CONTAINERS DIV -->
                <div class="row mt-3" *ngIf="containers?.length">
                    <div class="col-12">
                        <div class="card">
                            <div
                                class="card-header border back-color-gray p-2 d-flex justify-content-between align-items-center">
                                <h4 class="m-0 ">Containers on ACI eManifest <b> {{tripNumber}}</b></h4>
                                <!-- <div class=" pull-right">
                                    <a routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID}}"
                                        class="btn btn-success btn-sm"><i class="fas fa-plus"></i> Add Container</a>
                                </div> -->
                            </div>
                            <div class="card-body border">
                                <table class="table  table-responsive-md table-bordered table-striped mb-0"
                                    *ngIf="containers?.length">
                                    <thead>
                                        <tr>
                                            <th>Container#</th>
                                            <th>Loaded On</th>
                                            <th width="15%">IIT/Exemption(s)</th>
                                            <th width="15%">Seal Numbers</th>
                                            <!-- <th width="10%">Actions</th> -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let container of containers">
                                            <td>{{container.number}}</td>
                                            <td><span *ngIf="container.loadedOn.type === 'TRAILER'">Asset </span>
                                                <span *ngIf="container.loadedOn.type === 'TRUCK'">Vehicle
                                                </span>[{{container.loadedOn.number}}]
                                            </td>
                                            <td><span
                                                    *ngFor="let cargo of container.cargoExemptions; let s= index;">{{cargoExemptionTypeObjects[cargo]}}<span
                                                        *ngIf="s != container.cargoExemptions.length-1">,</span></span>
                                            </td>

                                            <td><span
                                                    *ngFor="let seal of container.sealNumbers; let s= index;">{{seal}}<span
                                                        *ngIf="s != container.sealNumbers.length-1">,</span> </span>
                                            </td>
                                            <!-- <td class="actions"><a
                                                    routerLink="/dispatch/cross-border/ACI-edit-eManifest/{{manifestID }}"><i
                                                        class="fas fa-pencil-alt black_color"></i> Edit</a>

                                            </td> -->
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- <div class="row mt-3">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header border back-color-gray p-2 d-flex justify-content-between align-items-center">
                            <h4 class="m-0 ">Comments about ACI eManifest <b> {{tripNumber}}</b></h4>
                            <div class=" pull-right">
                                <button class="btn btn-success btn-sm"><i class="fas fa-plus"></i> Add Comment</button>
                            </div>
                        </div>
                        <div class="card-body border">
                            <table class="table  table-responsive-md table-bordered table-striped mb-0">
                                <thead>
                                    <tr>
                                        <th>Sr.</th>
                                        <th>Comments</th>
                                        <th>Poster</th>
                                        <th>Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1.</td>
                                        <td>This shipment is meant for the person who ios really sweet.</td>
                                        <td>Demo User</td>
                                        <td>Jun 2,2020</td>

                                        <td class="actions">
                                            <a href=""><i class="fas fa-pencil-alt black_color"></i> Edit</a>
                                            <a href="" class="delete-row"><i class="far fa-trash-alt black_color"></i> Remove</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div> -->
            </div>
        </section>
    </div>
</section>
<!-- STATUS MODEL -->
<div class="modal fade" id="statusModal" tabindex="-1" role="dialog" aria-labelledby="statusModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="statusModalLabel">ACI eManifest Status Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body text-dark">
                <form>
                    <div class="row">
                        <div class="col-12">
                            <table class="table  table-responsive-md table-bordered table-striped mb-0" id="">
                                <thead>
                                    <tr>
                                        <th>Sr.</th>
                                        <th>Date</th>
                                        <th>Time</th>
                                        <th>History/Status Messages</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1.</td>
                                        <td>1/05/2020</td>
                                        <td>10:30 PM</td>
                                        <td>Trip <b>#7465765</b> by <b>John Smith</b></td>
                                    </tr>
                                    <tr>
                                        <td>2.</td>
                                        <td>1/06/2020</td>
                                        <td>02:40 PM</td>
                                        <td>CBSA Notice: 1 Shipment [74RAPARS000208] Not Matched with trade data</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- TRUCK  DETAILS -->
<p-dialog header="Vehicle Insurance Details" [modal]="true" [style]="{ width: '60vw' }" [(visible)]="trucksModel">
    <div class="row">
        <div class="col-lg-6">
            <table class="table table-bordered m-0">
                <tbody>
                    <tr>
                        <th width="40%" class="back-color-gray">Vehicle Name:</th>
                        <td>{{truck.number}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray"> Vehicle Type:</th>
                        <td>{{vehicleTypeObjects[truck.type]}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">VIN/SN:</th>
                        <td>{{truck.vinNumber}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">DOT#:</th>
                        <td>{{truck.dotNumber}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">IIT/Exemption(s):</th>
                        <td><span
                                *ngFor="let exemption of truck.cargoExemptions; let s= index;">{{cargoExemptionTypeObjects[exemption]}}<span
                                    *ngIf="s != truck.cargoExemptions.length-1">,</span></span>
                        </td>
                    </tr>


                </tbody>
            </table>
        </div>
        <div class="col-lg-6">
            <table class="table table-bordered m-0">
                <tbody>
                    <tr>
                        <th width="40%" class="back-color-gray">Seal Numbers :</th>
                        <td><span *ngFor="let seal of truck.sealNumbers; let s= index;">{{seal}}<span
                                    *ngIf="s != truck.sealNumbers.length-1">,</span> </span></td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Insurance Vendor:</th>
                        <td>{{truck.insurancePolicy.insuranceCompanyName}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Issued Date:</th>
                        <td>{{truck.insurancePolicy.issuedDate}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Insurance Policy#:</th>
                        <td>{{truck.insurancePolicy.policyNumber}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Insurance Amount:</th>
                        <td>{{truck.insurancePolicy.policyAmount}}
                            {{truck.insurancePolicy.amountCurrency}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <ng-template pTemplate="footer">
        <p-button (click)="trucksModel = false;" label="Close"></p-button>
    </ng-template>
</p-dialog>


<!-- SHIPMENT DETAILS MODEL -->
<p-dialog header="Shipment Details" [modal]="true" [style]="{ width: '60vw' }" [(visible)]="shipmentsModel">
    <div class="row text-capitalize">
        <div class="col-lg-6">
            <table class="table table-bordered m-0">
                <tbody>
                    <tr>
                        <th width="40%" class="back-color-gray">Shipment Type:</th>
                        <td>{{shipmentTypeObjects[shipmentData.shipmentType]}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Cargo Control#:</th>
                        <td>{{shipmentData.cargoControlNumber}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Reference Shipment:</th>
                        <td><span *ngIf="shipmentData.referenceOnlyShipment">YES</span>
                            <span *ngIf="!shipmentData.referenceOnlyShipment">NO</span>
                        </td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray"> First Canadian Port Of Entry:</th>
                        <td>{{shipmentData.portOfEntry}} -
                            {{canadianPortsObjects[shipmentData.portOfEntry]}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Release Office:</th>
                        <td>{{shipmentData.releaseOffice}} -
                            {{releaseOfficeObjects[shipmentData.releaseOffice]}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Sub Location:</th>
                        <td>{{shipmentData.subLocation}} -
                            {{subLocationObjects[shipmentData.subLocation]}}</td>

                    </tr>
                    <tr *ngIf="shipmentData.shipmentType == 'CSA'">
                        <th width="40%" class="back-color-gray">Importer CSA Business#:</th>
                        <td>{{shipmentData.importerCsaBusinessNumber}}</td>
                    </tr>
                    <tr *ngIf="shipmentData.shipmentType == 'CSA'">
                        <th width="40%" class="back-color-gray"> Unique Consignment Reference#:</th>
                        <td>{{shipmentData.uniqueConsignmentReferenceNumber}}</td>
                    </tr>

                </tbody>
            </table>
        </div>
        <div class="col-lg-6">
            <table class="table table-bordered m-0">
                <tbody>
                    <tr>
                        <th width="40%" class="back-color-gray">Date/Time/TimeZone:</th>
                        <td>{{shipmentData.estimatedArrivalDate}}
                            &nbsp;<span *ngIf="shipmentData.estimatedArrivalTimeZone == 'PST'">Pacific
                                Standard Time</span>
                            <span *ngIf="shipmentData.estimatedArrivalTimeZone == 'AST'">Atlantic
                                Standard Time</span>
                            <span *ngIf="shipmentData.estimatedArrivalTimeZone == 'CST'">Central
                                Standard Time</span>
                            <span *ngIf="shipmentData.estimatedArrivalTimeZone == 'EST'">Eastern
                                Standard Time</span>
                            <span *ngIf="shipmentData.estimatedArrivalTimeZone == 'MST'">Mountain
                                Standard Time</span>
                        </td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">State/City Of Loading:</th>
                        <td>{{shipmentData.cityOfLoading.stateProvince}},{{shipmentData.cityOfLoading.cityName}}
                        </td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">State/City Of Acceptance:</th>
                        <td>{{shipmentData.cityOfAcceptance.stateProvince}},{{shipmentData.cityOfAcceptance.cityName}}
                        </td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Consignor:</th>
                        <td>{{shipmentData.shipper}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Consignee:</th>
                        <td>{{shipmentData.consignee}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Special Instructions :</th>
                        <td>{{shipmentData.specialInstructions}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- delivery destinations -->
    <div class="row mt-2" *ngIf="shipmentData.deliveryDestinations?.length">
        <div class="col-lg-12">
            <h4>Delivery Destination Details</h4>
        </div>
        <div class="col-lg-12">
            <table class="table table-bordered table-striped m-0">
                <thead>
                    <tr>
                        <th> Name </th>
                        <th>Contact Number</th>
                        <th>Address</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let deliveryDestination of shipmentData.deliveryDestinations">
                        <td>{{deliveryDestination.name}}</td>
                        <td>{{deliveryDestination.contactNumber}}</td>
                        <td>{{deliveryDestination.address.addressLine}},
                            {{deliveryDestination.address.city}},{{deliveryDestination.address.stateProvince}},{{deliveryDestination.address.country}},{{deliveryDestination.address.postalCode}}
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>
    <!-- notify parties -->
    <div class="row mt-2" *ngIf="shipmentData.notifyParties?.length">
        <div class="col-lg-12">
            <h4>Notify Party Details</h4>
        </div>
        <div class="col-lg-12">
            <table class="table table-bordered table-striped m-0">
                <thead>
                    <tr>
                        <th> Name </th>
                        <th>Contact Number</th>
                        <th>Address</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let notifyParty of shipmentData.notifyParties">
                        <td>{{notifyParty.name}}</td>
                        <td>{{notifyParty.contactNumber}}</td>
                        <td>{{notifyParty.address.addressLine}},
                            {{notifyParty.address.city}},{{notifyParty.address.stateProvince}},{{notifyParty.address.country}},{{notifyParty.address.postalCode}}
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>
    <!-- commodities -->
    <div class="row mt-2">
        <div class="col-lg-12">
            <h4>Commodity Details</h4>
        </div>
        <div class="col-lg-12">
            <table class="table table-bordered table-striped m-0">
                <thead>
                    <tr>
                        <th>Commodity Description </th>
                        <th>Hazardous Details</th>
                        <th>Other Details</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let commodity of shipmentData.commodities">
                        <td><span class="font-weight-semibold">Commodity:&nbsp;</span>{{commodity.description}}<br>
                            <span class="font-weight-semibold"
                                *ngIf="commodity.value">Value:&nbsp;</span>{{commodity.value}}<br
                                *ngIf="commodity.value">
                            <span class="font-weight-semibold">Quantity:&nbsp;</span>{{commodity.quantity}}
                            {{packagingUnitsObjects[commodity.packagingUnit]}} <br>
                            <span class="font-weight-semibold">Weight:&nbsp;</span> {{commodity.weight}}
                            <span *ngIf="commodity.weightUnit == 'LB'">Pounds</span>
                            <span *ngIf="commodity.weightUnit == 'KG'">Kilograms</span>
                        </td>
                        <td><span class="font-weight-semibold">Hazmat
                                Code:&nbsp;</span><span
                                *ngIf="commodity.hazmatDetails != undefined">{{commodity.hazmatDetails.unCode}}</span><br>
                            <span class="font-weight-semibold">Emergency Contact
                                Name:&nbsp;</span><span
                                *ngIf="commodity.hazmatDetails != undefined">{{commodity.hazmatDetails.emergencyContactName}}</span>
                            <br><span class="font-weight-semibold">Contact
                                Number:&nbsp;</span><span
                                *ngIf="commodity.hazmatDetails != undefined">{{commodity.hazmatDetails.contactPhone}}</span><br>
                            <span class="font-weight-semibold">Handling
                                Instructions:&nbsp;</span><span
                                *ngIf="commodity.hazmatDetails != undefined">{{commodity.hazmatDetails.handlingInstructions}}</span>
                        </td>
                        <td>
                            <span class="font-weight-semibold">Marks and Numbers:
                            </span>{{commodity.marksAndNumbers}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <ng-template pTemplate="footer">
        <p-button (click)="shipmentsModel = false;" label="Close"></p-button>
    </ng-template>
</p-dialog>

<!-- DRIVER DETAILS -->
<p-dialog header="Driver Details" [modal]="true" [style]="{ width: '60vw' }" [(visible)]="driversModel">
    <div class="row">
        <div class="col-lg-6">
            <table class="table table-bordered m-0">
                <tbody>
                    <tr>
                        <th width="40%" class="back-color-gray">
                            Driver#:</th>
                        <td>{{driverData.driverNumber}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Name:</th>
                        <td>{{driverData.firstName}} {{driverData.lastName}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Gender:</th>
                        <td><span *ngIf="driverData.gender == 'M'">Male</span>
                            <span *ngIf="driverData.gender == 'F'">Female</span>
                        </td>
                    </tr>


                </tbody>
            </table>
        </div>
        <div class="col-lg-6">
            <table class="table table-bordered m-0">
                <tbody>
                    <tr>
                        <th width="40%" class="back-color-gray">Fast Card#:</th>
                        <td>{{driverData.fastCardNumber}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Citizenship:</th>
                        <td>{{driverData.citizenshipCountry}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Date Of Birth:</th>
                        <td>{{driverData.dateOfBirth}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <!-- travel documents -->
    <div class="row mt-2" *ngIf="driverData.travelDocuments?.length">
        <div class="col-lg-12">
            <h4>Documents Details</h4>
        </div>
        <div class="col-lg-12">
            <table class="table table-bordered table-striped m-0">
                <thead>
                    <tr>
                        <th>Document#</th>
                        <th>Document Type</th>
                        <th>Issuing Country</th>
                        <th>Issuing Province</th>

                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let travelDocument of driverData.travelDocuments">
                        <td>{{travelDocument.number}}</td>
                        <td>{{documentsTypesObjects[travelDocument.type]}}</td>
                        <td>{{travelDocument.country}}</td>
                        <td>{{travelDocument.stateProvince}}</td>

                    </tr>

                </tbody>
            </table>
        </div>
    </div>
    <ng-template pTemplate="footer">
        <p-button (click)="driversModel = false;" label="Close"></p-button>
    </ng-template>
</p-dialog>


<!-- PASSENGER DETAILS -->
<p-dialog header="Passenger Details" [modal]="true" [style]="{ width: '60vw' }" [(visible)]="passengersModel">
    <div class="row">
        <div class="col-lg-6">
            <table class="table table-bordered m-0">
                <tbody>
                    <tr>
                        <th width="40%" class="back-color-gray">Name:</th>
                        <td>{{passengerData.firstName}} {{passengerData.lastName}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Gender:</th>
                        <td><span *ngIf="passengerData.gender == 'M'">Male</span>
                            <span *ngIf="passengerData.gender == 'F'">Female</span>
                        </td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Date Of Birth:</th>
                        <td>{{passengerData.dateOfBirth}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col-lg-6">
            <table class="table table-bordered m-0">
                <tbody>
                    <tr>
                        <th width="40%" class="back-color-gray">Fast Card#:</th>
                        <td>{{passengerData.fastCardNumber}}</td>
                    </tr>
                    <tr>
                        <th width="40%" class="back-color-gray">Citizenship:</th>
                        <td>{{passengerData.citizenshipCountry}}</td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>
    <!-- travel documents -->
    <div class="row mt-2" *ngIf="passengerData.travelDocuments?.length">
        <div class="col-lg-12">
            <h4>Documents Details</h4>
        </div>
        <div class="col-lg-12">
            <table class="table table-bordered table-striped m-0">
                <thead>
                    <tr>
                        <th>Document# </th>
                        <th>Document Type</th>
                        <th>Issuing Country</th>
                        <th>Issuing Province</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let travelDocument of passengerData.travelDocuments">
                        <td>{{travelDocument.number}}</td>
                        <td>{{documentsTypesObjects[travelDocument.type]}}</td>
                        <td>{{travelDocument.country}}</td>
                        <td>{{travelDocument.stateProvince}}</td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>
    <ng-template pTemplate="footer">
        <p-button (click)="passengersModel = false;" label="Close"></p-button>
    </ng-template>
</p-dialog>



<p-dialog header="Please check these error(s) before sending manifest" [modal]="true" [style]="{ width: '40vw'}"
    [(visible)]="errorsDisplay">
    <div class="row">
        <div class="col">
            <div *ngFor="let err of errors" class="text-danger">
                <i class="pi pi-exclamation-circle"></i> {{err.schema.title}}


                <strong>
                    <span *ngIf="err.schema.type == 'object'">
                        <span *ngFor="let item of err.instance | keyvalue">
                            <b>{{item.key}}: {{item.value}}</b>
                        </span>
                    </span>
                    <span *ngIf="err.schema.type == 'string'">
                        <span *ngIf="err.instance">{{err.instance}}</span>
                        <span *ngIf="err.instance == ''">""</span>

                    </span>
                </strong> {{err.message}}
            </div>
        </div>
    </div>
    <ng-template pTemplate="footer">
        <p-button class="" (click)="errorsDisplay = false;" label="Close"></p-button>
    </ng-template>
</p-dialog>