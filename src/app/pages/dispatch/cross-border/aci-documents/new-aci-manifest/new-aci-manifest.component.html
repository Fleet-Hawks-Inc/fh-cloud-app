<section class="body">

    <!-- start: header -->
    <app-header></app-header>
    <!-- end: header -->



    <div class="inner-wrapper">
        <!-- start: sidebar -->
        <app-sidebar></app-sidebar>
        <!-- end: sidebar -->
        <section role="main" class="content-body">
         <header class="page-header pr-5">
            <div class="row " style="padding-top:10px;">
               <div class="col-md-4 col-lg-4 font-weight-bold text-4 text-dark"> Create ACI Manifest </div>
               <div class="col-md-8  col-lg-8 text-right pr-4"> <a [routerLink]="['/dispatch', 'cross-border','eManifests']" class="btn btn-default btn-sm"><i class="fas fa-list"></i> ACI Manifests</a> </div>
            </div>
         </header>
         <div class="row text-dark">
            <div class="col">
               <section class="card">
                  <div class="card-body">
                     <form class="form-horizontal form-bordered" method="get">
                        <div class="form-group row">
                           <div class="col-lg-12">
                              <label class="control-label font-weight-bold font-bold text-lg-right text-dark text-4 font-weight-bold pt-2">Start new ACI eManifest</label>
                           </div>
                           <div class="col-lg-5 offset-lg-1">
                              <div class="form-group row">
                                 
                              <div class="col-lg-10">
                                    <label class="control-label font-weight-bold text-lg-right pt-2" >Trip Number</label>
                                    <div class="row">
                                       <div class="col-lg-4 pr-0"> <ng-select   name="CCC" [(ngModel)]="CCC">                                      
                                          <ng-option value="SAVL">SAVL</ng-option>
                                          <ng-option value="SXTF">SXTF</ng-option>
                                          <ng-option value="THXL">THXL</ng-option>
                                          <ng-option value="MLCM">MLCM</ng-option>
                                          <ng-option value="BYTM">BYTM</ng-option>
                                          <ng-option value="SWRR">SWRR</ng-option>
                                          <ng-option value="CAYR">CAYR</ng-option>
                                          <ng-option value="HYLD">HYLD</ng-option>
                                          </ng-select></div>
                                       <div class="col-lg-8 pl-0">
                                           <ng-select   name="tripNumber" [(ngModel)]="tripNumber">                                      
                                          <ng-option *ngFor = "let trip of trips" [value]="trip.tripNo">{{trip.tripNo}}</ng-option>                                      
                                          </ng-select></div>
                                    </div>
                                   
                                 </div>
                                 <div class="col-lg-10">
                                    <label class="control-label font-weight-bold text-lg-right pt-2" >Canadian Port of Entry</label>
                                    <ng-select name="portOfEntry" [(ngModel)]="portOfEntry" >                                      
                                       <ng-option *ngFor = "let port of CANPorts" [value]="port.code">Code: {{port.number}}, Name: {{port.name}}</ng-option>                                      
                                       </ng-select> 
                                 </div>
                                 <div class="col-lg-10">
                                    <label class="control-label font-weight-bold text-lg-right pt-2" >Sub Location/Warehouse</label>
                                    <ng-select name="subLocation" [(ngModel)]="subLocation" >                                      
                                       <ng-option *ngFor = "let subLocation of subLocationsList" [value]="subLocation.code">Code: {{subLocation.code}}, Name: {{subLocation.name}}</ng-option>                                      
                                       </ng-select>
                                 </div>
                                 <div class="col-lg-10">
                                    <label class="control-label font-weight-bold text-lg-right pt-2" >Estimated Arrival Date</label>
                                    <input
                                    class="form-control" type="date"
                                    placeholder="mm/dd/yyyy"
                                    name="tripDate" [(ngModel)]="tripDate" 
                                    />
                                 </div>
                                 <div class="col-lg-5">
                                    <label class="control-label font-weight-bold text-lg-right pt-2" >Estimated Arrival Time</label>
                                    <ng-select name="tripTime" [(ngModel)]="tripTime">                                      
                                       <ng-option *ngFor = "let time of timeList" [value]="time.value">{{time.description}}</ng-option>                                      
                                       </ng-select>

                                 </div>
                                 <div class="col-lg-5">
                                    <label class="control-label font-weight-bold text-lg-right pt-2" > ETA Time Zone </label>
                                    <ng-select  name="estimatedArrivalTimeZone" [(ngModel)]="estimatedArrivalTimeZone">                                      
                                       <ng-option [value]="PST">Pacific Standard Time</ng-option>     
                                       <ng-option [value]="AST">Atlantic Standard Time</ng-option>  
                                       <ng-option [value]="CST">Central Standard Time</ng-option>  
                                       <ng-option [value]="EST">Eastern Standard Time</ng-option>    
                                       <ng-option [value]="MST">Mountain Standard Time</ng-option>                                
                                       </ng-select>
                                 </div>
                              </div>
                           </div>
                           <div class="col-lg-5">
                              <div class="row">
                                 <div class="col-lg-10">
                                    <label class="control-label font-weight-bold text-lg-right pt-2" >Assign Truck</label>
                                    <ng-select name="vehicleID" [(ngModel)]="vehicleID" (change)="fetchVehicleData($event)">                                      
                                       <ng-option *ngFor = "let vehicle of vehicles" [value]="vehicle.vehicleID">{{vehicle.vehicleIdentification}}</ng-option>                                      
                                       </ng-select>
                                 </div>
                                 <div class="col-lg-2  mar-top-37">
                                    <a href="#addVehicleModal" class="modal-with-form btn btn-sm btn-success"><i class="fas fa-plus"></i></a>
                                 </div>
                              </div>
                              <div class="row">
                                 <div class="col-lg-5">
                                    <label class="control-label font-weight-bold text-lg-right pt-2" onclick="show_truck_seal_input()">Add Seal</label>
                                    <ngx-tags-input class="form-control input-lg"
                                       (onTagsChanged)="onTagsChanged($event)" [removeLastOnBackspace]="true"
                                       [maxTags]="4" style="display: none;" id="truck_seal_input"></ngx-tags-input>
                                 </div>
                                 <div class="col-lg-5 text-right">
                                    <label class="control-label font-weight-bold text-lg-right pt-2" onclick="show_truck_IIT_input()">Add IIT or Exemption</label>
                                    <ng-select [multiple]="true"  name="truckcargoExemptions" [(ngModel)]="truckcargoExemptions" style="display: none;" id="truck_IIT_input">                                      
                                       <ng-option *ngFor = "let exemption of cargoExemptionsList" [value]="exemption.code">{{exemption.name}}</ng-option>                                      
                                       </ng-select>
                                 </div>
                              </div>
                              <div class="row" *ngFor="let trailer of trailers; let t = index;">
                        
                                 <div class="col-lg-3">
                                    <label class="control-label font-weight-bold text-lg-right pt-2" >Assign Trailer</label>
                                    <ng-select  [(ngModel)]="assetId" name="assetId" (change)="getAssetData($event)">                                      
                                       <ng-option *ngFor = "let asset of assets" [value]="asset.assetID">{{asset.assetIdentification}}</ng-option>                                      
                                       </ng-select>
                                 </div>
                               
                                 <div class="col-lg-3">
                                    <label class="control-label font-weight-bold text-lg-right pt-2" onclick="show_trailer_seal_input()">Add Seal</label>
                                    <input type="text" class="form-control" id="trailer_seal_input" style="display: none;" name="">
                                 </div>
                                 <div class="col-lg-4">
                                    <label class="control-label font-weight-bold text-lg-right pt-2" onclick="show_trailer_IIT_input()">Add IIT or Exemption</label>
                                    <ng-select [multiple]="true"  name="truckcargoExemptions" [(ngModel)]="truckcargoExemptions" >                                      
                                       <ng-option *ngFor = "let exemption of cargoExemptionsList" [value]="exemption.code">{{exemption.name}}</ng-option>                                      
                                       </ng-select>
                                 </div>
                                   <div class="col-lg-2 mar-top-37">
                                    <a href="#addAssetModal" class="modal-with-form btn btn-sm btn-success"><i class="fas fa-plus"></i></a>
                                 </div>
                              
                           </div>
                           <div class="row">
                                 <div class="col-lg-10">
                                    <label class="control-label font-weight-bold text-lg-right pt-2"  >Assign Driver</label>
                                    <ng-select  [multiple]="true" [(ngModel)]="driverId" name="driverId" (change)="getDriverData($event)">                                      
                                       <ng-option *ngFor = "let driver of drivers" [value]="driver.driverID">{{driver.firstName}}</ng-option>                                      
                                       </ng-select>
                                 </div>
                                 <div class="col-lg-2  mar-top-37">
                                    <a href="#addDriverModal" class="modal-with-form btn btn-sm btn-success"><i class="fas fa-plus"></i></a>
                                 </div>
                                 <!-- <div class="col-lg-5">
                                    <label class="control-label font-weight-bold text-lg-right pt-2" onclick="show_team_driver_input()">Add Team Driver</label>
                                    <div id="team_driver_input" style="display: none;">
                                       <div class="row">
                                          <div class="col-lg-9 pr-0">
                                             <select data-plugin-selectTwo class="form-control populate">
                                                <optgroup label="Select Team Driver">
                                                   <option value="1">Anchal</option>
                                                   <option value="2">Harmeet</option>
                                                   <option value="2">Harman</option>
                                                   <option value="2">Jaskarn </option>
                                                   <option value="2">Heena</option>
                                                </optgroup>
                                             </select>
                                          </div>
                                          <div class="col-lg-3">
                                             <a href="#addDriver" class="modal-with-form btn btn-sm btn-success"><i class="fas fa-plus"></i></a>
                                          </div>
                                       </div>
                                    </div>
                                 </div> -->
                              </div>
                              <div class="row">
                                 <div class="col-lg-10">
                                    <label class="control-label font-weight-bold text-lg-right pt-2"
                                       onclick="show_passenger_input()">Add Passenger</label>
                                    <ng-select>
                                       <ng-option *ngFor="let passenger of passengers" [value]="passenger.firstName">
                                          {{passenger.firstName}}</ng-option>
                                    </ng-select>
                                 </div>
                                 <div class="col-lg-2 mar-top-37">
                                    <button type="button" data-toggle="modal" data-target="#passengerModal"
                                       class="btn btn-sm btn-success"><i class="fas fa-plus"></i></button>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="row">
                           <div class="col-lg-12">
                              <label class="control-label font-weight-bold text-lg-right text-dark text-4  pt-2">ACI Shipment Details</label>
                           </div>
                        </div>
                        <!-- new div start -->
                        <mat-expansion-panel hideToggle  *ngFor="let shipment of shipments;let s = index">
                           <mat-expansion-panel-header>
                             <mat-panel-title>
                               Shipment {{s+1}}
                             </mat-panel-title>
                           </mat-expansion-panel-header>
                           <div class="form-group row">                             
                              <div class="col-lg-5 offset-lg-1">
                                 <div class="form-group row">
                                    <div class="col-lg-5">
                                       <label class="control-label font-weight-bold text-lg-right pt-2">Loaded On</label>
                                       <ng-select name="shipment.loadedOn.type{{i}}" [(ngModel)]="shipment.loadedOn.type"
                                          (change)="loadedOnFn($event)">
                                          <ng-option value="TRUCK">TRUCK</ng-option>
                                          <ng-option value="TRAILER">TRAILER</ng-option>
                                          <ng-option value="CONTAINER">CONTAINER</ng-option>
                                       </ng-select>
                                    </div>
                                    <div class="col-lg-5" *ngIf="loadedType === 'TRUCK'">
                                       <label class="control-label font-weight-bold text-lg-right pt-2">Truck</label>
                                       <ng-select name="shipment.loadedOn.number{{i}}"
                                          [(ngModel)]="shipment.loadedOn.number">
                                          <ng-option *ngFor="let vehicle of vehicles" [value]="vehicle.vehicleID">
                                             {{vehicle.vehicleIdentification}}</ng-option>
                                       </ng-select>
                                    </div>
                                    <div class="col-lg-5" *ngIf="loadedType === 'TRAILER'">
                                       <label class="control-label font-weight-bold text-lg-right pt-2">Trailer</label>
                                       <ng-select name="shipment.loadedOn.number{{i}}"
                                          [(ngModel)]="shipment.loadedOn.number" (change)="getAssetNumber($event)">
                                          <ng-option *ngFor="let asset of assets" [value]="asset.assetID">
                                             {{asset.assetIdentification}}</ng-option>
                                       </ng-select>
                                    </div>
                                    <div class="col-lg-5" *ngIf="loadedType === 'CONTAINER'">
                                       <label class="control-label font-weight-bold text-lg-right pt-2">Container</label>
                                       <input type="text" class="form-control"  name="shipment.loadedOn.number{{i}}"
                                       [(ngModel)]="shipment.loadedOn.number">
                                    </div>
                                    <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >Shipment Type</label>
                                       <ng-select name="shipment.shipmentType{{s}}" [(ngModel)]="shipment.shipmentType" >
                                          <ng-option *ngFor="let shipment of shipmentTypeList" [value]="shipment.code">
                                             {{shipment.description}}</ng-option>
                                       </ng-select>
                                    </div>
                                    <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >Cargo Control Number</label>
                                       <!-- <input type="text" class="form-control" name="shipment.cargoControlNumber{{s}}" [(ngModel)]="shipment.cargoControlNumber">   -->
                                       <div class="row">
                                          <div class="col-lg-4 pr-0">
                                             <ng-select name="shipment.CCC{{s}}" [(ngModel)]="shipment.CCC">
                                                <ng-option value="SAVL">SAVL</ng-option>
                                                <ng-option value="SXTF">SXTF</ng-option>
                                                <ng-option value="THXL">THXL</ng-option>
                                                <ng-option value="MLCM">MLCM</ng-option>
                                                <ng-option value="BYTM">BYTM</ng-option>
                                                <ng-option value="SWRR">SWRR</ng-option>
                                                <ng-option value="CAYR">CAYR</ng-option>
                                                <ng-option value="HYLD">HYLD</ng-option>
                                             </ng-select>
                                          </div>
                                          <div class="col-lg-8 pl-0">
                                             <input type="text" class="form-control"
                                                name="shipment.cargoControlNumber{{s}}" [(ngModel)]="shipment.cargoControlNumber" *ngIf="shipment.shipmentType !=='PARS'">
                                                <input type="text" class="form-control" name="cargoControlNumber{{s}}" [(ngModel)]="cargoControlNumber"
                                                 value="PARS" *ngIf="shipment.shipmentType ==='PARS'">
                                          </div>
                                       </div>
                                    </div>
                                    <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >First Canadian Port of Entry</label>
                                       <ng-select name="shipment.portOfEntry{{s}}" [(ngModel)]="shipment.portOfEntry">                                      
                                          <ng-option *ngFor = "let port of CANPorts" [value]="port.code">Code: {{port.number}}, Name: {{port.name}}</ng-option>                                      
                                          </ng-select> 
                                    </div>
                                    <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >Release Office</label>
                                       <ng-select  name="shipment.releaseOffice{{s}}" [(ngModel)]="shipment.releaseOffice">                                      
                                          <ng-option *ngFor = "let releaseOffice of ACIReleaseOfficeList" [value]="releaseOffice.number">Code: {{releaseOffice.number}}, Name: {{releaseOffice.name}}</ng-option>                                      
                                          </ng-select>
                                    </div>
                                    <!-- <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >Sub Location</label>
                                       <input type="text" class="form-control" name="shipment.cargoControlNumber{{s}}" [(ngModel)]="shipment.cargoControlNumber">
                                    </div> -->
                                 </div>
                              </div>
                              <div class="col-lg-5">
                                 <div class="form-group row">
                                    <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >Estimated Arrival Date</label>
                                       <input type="date"  class="form-control"  name="shipment.estimatedArrivalDate{{s}}" [(ngModel)]="shipment.estimatedArrivalDate">
                                    </div>
                                    <div class="col-lg-5">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >Estimated Arrival Time</label>
                                       <ng-select name="shipment.estimatedArrivalTime{{s}}" [(ngModel)]="shipment.estimatedArrivalTime">                                      
                                          <ng-option *ngFor = "let time of timeList" [value]="time.value">{{time.description}}</ng-option>                                      
                                          </ng-select> 
                                    </div>
                                    <div class="col-lg-5">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" > ETA Time Zone </label>
                                       <ng-select  name="shipment.estimatedArrivalTimeZonee{{s}}" [(ngModel)]="shipment.estimatedArrivalTimeZone">                                      
                                          <ng-option [value]="PST">Pacific Standard Time</ng-option>     
                                          <ng-option [value]="AST">Atlantic Standard Time</ng-option>  
                                          <ng-option [value]="CST">Central Standard Time</ng-option>  
                                          <ng-option [value]="EST">Eastern Standard Time</ng-option>    
                                          <ng-option [value]="MST">Mountain Standard Time</ng-option>                                
                                          </ng-select>
                                    </div>
                                    <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >Assign Shipper</label>
                                       <select class="form-control populate" name="shipment.shipper.name{{s}}" [(ngModel)]="shipment.shipper.name">
                                          <optgroup label="Select Shipper">
                                             <option value="Art Place">Art Place</option>
                                             <option value="Canadian Lava Co.">Canadian Lava Co.</option>
                                             <option value="Howard Electric INC.">Howard Electric INC.</option>
                                             <option value="Searcy Trucking Ltd">Searcy Trucking Ltd</option>
                                             <option value="Titan Transline">Titan Transline</option>
                                             <option value="JADE TRANSPORT LTD">JADE TRANSPORT LTD</option>
                                             <option value="Precision">Precision</option>
                                             <option value="TEAMS Transport">TEAMS Transport</option>
                                          </optgroup>
                                       </select>
                                    </div>
                                    <div class="col-lg-2  mar-top-37">
                                       <a href="#addShipperModal" class="modal-with-form btn btn-sm btn-success"><i class="fas fa-plus"></i></a>
                                    </div>
                                    <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >Assign Consignee</label>
                                       <select class="form-control populate" name="shipment.consignee.name{{s}}" [(ngModel)]="shipment.consignee.name">
                                          <optgroup label="Select Consignee">
                                             <option value="8889 Heather Street Meaford, ON N4L 5M1">8889 Heather Street Meaford, ON N4L 5M1</option>
                                             <option value="78 Ridge Drive Porters Lake, NS B3E 1R8">78 Ridge Drive Porters Lake, NS B3E 1R8</option>
                                             <option value="5 Military Dr. Rivière-du-Loup, QC G5R 1T1">5 Military Dr. Rivière-du-Loup, QC G5R 1T1</option>
                                             <option value="279 Eagle Dr. Prince Rupert, BC V8J 4J1">279 Eagle Dr. Prince Rupert, BC V8J 4J1</option>
                                             <option value="461 Bedford St. St. Mary's, ON N4X 5N0">461 Bedford St. St. Mary's, ON N4X 5N0 </option>
                                             <option value="84 Wellington Dr. Dufferin County, ON L0N 9G9">84 Wellington Dr. Dufferin County, ON L0N 9G9</option>
                                          </optgroup>
                                       </select>
                                    </div>
                                    <div class="col-lg-2 mar-top-37">
                                       <a href="#addConsigneeModal" class="modal-with-form btn btn-sm btn-success"><i class="fas fa-plus"></i></a>
                                    </div>
                                    <div class="col-lg-5">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >State of Loading</label>
                                       <ng-select   name="shipment.cityOfLoading.stateProvince{{s}}"  [(ngModel)]="shipment.cityOfLoading.stateProvince">                                      
                                          <ng-option *ngFor = "let state of states" [value]="state.stateCode">{{state.stateName}}</ng-option>                                      
                                          </ng-select>
                                    </div>
                                    <div class="col-lg-5">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >City of Loading</label>
                                       <ng-select   name="shipment.cityOfLoading.cityName{{s}}" [(ngModel)]="shipment.cityOfLoading.cityName">                                      
                                          <ng-option *ngFor = "let city of cities" [value]="city.cityName">{{city.cityName}}</ng-option>                                      
                                          </ng-select>
                                    </div>
                                    <div class="col-lg-5">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >State of Acceptance</label>
                                       <ng-select   name="shipment.cityOfAcceptance.stateProvince{{s}}"  [(ngModel)]="shipment.cityOfAcceptance.stateProvince">                                      
                                          <ng-option *ngFor = "let state of states" [value]="state.stateCode">{{state.stateName}}</ng-option>                                      
                                          </ng-select>
                                    </div>
                                    <div class="col-lg-5">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >City of Acceptance</label>
                                       <ng-select   name="shipment.cityOfAcceptance.cityName{{s}}" [(ngModel)]="shipment.cityOfAcceptance.cityName">                                      
                                          <ng-option *ngFor = "let city of cities" [value]="city.cityName">{{city.cityName}}</ng-option>                                      
                                          </ng-select>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="row mb-2">
                              <div class="col-lg-6">
                                 <label class="control-label font-weight-bold text-lg-right text-dark text-4 pt-2">General Commodity Details</label>
                              </div>
                              <div class="col-lg-6">
                                 <label class="control-label font-weight-bold text-lg-right text-dark text-4 pt-2">Hazardous Material Details</label>
                              </div>
                           </div>
                          <div class="form-group row" *ngFor="let commodity of shipment.commodities;let i = index">
                              <div class="col-lg-5 offset-lg-1">
                                 <div class="row">
                                    <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2">Commodity</label>
                                       <input type="text" class="form-control" name="commodity.description{{i}}"
                                          [(ngModel)]="commodity.description">
                                    </div>
                                    <div class="col-lg-5">
                                       <label class="control-label font-weight-bold text-lg-right pt-2">Quantity</label>
                                       <div class="row">
                                          <div class="col-lg-5 pr-0">
                                             <input type="number" class="form-control" name="commodity.quantity{{i}}"
                                                [(ngModel)]="commodity.quantity">
                                          </div>
                                          <div class="col-lg-7 pl-0">
                                             <ng-select name="commodity.packagingUnit{{i}}"
                                                [(ngModel)]="commodity.packagingUnit">
                                                <ng-option *ngFor="let packagingUnit of packagingUnitsList"
                                                   [value]="packagingUnit.code">{{packagingUnit.name}}</ng-option>
                                             </ng-select>
                                          </div>
                                       </div>
                                    </div>
                                    <div class="col-lg-5">
                                       <label class="control-label font-weight-bold text-lg-right pt-2">Weight</label>
                                       <div class="row">
                                          <div class="col-lg-5 pr-0">
                                             <input type="number" class="form-control" name="commodity.weight{{i}}"
                                                [(ngModel)]="commodity.weight">
                                          </div>
                                          <div class="col-lg-7 pl-0">
                                             <select data-plugin-selectTwo class="form-control populate"
                                                name="commodity.weightUnit{{i}}" [(ngModel)]="commodity.weightUnit">
                                                <optgroup label="">
                                                   <option value="LB">Pounds</option>
                                                   <option value="KG">Kilograms</option>
                                                </optgroup>
                                             </select>
                                          </div>
                                       </div>
                                    </div>  
                                    <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2">Marks and Numbers</label>
                                       <input type="text" class="form-control" name="commodity.marksAndNumbers{{i}}"
                                          [(ngModel)]="commodity.marksAndNumbers">
                                    </div>  
                                    <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2" >Handling Instructions</label>
                                       <textarea class="form-control" rows="3" name="commodity.hazmatDetails.handlingInstructions{{i}}"
                                       [(ngModel)]="commodity.hazmatDetails.handlingInstructions"></textarea>
                                       </div>                              
                                 </div>
                              </div>
                              <div class="col-lg-5">
                                 <div class="form-group row">
                                    <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2">Hazmat Code</label>
                                       <input type="text" class="form-control" name="commodity.hazmatDetails.unCode{{i}}"
                                          [(ngModel)]="commodity.hazmatDetails.unCode">
                                    </div>
                                    <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2">Emergency Contact
                                          Name</label>
                                       <input type="text" class="form-control"
                                          name="commodity.hazmatDetails.emergencyContactName{{i}}"
                                          [(ngModel)]="commodity.hazmatDetails.emergencyContactName">
                                    </div>
                                    <div class="col-lg-10">
                                       <label class="control-label font-weight-bold text-lg-right pt-2">Contact
                                          Number</label>
                                       <input type="tel" class="form-control" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"
                                          name="commodity.hazmatDetails.contactPhone{{i}}"
                                          [(ngModel)]="commodity.hazmatDetails.contactPhone">
                                    </div>
                                  
                                   
                                 </div>
                              </div>
                           </div> 
                           <div class="form-group row">
                              <div class="col-lg-11">
                                 <button type="button" (click)="addCommodity(s)"
                                    class="btn btn-sm btn-success pull-right">Add More Commodity</button>
                              </div>
                           </div>
                         </mat-expansion-panel>
                         <div class="form-group row">
                           <div class="col-lg-11">
                              <button type="button" (click)="addShipment()"
                                 class="btn btn-sm btn-success pull-right">Add More Shipment</button>
                           </div>
                        </div>
                        <!-- new div end -->
                       
                        <div class="form-group row">
                           <div class="col-lg-10 text-right">
                              <button type="button" onclick="goBack()" class="btn btn-default m-1">Cancel</button>
                              <button type="button" *ngIf="!entryID" (click)="addACIManifest()" class="btn btn-success">Save</button> 
                              <button type="button" *ngIf="entryID" (click)="updateACIManifest()" class="btn btn-success">Update</button>
                           </div>
                        </div>
                     </form>
                  </div>
               </section>
            </div>
         </div>
      </section>
    </div>



</section>




<!-- PASSENGER MODAL -->
<div class="modal fade" id="passengerModal" tabindex="-1" role="dialog" aria-labelledby="passengerModalLabel"
   aria-hidden="true">
   <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="passengerModalLabel">Passenger Details</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
               <span aria-hidden="true">&times;</span>
            </button>
         </div>
         <div class="modal-body">
            <form>
               <div *ngFor="let passenger of passengers;let i=index ">
                  <div class="form-group">
                     <div class="row">
                        <div class="col-lg-6"> <label class="col-form-label">First Name</label>
                           <input type="text" class="form-control" name="passenger.firstName{{i}}"
                              [(ngModel)]="passenger.firstName">
                        </div>
                        <div class="col-lg-6"> <label class="col-form-label">Last Name</label>
                           <input type="text" class="form-control" name="passenger.lastName{{i}}"
                              [(ngModel)]="passenger.lastName">
                        </div>
                     </div>
                  </div>
                  <div class="form-group">
                     <div class="row">
                        <div class="col-lg-6"> <label class="col-form-label">Gender</label>
                           <select data-plugin-selectTwo class="form-control populate" name="passenger.gender{{i}}"
                              [(ngModel)]="passenger.gender">
                              <optgroup label="">
                                 <option value="M">Male</option>
                                 <option value="F">Female</option>
                              </optgroup>
                           </select>
                        </div>
                        <div class="col-lg-6"> <label class="col-form-label">Date of Birth</label>
                           <input class="form-control" placeholder="dd-mm-yyyy" name="passenger.dateOfBirth{{i}}"
                              [(ngModel)]="passenger.dateOfBirth" (click)="d.toggle()" ngbDatepicker
                              #d="ngbDatepicker" />
                        </div>
                     </div>
                  </div>
                  <div class="form-group">
                     <div class="row">
                        <div class="col-lg-6"> <label class="col-form-label">Country of Citizenship</label>
                           <ng-select name="passenger.citizenshipCountry{{i}}"
                              [(ngModel)]="passenger.citizenshipCountry">
                              <ng-option *ngFor="let country of countries" [value]="country.countryCode">
                                 {{country.countryName}}</ng-option>
                           </ng-select>
                        </div>
                        <div class="col-lg-6"> <label class="col-form-label">Fast Card#</label>
                           <input type="text" class="form-control" name="passenger.fastCardNumber{{i}}"
                              [(ngModel)]="passenger.fastCardNumber">
                        </div>
                     </div>
                  </div>
                  <div class="form-group" *ngFor="let document of passenger.travelDocuments;let j = index">
                     <div class="row">
                        <div class="col-lg-6"> <label class="col-form-label">Document#</label>
                           <input type="text" class="form-control" name="document.number{{j}}"
                              [(ngModel)]="document.number">
                        </div>
                        <div class="col-lg-6"> <label class="col-form-label">Document Type</label>
                           <ng-select name="document.type{{j}}" [(ngModel)]="document.type">
                              <ng-option *ngFor="let document of documentTypeList" [value]="document.code">
                                 {{document.description}}</ng-option>
                           </ng-select>
                        </div>
                     </div>
                     <div class="row">
                        <div class="col-lg-6"> <label class="col-form-label">Issuing Country</label>
                           <ng-select (change)="getStatesDoc(i,j)" name="document.country{{j}}"
                              [(ngModel)]="document.country">
                              <ng-option *ngFor="let country of countries" [value]="country.countryID">
                                 {{country.countryName}}</ng-option>
                           </ng-select>
                        </div>
                        <div class="col-lg-6"> <label class="col-form-label">Issuing State</label>
                           <ng-select name="document.stateProvince{{j}}" [(ngModel)]="document.stateProvince">
                              <ng-option *ngFor="let state of passengerDocStates" [value]="state.stateCode">
                                 {{state.stateName}}</ng-option>
                           </ng-select>
                        </div>
                     </div>
                  </div>
                  <div class="form-group">
                     <div class="row">
                        <div class="col-lg-12"><button type="button" (click)="addDocument(i)"
                              class="btn btn-success btn-sm pull-right">Add More Document(s)</button></div>
                     </div>
                  </div>
               </div>
               <div class="form-group">
                  <div class="row">
                     <div class="col-lg-12"><button type="button" (click)="addMorePassenger()"
                           class="btn btn-success btn-sm">Add More Passenger(s)</button></div>
                  </div>
               </div>
            </form>
         </div>
         <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" (click)="addPassenger()" class="btn btn-success">Save</button>
         </div>
      </div>
   </div>
</div>

