<section class="body">
  <div class="inner-wrapper">
    <section role="main" class="content-body">
      <header class="page-header">
        <div class="row" style="padding-top:10px;">
          <div class="col-md-4 col-lg-4 font-weight-bold text-4 text-dark"> {{title}} </div>
          <div class="col-md-8  col-lg-8 text-right"> <a [routerLink]="['/dispatch', 'cross-border','eManifests']"
              class="btn btn-default btn-sm"><i class="fas fa-list"></i> ACE Manifests List</a> </div>
        </div>
      </header>
      <div class="row text-dark">
        <div class="col">
          <section class="card">
            <div class="card-body">
              <form class="form-horizontal form-bordered" method="get" name="form" id="form_">
                <div class="form-group row">
                  <div class="col-lg-12">
                    <label
                      class="control-label font-weight-bold font-bold text-lg-right text-dark text-4 font-weight-bold pt-2">Start
                      new ACE eManifest</label>
                  </div>
                  <div class="col-lg-5 offset-lg-1">
                    <div class="row">
                      <div class="col-lg-3">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Trip#<span
                            class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <!-- <ng-select name="SCAC" [(ngModel)]="SCAC" placeholder="Select SCAC">
                          <ng-option *ngFor="let carrier of carriers" [value]="carrier.SCAC">
                            {{carrier.SCAC}}</ng-option>
                        </ng-select> -->
                          <ng-select name="SCAC" [(ngModel)]="SCAC" (change)="onChangeHideErrors('SCAC')" placeholder="Select SCAC">
                          <ng-option value="DOTL">DOTL</ng-option>
                          <ng-option value="FVFA">FVFA</ng-option>
                          <ng-option value="GHGP">GHGP</ng-option>
                        </ng-select>
                      </div>
                      <div class="col-lg-7 pl-0">
                        <label class="control-label font-weight-bold text-lg-right pt-2">&nbsp;</label>
                        <input type="text" class="form-control" name="tripNumber" maxlength="21"
                          [(ngModel)]="tripNumber"
                          placeholder="Enter unique number,min 4 characters and max 21 characters">
                      </div>
                      <div class="col-lg-10">
                        <label class="control-label font-weight-bold text-lg-right pt-2">US Port of
                          Arrival<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <ng-select name="usPortOfArrival" [(ngModel)]="usPortOfArrival" (change)="onChangeHideErrors('usPortOfArrival')"
                          placeholder="Select US port of arrival">
                          <ng-option *ngFor="let port of USports" [value]="port.code">Code: {{port.code}},
                            Location: {{port.portOfEntry}}</ng-option>
                        </ng-select>
                      </div>
                      <div class="col-lg-10">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Estimated Arrival
                          Date<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <input type="text" class="form-control" name="estimatedArrivalDate" placeholder="Enter date"
                          ngbDatepicker #d6="ngbDatepicker" [minDate]="getcurrentDate" (click)="d6.toggle();onChangeHideErrors('estimatedArrivalDate')"
                          [(ngModel)]="estimatedArrivalDate" />

                      </div>
                      <div class="col-lg-10">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Estimated Arrival
                          Time<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <ng-select name="estimatedArrivalTime" [(ngModel)]="estimatedArrivalTime" (change)="onChangeHideErrors('estimatedArrivalTime')"
                          placeholder="Select time">
                          <ng-option *ngFor="let time of timeList" [value]="time.value">
                            {{time.description}}</ng-option>
                        </ng-select>
                      </div>
                    </div>

                  </div>
                  <div class="col-lg-5">
                    <div class="row">
                      <div class="col-lg-10">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Assign Vehicle<span
                            class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <ng-select name="truck.truckID" [(ngModel)]="truck.truckID"  (change)="onChangeHideErrors('truck.truckID')">
                          <ng-option *ngFor="let vehicle of vehicles" [value]="vehicle.vehicleID">
                            {{vehicle.vehicleIdentification}}</ng-option>
                        </ng-select>
                      </div>
                      <div class="col-lg-2  mar-top-37">
                        <!-- <a href="#addVehicleModal" class="modal-with-form btn btn-sm btn-success"><i
                                          class="fas fa-plus"></i></a> -->
                      </div>
                      <div class="col-lg-10">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Add Seal (Required
                          when security seals are being used (if no asset is attached))</label>
                        <div class="row">
                          <div class="col-lg-3" *ngFor="let seal of truck.sealNumbers; let i=index;">
                            <input type="text" class="form-control" name="sealNumbers{{i}}.sealNumber"
                              [(ngModel)]='seal.sealNumber'>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-10">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Add IIT&nbsp; <span
                            class="text-1 optional-label-color">(optional)</span></label>
                        <ng-select placeholder="Select IIT">
                          <ng-option value="CARRIER">Trip contains IIt's covered under 10.41(a) with
                            carriers bond.</ng-option>
                          <ng-option value="IMPORTER">Trip contains IIt's covered under 10.41(a) with
                            importers bond.</ng-option>
                        </ng-select>
                      </div>

                    </div>
                    <div class="row">
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Assign Main Driver<span
                            class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                        <ng-select [(ngModel)]="mainDriver" name="mainDriver" id="mainDriver"  placeholder="Select driver" (change)="onChangeHideErrors('mainDriver')">
                          <ng-option *ngFor="let driver of fetchedDrivers" [value]="driver.driverID">
                            {{driver.firstName}} {{driver.lastName}}</ng-option>
                        </ng-select>
                      </div>
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right pt-2">Assign
                          Co-Driver&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                        <ng-select [multiple]="true" [(ngModel)]="coDrivers" name="coDrivers" (click)="fixCoDrivers()"
                          placeholder="Select co-driver">
                          <ng-option *ngFor="let driver of fetchedCoDrivers" [value]="driver.driverID">
                            {{driver.firstName}} {{driver.lastName}}</ng-option>
                        </ng-select>
                      </div>
                      <div class="col-lg-2  mar-top-37">
                        <!-- <a href="#addDriverModal" class="modal-with-form btn btn-sm btn-success"><i
                                          class="fas fa-plus"></i></a> -->
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Passenger div  start-->

             <div class="row">
              <div class="col-lg-6">
                <label class="control-label font-weight-bold font-bold text-lg-right text-dark text-4 font-weight-bold pt-2">Passenger(s) <span class="text-1 optional-label-color">(optional)</span></label>
             </div>
             <div class="col-lg-6 text-right">
              <button type="button" (click)="addMorePassenger()"  *ngIf="passengers.length == 0" class="btn btn-success btn-sm mr-1"><i class="fas fa-plus"></i> Add
                Passenger</button>
             </div>
             </div>
                <div class="row" *ngFor="let passenger of passengers;let i=index ">
                  <div class="col">
                    <div class="row pb-4">
                      <div class="col-lg-12 text-right">
                        <button type="button" (click)="deletePassenger(i)" class="btn btn-sm btn-danger"> Delete
                          Passenger</button>
                      </div>

                      <div class="col-lg-5 offset-lg-1">
                        <div class="form-group row">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">First Name<span
                              class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                              [attr.name]="'passengers['+i+'].firstName'" placeholder="Enter passenger first name"
                              [(ngModel)]="passenger.firstName">
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Gender<span
                              class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <ng-select data-plugin-selectTwo class="form-control populate" [ngModelOptions]="{standalone: true}"
                            [attr.name]="'passengers['+i+'].gender'" aria-placeholder="Select pasenger gender"
                            [(ngModel)]="passenger.gender">
                            <optgroup label="">
                              <ng-option value="M">Male</ng-option>
                              <ng-option value="F">Female</ng-option>
                            </optgroup>
                          </ng-select>
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Country of
                              Citizenship<span
                              class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <ng-select [ngModelOptions]="{standalone: true}"
                              [attr.name]="'passengers['+i+'].citizenshipCountry'"
                              placeholder="Select citizenship country " [(ngModel)]="passenger.citizenshipCountry">
                              <ng-option *ngFor="let country of countriesList" [value]="country.code">
                                {{country.name}}</ng-option>
                            </ng-select>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <div class="form-group row">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Last Name<span
                              class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                              [attr.name]="'passengers['+i+'].lastName'" placeholder="Enter passenger last name"
                              [(ngModel)]="passenger.lastName"> </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Date of Birth<span
                              class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                              <input class="form-control" type="text" placeholder="mm-dd-yyyy" ngbDatepicker [minDate]="birthDateMinLimit" #d7="ngbDatepicker" [maxDate]="getcurrentDate" (click)="d7.toggle()"
                              [ngModelOptions]="{standalone: true}" [attr.name]="'passengers['+i+'].dateOfBirth'"
                              [(ngModel)]="passenger.dateOfBirth" />
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">FAST Card#&nbsp;<i
                              class="fas fa-exclamation-circle" data-toggle="tooltip"
                              data-placement="top"
                              title="FAST - Free and Secure Trade,14 digits number,beginning with 4270 or 4110 and ending with 00 or 01 or 02"></i> &nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                            <input type="text" maxlength="14" (keyup)="fastValidation($event)" [class.error]="errorFastCard"
                              placeholder="14 digits,beginning with 4270 or 4110 and ending with 00 or 01 or 02 (42700012345601)"
                              class="form-control">
                              <div class="text-danger" *ngIf="errorFastCard">Enter valid FAST Card number.</div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- document div start -->
                    <div class="row pb-4" *ngFor="let document of passenger.travelDocuments;let j = index">
                      <div class="col-lg-12 text-right">
                        <button type="button" *ngIf="j != 0;" (click)="deleteDocument(j,i)" class="btn btn-sm btn-danger">
                          Delete Document</button>
                      </div>
                      <div class="col-lg-5 offset-lg-1">
                        <div class="form-group row">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Document#<span
                              class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <input type="text" class="form-control" placeholder="Enter travel document number"
                            [ngModelOptions]="{standalone: true}"
                            [attr.name]="'passengers['+i+'].travelDocuments['+j+'].number'" [(ngModel)]="document.number">
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Issuing Country<span
                              class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <ng-select [ngModelOptions]="{standalone: true}"
                              [attr.name]="'passengers['+i+'].travelDocuments['+j+'].country'"
                              (change)="resetpassengerDocState(i,j)" [(ngModel)]="document.country">
                              <ng-option *ngFor="let country of countries" [value]="country.countryID">
                                {{country.countryName}}</ng-option>
                            </ng-select>

                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <div class="form-group row">

                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Document Type<span
                              class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <ng-select [ngModelOptions]="{standalone: true}"
                              [attr.name]="'passengers['+i+'].travelDocuments['+j+'].type'" [(ngModel)]="document.type">
                              <ng-option *ngFor="let document of documentTypeList" [value]="document.code">
                                {{document.description}}</ng-option>
                            </ng-select>
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Issuing Province<span
                              class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <ng-select [ngModelOptions]="{standalone: true}" id="passengerDocStateSelect"
                              [attr.name]="'passengers['+i+'].travelDocuments['+j+'].stateProvince'"
                              [(ngModel)]="document.stateProvince">
                              <ng-container *ngFor="let state of passengerDocStates| async">
                                <ng-option *ngIf="state.countryID == passengers[i].travelDocuments[j].country"
                                  [value]="state.stateID">{{state.stateCode}} - {{state.stateName}}</ng-option>
                              </ng-container>
                            </ng-select>
                          </div>
                          <div class="col-lg-2 mar-top-37">
                            <a href="javascript:;" data-toggle="modal" data-target="#addStateModal"
                              class="btn btn-sm btn-success modal-with-form"><i class="fas fa-plus"></i></a> </div>

                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-lg-10 text-right pr-0">
                          <button type="button" (click)="addDocument(i)" id="addDocBtn" class="btn btn-success btn-sm mb-2"><i class="fas fa-plus"></i>Add Another
                            Document</button>
                      </div>
                    </div>
                    <!-- document div end -->
                  </div>
                </div>
                <div class="row">
                  <div class="col text-right">
                    <button type="button" *ngIf="passengers.length != 0" (click)="addMorePassenger()" class="btn btn-success btn-sm mr-1"><i class="fas fa-plus"></i>Add Another Passenger</button>
                  </div>
                </div>
                  <!-- Passenger div  end-->
                <!-- SHIPMENT DIV STARTS -->
                <div class="row">
                  <div class="col-lg-12">
                    <label class="control-label font-weight-bold text-lg-right text-dark text-4  pt-2"
                      *ngIf="shipments.length !== 0">ACE Shipment Details</label>
                    <label class="control-label font-weight-bold text-lg-right text-dark text-4  pt-2"
                      *ngIf="shipments.length === 0">US Address Details</label>
                  </div>
                </div>
                <div class="row" *ngIf="shipments.length === 0">
                  <!-- NEW ADDRESS DIV -->
                  <div class="col-10 offset-lg-1">
                    <div  class="address-item">
                      <div class="form-group row border-bottom-0">
                         <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Start typing your location&nbsp; <span
                                  class="text-1 optional-label-color">(optional)</span></label>
                            <input [(ngModel)]="usAddress.address.userLocation" name="address.userLocation"
                               (keyup)="searchTerm.next($event);" type="text" class="form-control"
                               placeholder="Type Address" [disabled]="usAddress.address.manual"  [class.error]="errorClassUserLocation">
                               <div class="text-danger" *ngIf="errorClassUserLocation">This field is required.</div>

                            <div class="checkbox-custom pt-2">
                               <input [(ngModel)]="usAddress.address.manual" name="manual"
                                  (change)="manAddress($event,null,null,'usAddress')" type="checkbox">
                               <label for="man_address">Type Manually</label>
                            </div>
                            <div class="map-search__results bg-white">
                               <ul class="p-0 m-0 text-left">
                                  <li *ngFor="let item of searchResults;">
                                     <a href="javascript:;"
                                        (click)="userAddress(null,null,item,'usAddress')">{{item.address.label}}</a>
                                  </li>
                               </ul>
                            </div>
                         </div>
                         <div class="col-lg-2 mar-top-37">
                            <a class="btn btn-dark mr-2" href="javascript:;"
                               (click)="clearUserLocation(null,null,'usAddress');">Clear</a>
                         </div>
                      </div>
                      <div class="address-inner" *ngIf="usAddress.address.manual">
                        <div class="row">
                          <div class="col-lg-6">
                            <div class="row">
                              <div class="col-lg-10">
                                <label class="control-label font-weight-bold text-lg-right pt-2">Address</label>
                                <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'usAddress.address.addressLine'" [class.error]="errorClassAddress"
                                  [(ngModel)]="usAddress.address.addressLine"
                                  placeholder="Enter street level address">
                                  <div class="text-danger" *ngIf="errorClassAddress">This field is required.</div>
                              </div>

                            </div>
                            <div class="row">
                              <div class="col-lg-10">
                                <label class="control-label font-weight-bold text-lg-right pt-2">Country</label>
                                <ng-select [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'usAddress.address.countryID'" [class.error]="errorClassCountry"
                                  [(ngModel)]="usAddress.address.countryID" (change)="resetusAddressState()">
                                  <ng-option *ngFor="let country of countries" [value]="country.countryID">
                                    {{country.countryName}}</ng-option>
                                </ng-select>
                                <div class="text-danger" *ngIf="errorClassCountry">This field is required.</div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-lg-10">
                                <label class="control-label font-weight-bold text-lg-right pt-2">Province</label>
                                <ng-select [ngModelOptions]="{standalone: true}" id="usAddressStateSelect"
                                  (change)="resetusAddressCity()"
                                  [attr.name]="'usAddress.address.stateID'" [class.error]="errorClassState"
                                  [(ngModel)]="usAddress.address.stateID">
                                  <ng-container *ngFor="let state of modalStates| async">
                                    <ng-option *ngIf="state.countryID == usAddress.address.countryID"
                                      [value]="state.stateID"> {{state.stateCode}} - {{state.stateName}}</ng-option>
                                  </ng-container>
                                </ng-select>
                                <div class="text-danger" *ngIf="errorClassState">This field is required.</div>

                              </div>
                              <div class="col-lg-2 mar-top-37">
                                <a href="javascript:;" data-toggle="modal" data-target="#addStateModal"
                                  class="btn btn-sm btn-success modal-with-form"><i class="fas fa-plus"></i></a>
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-6">
                            <div class="row">
                              <div class="col-lg-10">
                                <label class="control-label font-weight-bold text-lg-right pt-2">City</label>
                                <ng-select [ngModelOptions]="{standalone: true}" id="usAddressCitySelect"
                                  [attr.name]="'usAddress.address.cityID'" [class.error]="errorClassCity"
                                  [(ngModel)]="usAddress.address.cityID">
                                  <ng-container *ngFor="let city of modalCities| async">
                                    <ng-option *ngIf="city.stateID == usAddress.address.stateID"
                                      [value]="city.cityID"> {{city.cityName}}</ng-option>
                                  </ng-container>
                                </ng-select>
                                <div class="text-danger" *ngIf="errorClassCity">This field is required.</div>

                              </div>
                              <div class="col-lg-2 mar-top-37">
                                <a href="javascript:;" data-toggle="modal" data-target="#addCityModal"
                                  class="btn btn-sm btn-success modal-with-form"><i class="fas fa-plus"></i></a>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-lg-10">
                                <label class="control-label font-weight-bold text-lg-right pt-2">Postal Code</label>
                                <input type="text" class="form-control" [ngModelOptions]="{standalone: true}" [class.error]="errorClassPostal"
                                  [attr.name]="'usAddress.address.postalCode'"
                                  [(ngModel)]="usAddress.address.postalCode">
                                  <div class="text-danger" *ngIf="errorClassPostal">This field is required.</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                   </div>
                 </div>
                </div>
                <mat-accordion>
                  <mat-expansion-panel hideToggle *ngFor="let shipment of shipments;let s = index">
                    <mat-expansion-panel-header>
                      <mat-panel-title>
                        <span class="line-height-lg">Shipment {{s+1}}</span>
                        <button type="button" (click)="deleteShipment(s)"
                          class="btn btn-xs btn-danger pull-right mt-1-c1"> Delete Shipment</button>
                      </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="form-group row">
                      <div class="col-lg-5 offset-lg-1">
                        <div class="form-group row">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Shipment
                              Type<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <ng-select [attr.name]="'shipments['+s+'].type'" [(ngModel)]="shipment.type"
                              [ngModelOptions]="{standalone: true}">
                              <ng-option *ngFor="let shipment of shipmentTypeList" [value]="shipment.code">
                                {{shipment.description}}</ng-option>
                            </ng-select>
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Shipment
                              Control#<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <div class="row">
                              <div class="col-lg-4">
                                <!-- <ng-select [ngModelOptions]="{standalone: true}" placeholder="Select SCAC"
                                  [attr.name]="'shipments['+s+'].SCAC'" [(ngModel)]="shipment.SCAC"
                                  [ngModelOptions]="{standalone: true}">
                                  <ng-option *ngFor="let carrier of carriers" [value]="carrier.SCAC">
                                    {{carrier.SCAC}}</ng-option>
                                </ng-select> -->
                                <ng-select [ngModelOptions]="{standalone: true}" placeholder="Select SCAC"
                                  [attr.name]="'shipments['+s+'].SCAC'" [(ngModel)]="shipment.SCAC"
                                  [ngModelOptions]="{standalone: true}">
                                  <ng-option value="DOTL">DOTL</ng-option>
                                  <ng-option value="FVFA">FVFA</ng-option>
                                  <ng-option value="GHGP">GHGP</ng-option>
                                </ng-select>
                              </div>
                              <div class="col-lg-8">
                                <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'shipments['+s+'].shipmentControlNumber'"
                                  placeholder="Enter unique number, min 4 characters, max 12 characters"
                                  [(ngModel)]="shipment.shipmentControlNumber" (change)="onChangeHideErrors('shipments['+s+'].shipmentControlNumber')">
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Province of
                              Loading<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <ng-select [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].provinceOfLoading'" [ngModelOptions]="{standalone: true}"
                              [(ngModel)]="shipment.provinceOfLoading">
                              <ng-option *ngFor="let state of states" [value]="state.stateID">{{state.stateCode}} - {{state.stateName}}</ng-option>
                            </ng-select>
                          </div>
                          <div class="col-lg-10" *ngIf="shipment.type === 'GOODS_ASTRAY'">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Goods Astray
                              Date of Exit</label>
                            <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                              [ngModelOptions]="{standalone: true}"  ngbDatepicker #d7="ngbDatepicker" [minDate]="getcurrentDate" (click)="d7.toggle();"
                              [attr.name]="'shipments['+s+'].goodsAstrayDateOfExit'" placeholder="yyyy/mm/dd"
                              [(ngModel)]="shipment.goodsAstrayDateOfExit">
                          </div>
                          <div class="col-lg-10" *ngIf="shipment.type === 'IN_BOND'">
                            <div class="row">
                              <div class="col-lg-12">
                                <label class="control-label font-weight-bold text-lg-right pt-2">In-Bond
                                  Entry Type</label>
                                <ng-select [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'shipments['+s+'].inBondDetails.type'"
                                  [ngModelOptions]="{standalone: true}" [(ngModel)]="shipment.inBondDetails.type">
                                  <ng-option *ngFor="let inbond of inbondTypesList" [value]="inbond.code">
                                    {{inbond.code}} {{inbond.longDescription}}</ng-option>
                                </ng-select>
                              </div>
                              <div class="col-lg-12">
                                <label class="control-label font-weight-bold text-lg-right pt-2">Paper
                                  In-Bond#</label>
                                <input type="number" placeholder="(CBP Form 7512 Number if applicable)" minlength="9"
                                  maxlength="9" [ngModelOptions]="{standalone: true}"
                                  [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'shipments['+s+'].inBondDetails.paperInBondNumber'"
                                  [(ngModel)]="shipment.inBondDetails.paperInBondNumber" class="form-control">
                              </div>
                              <div class="col-lg-12">
                                <label class="control-label font-weight-bold text-lg-right pt-2">US
                                  In-Bond Destination</label>
                                <ng-select [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'shipments['+s+'].inBondDetails.usDestination'"
                                  [(ngModel)]="shipment.inBondDetails.usDestination">
                                  <ng-option *ngFor="let port of USports" [value]="port.code">Code:
                                    {{port.code}},
                                    Location: {{port.portOfEntry}}</ng-option>
                                </ng-select>
                              </div>
                              <div class="col-lg-12" *ngIf="shipment.inBondDetails.type == '62'">
                                <label class="control-label font-weight-bold text-lg-right pt-2">Foreign
                                  In-Bond Destination</label>
                                <ng-select [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'shipments['+s+'].inBondDetails.foreignDestination'"
                                  [(ngModel)]="shipment.inBondDetails.foreignDestination">
                                  <ng-option *ngFor="let port of foreignPortsList " [value]="port.code">
                                    {{port.portOfEntry}}</ng-option>
                                </ng-select>
                              </div>
                              <div class="col-lg-12">
                                <label class="control-label font-weight-bold text-lg-right pt-2">Onward
                                  Carrier SCAC</label>
                                <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'shipments['+s+'].inBondDetails.onwardCarrierScac'"
                                  [(ngModel)]="shipment.inBondDetails.onwardCarrierScac">
                              </div>
                              <div class="col-lg-12">
                                <label class="control-label font-weight-bold text-lg-right pt-2">Bonded
                                  Carrier ID</label>
                                <input type="text"
                                  placeholder="The IRS Number, CBP Assigned Number, or Social Security Number of the Bonded Carrier."
                                  class="form-control" [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'shipments['+s+'].inBondDetails.irsNumber'"
                                  [(ngModel)]="shipment.inBondDetails.irsNumber">
                              </div>
                              <div class="col-lg-6">
                                <label class="control-label font-weight-bold text-lg-right pt-2">Estimated
                                  US Departure Date</label>
                                <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'shipments['+s+'].inBondDetails.estimatedDepartureDate'"
                                  [(ngModel)]="shipment.inBondDetails.estimatedDepartureDate" placeholder="yyyy/mm/dd"
                                  ngbDatepicker #d8="ngbDatepicker" [minDate]="getcurrentDate" (click)="d8.toggle();"
                                  >
                              </div>
                              <div class="col-lg-6">
                                <label class="control-label font-weight-bold text-lg-right pt-2">Subject
                                  To FDA?</label>
                                <ng-select [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'shipments['+s+'].inBondDetails.fda'"
                                  [(ngModel)]="shipment.inBondDetails.fda">
                                  <ng-option [value]="true">YES</ng-option>
                                  <ng-option [value]="false">NO</ng-option>
                                </ng-select>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <div class="row">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Assign
                              Consignor<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <ng-select [ngModelOptions]="{standalone: true}" [attr.name]="'shipments['+s+'].shipperID'"
                              [(ngModel)]="shipment.shipperID">
                              <ng-option *ngFor="let shipper of shippers | async" value="{{shipper.shipperID}}">
                                {{shipper.companyName}}</ng-option>
                            </ng-select>
                          </div>
                          <div class="col-lg-2  mar-top-37">
                            <!-- <a data-toggle="modal" data-target="#addShipperModal"
                                             class="modal-with-form btn btn-sm btn-success text-light"><i
                                                class="fas fa-plus"></i></a> -->
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Assign
                              Consignee<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <ng-select [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].consigneeID'" [(ngModel)]="shipment.consigneeID">
                              <ng-option *ngFor="let consignee of consignees  | async" value="{{consignee.receiverID}}">
                                {{consignee.companyName}}</ng-option>
                            </ng-select>
                          </div>
                          <div class="col-lg-2 mar-top-37">
                            <!-- <a data-toggle="modal" data-target="#addConsigneeModal"
                                             class="modal-with-form btn btn-sm btn-success text-light"><i
                                                class="fas fa-plus"></i></a> -->
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Assign
                              Broker&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                            <ng-select [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].broker.filerCode'" [(ngModel)]="shipment.broker.filerCode">
                              <ng-option *ngFor="let broker of brokersList" value="{{broker.filerCode}}">
                                {{broker.brokerName}} <span class="pull-right">
                                  {{broker.portIdentifier}}</span></ng-option>
                            </ng-select>
                          </div>
                          <div class="col-lg-2  mar-top-37">
                            <!-- <a data-toggle="modal" data-target="#addBrokerModal" class="modal-with-form btn btn-sm btn-success text-light"><i
                                                class="fas fa-plus"></i></a> -->
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Broker Port
                              Location&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                            <ng-select [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].broker.portLocation'"
                              [(ngModel)]="shipment.broker.portLocation">
                              <ng-option *ngFor="let port of USports" [value]="port.code">Code:
                                {{port.code}},
                                Location: {{port.portOfEntry}}</ng-option>
                            </ng-select>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-lg-5">
                        <label class="control-label font-weight-bold text-lg-right text-dark text-4 pt-2">Third
                          Parties&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                      </div>
                    </div>
                    <div class="form-group row" *ngFor="let thirdParty of shipment.thirdParties;let p = index">
                      <div class="col-lg-12 text-right">
                        <button type="button" (click)="deleteThirdParty(p,s)" class="btn btn-sm btn-danger"> Delete Third Party</button>
                      </div>
                      <div class="col-lg-5 offset-lg-1">
                        <div class="row">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Third Party
                              Type
                            </label>
                            <ng-select [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].thirdParties['+p+'].type'"
                              placeholder="Select type of third party" [(ngModel)]="thirdParty.type">
                              <ng-option *ngFor="let thirdParty of thirdPartiesList" [value]="thirdParty.code">
                                {{thirdParty.description}}</ng-option>
                            </ng-select>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <div class="row">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Name</label>
                            <input type="text" class="form-control" maxlength="60" [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].thirdParties['+p+'].name'"
                              placeholder="Enter third party name" [(ngModel)]="thirdParty.name">
                          </div>
                        </div>
                      </div>
                      <!-- NEW ADDRESS DIV -->
                    <div class="col-10 offset-lg-1">
                      <div  class="address-item">
                        <div class="form-group row border-bottom-0">
                           <div class="col-lg-5">
                              <label class="control-label font-weight-bold text-lg-right pt-2">Start typing your
                                 location&nbsp; <span
                                    class="text-1 optional-label-color">(optional)</span></label>
                              <input [(ngModel)]="thirdParty.address.userLocation" name="address.userLocation{{p}}"
                                 (keyup)="searchTerm.next($event);" type="text" class="form-control"
                                 placeholder="Type Address" [disabled]="thirdParty.address.manual">
                              <div class="checkbox-custom pt-2">
                                 <input [(ngModel)]="thirdParty.address.manual" name="manual{{p}}"
                                    (change)="manAddress($event,s,p, 'thirdParty')" type="checkbox">
                                 <label for="man_address">Type Manually</label>
                              </div>
                              <div class="map-search__results bg-white">
                                 <ul class="p-0 m-0 text-left">
                                    <li *ngFor="let item of searchResults;">
                                       <a href="javascript:;"
                                          (click)="userAddress(s, p, item, 'thirdParty')">{{item.address.label}}</a>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                           <div class="col-lg-2 mar-top-37">
                              <a class="btn btn-dark mr-2" href="javascript:;"
                                 (click)="clearUserLocation(s,p,'thirdParty');">Clear</a>
                           </div>
                        </div>
                        <div class="address-inner" *ngIf="thirdParty.address.manual">
                          <div class="row">
                            <div class="col-lg-6">
                              <div class="row">
                                <div class="col-lg-10">
                                  <label class="control-label font-weight-bold text-lg-right pt-2">Address</label>
                                  <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                                    [attr.name]="'shipments['+s+'].thirdParties['+p+'].address.addressLine'"
                                    [(ngModel)]="thirdParty.address.addressLine"
                                    placeholder="Enter address of the third party">
                                </div>

                              </div>
                              <div class="row">
                                <div class="col-lg-10">
                                  <label class="control-label font-weight-bold text-lg-right pt-2">Country</label>
                                  <ng-select [ngModelOptions]="{standalone: true}"
                                    [attr.name]="'shipments['+s+'].thirdParties['+p+'].address.countryID'"
                                    [(ngModel)]="thirdParty.address.countryID" (change)="resetThirdPartyState(s,p)">
                                    <ng-option *ngFor="let country of countries" [value]="country.countryID">
                                      {{country.countryName}}</ng-option>
                                  </ng-select>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-lg-10">
                                  <label class="control-label font-weight-bold text-lg-right pt-2">Province</label>
                                  <ng-select [ngModelOptions]="{standalone: true}" id="thirdPartyStateSelect"
                                    (change)="resetThirdPartyCity(s,p)"
                                    [attr.name]="'shipments['+s+'].thirdParties['+p+'].address.stateID'"
                                    [(ngModel)]="thirdParty.address.stateID">
                                    <ng-container *ngFor="let state of modalStates| async">
                                      <ng-option *ngIf="state.countryID == shipments[s].thirdParties[p].address.countryID"
                                        [value]="state.stateID"> {{state.stateCode}} - {{state.stateName}}</ng-option>
                                    </ng-container>
                                  </ng-select>
                                </div>
                                <div class="col-lg-2 mar-top-37">
                                  <a href="javascript:;" data-toggle="modal" data-target="#addStateModal"
                                    class="btn btn-sm btn-success modal-with-form"><i class="fas fa-plus"></i></a>
                                </div>
                              </div>
                            </div>
                            <div class="col-lg-6">
                              <div class="row">
                                <div class="col-lg-10">
                                  <label class="control-label font-weight-bold text-lg-right pt-2">City</label>
                                  <ng-select [ngModelOptions]="{standalone: true}" id="thirdPartyCitySelect"
                                    [attr.name]="'shipments['+s+'].thirdParties['+p+'].address.cityID'"
                                    [(ngModel)]="thirdParty.address.cityID">
                                    <ng-container *ngFor="let city of modalCities| async">
                                      <ng-option *ngIf="city.stateID == shipments[s].thirdParties[p].address.stateID"
                                        [value]="city.cityID"> {{city.cityName}}</ng-option>
                                    </ng-container>
                                  </ng-select>
                                </div>
                                <div class="col-lg-2 mar-top-37">
                                  <a href="javascript:;" data-toggle="modal" data-target="#addCityModal"
                                    class="btn btn-sm btn-success modal-with-form"><i class="fas fa-plus"></i></a>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-lg-10">
                                  <label class="control-label font-weight-bold text-lg-right pt-2">Postal Code</label>
                                  <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                                    [attr.name]="'shipments['+s+'].thirdParties['+p+'].address.postalCode'"
                                    [(ngModel)]="thirdParty.address.postalCode">
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                     </div>
                   </div>
                  <!-- new address div ends -->
                    </div>
                    <div class="form-group row">
                      <div class="col-lg-12 text-right">
                        <button type="button" (click)="addThirdParty(s)" class="btn btn-sm btn-success mr-1"><i class="fas fa-plus"></i> Add Third Party</button>
                      </div>
                    </div>

                    <!-- commodities div -->
                    <div class="row mb-2">
                      <div class="col-lg-6">
                        <label class="control-label font-weight-bold text-lg-right text-dark text-4 pt-2">General
                          Commodity Details</label>
                      </div>
                      <div class="col-lg-6">
                        <label class="control-label font-weight-bold text-lg-right text-dark text-4 pt-2">Hazardous
                          Material Details</label>
                      </div>
                    </div>
                    <div class="form-group row" *ngFor="let commodity of shipment.commodities;let i = index">
                      <div class="col-lg-12 text-right">
                        <button type="button" *ngIf="i != 0;" (click)="deleteCommodity(i,s)"
                          class="btn btn-sm btn-danger">Delete Commodity</button>
                      </div>
                      <div class="col-lg-5 offset-lg-1">
                        <div class="row">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Loaded
                              On<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <ng-select [ngModelOptions]="{standalone: true}" (change)="shipmentLoadedFn(s,i)"
                              [attr.name]="'shipments['+s+'].commodities['+i+'].loadedOn.type'"
                              [(ngModel)]="commodity.loadedOn.type">
                              <ng-option value="TRUCK">Vehicle</ng-option>
                              <ng-option value="TRAILER">Asset</ng-option>
                            </ng-select>
                          </div>
                          <div class="col-lg-10" *ngIf="commodity.loadedOn.type == 'TRUCK'">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Vehicle
                              Number</label>
                            <ng-select [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].commodities['+i+'].loadedOn.number'"
                              [(ngModel)]="commodity.loadedOn.number">
                              <ng-option *ngFor="let vehicle of vehicles" [value]="vehicle.vehicleID">
                                {{vehicle.vehicleIdentification}}</ng-option>
                            </ng-select>
                          </div>
                          <div class="col-lg-10" *ngIf="commodity.loadedOn.type == 'TRAILER'">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Asset
                              Number</label>
                            <ng-select [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].commodities['+i+'].loadedOn.number'"
                              placeholder="Select asset" [(ngModel)]="commodity.loadedOn.number">
                              <ng-option *ngFor="let asset of assets" [value]="asset.assetID">
                                {{asset.assetIdentification}}</ng-option>
                            </ng-select>
                          </div>
                        </div>
                        <div class="row"
                          *ngIf="shipment.shipmentType === 'BRASS' || shipment.shipmentType === 'BRASS_MULTIPLE'">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">C4 Line
                              Release#
                               </label>
                            <input type="text" class="form-control" maxlength="14"
                              placeholder="Enter C4 line release number" [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].commodities['+i+'].c4LineReleaseNumber'"
                              [(ngModel)]="commodity.c4LineReleaseNumber">
                          </div>
                        </div>
                        <div class="row"
                          *ngIf="shipment.shipmentType === 'IN_BOND' || shipment.shipmentType === 'SECTION_321' || shipment.shipmentType === 'SECTION_321_FDA'">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Commodity
                              Value in USD</label>
                            <input type="number" class="form-control" [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].commodities['+i+'].value'" maxlength="9"
                              [(ngModel)]="commodity.value">
                          </div>
                        </div>
                        <div class="row" *ngIf="shipment.type === 'IN_BOND'">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Harmonized
                              Code
                            </label>
                            <input type="number" class="form-control" maxlength="10"
                              placeholder="Enter harmonized code if shipment is ACE In-bond"
                              [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].commodities['+i+'].harmonizedCode'"
                              [(ngModel)]="commodity.harmonizedCode">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Country of
                              Origin<span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <ng-select [ngModelOptions]="{standalone: true}"
                              placeholder="Select country of origin of commodity"
                              [attr.name]="'shipments['+s+'].commodities['+i+'].countryOfOrigin'"
                              [(ngModel)]="commodity.countryOfOrigin">
                              <ng-option *ngFor="let country of countriesList" [value]="country.code">
                                {{country.name}}</ng-option>
                            </ng-select>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Commodity<span
                                class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                              placeholder="Enter name of the commodity"
                              [attr.name]="'shipments['+s+'].commodities['+i+'].description'"
                              [(ngModel)]="commodity.description">
                          </div>
                          <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Quantity<span
                                class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <div class="row">
                              <div class="col-lg-5">
                                <input type="number" class="form-control" [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'shipments['+s+'].commodities['+i+'].quantity'"
                                  [(ngModel)]="commodity.quantity">
                              </div>
                              <div class="col-lg-7">
                                <ng-select [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'shipments['+s+'].commodities['+i+'].packagingUnit'"
                                  [(ngModel)]="commodity.packagingUnit">
                                  <ng-option *ngFor="let packagingUnit of packagingUnitsList"
                                    [value]="packagingUnit.code">{{packagingUnit.name}}</ng-option>
                                </ng-select>
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-5">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Weight<span
                                class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                            <div class="row">
                              <div class="col-lg-5">
                                <input type="number" class="form-control" [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'shipments['+s+'].commodities['+i+'].weight'"
                                  [(ngModel)]="commodity.weight">
                              </div>
                              <div class="col-lg-7">
                                <ng-select data-plugin-selectTwo class="form-control populate"
                                  [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'shipments['+s+'].commodities['+i+'].weightUnit'"
                                  [(ngModel)]="commodity.weightUnit">
                                  <ng-option value="LB">Pounds</ng-option>
                                  <ng-option value="KG">Kilograms</ng-option>
                                </ng-select>
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Marks &
                              Numbers&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                            <div class="row">
                              <div class="col-lg-12">
                                <div class="row">
                                  <div class="col-lg-3" *ngFor="let marks of commodity.marksAndNumbers; let j=index;">
                                    <input type="text" class="form-control" name="marksAndNumbers"
                                      [ngModelOptions]="{standalone: true}" [(ngModel)]='marks.markNumber'>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-lg-2 mar-top-37">
                            <!-- <button type="button" class="btn btn-success btn-sm" (click)="addMarksAndNumbers(s,i)">
                                             <i class="fas fa-plus"></i></button> -->
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <div class="form-group row">
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Hazmat
                              Code&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                            <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].commodities['+i+'].hazmatDetails.unCode'" maxlength="4"
                              [(ngModel)]="commodity.hazmatDetails.unCode"
                              placeholder="Enter Hazmat code incase of hazardous goods">
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Emergency
                              Contact
                              Name&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                            <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].commodities['+i+'].hazmatDetails.emergencyContactName'"
                              maxlength="24" [(ngModel)]="commodity.hazmatDetails.emergencyContactName"
                              placeholder="Enter emergency contact number">
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Contact
                              Number&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                            <input type="tel" class="form-control" [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].commodities['+i+'].hazmatDetails.contactPhone'"
                              [(ngModel)]="commodity.hazmatDetails.contactPhone"
                              placeholder="Enter the emergency contact number">
                          </div>
                          <div class="col-lg-10">
                            <label class="control-label font-weight-bold text-lg-right pt-2">Contact
                              Email&nbsp; <span class="text-1 optional-label-color">(optional)</span></label>
                            <input type="text" class="form-control" placeholder="Enter the email address"
                              [ngModelOptions]="{standalone: true}"
                              [attr.name]="'shipments['+s+'].commodities['+i+'].hazmatDetails.contactEmail'"
                              [(ngModel)]="commodity.hazmatDetails.contactEmail">
                          </div>
                          <!-- <div class="col-lg-10">
                                          <label class="control-label font-weight-bold text-lg-right pt-2" >Comments</label>
                                          <textarea class="form-control" rows="3"></textarea>
                                          </div> -->
                        </div>
                      </div>

                    </div>
                    <div class="row">
                      <div class="col-lg-12 text-right">
                        <button type="button" (click)="addCommodity(s)" class="btn btn-sm btn-success mr-1"><i class="fas fa-plus"></i>  Add More Commodity</button>
                      </div>
                    </div>

                  </mat-expansion-panel>
                </mat-accordion>

                <div class="row">
                  <div class="col-lg-12 mt-2">
                    <button type="button" (click)="addShipment()" class="btn btn-sm btn-success pull-right"><i class="fas fa-plus"></i> Add
                      Shipment</button>
                  </div>
                </div>
                <!-- NEW ASSET DIV -->
                <div class="row">
                  <div class="col-lg-12">
                    <label class="control-label font-weight-bold text-lg-right text-dark text-4  pt-2">Asset
                      Details</label>
                  </div>
                  <div class="col-12">
                    <table class="table table-bordered table-responsive-lg">
                      <thead>
                        <tr>
                          <th width="15%">Asset<span class="mandfield text-2 ml-1"><sup>*</sup></span></th>
                          <th width="20%">Asset Type<span class="mandfield text-2 ml-1"><sup>*</sup></span></th>
                          <th width="32%">Seal Numbers (Required when security seals are being used)&nbsp;
                            <span class="text-1 optional-label-color">(optional)</span></th>
                          <th width="28%">Add IIT&nbsp; <span class="text-1 optional-label-color">(optional)</span></th>
                          <th width="5%">Action</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let trailer of trailers; let t = index;">
                          <td>
                            <div class="row">
                              <div class="col-lg-12">
                                <ng-select [(ngModel)]="trailer.assetID" [ngModelOptions]="{standalone: true}" (change)="getBorderAssetTypes($event)"
                                  [attr.name]="'trailers['+t+'].assetID'">
                                  <ng-option *ngFor="let asset of assets" [value]="asset.assetID">
                                    {{asset.assetIdentification}}</ng-option>
                                </ng-select>
                              </div>
                            </div>
                          </td>
                          <td>
                            <div class="row">
                              <div class="col-lg-12">
                                <ng-select [(ngModel)]="trailer.assetTypeCode" [ngModelOptions]="{standalone: true}"
                                  [attr.name]="'trailers['+t+'].assetTypeCode'">
                                    <ng-option *ngFor="let assetType of borderAssetTypes" [value]="assetType.borderAssetTypeCode" >
                                      {{assetType.borderAssetTypeName}}</ng-option>
                                      <ng-option  value="OE">Other</ng-option>

                                </ng-select>
                              </div>
                            </div>
                          </td>
                          <td>
                            <div class="row mr-1">
                              <div class="col-lg-12">
                                <div class="row">
                                  <div class="col-lg-3" *ngFor="let seal of trailer.sealNumbers; let i=index;">
                                    <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                                      [attr.name]="'trailers['+t+'].sealNumbers['+i+'].seal'"
                                      [(ngModel)]='seal.sealNumber'>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </td>
                          <td>
                            <ng-select placeholder="Select IIT if any">
                              <ng-option value="CARRIER">Trip contains IIt's covered under 10.41(a) with
                                carriers bond.</ng-option>
                              <ng-option value="IMPORTER">Trip contains IIt's covered under 10.41(a) with
                                importers bond.</ng-option>
                            </ng-select>
                          </td>
                          <td>
                            <button type="button" (click)="deleteTrailer(t)" class="btn btn-sm btn-danger"> <i
                                class="fas fa-minus"></i></button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="col-12 text-right">
                    <button type="button" *ngIf="addTrailerBtn" class="btn btn-sm btn-success"
                      (click)="addTrailer()"><i class="fas fa-plus"></i> Add Asset</button>
                  </div>
                </div>
                <div class="form-group row mt-3">
                  <div class="col-lg-12 text-right">
                    <button type="button" (click)="cancel()" class="btn btn-default m-1">Cancel</button>
                    <button type="button" *ngIf="!entryID" (click)="addACEManifest()"
                      class="btn btn-success">Save</button>
                    <button type="button" *ngIf="entryID" (click)="updateACEManifest()"
                      class="btn btn-success">Update</button>
                  </div>
                </div>
              </form>
            </div>
          </section>
        </div>
      </div>
    </section>
  </div>
</section>

