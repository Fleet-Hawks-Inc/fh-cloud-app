<section class="body">

   <!-- start: header -->
   <app-header></app-header>
   <!-- end: header -->



   <div class="inner-wrapper">
      <!-- start: sidebar -->
      <app-sidebar></app-sidebar>
      <!-- end: sidebar -->
      <section role="main" class="content-body p-0">
         <header class="page-header pr-5">
            <div class="row pr-1 mr-1" style="padding-top:10px;">
               <div class="col-md-4 col-lg-4">
                  <h4 class="text-4 font-weight-bold mt-0 mb-0 text-dark">{{pageTitle}}</h4>
               </div>
               <div class="col-md-8 col-lg-8 text-right pr-1">
                  <!-- <a class="btn btn-success btn-sm modal-with-form" href="#bolTemplateModal">Create BOL</a>  -->
                  <a routerLink="/dispatch/orders" class="btn btn-default btn-sm"><i class="fas fa-list"></i> All
                     Orders</a>
               </div>
            </div>
         </header>
         <div class="card">
            <div class="card-body">
               <form #orderForm="ngForm" (ngSubmit)="orderForm.form.valid && onSubmit()" novalidate>
                  <div class="form-group row">
                     <div class="col-lg-12 text-right">
                        <!-- <p class="mb-0"><a href="#" class="blue1 font-weight-bold"><i class="fas fa-tools"></i> Load Setting</a></p> -->
                     </div>
                     <div class="col-lg-6">
                        <div class="row">
                           <div class="col-lg-3 col-sm-12 col-xs-12 col-12 labelalign">
                              <label class="control-label font-weight-semibold mb-0 text-3 text-dark">Load Type</label>
                           </div>
                           <div class="col-lg-6">
                              <div class="btn-group-toggle" data-toggle="buttons">
                                 <label class="btn btn-outline btn-fleet mr-2"
                                    [class.active]="orderData.orderMode === 'FTL'" style="width:110px;"
                                    (click)="onChangeUnitType('order', 'FTL')">
                                    <input type="radio" [(ngModel)]="orderData.orderMode" name="orderMode" checked
                                       hidden value="FTL"> FTL </label>
                                 <label class="btn btn-outline btn-fleet mr-2 " style="width:110px;"
                                    [class.active]="orderData.orderMode === 'LTL'"
                                    (click)="onChangeUnitType('order', 'LTL')">
                                    <input type="radio" [(ngModel)]="orderData.orderMode" name="orderMode" hidden
                                       value="LTL"> LTL </label>
                              </div>
                              <!-- <label class="d-inline mr-3">
                                 <input [(ngModel)]="orderData.orderMode" type="radio" name="mode" value="FTL">FTL
                              </label>
                              <label>
                                 <input [(ngModel)]="orderData.orderMode" type="radio" name="mode" value="LTL">LTL
                              </label> -->
                           </div>
                        </div>
                     </div>
                     <div class="col-lg-6">
                        <div class="row">
                           <div class="col-lg-3 col-sm-12 col-xs-12 col-12 labelalign">
                              <label class="control-label font-weight-semibold mb-0 text-3 text-dark">Trip Type</label>
                           </div>
                           <div class="col-lg-6">
                              <div class="btn-group-toggle" data-toggle="buttons">
                                 <label class="btn btn-outline btn-fleet mr-2"
                                    [class.active]="orderData.tripType === 'Regular'" style="width:110px;"
                                    (click)="onChangeUnitType('trip', 'Regular')">
                                    <input type="radio" [(ngModel)]="orderData.tripType" name="tripType" checked hidden
                                       value="Regular"> Regular </label>
                                 <label class="btn btn-outline btn-fleet mr-2 " style="width:110px;"
                                    [class.active]="orderData.tripType === 'Outsourced'"
                                    (click)="onChangeUnitType('trip', 'Outsourced')">
                                    <input type="radio" [(ngModel)]="orderData.tripType" name="tripType" hidden
                                       value="Outsourced"> Outsourced </label>
                              </div>
                              <!-- <label class="d-inline mr-3">
                                 <input [(ngModel)]="orderData.tripType" type="radio" name="tripType"
                                    value="Regular">Regular
                              </label>
                              <label>
                                 <input [(ngModel)]="orderData.tripType" type="radio" name="tripType"
                                    value="Outsourced">Outsourced
                              </label> -->
                           </div>
                        </div>
                     </div>
                  </div>

                  <div class="form-group row mt-3">
                     <div class="col-lg-12">
                        <h4 class="mt-0 text-dark font-weight-bold text-4">Customer</h4>
                     </div>
                     <div class="col-lg-5 offset-lg-1">
                        <div class="row">
                           <div class="col-lg-10">
                              <label
                                 class="control-label font-weight-semibold labelmt text-3 text-dark">Customer</label>
                              <ng-select (change)="selectedCustomer($event)" [(ngModel)]="orderData.customerID"
                                 name="customerID" #customerID="ngModel" required customerID class="form-control">
                                 <ng-option *ngFor="let customer of customers" value="{{customer.customerID}}">
                                    {{customer.firstName}} {{customer.lastName}}
                                 </ng-option>
                              </ng-select>
                              <span class="text-danger"
                                 *ngIf="(customerID.touched || orderForm.submitted) && customerID.errors?.required">
                                 This Field is required
                              </span>
                           </div>
                           <div class="col-lg-2 mar-top-37">
                              <a class="btn btn-success btn-sm" data-toggle="modal" data-target="#addCustomerModal"><i
                                    class="fas fa-plus"></i>
                              </a>
                           </div>
                           <div class="col-lg-10 mt-4" *ngIf="customerSelected">
                              <div class="" style="border: 0.4px solid #e1e2e3; border-radius: 0px 0px 15px 15px;">
                                 <div class="row pl-3 pr-3">
                                    <div class="col-lg-6" style="background-color:#e1e2e3;">
                                       <h5 class=" font-weight-bold">Details</h5>
                                    </div>
                                    <div class="col-lg-6 text-right" style="background-color:#e1e2e3;">
                                       <!-- <button type="button" class="btn btn-default btn-xs mt-2" data-toggle="modal" data-target="#addressModal"><i class="fas fa-pencil-alt"></i>Edit</button> -->
                                    </div>
                                 </div>
                                 <div class="row pl-3 pr-3">
                                    <div class="col-lg-12">
                                       <div class="row" *ngFor="let item of customerSelected">
                                          <div class="col-lg-6">
                                             <label class="control-label"><span
                                                   class=" font-weight-bold">Address:</span>
                                                {{item.address[0].address1}}
                                                {{item.address[0].address2}}</label>
                                          </div>
                                          <div class="col-lg-6">
                                             <label class="control-label text-lg-right"><span
                                                   class=" font-weight-bold">Phone:</span> {{item.workPhone}}</label>
                                          </div>
                                          <div class="col-lg-6">
                                             <label class="control-label"><span class=" font-weight-bold">City:</span>
                                                {{item.address[0].cityName}}</label>
                                          </div>
                                          <div class="col-lg-6">
                                             <label class="control-label text-lg-right"><span
                                                   class=" font-weight-bold">State:</span>
                                                {{item.address[0].stateName}}</label>
                                          </div>
                                          <div class="col-lg-6">
                                             <label class="control-label"><span
                                                   class=" font-weight-bold">Country:</span>
                                                {{item.address[0].countryID}}</label>
                                          </div>
                                          <div class="col-lg-6">
                                             <label class="control-label text-lg-right"><span
                                                   class=" font-weight-bold">Email:</span>
                                                {{item.workEmail}}</label>
                                          </div>
                                          <div class="col-lg-6">
                                             <label class="control-label"><span class=" font-weight-bold">Fax:</span>
                                                --</label>
                                          </div>
                                       </div>


                                    </div>

                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="row mt-2">
                           <div class="col-lg-10">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">Customer
                                 PO#</label>
                              <input [(ngModel)]="orderData.customerPO" name="customerPO" type="text"
                                 class="form-control">
                           </div>
                        </div>
                        <div class="row mt-2">
                           <div class="col-lg-10">
                              <label
                                 class="control-label font-weight-semibold labelmt text-3 text-dark">Reference</label>
                              <input [(ngModel)]="orderData.reference" name="reference" type="text"
                                 class="form-control">
                           </div>
                        </div>
                     </div>
                     <div class="col-lg-5 offset-lg-1">
                        <div class="row">
                           <div class="col-lg-10">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">Order
                                 Number</label>
                              <input [(ngModel)]="orderData.orderNumber" name="orderNumber" type="text"
                                 class="form-control">
                           </div>
                        </div>
                        <div class="row mt-2">
                           <div class="col-lg-10">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">Order Creation
                                 Date/Time</label>
                              <div class="row">
                                 <div class="col-lg-6">
                                    <input type="text" (click)="d1.toggle()" ngbDatepicker #d1="ngbDatepicker"
                                       [(ngModel)]="orderData.creationDate" name="creationDate" class="form-control">
                                 </div>
                                 <div class="col-lg-6">
                                    <ngb-timepicker [(ngModel)]="orderData.creationTime" name="creationTime" type="text"
                                       class="" placeholder="" [meridian]="meridian" [spinners]="spinners"
                                       [seconds]="seconds"></ngb-timepicker>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="row mt-2">
                           <div class="col-lg-5">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">CSA</label>
                              <input [(ngModel)]="orderData.csa" name="csa" type="text" class="form-control">
                           </div>
                           <div class="col-lg-5">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">C-TPAT</label>
                              <input [(ngModel)]="orderData.ctpat" name="ctpat" type="text" class="form-control">
                           </div>
                        </div>
                        <div class="row mt-2">
                           <div class="col-lg-5">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">Additonal
                                 Contact Name</label>
                              <input [(ngModel)]="orderData.additionalContact" name="additionalContact" type="text"
                                 class="form-control">
                           </div>
                        </div>
                        <div class="row mt-2">
                           <div class="col-lg-5">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">Phone</label>
                              <input [(ngModel)]="orderData.phone" name="phone" type="text" class="form-control">
                           </div>
                           <div class="col-lg-5">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">Email</label>
                              <input [(ngModel)]="orderData.email" name="email" type="text" class="form-control">
                           </div>
                           <div class="col-lg-12 mt-2">
                              <div class="checkbox-custom checkbox-default">
                                 <input [(ngModel)]="orderData.invoiceEmail" name="invoiceEmail" type="checkbox"
                                    name="terms" id="checkboxExample1">
                                 <label for="checkboxExample1">CC - Invoice Email</label>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>

                  <div class="form-group row">
                     <div class="col-lg-12 mb-4 mb-lg-0">
                        <div *ngFor="let item of shippersReceivers; let i = index;"
                           style="border:0.5px solid #333;border-radius: 10px; box-shadow: 2px 5px 5px #d1d1d1;"
                           class="mb-2 order-accordian">
                           <ngb-accordion [closeOthers]="true" activeIds="static-0">
                              <ngb-panel id="static-{{i}}">
                                 <ng-template ngbPanelTitle>
                                    <h4 class="card-title m-0"><a
                                          class="accordion-toggle carcursor font-weight-bold text-4 text-dark">
                                          Shipper-Receiver </a> </h4>
                                 </ng-template>
                                 <ng-template ngbPanelContent>
                                    <div class="row">
                                       <div class="col-6">
                                          <div class="shipper__listing" *ngIf="finalShippersReceivers[i].shippers?.length > 0">
                                             <h4 class="mt-0 text-dark font-weight-bold text-4">Shippers</h4>
                                             <table class="table">
                                                <tbody>
                  
                                                   <tr *ngFor="let item of finalShippersReceivers[i].shippers; let j = index;">
                                                      <td>
                                                         {{shippersObjects[item.shipperID]}}
                                                      </td>
                                                      <td>
                                                         {{item.pickupLocation}}
                                                      </td>
                                                      <td>
                                                         {{item.locationDateTime}}
                                                      </td>
                                                      <td>
                                                         <i (click)="editList('shipper', item, j)" class="fa fa-edit fa-fw"></i>
                                                         <i (click)="removeList('shipper', j)" class="fa fa-trash fa-fw"></i>
                                                      </td>
                                                   </tr>
                  
                                                </tbody>
                                             </table>
                                          </div>
                                       </div>
                                       <div class="col-6">
                                          <div class="shipper__listing" *ngIf="finalShippersReceivers[i].receivers?.length > 0">
                                             <h4 class="mt-0 text-dark font-weight-bold text-4">Receivers</h4>
                                             <table class="table">
                                                <tbody>
                  
                                                   <tr *ngFor="let item of finalShippersReceivers[i].receivers; let i = index;">
                                                      <td>
                                                         {{receiversObjects[item.receiverID]}}
                                                      </td>
                                                      <td>
                                                         {{item.dropOffLocation}}
                                                      </td>
                                                      <td>
                                                         {{item.locationDateTime}}
                                                      </td>
                                                      <td>
                                                         <i class="fa fa-edit fa-fw"></i>
                                                         <i (click)="removeList('receiver', i)" class="fa fa-trash fa-fw"></i>
                                                      </td>
                                                   </tr>
                  
                                                </tbody>
                                             </table>
                                          </div>
                                       </div>
                                    </div>
                                    <div class="form-group row divderrel">
                                       <p class="mb-1 mt-1 mr-1 midleicon btn btn-default"><i
                                             class="fas fa-arrow-circle-right"></i></p>
                                       <div class="col-lg-6">
                                          <h4 class="mt-0 text-dark font-weight-bold text-4">Add Shipper</h4>

                                          <div class="pl-0 pr-5">
                                             <div class="toggle toggle-primary">
                                                <section class="toggle">
                                                   <label (click)="toggleAccordian(i)"
                                                      class="text-dark text-5 font-weight-bold">Shipper
                                                      <!-- <span *ngIf="i != 0;" (click)="remove('shipper', i)" class="minus-sign btn btn-success btn-sm">
                                                            <i class="fas fa-minus fa-fw d-block m-0"></i>
                                                         </span>  -->
                                                   </label>
                                                   <div class="" *ngIf="visibleIndex === i">
                                                      <div class="row">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Shipper</label>
                                                         </div>
                                                         <div class="col-lg-6 col-md-12">
                                                            <ng-select [(ngModel)]="item.shippers.shipperID"
                                                               name="shipperID" #shipperID="ngModel" required
                                                               shipperID class="form-control">
                                                              
                                                                  <ng-option *ngFor="let item of shippers" value="{{item.shipperID}}">{{item.companyName}}</ng-option>
                                                              
                                                            </ng-select>
                                                            <span class="text-danger"
                                                               *ngIf="(shipperID.touched || orderForm.submitted) && shipperID.errors?.required">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         <div class="col-lg-3">

                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Pickup Location</label>
                                                         </div>

                                                         <div class="col-lg-6">
                                                            <input [(ngModel)]="item.shippers.pickupLocation"
                                                               name="pickupLocation" (keyup)="searchTerm.next($event);"
                                                               class="form-control" #pickupLocation="ngModel" required
                                                               pickupLocation tabindex="-1" aria-hidden="true">

                                                            <ul class="p-0 m-0 text-left map-search__results bg-white">
                                                               <li *ngFor="let item of searchResults;">
                                                                  <a href="javascript:;"
                                                                     (click)="assignLocation(i, 'shipper', item.address.label)"
                                                                     title="{{item.address.label}}">{{item.address.label}}</a>
                                                               </li>
                                                            </ul>

                                                            <span class="text-danger"
                                                               *ngIf="(orderForm.submitted) && pickupLocation.errors?.required">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         <div class="col-lg-3">
                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Pickup Date/Time</label>
                                                         </div>
                                                         <div class="col-lg-3">
                                                            <div class="input-group">
                                                               <input [(ngModel)]="item.shippers.pickupDate"
                                                                  name="pickupDate" type="text" (click)="d.toggle()"
                                                                  ngbDatepicker #d="ngbDatepicker" #pickupDate="ngModel"
                                                                  required pickupDate placeholder=""
                                                                  class="form-control">
                                                            </div>
                                                            <span class="text-danger"
                                                               *ngIf="(orderForm.submitted) && pickupDate.errors?.required">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         <div class="col-lg-3">
                                                            <div class="input-group">
                                                               <ngb-timepicker [(ngModel)]="item.shippers.pickupTime"
                                                                  name="pickupTime" type="text" class="" placeholder=""
                                                                  #pickupTime="ngModel" required pickupTime
                                                                  [meridian]="meridian" [spinners]="spinners"
                                                                  [seconds]="seconds"></ngb-timepicker>
                                                               <!-- <input [(ngModel)]="item.pickupTime"
                                                               name="item.pickupTime{{i}}" type="text" class="form-control" placeholder="hour:minute"  #pickupTime="ngModel" required pickupTime id="timepicker2"> -->
                                                            </div>
                                                            <span class="text-danger"
                                                               *ngIf="(orderForm.submitted) && pickupTime.errors?.required">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         <!-- <div class="col-lg-3 mt-1">
                                                         </div> -->
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Pickup Instruction</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <textarea [(ngModel)]="item.shippers.pickupInstruction"
                                                               name="pickupInstruction" class="form-control" rows="3"
                                                               id="textareaDefault"
                                                               style="margin-top: 0px; margin-bottom: 0px; height: 74px;"></textarea>
                                                         </div>
                                                         <div class="col-lg-3">
                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Contact Person at PickUp</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <input [(ngModel)]="item.shippers.contactPerson"
                                                               name="contactPerson" type="text" class="form-control"
                                                               id="inputDefault">
                                                         </div>
                                                         <div class="col-lg-3 mt-1">
                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Phone</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <input [(ngModel)]="item.shippers.phone" name="phone"
                                                               type="text" class="form-control" id="inputDefault">
                                                         </div>
                                                         <div class="col-lg-3 mt-1">
                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">BOL</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <input [(ngModel)]="item.shippers.BOL" name="BOL"
                                                               type="file" />
                                                         </div>
                                                         <div class="col-lg-3 mt-1">
                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Reference</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <input [(ngModel)]="item.shippers.reference"
                                                               name="reference" type="text" class="form-control"
                                                               id="inputDefault">
                                                         </div>
                                                         <div class="col-lg-3 mt-1">
                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Notes</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <input [(ngModel)]="item.shippers.notes" name="notes"
                                                               type="text" class="form-control" id="inputDefault">
                                                         </div>
                                                         <div class="col-lg-3 mt-1">
                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Temperature Required</label>
                                                         </div>
                                                         <div class="col-lg-3">
                                                            <input [(ngModel)]="item.shippers.minTemprature"
                                                               name="minTemprature" type="text" class="form-control"
                                                               placeholder="From" id="inputDefault">
                                                         </div>
                                                         <div class="col-lg-2">
                                                            <select [(ngModel)]="item.shippers.minTempratureUnit"
                                                               name="minTempratureUnit" data-plugin-selecttwo=""
                                                               class="form-control populate" data-select2-id="10"
                                                               tabindex="-1" aria-hidden="true">
                                                               <optgroup label="">
                                                                  <option value="°C" data-select2-id="12">°C</option>
                                                                  <option value="°F">°F</option>
                                                               </optgroup>
                                                            </select>
                                                         </div>
                                                         <div class="col-lg-3 mt-1">
                                                         </div>
                                                      </div>




                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">&nbsp;</label>
                                                         </div>
                                                         <div class="col-lg-3">
                                                            <input [(ngModel)]="item.shippers.maxTemprature"
                                                               name="maxTemprature" type="text" class="form-control"
                                                               placeholder="To" id="inputDefault">
                                                         </div>
                                                         <div class="col-lg-2">
                                                            <select [(ngModel)]="item.shippers.maxTempratureUnit"
                                                               name="maxTempratureUnit" data-plugin-selecttwo=""
                                                               class="form-control populate" data-select2-id="13"
                                                               tabindex="-1" aria-hidden="true">
                                                               <optgroup label="">
                                                                  <option value="°C" data-select2-id="15">°C</option>
                                                                  <option value="°F">°F</option>
                                                               </optgroup>
                                                            </select>
                                                         </div>
                                                         <div class="col-lg-3 mt-1">
                                                         </div>
                                                      </div>

                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 col-sm-12 col-xs-12 col-12 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold mb-0 text-3 text-dark"
                                                               for="inputDefault">Will Driver Load ?</label>
                                                         </div>
                                                         <div class="col-lg-2 col-sm-6 col-xs-6 col-6">
                                                            <div class="radio-custom">
                                                               <input [(ngModel)]="item.shippers.driverLoad"
                                                                  name="driverLoad" type="radio" value="yes"
                                                                  id="loadyes" checked="">
                                                               <label for="radioExample1">Yes</label>
                                                            </div>
                                                         </div>
                                                         <div class="col-lg-2 col-sm-6 col-xs-6 col-6">
                                                            <div class="radio-custom">
                                                               <input [(ngModel)]="item.shippers.driverLoad"
                                                                  name="driverLoad" type="radio" value="no" id="loadno">
                                                               <label for="radioExample2">No</label>
                                                            </div>
                                                         </div>
                                                      </div>

                                                      <div class="divcenter mt-2">
                                                         <p class="mb-1"><a href="javascript:;" (click)="saveShipper(i)"
                                                               class="mb-1 mt-1 mr-1 btn btn-md btn-dark">Save</a></p>
                                                      </div>
                                                   </div>
                                                </section>
                                             </div>
                                          </div>

                                          <a (click)="addShipper()" class="btn btn-success btn-sm"
                                             href="javascript:;"><i class="fas fa-plus"></i> Add Next Shipper</a>


                                       </div>



                                       <div class="col-lg-6">
                                          <h4 class="mt-0 text-dark font-weight-bold text-4">Add Receiver</h4>

                                          <div class="pl-0 pr-5">
                                             <div class="toggle toggle-primary" data-plugin-toggle>
                                                <section class="toggle">
                                                   <label (click)="toggleAccordian(i)"
                                                      class="text-dark text-5 font-weight-bold">Receiver
                                                      <!-- <span *ngIf="i != 0;" (click)="remove('receiver', i)" class="minus-sign btn btn-success btn-sm">
                                                            <i class="fas fa-minus fa-fw d-block m-0"></i>
                                                         </span> -->
                                                   </label>
                                                   <div class="" *ngIf="visibleIndex === i">
                                                      <div class="row">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Receiver</label>
                                                         </div>
                                                         <div class="col-lg-6 col-md-12">
                                                            <ng-select [(ngModel)]="item.receivers.receiverID"
                                                               name="receiverID" #receiverID="ngModel" required
                                                               receiverID class="form-control" data-select2-id="16"
                                                               tabindex="-1" aria-hidden="true">
                                                               <ng-option *ngFor="let item of receivers;" value="{{item.receiverID}}">{{item.companyName}}</ng-option>
                                                            </ng-select>
                                                            <span class="text-danger"
                                                               *ngIf="(orderForm.submitted) && receiverID.errors?.required">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         <div class="col-lg-3">

                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Drop Off Location</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <input [(ngModel)]="item.receivers.dropOffLocation"
                                                               name="dropOffLocation" #dropOffLocation="ngModel"
                                                               required dropOffLocation
                                                               (keyup)="searchTerm.next($event);" class="form-control"
                                                               tabindex="-1" aria-hidden="true">

                                                            <ul class="p-0 m-0 text-left map-search__results bg-white">
                                                               <li *ngFor="let item of searchResults;">
                                                                  <a href="javascript:;"
                                                                     (click)="assignLocation(i, 'receiver', item.address.label)"
                                                                     title="{{item.address.label}}">{{item.address.label}}</a>
                                                               </li>
                                                            </ul>
                                                            
                                                            <span class="text-danger"
                                                               *ngIf="(orderForm.submitted) && dropOffLocation.errors?.required">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         <div class="col-lg-3">
                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Delivery Date/Time</label>
                                                         </div>
                                                         <div class="col-lg-3">
                                                            <div class="input-group">
                                                               <input [(ngModel)]="item.receivers.dropOffDate"
                                                                  name="dropOffDate" (click)="d.toggle()" ngbDatepicker
                                                                  #d="ngbDatepicker" #dropOffDate="ngModel" required
                                                                  dropOffDate type="text" placeholder=""
                                                                  class="form-control">
                                                            </div>
                                                            <span class="text-danger"
                                                               *ngIf="(orderForm.submitted) && dropOffDate.errors?.required">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         <div class="col-lg-3">
                                                            <div class="input-group">
                                                               <ngb-timepicker [(ngModel)]="item.receivers.dropOffTime"
                                                                  name="dropOffTime" #dropOffTime="ngModel" required
                                                                  dropOffTime type="text" class="" placeholder=""
                                                                  [meridian]="meridian" [spinners]="spinners"
                                                                  [seconds]="seconds"></ngb-timepicker>
                                                            </div>
                                                            <span class="text-danger"
                                                               *ngIf="(orderForm.submitted) && dropOffTime.errors?.required">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         <!-- <div class="col-lg-3 mt-1">
                                                         </div> -->
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Delivery Instruction</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <textarea [(ngModel)]="item.receivers.dropOffInstruction"
                                                               name="dropOffInstruction" class="form-control" rows="3"
                                                               id="textareaDefault"
                                                               style="margin-top: 0px; margin-bottom: 0px; height: 74px;"></textarea>
                                                         </div>
                                                         <div class="col-lg-3">
                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Contact Person at Delivery</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <input [(ngModel)]="item.receivers.contactPerson"
                                                               name="contactPerson" type="text" class="form-control"
                                                               id="inputDefault">
                                                         </div>
                                                         <div class="col-lg-3 mt-1">
                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Phone</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <input [(ngModel)]="item.receivers.phone" name="phone"
                                                               type="text" class="form-control" id="inputDefault">
                                                         </div>
                                                         <div class="col-lg-3 mt-1">
                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Reference</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <input [(ngModel)]="item.receivers.reference"
                                                               name="reference" type="text" class="form-control"
                                                               id="inputDefault">
                                                         </div>
                                                         <div class="col-lg-3 mt-1">
                                                         </div>
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Notes</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <input [(ngModel)]="item.receivers.notes" name="notes"
                                                               type="text" class="form-control" id="inputDefault">
                                                         </div>
                                                         <div class="col-lg-3 mt-1">
                                                         </div>
                                                      </div>

                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Temperature Required</label>
                                                         </div>
                                                         <div class="col-lg-3">
                                                            <input [(ngModel)]="item.receivers.minTemprature"
                                                               name="minTemprature" type="text" class="form-control"
                                                               placeholder="From" id="inputDefault">
                                                         </div>
                                                         <div class="col-lg-2">
                                                            <select [(ngModel)]="item.receivers.minTempratureUnit"
                                                               name="minTempratureUnit" data-plugin-selecttwo=""
                                                               class="form-control populate" data-select2-id="22"
                                                               tabindex="-1" aria-hidden="true">
                                                               <optgroup label="">
                                                                  <option value="°C" data-select2-id="24">°C</option>
                                                                  <option value="°F">°F</option>
                                                               </optgroup>
                                                            </select>
                                                         </div>
                                                         <div class="col-lg-3 mt-1">
                                                         </div>
                                                      </div>

                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">&nbsp;</label>
                                                         </div>
                                                         <div class="col-lg-3">
                                                            <input [(ngModel)]="item.receivers.maxTemprature"
                                                               name="maxTemprature" type="text" class="form-control"
                                                               placeholder="To" id="inputDefault">
                                                         </div>
                                                         <div class="col-lg-2">
                                                            <select [(ngModel)]="item.receivers.maxTempratureUnit"
                                                               name="maxTempratureUnit" data-plugin-selecttwo=""
                                                               class="form-control populate" data-select2-id="25"
                                                               tabindex="-1" aria-hidden="true">
                                                               <optgroup label="">
                                                                  <option value="°C" data-select2-id="24">°C</option>
                                                                  <option value="°F">°F</option>
                                                               </optgroup>
                                                            </select>
                                                         </div>
                                                         <div class="col-lg-3 mt-1">
                                                         </div>
                                                      </div>

                                                      <div class="row mt-3">
                                                         <div class="col-lg-3 col-sm-12 col-xs-12 col-12 labelalign">
                                                            <label
                                                               class="control-label font-weight-semibold mb-0 text-3 text-dark"
                                                               for="inputDefault">Will Driver Unload ?</label>
                                                         </div>
                                                         <div class="col-lg-2 col-sm-6 col-xs-6 col-6">
                                                            <div class="radio-custom">
                                                               <input [(ngModel)]="item.receivers.driverUnload"
                                                                  name="driverUnload" type="radio" value="yes"
                                                                  id="unloadyes" checked="">
                                                               <label for="radioExample1">Yes</label>
                                                            </div>
                                                         </div>
                                                         <div class="col-lg-2 col-sm-6 col-xs-6 col-6">
                                                            <div class="radio-custom">
                                                               <input [(ngModel)]="item.receivers.driverUnload"
                                                                  name="driverUnload" type="radio" value="no"
                                                                  id="unloadno">
                                                               <label for="radioExample2">No</label>
                                                            </div>
                                                         </div>
                                                      </div>

                                                      <div class="divcenter mt-2">
                                                         <a href="javascript:;"
                                                            class="mb-1 mt-1 mr-1 btn btn-md btn-dark"
                                                            (click)="saveReceiver(i)">Save</a>
                                                      </div>
                                                   </div>
                                                </section>
                                             </div>
                                          </div>

                                          <a class="btn btn-success btn-sm" href="javascript:"
                                             (click)="addReceiver()"><i class="fas fa-plus"></i> Add Next Receiver</a>


                                       </div>
                                    </div>
                                 </ng-template>
                              </ngb-panel>
                           </ngb-accordion>
                        </div>
                     </div>
                  </div>
                  <div class="form-group row">
                     <div class="col-lg-12 text-right">
                        <button *ngIf="orderData.orderMode === 'LTL'" (click)="addAccordian()" type="button" class="btn btn-success">Add More</button>
                        <button *ngIf="shippersReceivers.length > 1" (click)="removeAccordian()" type="button" class="btn btn-success">Remove</button>
                     </div>
                  </div>
                 



                  <!-- <div class="form-group row">

                     <div class="col-lg-12">
                        <h4 class="mt-0 text-dark font-weight-bold text-4">Freight Details</h4>
                        <div class="row mt-3">
                           <div class="col-lg-2">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">Pick Up Location</label>
                              <select [(ngModel)]="orderData.freightDetails.pickupLocation" name="pickupLocation"
                                 class="form-control" data-select2-id="19" tabindex="-1" aria-hidden="true">
                                 <optgroup label="">
                                    <option *ngFor="let item of orderData.shipperInfo;" value="{{item.shipperName}}">
                                       {{item.pickupLocation}}</option>
                                 </optgroup>
                              </select>
                           </div>

                           <div class="col-lg-2">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">Delivery Location</label>
                              <select [(ngModel)]="orderData.freightDetails.deliveryLocation" name="deliveryLocation"
                                 class="form-control" data-select2-id="19" tabindex="-1" aria-hidden="true">
                                 <optgroup label="">
                                    <option *ngFor="let item of orderData.receiverInfo;" value="{{item.receiverName}}">
                                       {{item.dropOffLocation}}</option>
                                 </optgroup>
                              </select>
                           </div>

                           <div class="col-lg-1">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">Commodity</label>
                              <input [(ngModel)]="orderData.freightDetails.commodity" name="commodity" type="text"
                                 class="form-control">
                           </div>

                           <div class="col-lg-1">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">Quantity</label>
                              <input [(ngModel)]="orderData.freightDetails.quantity" name="quantity" type="text"
                                 class="form-control">
                           </div>

                           <div class="col-lg-1">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">&nbsp;</label>
                              <select [(ngModel)]="orderData.freightDetails.quantityUnit" name="quantityUnit"
                                 class="form-control" data-select2-id="19" tabindex="-1" aria-hidden="true">
                                 <optgroup label="">
                                    <option value="Bag" data-select2-id="21">Bag</option>
                                    <option value="Bale">Bale</option>
                                    <option value="Barrel">Barrel</option>
                                    <option value="Basket">Basket</option>
                                    <option value="Bin">Bin</option>
                                    <option value="Box">Box</option>
                                    <option value="Bucket">Bucket</option>
                                    <option value="Can">Can</option>
                                    <option value="Crate">Crate</option>
                                 </optgroup>
                              </select>
                           </div>

                           <div class="col-lg-1">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">Rate</label>
                              <input [(ngModel)]="orderData.freightDetails.rate" name="rate" type="text"
                                 class="form-control">
                           </div>

                           <div class="col-lg-1">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">&nbsp;</label>
                              <select [(ngModel)]="orderData.freightDetails.rateUnit" name="rateUnit"
                                 class="form-control" data-select2-id="19" tabindex="-1" aria-hidden="true">
                                 <optgroup label="">
                                    <option value="Bag" data-select2-id="21">Bag</option>
                                    <option value="Bale">Bale</option>
                                    <option value="Barrel">Barrel</option>
                                    <option value="Basket">Basket</option>
                                    <option value="Bin">Bin</option>
                                    <option value="Box">Box</option>
                                    <option value="Bucket">Bucket</option>
                                    <option value="Can">Can</option>
                                    <option value="Crate">Crate</option>
                                 </optgroup>
                              </select>
                           </div>



                           <div class="col-lg-1">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">Weight</label>
                              <input [(ngModel)]="orderData.freightDetails.weight" name="weight" type="text"
                                 class="form-control">
                           </div>

                           <div class="col-lg-1">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">&nbsp;</label>
                              <select [(ngModel)]="orderData.freightDetails.weightUnit" name="weightUnit"
                                 class="form-control" data-select2-id="19" tabindex="-1" aria-hidden="true">
                                 <optgroup label="">
                                    <option value="ton(s)" data-select2-id="21">ton(s)</option>
                                    <option value="Kilograms">Kilograms</option>
                                    <option value="lbs">lbs</option>
                                 </optgroup>
                              </select>
                           </div>


                           <div class="col-lg-1">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">Amount</label>
                              <div class="input-group mb-3">
                                 <span class="input-group-prepend positionsta">
                                    <span class="input-group-text pt-0 pb-0">$</span>
                                 </span>
                                 <input [(ngModel)]="orderData.freightDetails.amount" name="amount" type="text"
                                    class="form-control">
                              </div>
                           </div>

                        </div>

                        <a class="btn btn-success btn-sm" href="#"><i class="fas fa-plus"></i> Add Another Line</a>
                     </div>

                  </div> -->


                  <div class="form-group row">

                     <div class="col-lg-6">
                        <h4 class="mt-0 text-dark font-weight-bold text-4">Additional Details</h4>

                        <div class="row mt-3">
                           <div class="col-lg-3 labelalign">
                              <label class="control-label font-weight-semibold text-3 text-dark"
                                 for="inputDefault">&nbsp;</label>
                           </div>
                           <div class="col-lg-6">
                              <div class="checkbox-custom checkbox-default">
                                 <input (change)="checkTrailer($event.target.value)"
                                    [(ngModel)]="orderData.additionalDetails.dropTrailer" name="dropTrailer"
                                    type="checkbox" id="droptrailer">
                                 <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                    for="droptrailer">Drop Trailer</label>
                              </div>

                           </div>
                           <div class="col-lg-3">
                           </div>
                        </div>



                        <div class="row mt-3" *ngIf="!orderData.additionalDetails.dropTrailer">
                           <div class="col-lg-3 labelalign">
                              <label class="control-label font-weight-semibold text-3 text-dark"
                                 for="inputDefault">Trailer Type</label>
                           </div>
                           <div class="col-lg-6">
                              <ng-select [(ngModel)]="orderData.additionalDetails.trailerType" name="trailerType"
                                 class="form-control populate">

                                 <ng-option value="Refer" data-select2-id="51">Refer</ng-option>
                                 <ng-option value="Dry Van">Dry Van</ng-option>
                                 <ng-option value="Flat Bed">Flat Bed</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-3">
                           </div>
                        </div>

                        <div class="row mt-3">
                           <div class="col-lg-3 labelalign">
                              <label class="control-label font-weight-semibold text-3 text-dark" for="inputDefault">Load
                                 Type</label>
                           </div>
                           <div class="col-lg-2">
                              <div class="checkbox-custom checkbox-default">
                                 <input name="loadType1" (change)="getLoadTypes(0, 'hazMat', $event.target.checked)"
                                    value="hazMat" type="checkbox" id="HazMat">
                                 <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                    for="HazMat">HazMat</label>
                              </div>
                           </div>

                           <div class="col-lg-3">
                              <div class="checkbox-custom checkbox-default">
                                 <input name="loadType2"
                                    (change)="getLoadTypes(1, 'oversize load', $event.target.checked)"
                                    value="oversize load" type="checkbox" id="Load">
                                 <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                    for="Load">Oversize Load</label>
                              </div>
                           </div>

                           <div class="col-lg-2">
                              <div class="checkbox-custom checkbox-default">
                                 <input name="loadType3" (change)="getLoadTypes(2, 'reefer', $event.target.checked)"
                                    value="reefer" type="checkbox" id="Reefer">
                                 <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                    for="Reefer">Reefer</label>
                              </div>
                           </div>

                           <div class="col-lg-2">
                              <div class="checkbox-custom checkbox-default">
                                 <input name="loadType4" (change)="getLoadTypes(3, 'tanker', $event.target.checked)"
                                    value="tanker" type="checkbox" id="Tanker">
                                 <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                    for="Tanker">Tanker</label>
                              </div>
                           </div>


                        </div>


                     </div>
                     <div class="col-lg-6">
                        <div class="row mt-5">
                           <div class="col-lg-3 labelalign">
                              <label
                                 class="control-label font-weight-semibold labelmt text-3 text-dark">Attachments</label>
                           </div>
                           <div class="col-lg-6 col-md-12">
                              <input [(ngModel)]="orderData.additionalDetails.attachments" name="attachments"
                                 type="file" class="form-control border-0 p-0">
                           </div>
                           <div class="col-lg-3"> </div>
                        </div>
                     </div>
                  </div>


                  <div class="form-group row">

                     <div class="col-lg-8">
                        <h4 class="mt-0 text-dark font-weight-bold text-4">Charges</h4>


                        <div class="row mt-3">
                           <div class="col-lg-3 labelalign">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">Freight Fee</label>
                           </div>
                           <div class="col-lg-3 col-md-12">
                              <ng-select [(ngModel)]="orderData.charges.freightFee.type" name="type"
                                 data-plugin-selecttwo="" class="form-control populate" data-select2-id="52"
                                 tabindex="-1" aria-hidden="true">

                                 <ng-option value="Flat Fee">Flat Fee</ng-option>
                                 <ng-option value="Per Mile">Per Mile</ng-option>
                                 <ng-option value="Bag">Bag</ng-option>
                                 <ng-option value="Barrel">Barrel</ng-option>
                                 <ng-option value="Basket">Basket</ng-option>
                                 <ng-option value="Bin">Bin</ng-option>
                                 <ng-option value="Box">Box</ng-option>
                                 <ng-option value="Bucket">Bucket</ng-option>
                                 <ng-option value="Can">Can</ng-option>
                                 <ng-option value="Crate">Crate</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-2">
                              <div class="input-group mb-3">
                                 <span class="input-group-prepend positionsta">
                                    <span class="input-group-text pt-0 pb-0">$</span>
                                 </span>
                                 <input [(ngModel)]="orderData.charges.freightFee.amount" name="amount"
                                    (keyup)="amountCalculate()" type="text" class="form-control" placeholder="0.00">
                              </div>
                           </div>
                           <div class="col-lg-2">
                              <ng-select [(ngModel)]="orderData.charges.freightFee.currency" name="currency"
                                 class="form-control populate" data-select2-id="52" tabindex="-1" aria-hidden="true">

                                 <ng-option value="CAD">CAD</ng-option>
                                 <ng-option value="USD">USD</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-2">
                              <p class="text-right">$ <span [innerHTML]="freightFee">0.00</span> </p>
                           </div>

                        </div>
                        <div class="row mt-3">
                           <div class="col-lg-3 labelalign">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">Fuel Surcharge</label>
                           </div>
                           <div class="col-lg-3">
                              <ng-select [(ngModel)]="orderData.charges.fuelSurcharge.type" name="type"
                                 class="form-control populate" data-select2-id="55" tabindex="-1" aria-hidden="true">

                                 <ng-option value="Flat Fee">Flat Fee</ng-option>
                                 <ng-option value="Per Mile">Per Mile</ng-option>
                                 <ng-option value="Bag">Bag</ng-option>
                                 <ng-option value="Barrel">Barrel</ng-option>
                                 <ng-option value="Basket">Basket</ng-option>
                                 <ng-option value="Bin">Bin</ng-option>
                                 <ng-option value="Box">Box</ng-option>
                                 <ng-option value="Bucket">Bucket</ng-option>
                                 <ng-option value="Can">Can</ng-option>
                                 <ng-option value="Crate">Crate</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-2">
                              <div class="input-group mb-3">
                                 <span class="input-group-prepend positionsta">
                                    <span class="input-group-text pt-0 pb-0">$</span>
                                 </span>
                                 <input [(ngModel)]="orderData.charges.fuelSurcharge.amount" name="amount"
                                    (keyup)="amountCalculate()" type="text" class="form-control" placeholder="0.00">
                              </div>
                           </div>
                           <div class="col-lg-2">
                              <ng-select [(ngModel)]="orderData.charges.fuelSurcharge.currency" name="currency"
                                 class="form-control populate" data-select2-id="52" tabindex="-1" aria-hidden="true">

                                 <ng-option value="CAD">CAD</ng-option>
                                 <ng-option value="USD">USD</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-2">
                              <p class="text-right">$ <span [innerHTML]="fuelSurcharge">0.00 </span></p>
                           </div>
                        </div>
                        <div class="row mt-3" *ngFor="let item of accessFees; let i = index;">
                           <div class="col-lg-3 labelalign">
                              <label class="control-label font-weight-semibold text-3 text-dark"
                                 for="inputDefault"> Accessorial Fee</label>
                           </div>
                           <div class="col-lg-3">
                              <ng-select [(ngModel)]="item.type" name="type{{i}}"
                                 class="form-control populate" data-select2-id="58" tabindex="-1" aria-hidden="true">

                                 <ng-option value="Stop Off" data-select2-id="60">Stop Off</ng-option>
                                 <ng-option value="Lumper">Lumper</ng-option>
                                 <ng-option value="Detention">Detention</ng-option>
                                 <ng-option value="Tarp">Tarp</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-2">
                              <div class="input-group mb-3">
                                 <span class="input-group-prepend positionsta">
                                    <span class="input-group-text pt-0 pb-0">$</span>
                                 </span>
                                 <input (keyup)="amountCalculate()"
                                    [(ngModel)]="item.amount" name="amount{{i}}" type="text"
                                    class="form-control" placeholder="0.00">
                              </div>
                           </div>
                           <div class="col-lg-2">
                              <ng-select [(ngModel)]="item.currency" name="currency{{i}}"
                                 class="form-control populate" data-select2-id="52" tabindex="-1" aria-hidden="true">

                                 <ng-option value="CAD">CAD</ng-option>
                                 <ng-option value="USD">USD</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-2">
                              <p class="text-right">$ <span>{{accessorialFee}} </span></p>
                           </div>
                        </div>
                        <a class="btn btn-success btn-sm" (click)="addAccessFee('accessFee')" href="javascript:;"><i class="fas fa-plus"></i> 
                           Add Accessorial Fee</a>

                        <div class="row mt-3" *ngFor="let item of accessDeduction; let i = index;" >
                           <div class="col-lg-3 labelalign">
                              <label class="control-label font-weight-semibold text-3 text-dark"
                                 for="inputDefault">Accessorial Deduction</label>
                           </div>
                           <div class="col-lg-3">
                              <ng-select [(ngModel)]="item.type" name="type{{i}}"
                                 class="form-control populate" data-select2-id="61" tabindex="-1" aria-hidden="true">

                                 <ng-option value="Stop Off" data-select2-id="63">Stop Off</ng-option>
                                 <ng-option value="Lumper">Lumper</ng-option>
                                 <ng-option value="Detention">Detention</ng-option>
                                 <ng-option value="Tarp">Tarp</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-2">
                              <div class="input-group mb-3">
                                 <span class="input-group-prepend positionsta">
                                    <span class="input-group-text pt-0 pb-0">$</span>
                                 </span>
                                 <input (keyup)="amountCalculate()"
                                    [(ngModel)]="item.amount" name="amount{{i}}"
                                    type="text" class="form-control" placeholder="0.00">
                              </div>
                           </div>
                           <div class="col-lg-2">
                              <ng-select [(ngModel)]="item.currency" name="currency{{i}}"
                                 data-plugin-selecttwo="" class="form-control populate" data-select2-id="52"
                                 tabindex="-1" aria-hidden="true">

                                 <ng-option value="CAD">CAD</ng-option>
                                 <ng-option value="USD">USD</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-2">
                              <p class="text-right">$ <span [innerHTML]="accessorialDeduction">amount{{i}} </span></p>
                           </div>
                        </div>
                        <a class="btn btn-success btn-sm" href="javascript:;" (click)="addAccessFee('accessDeduct')"><i class="fas fa-plus"></i> Add Accessorial
                           Deduction</a>

                        <div class="row">
                           <div class="col-lg-8">
                              <div class="row mt-3">
                                 <div class="col-lg-3 labelalign">
                                    <label class="control-label font-weight-semibold text-3 text-dark pt-2">Tax
                                       1</label>
                                 </div>
                                 <div class="col-lg-2">
                                    <input type="text" class="form-control" value="GST">
                                 </div>
                                 <div class="col-lg-2 pr-0 pl-0">
                                    <div class="input-group">
                                       <input type="text" class="form-control" placeholder="0.00">
                                       <span class="input-group-append">
                                          <span class="input-group-text pt-0 pb-0">
                                             %
                                          </span>
                                       </span>
                                    </div>
                                 </div>
                              </div>
                              <div class="row mt-3">
                                 <div class="col-lg-3 labelalign">
                                    <label class="control-label font-weight-semibold text-3 text-dark pt-2">Tax
                                       2</label>
                                 </div>
                                 <div class="col-lg-2">
                                    <input type="text" class="form-control" value="PST">
                                 </div>
                                 <div class="col-lg-2 pr-0 pl-0">
                                    <div class="input-group">
                                       <input type="text" class="form-control" placeholder="0.00">
                                       <span class="input-group-append">
                                          <span class="input-group-text pt-0 pb-0">
                                             %
                                          </span>
                                       </span>
                                    </div>
                                 </div>
                              </div>
                              <div class="row mt-3">
                                 <div class="col-lg-3 labelalign">
                                    <label class="control-label font-weight-semibold text-3 text-dark pt-2">Tax
                                       3</label>
                                 </div>
                                 <div class="col-lg-2">
                                    <input type="text" class="form-control" value="HST">
                                 </div>
                                 <div class="col-lg-2 pr-0 pl-0">
                                    <div class="input-group">
                                       <input type="text" class="form-control" placeholder="0.00">
                                       <span class="input-group-append">
                                          <span class="input-group-text pt-0 pb-0">
                                             %
                                          </span>
                                       </span>
                                    </div>
                                 </div>
                              </div>
                              <div class="row mt-3">
                                 <div class="col-lg-3 labelalign">
                                    <label
                                       class="control-label font-weight-semibold text-3 text-dark pt-2">Discount</label>
                                 </div>
                                 <div class="col-lg-2">
                                    <input (keyup)="discountCalculate($event.target.value)"
                                       [(ngModel)]="orderData.discount.amount" name="amount" type="text"
                                       class="form-control" value="0">
                                 </div>
                                 <div class="col-lg-2 pl-0">
                                    <ng-select (change)="discountCalculate($event.target.value)"
                                       [(ngModel)]="orderData.discount.unit" name="unit" data-plugin-selectTwo
                                       class="form-control populate">

                                       <ng-option selected value="percentage">%</ng-option>
                                       <ng-option value="CAD">CAD</ng-option>
                                       <ng-option value="USD">USD</ng-option>

                                    </ng-select>
                                 </div>
                              </div>
                           </div>
                           <div class="col-lg-4">
                              <div class="row mt-3">
                                 <div class="col-lg-9 bordtop pt-1">
                                    <h5 class="text-right font-weight-semibold text-4 text-dark">Sub Total</h5>
                                 </div>
                                 <div class="col-lg-3 bordtop pt-1">
                                    <p class="text-right">$ <span [innerHTML]="subTotal"> </span></p>
                                 </div>
                              </div>
                              <div class="row">
                                 <div class="col-lg-9 pt-1 bordtop text-right">
                                    <h5 class="text-right font-weight-semibold text-4 text-dark">Discount</h5>
                                 </div>
                                 <div class="col-lg-3 bordtop pt-1">
                                    <p class="text-right">
                                       <span *ngIf="orderData.discount.unit != 'percentage'"> $</span>
                                       <span *ngIf="orderData.discount.unit === 'percentage'"> %</span> <span
                                          [innerHTML]="discount"> </span>
                                    </p>
                                 </div>
                              </div>
                              <div class="row">
                                 <div class="col-lg-9 bordtop pt-1">
                                    <h5 class="text-right font-weight-semibold text-4 text-dark">Taxes</h5>
                                 </div>
                                 <div class="col-lg-3 bordtop pt-1">
                                    <p class="text-right">0.00</p>
                                 </div>
                              </div>
                              <div class="row">
                                 <div class="col-lg-9 bordtop pt-1">
                                    <h5 class="text-right font-weight-semibold text-4 text-dark">Total Amount</h5>
                                 </div>
                                 <div class="col-lg-3 bordtop pt-1">
                                    <p class="text-right"> $ <span [innerHTML]="totalAmount"> </span> </p>
                                 </div>
                              </div>
                           </div>
                        </div>


                     </div>

                     <div class="col-lg-4">

                        <div class="col-lg-12 bordall">
                           <h5 class="font-weight-semibold text-4 text-dark">Miles</h5>
                           <h5 *ngIf="orderData.orderMode === 'FTL'" class="text-4 text-dark mb-3">Calculated Using</h5>


                           <div class="col-lg-12 mb-3">

                              <div class="btn-group-toggle btn-group-vertical" data-toggle="buttons">
                                 <label *ngIf="orderData.orderMode === 'FTL'" class="btn btn-outline btn-fleet mr-2" [class.active]="calculateBy === 'google'"
                                    style="width:110px;" (click)="getMiles('google')">
                                    <input type="radio" [(ngModel)]="orderData.milesInfo.calculateBy" name="calculateBy"
                                       checked hidden value="google"> Google Miles </label>
                                 <label *ngIf="orderData.orderMode === 'FTL'" class="btn btn-outline btn-fleet mr-2 " style="width:110px;"
                                    [class.active]="calculateBy === 'pcmiles'" (click)="getMiles('pcmiles')">
                                    <input type="radio" [(ngModel)]="orderData.milesInfo.calculateBy" name="calculateBy"
                                       hidden value="pcmiles"> PC Miles </label>
                                 <label class="btn btn-outline btn-fleet mr-2 " style="width:110px;"
                                    [class.active]="calculateBy === 'manual'" (click)="getMiles('manual')">
                                    <input type="radio" [(ngModel)]="orderData.milesInfo.calculateBy" name="calculateBy"
                                       hidden value="manual"> manual </label>
                              </div>

                           </div>




                           <div class="col-lg-12 mb-3">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">Total Miles</label>
                              <input type="text" [(ngModel)]="orderData.milesInfo.totalMiles" name="totalMiles"
                                 class="form-control">
                           </div>
                        </div>

                        <div class="col-lg-12 pl-0 mt-3">
                           <label class="control-label font-weight-bold text-4 text-dark"
                              for="inputDefault">Remarks</label>
                           <textarea [(ngModel)]="orderData.remarks" name="remarks" class="form-control" rows="10"
                              id="textareaDefault"></textarea>
                        </div>



                     </div>


                  </div>


                  <div class="form-group row">
                     <div class="col-lg-12">
                        <a href="javascript:;" routerLink="dispatch/orders"
                           class="mb-1 mt-1 mr-2 btn btn-default">Cancel</a>
                        <button type="submit" class="btn btn-dark modal-confirm">Create Load</button>
                     </div>
                  </div>
               </form>




            </div>
         </div>
      </section>
   </div>
</section>