<style>
   @media (min-width: 576px) {
  .modal-dialog { max-width: none; }
}

   .modal-dialog {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
   }
 

   .modal-content {
      height: auto;
      min-height: 100%;
      border-radius: 0;
   }
   .modal-body {
      position: 'fixed';
        top : '0px';
       
   }
</style>

<section class="body">

   <!-- start: header -->
   <app-header></app-header>
   <!-- end: header -->



   <div class="inner-wrapper">
      <!-- start: sidebar -->
      <app-sidebar></app-sidebar>
      <!-- end: sidebar -->
      <section role="main" class="content-body p-0">
         <header class="page-header pr-5">
            <div class="row pr-1 mr-1" style="padding-top:10px;">
               <div class="col-md-4 col-lg-4">
                  <h4 class="text-4 font-weight-bold mt-0 mb-0 text-dark">{{pageTitle}}</h4>
               </div>
               <div class="col-md-8 col-lg-8 text-right pr-1">
                  <!-- <a class="btn btn-success btn-sm modal-with-form" href="#bolTemplateModal">Create BOL</a>  -->
                  <a routerLink="/dispatch/orders" class="btn btn-default btn-sm"><i class="fas fa-list"></i> All Orders</a>
               </div>
            </div>
         </header>
         <div class="card">
            <div class="card-body">
               <form #orderForm="ngForm" (ngSubmit)="onSubmit()" novalidate>
                  <div class="form-group row">
                     <div class="col-lg-12 text-right">
                        <!-- <p class="mb-0"><a href="#" class="blue1 font-weight-bold"><i class="fas fa-tools"></i> Load Setting</a></p> -->
                     </div>
                     <div class="col-lg-6">
                        <div class="row">
                           <div class="col-lg-3 col-sm-12 col-xs-12 col-12 labelalign">
                              <label class="control-label font-weight-semibold mb-0 text-3 text-dark">Load Type</label>
                           </div>
                           <div class="col-lg-6">
                              <div class="btn-group-toggle" data-toggle="buttons">
                                 <label class="btn btn-outline btn-fleet mr-2"
                                    [class.active]="orderData.orderMode === 'FTL'" style="width:110px;"
                                    (click)="onChangeUnitType('order', 'FTL')">
                                    <input type="radio" [(ngModel)]="orderData.orderMode" name="orderMode" checked
                                       hidden value="FTL"> FTL </label>
                                 <label class="btn btn-outline btn-fleet mr-2 " style="width:110px;"
                                    [class.active]="orderData.orderMode === 'LTL'"
                                    (click)="onChangeUnitType('order', 'LTL')">
                                    <input type="radio" [(ngModel)]="orderData.orderMode" name="orderMode" hidden
                                       value="LTL"> LTL </label>
                              </div>
                              <!-- <label class="d-inline mr-3">
                                 <input [(ngModel)]="orderData.orderMode" type="radio" name="mode" value="FTL">FTL
                              </label>
                              <label>
                                 <input [(ngModel)]="orderData.orderMode" type="radio" name="mode" value="LTL">LTL
                              </label> -->
                           </div>
                        </div>
                     </div>
                     <div class="col-lg-6">
                        <!--
                        <div class="row">
                           <div class="col-lg-3 col-sm-12 col-xs-12 col-12 labelalign">
                              <label class="control-label font-weight-semibold mb-0 text-3 text-dark">Trip Type</label>
                           </div>
                           <div class="col-lg-6">
                              <div class="btn-group-toggle" data-toggle="buttons">
                                 <label class="btn btn-outline btn-fleet mr-2"
                                    [class.active]="orderData.tripType === 'Regular'" style="width:110px;"
                                    (click)="onChangeUnitType('trip', 'Regular')">
                                    <input type="radio" [(ngModel)]="orderData.tripType" name="tripType" checked hidden
                                       value="Regular"> Regular </label>
                                 <label class="btn btn-outline btn-fleet mr-2 " style="width:110px;"
                                    [class.active]="orderData.tripType === 'Outsourced'"
                                    (click)="onChangeUnitType('trip', 'Outsourced')">
                                    <input type="radio" [(ngModel)]="orderData.tripType" name="tripType" hidden
                                       value="Outsourced"> Outsourced </label>
                              </div>
                               
                               <label class="d-inline mr-3">
                                 <input [(ngModel)]="orderData.tripType" type="radio" name="tripType"
                                    value="Regular">Regular
                              </label>
                              <label>
                                 <input [(ngModel)]="orderData.tripType" type="radio" name="tripType"
                                    value="Outsourced">Outsourced
                              </label>

                           </div>
                        </div>
                     -->
                       
                        <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
                                 Launch demo modal
                              </button>

                             
                              <div class="modal fade" id="myModal" tabindex="-1" role="dialog"
                                 aria-labelledby="myModalLabel" aria-hidden="true">
                                 <div class="modal-dialog">
                                    <div class="modal-content">
                                       <div class="modal-header">
                                          <button type="button" class="close" data-dismiss="modal"
                                             aria-hidden="true">&times;</button>
                                          <h4 class="modal-title" id="myModalLabel">Modal title</h4>
                                       </div>
                                       <div class="modal-body">
                                         <app-pdfautomation></app-pdfautomation>

                                       </div>
                                       <div class="modal-footer">
                                          <button type="button" class="btn btn-default"
                                             data-dismiss="modal">Close</button>
                                          <button type="button" class="btn btn-primary">Save changes</button>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                       
                     </div>
                  </div>

                  <div class="form-group row mt-3">
                     <div class="col-lg-12">
                        <h4 class="mt-0 text-dark font-weight-bold text-4">Customer</h4>
                     </div>
                     <div class="col-lg-5 offset-lg-1">
                        <div class="row">
                           <div class="col-lg-10">
                              <label
                                 class="control-label font-weight-semibold labelmt text-3 text-dark">Customer</label>
                              <ng-select (change)="selectedCustomer($event)" [(ngModel)]="orderData.customerID"
                                 name="orderData.customerID" #customerID="ngModel" required customerID class="form-control">
                                 <ng-option *ngFor="let customer of customers | async" value="{{customer.customerID}}">
                                    {{customer.companyName}}
                                 </ng-option>
                              </ng-select>
                              <span class="text-danger"
                                 *ngIf="isSubmit && !orderData.customerID">
                                 This Field is required
                              </span>
                           </div>
                           <div class="col-lg-2 mar-top-37">
                              <a class="btn btn-success btn-sm text-light" data-toggle="modal" data-target="#addCustomerModal"><i
                                    class="fas fa-plus"></i>
                              </a>
                           </div>
                           <div class="col-lg-10 mt-4" *ngIf="customerSelected">
                              <div class="" style="border: 0.4px solid #e1e2e3; border-radius: 0px 0px 15px 15px;">
                                 <div class="row pl-3 pr-3">
                                    <div class="col-lg-6" style="background-color:#e1e2e3;">
                                       <h5 class=" font-weight-bold">Details</h5>
                                    </div>
                                    <div class="col-lg-6 text-right" style="background-color:#e1e2e3;">
                                       <!-- <button type="button" class="btn btn-default btn-xs mt-2" data-toggle="modal" data-target="#addressModal"><i class="fas fa-pencil-alt"></i>Edit</button> -->
                                    </div>
                                 </div>
                                 <div class="row pl-3 pr-3">
                                    <div class="col-lg-12" *ngFor="let item of customerSelected">
                                       <div class="" *ngFor="let address of item.address">
                                          <div class="row" *ngIf="address.addressType =='Shipping Address'">
                                             <div class="col-lg-6">
                                                <label class="control-label"><span class=" font-weight-bold">Address:</span>
                                                   {{address.address1}}
                                                   {{address.address2}}</label>
                                             </div>
                                             <div class="col-lg-6">
                                                <label class="control-label text-lg-right"><span class=" font-weight-bold">Phone:</span> {{address.workPhone}}</label>
                                             </div>
                                             <div class="col-lg-6">
                                                <label class="control-label"><span class=" font-weight-bold">City:</span>
                                                   {{address.cityName}}</label>
                                             </div>
                                             <div class="col-lg-6">
                                                <label class="control-label text-lg-right"><span class=" font-weight-bold">State:</span>
                                                   {{address.stateName}}</label>
                                             </div>
                                             <div class="col-lg-6">
                                                <label class="control-label"><span class=" font-weight-bold">Country:</span>
                                                   {{countriesObjects[address.countryID]}}</label>
                                             </div>
                                             <div class="col-lg-6">
                                                <label class="control-label text-lg-right"><span class=" font-weight-bold">Email:</span>
                                                   {{address.email}}</label>
                                             </div>
                                             <!-- <div class="col-lg-6">
                                                                                             <label class="control-label"><span class=" font-weight-bold">Fax:</span>
                                                                                                --</label>
                                                                                          </div> -->
                                          </div>
                                          
                                       </div>


                                    </div>

                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="row mt-2">
                           <div class="col-lg-10">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">Customer
                                 PO#</label>
                              <input [(ngModel)]="orderData.customerPO" name="customerPO" #customerPO="ngModel" required customerPO type="text"
                                 class="form-control">
                              <span class="text-danger"
                                 *ngIf="isSubmit && !orderData.customerPO">
                                 This Field is required
                              </span>
                           </div>
                        </div>
                        <div class="row mt-2">
                           <div class="col-lg-10">
                              <label
                                 class="control-label font-weight-semibold labelmt text-3 text-dark">Reference</label>
                              <input [(ngModel)]="orderData.reference" name="order_reference" type="text"
                                 class="form-control">
                           </div>
                        </div>
                     </div>
                     <div class="col-lg-5 offset-lg-1">
                        <div class="row">
                           <div class="col-lg-10">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">Order
                                 Number</label>
                              <input [(ngModel)]="orderData.orderNumber" name="orderNumber" #orderNumber="ngModel" required orderNumber
                              type="text"
                                 class="form-control">
                              <span class="text-danger"
                                 *ngIf="isSubmit && !orderData.orderNumber">
                                 This Field is required
                              </span>
                           </div>
                        </div>
                        <div class="row mt-2">
                           <div class="col-lg-10">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">Order Creation
                                 Date/Time</label>
                              <div class="row">
                                 <div class="col-lg-6">

                                    <input type="date" [(ngModel)]="orderData.creationDate" name="creationDate" 
                                    #creationDate="ngModel" required creationDate class="form-control">
                                    <span class="text-danger"
                                       *ngIf="isSubmit && !orderData.creationDate">
                                       This Field is required
                                    </span>
                                 </div>
                                 <div class="col-lg-6">
                                   
                                    <input type="time" class="form-control" [(ngModel)]="orderData.creationTime" 
                                    #creationTime="ngModel" required creationTime name="creationTime">
                                    <span class="text-danger"
                                       *ngIf="isSubmit && !orderData.creationTime">
                                       This Field is required
                                    </span>
                                       
                                 </div>
                              </div>
                           </div>
                        </div>
                        <!-- <div class="row mt-2">
                           <div class="col-lg-5">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">CSA</label>
                              <input [(ngModel)]="orderData.csa" name="csa" type="text" class="form-control">
                           </div>
                           <div class="col-lg-5">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">C-TPAT</label>
                              <input [(ngModel)]="orderData.ctpat" name="ctpat" type="text" class="form-control">
                           </div>
                        </div> -->
                        <div class="row mt-2">
                           <div class="col-lg-5">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">Additonal
                                 Contact Name</label>
                              <input [(ngModel)]="orderData.additionalContact" name="additionalContact" type="text"
                                 class="form-control">
                           </div>
                        </div>
                        <div class="row mt-2">
                           <div class="col-lg-5">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">Phone</label>
                              <input [(ngModel)]="orderData.phone" name="order_phone" type="text" class="form-control">
                           </div>
                           <div class="col-lg-5">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">Email</label>
                              <input [(ngModel)]="orderData.email" name="email" type="text" class="form-control">
                           </div>
                           <div class="col-lg-12 mt-2">
                              <div class="checkbox-custom checkbox-default">
                                 <input [(ngModel)]="orderData.invoiceEmail" name="invoiceEmail" type="checkbox"
                                    name="terms" id="checkboxExample1">
                                 <label for="checkboxExample1">CC - Invoice Email</label>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>

                  <div class="form-group row">
                     <div class="col-lg-12 mb-4 mb-lg-0">
                        <div *ngFor="let item of shippersReceivers; let i = index;"
                           style="border:0.5px solid #333;border-radius: 10px; box-shadow: 2px 5px 5px #d1d1d1;"
                           class="mb-2 order-accordian">
                           <ngb-accordion (panelChange)="accordianChange()" [closeOthers]="true" activeIds="static-0">
                              <ngb-panel id="static-{{i}}">
                                 <ng-template ngbPanelTitle>
                                    <h4 class="card-title m-0"><a class="accordion-toggle carcursor font-weight-bold text-4 text-dark">
                                          Shipment-{{i + 1}} </a> </h4>
                                 </ng-template>
                                 <ng-template ngbPanelContent>
                                    <div class="row">
                                       <div class="col-6">
                                          <div class="shipper__listing" *ngIf="finalShippersReceivers[i].shippers?.length > 0">
                                             <h4 class="mt-0 text-dark font-weight-bold text-4">Shippers</h4>
                                             <table class="table">
                                                <tbody>
                  
                                                   <tr *ngFor="let list of finalShippersReceivers[i].shippers; let j = index;">
                                                      <td>
                                                         {{shippersObjects[list.shipperID]}}
                                                      </td>
                                                      <td>
                                                         {{list.pickupLocation}}
                                                      </td>
                                                      <td>
                                                         {{list.dateAndTime}}
                                                      </td>
                                                      <td>
                                                         <i (click)="editList('shipper', i, j)" class="fa fa-edit fa-fw"></i>
                                                         <i (click)="removeList('shipper', i, j)" class="fa fa-trash fa-fw"></i>
                                                      </td>
                                                   </tr>
                  
                                                </tbody>
                                             </table>
                                          </div>
                                       </div>
                                       <div class="col-6">
                                          <div class="shipper__listing" *ngIf="finalShippersReceivers[i].receivers?.length > 0">
                                             <h4 class="mt-0 text-dark font-weight-bold text-4">Receivers</h4>
                                             <table class="table">
                                                <tbody>
                  
                                                   <tr *ngFor="let list of finalShippersReceivers[i].receivers; let j = index;">
                                                      <td>
                                                         {{receiversObjects[list.receiverID]}}
                                                      </td>
                                                      <td>
                                                         {{list.dropOffLocation}}
                                                      </td>
                                                      <td>
                                                         {{list.dateAndTime}}
                                                      </td>
                                                      <td>
                                                         <i (click)="editList('receiver', i, j)" class="fa fa-edit fa-fw"></i>
                                                         <i (click)="removeList('receiver', i, j)" class="fa fa-trash fa-fw"></i>
                                                      </td>
                                                   </tr>
                  
                                                </tbody>
                                             </table>
                                          </div>
                                       </div>
                                    </div>
                                    <div class="form-group row divderrel">
                                       <p class="mb-1 mt-1 mr-1 midleicon btn btn-default"><i
                                             class="fas fa-arrow-circle-right"></i></p>

                                             <div class="col-lg-6">
                                                <h4 class="mt-0 text-dark font-weight-bold text-4">Add Shipper</h4>
                                             </div>

                                             <div class="col-lg-6">
                                                <h4 class="mt-0 text-dark font-weight-bold text-4">Add Receiver</h4>
                                              </div>


                                       <div class="col-lg-4 pl-0 pr-0 offset-lg-1">
                                          
                                          <div class="">
                                             <div class="toggle toggle-primary">
                                                <section class="toggle">
                                                   <label (click)="toggleAccordian(i)"
                                                      class="text-dark text-5 font-weight-bold">Shipper
                                                      <!-- <span *ngIf="i != 0;" (click)="remove('shipper', i)" class="minus-sign btn btn-success btn-sm">
                                                            <i class="fas fa-minus fa-fw d-block m-0"></i>
                                                         </span>  -->
                                                   </label>
                                                   <div class="" *ngIf="visibleIndex === i">
                                                      <div class="row">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label
                                                               class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Shipper</label>

                                                            <ng-select [(ngModel)]="item.shippers.shipperID"
                                                               name="shipperID" #shipperID="ngModel" required
                                                               shipperID class="form-control">
                                                              
                                                                  <ng-option *ngFor="let item of shippers" value="{{item.shipperID}}">{{item.companyName}}</ng-option>
                                                              
                                                            </ng-select>
                                                            <span class="text-danger"
                                                               *ngIf="isShipperSubmit && shippersReceivers[i].shippers.shipperID == ''"
                                                               >
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         
                                                      </div>
                                                      <div class="row mt-3">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Pickup Location</label>

                                                            <input [(ngModel)]="item.shippers.pickupLocation"
                                                               name="pickupLocation" (keyup)="searchTerm.next($event);"
                                                               class="form-control " #pickupLocation="ngModel" required
                                                               pickupLocation tabindex="-1" aria-hidden="true">

                                                            <ul class="p-0 m-0 text-left map-search__results bg-white">
                                                               <li *ngFor="let item of searchResults;">
                                                                  <a href="javascript:;"
                                                                     (click)="assignLocation(i, 'shipper', item.address.label)"
                                                                     title="{{item.address.label}}">{{item.address.label}}</a>
                                                               </li>
                                                            </ul>

                                                            <span class="text-danger"
                                                               *ngIf="isShipperSubmit && shippersReceivers[i].shippers.pickupLocation == ''"
                                                               >
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         
                                                      </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Pick Date and Time</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            

                                                            <div class="input-group">
                                                               <input [(ngModel)]="item.shippers.pickupDate"
                                                                  name="pickupDate" type="date" #pickupDate="ngModel"
                                                                  required pickupDate placeholder=""
                                                                  class="form-control ">
                                                            </div>
                                                            <span class="text-danger"
                                                               *ngIf="isShipperSubmit && shippersReceivers[i].shippers.pickupDate == ''"
                                                               >
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <div class="input-group">
                                                               <input [(ngModel)]="item.shippers.pickupTime"
                                                                  name="pickupTime" type="time" class="timepicker form-control" placeholder=""
                                                                  #pickupTime="ngModel" required pickupTime
                                                                  />
                                                               <!-- <input [(ngModel)]="item.pickupTime"
                                                               name="item.pickupTime{{i}}" type="text" class="form-control" placeholder="hour:minute"  #pickupTime="ngModel" required pickupTime id="timepicker2"> -->
                                                            </div>
                                                            <span class="text-danger"
                                                               *ngIf="isShipperSubmit &&  shippersReceivers[i].shippers.pickupTime == ''"
                                                               >
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         <!-- <div class="col-lg-3 mt-1">
                                                         </div> -->
                                                      </div>
                                                      <div class="row mt-3">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Pickup Instruction</label>

                                                            <textarea [(ngModel)]="item.shippers.pickupInstruction"
                                                               name="pickupInstruction" class="form-control" rows="3"
                                                               id="textareaDefault"></textarea>
                                                         </div>
                                                         
                                                      </div>
                                                      <div class="row mt-3">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Contact Person at PickUp</label>

                                                            <input [(ngModel)]="item.shippers.contactPerson"
                                                               name="contactPerson" type="text" class="form-control"
                                                               id="inputDefault">
                                                            <span class="text-danger"
                                                               *ngIf="isShipperSubmit && shippersReceivers[i].shippers.contactPerson == ''"
                                                               >
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         
                                                      </div>
                                                      <div class="row mt-3">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Pu</label>

                                                            <input [(ngModel)]="item.shippers.pu"
                                                               name="pu" type="text" class="form-control"
                                                               id="inputDefault">
                                                            <!-- <span class="text-danger"
                                                               *ngIf="isShipperSubmit && shippersReceivers[i].shippers.contactPerson == ''"
                                                               >
                                                               This Field is required
                                                            </span> -->
                                                         </div>
                                                         
                                                      </div>
                                                      <div class="row mt-3">

                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Phone</label>

                                                            <input [(ngModel)]="item.shippers.phone" name="phone"
                                                               type="text" class="form-control" id="inputDefault">
                                                            <span class="text-danger"
                                                               *ngIf="isShipperSubmit && shippersReceivers[i].shippers.phone == ''"
                                                               >
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         
                                                      </div>                                                     

                                                      <div class="row mt-3">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Reference</label>

                                                            <input [(ngModel)]="item.shippers.reference"
                                                               name="reference" type="text" class="form-control"
                                                               id="inputDefault">
                                                            
                                                         </div>
                                                         
                                                      </div>
                                                      <div class="row mt-3">
                                                         

                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Notes</label>

                                                            <input [(ngModel)]="item.shippers.notes" name="notes"
                                                               type="text" class="form-control" id="inputDefault">
                                                         </div>
                                                         
                                                         
                                                      </div>
                                                      <div *ngFor="let commodity of item.shippers.commodity; let z = index;">
                                                         <div class="row mt-3">
                                                            <div class="col-lg-12">
                                                               <label class="control-label font-weight-semibold labelmt text-3 text-dark">Commodity</label>
                                                            </div>

                                                            <div class="col-lg-6">

                                                               <input type="text" [(ngModel)]="commodity.name" name="name{{z}}" class="form-control">
                                                               
                                                               <span class="text-danger"
                                                                  *ngIf="isShipperSubmit &&  shippersReceivers[i].shippers.commodity[z].name == ''"
                                                                  >
                                                                  This Field is required
                                                               </span>

                                                            </div>
                                                            <div class="col-lg-6">
                                                               <a class="btn btn-success btn-sm" href="javascript:;" *ngIf="z === 0" (click)="addCommodity('shipper', i)"><i class="fas fa-plus"></i> Commodity </a> 
                                                               <a class="btn btn-success btn-sm" href="javascript:;" *ngIf="z !== 0" (click)="removeCommodity('shipper', i, z)"><i class="fas fa-minus"></i> </a> 
                                                            </div>
                                                         </div>
                                                         
                                                         <div class="row mt-3">
                                                            <div class="col-lg-12">
                                                               <label class="control-label font-weight-semibold labelmt text-3 text-dark">Quantity</label>
                                                            </div>
                                                            <div class="col-lg-6">

                                                               <input type="text" [(ngModel)]="commodity.quantity" name="quantity{{z}}" class="form-control"> 
                                                               <span class="text-danger"
                                                                  *ngIf="isShipperSubmit &&  shippersReceivers[i].shippers.commodity[z].quantity == ''"
                                                                  >
                                                                  This Field is required
                                                               </span>
                                                            </div>
                                                               

                                                            <div class="col-lg-6">
                                                               <ng-select [(ngModel)]="commodity.quantityUnit" name="quantityUnit{{z}}" class="form-control" data-select2-id="19" tabindex="-1" aria-hidden="false">
                                                                  <ng-option value="Bag" data-select2-id="21">Bag</ng-option>
                                                                     <ng-option value="Bale" data-select2-id="285">Bale</ng-option>
                                                                     <ng-option value="Barrel" data-select2-id="286">Barrel</ng-option>
                                                                     <ng-option value="Basket" data-select2-id="287">Basket</ng-option>
                                                                     <ng-option value="Bin" data-select2-id="288">Bin</ng-option>
                                                                     <ng-option value="Box" data-select2-id="289">Box</ng-option>
                                                                     <ng-option value="Bucket" data-select2-id="290">Bucket</ng-option>
                                                                     <ng-option value="Can" data-select2-id="291">Can</ng-option>
                                                                     <ng-option value="Crate" data-select2-id="292">Crate</ng-option>
                                                                     <ng-option value="Cases" data-select2-id="293">Cases</ng-option>
                                                                     <ng-option value="Pallets" data-select2-id="294">Pallets</ng-option>
                                                               </ng-select>

                                                               <span class="text-danger"
                                                                  *ngIf="isShipperSubmit &&  shippersReceivers[i].shippers.commodity[z].quantityUnit == ''"

                                                                  >
                                                                  This Field is required
                                                               </span>

                                                            </div>
                                                            <div class="col-lg-3"> </div>
                                                         </div>
                                                         <div class="row mt-3">
                                                            <div class="col-lg-12">
                                                               <label class="control-label font-weight-semibold labelmt text-3 text-dark">Weight</label>
                                                            </div>
                                                            <div class="col-lg-6">

                                                               <input type="text" [(ngModel)]="commodity.weight" name="weight{{z}}" class="form-control"> 
                                                               <span class="text-danger"
                                                                  *ngIf="isShipperSubmit &&  shippersReceivers[i].shippers.commodity[z].weight == ''"
                                                                  >
                                                                  This Field is required
                                                               </span>
                                                            </div>

                                                            <div class="col-lg-6">
                                                               <ng-select [(ngModel)]="commodity.weightUnit" name="weightUnit{{z}}" class="form-control" data-select2-id="19" tabindex="-1" aria-hidden="false">
                                                                     <ng-option value="ton(s)">ton(s)</ng-option>
                                                                     <ng-option value="Kilograms">Kilograms</ng-option>
                                                                     <ng-option value="lbs">lbs</ng-option>
                                                               </ng-select>

                                                               <span class="text-danger"
                                                                  *ngIf="isShipperSubmit && shippersReceivers[i].shippers.commodity[z].weightUnit == ''"
                                                                  >
                                                                  This Field is required
                                                               </span>

                                                            </div>
                                                           
                                                         </div>
                                                      </div>

                                                      <div class="row mt-3">
                                                         <div class="col-lg-4 col-sm-12 col-xs-12 col-12">
                                                            <label class="control-label font-weight-semibold mb-0 text-3 text-dark"
                                                               for="inputDefault">Will Driver Load ?</label>
                                                         </div>
                                                         <div class="col-lg-2 col-sm-6 col-xs-6 col-6">
                                                            <div class="radio-custom">
                                                               <input [(ngModel)]="item.shippers.driverLoad"
                                                                  name="driverLoad" type="radio" value="yes"
                                                                  id="loadyes" checked="">
                                                               <label for="radioExample1">Yes</label>
                                                            </div>
                                                         </div>
                                                         <div class="col-lg-2 col-sm-6 col-xs-6 col-6">
                                                            <div class="radio-custom">
                                                               <input [(ngModel)]="item.shippers.driverLoad"
                                                                  name="driverLoad" type="radio" value="no" id="loadno">
                                                               <label for="radioExample2">No</label>
                                                            </div>
                                                         </div>
                                                      </div>

                                                      <div class="divcenter mt-2">
                                                         <a *ngIf="!showShipperUpdate" href="javascript:;" (click)="saveShipper(i)"
                                                               class="mb-1 mt-1 mr-1 btn btn-md btn-dark">Save</a>
                                                         <a *ngIf="showShipperUpdate" href="javascript:;" (click)="updateShipperReceiver('shipper', i)"
                                                               class="mb-1 mt-1 mr-1 btn btn-md btn-dark">Update</a>
                                                      </div>
                                                   </div>
                                                </section>
                                             </div>
                                          </div>

                                          <!-- <a (click)="addShipper()" class="btn btn-success btn-sm"
                                             href="javascript:;"><i class="fas fa-plus"></i> Add Next Shipper</a> -->


                                       </div>



                                       <div class="col-lg-4 pl-0 pr-0 offset-lg-2">
                                          
                                          <div class="">
                                             <div class="toggle toggle-primary" data-plugin-toggle>
                                                <section class="toggle">
                                                   <label (click)="toggleAccordian(i)"
                                                      class="text-dark text-5 font-weight-bold">Receiver
                                                      <!-- <span *ngIf="i != 0;" (click)="remove('receiver', i)" class="minus-sign btn btn-success btn-sm">
                                                            <i class="fas fa-minus fa-fw d-block m-0"></i>
                                                         </span> -->
                                                   </label>
                                                   <div class="" *ngIf="visibleIndex === i">
                                                      <div class="row">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Receiver</label>

                                                            <ng-select [(ngModel)]="item.receivers.receiverID"
                                                               name="receiverID" #receiverID="ngModel" required
                                                               receiverID class="form-control" data-select2-id="16"
                                                               tabindex="-1" aria-hidden="true">
                                                               <ng-option *ngFor="let item of receivers;" value="{{item.receiverID}}">{{item.companyName}}</ng-option>
                                                            </ng-select>
                                                            <span class="text-danger"
                                                               *ngIf="isReceiverSubmit && shippersReceivers[i].receivers.receiverID == ''">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         
                                                      </div>
                                                      <div class="row mt-3">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Drop Off Location</label>

                                                            <input [(ngModel)]="item.receivers.dropOffLocation"
                                                               name="dropOffLocation" #dropOffLocation="ngModel"
                                                               required dropOffLocation
                                                               (keyup)="searchTerm.next($event);" class="form-control"
                                                               tabindex="-1" aria-hidden="true">

                                                            <ul class="p-0 m-0 text-left map-search__results bg-white">
                                                               <li *ngFor="let item of searchResults;">
                                                                  <a href="javascript:;"
                                                                     (click)="assignLocation(i, 'receiver', item.address.label)"
                                                                     title="{{item.address.label}}">{{item.address.label}}</a>
                                                               </li>
                                                            </ul>
                                                            
                                                            <span class="text-danger"
                                                               *ngIf="isReceiverSubmit &&  shippersReceivers[i].receivers.dropOffLocation == ''">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                                                                               </div>
                                                      <div class="row mt-3">
                                                         <div class="col-lg-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Delivery Date and Time</label>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <div class="input-group">
                                                               <input [(ngModel)]="item.receivers.dropOffDate"
                                                                  name="dropOffDate" #dropOffDate="ngModel" required
                                                                  dropOffDate type="date" placeholder=""
                                                                  class="form-control">
                                                            </div>
                                                            <span class="text-danger"
                                                               *ngIf="isReceiverSubmit &&  shippersReceivers[i].receivers.dropOffDate == ''">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         <div class="col-lg-6">
                                                            <div class="input-group">
                                                               <input [(ngModel)]="item.receivers.dropOffTime"
                                                                  name="dropOffTime" #dropOffTime="ngModel" required
                                                                  dropOffTime type="time" class="timepicker form-control" placeholder=""
                                                                  />
                                                            </div>
                                                            <span class="text-danger"
                                                               *ngIf="isReceiverSubmit &&  shippersReceivers[i].receivers.dropOffTime == ''">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         <!-- <div class="col-lg-3 mt-1">
                                                         </div> -->
                                                      </div>
                                                      <div class="row mt-3">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Delivery Instruction</label>

                                                            <textarea [(ngModel)]="item.receivers.dropOffInstruction"
                                                               name="dropOffInstruction" class="form-control" rows="3"
                                                               id="textareaDefault"
                                                               style="margin-top: 0px; margin-bottom: 0px; height: 74px;"></textarea>
                                                         </div>
                                                         
                                                      </div>
                                                      <div class="row mt-3">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Contact Person at Delivery</label>

                                                            <input [(ngModel)]="item.receivers.contactPerson"
                                                               name="contactPerson" type="text" class="form-control"
                                                               id="inputDefault">
                                                            <span class="text-danger"
                                                               *ngIf="isReceiverSubmit &&  shippersReceivers[i].receivers.contactPerson == ''">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         
                                                      </div>
                                                      <div class="row mt-3">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Pu</label>

                                                            <input [(ngModel)]="item.receivers.pu" name="pu"
                                                               type="text" class="form-control" id="inputDefault">
                                                            <!-- <span class="text-danger"
                                                               *ngIf="isReceiverSubmit &&  shippersReceivers[i].receivers.phone == ''">
                                                               This Field is required
                                                            </span> -->
                                                         </div>
                                                         
                                                      </div>
                                                      <div class="row mt-3">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Phone</label>

                                                            <input [(ngModel)]="item.receivers.phone" name="phone"
                                                               type="text" class="form-control" id="inputDefault">
                                                            <span class="text-danger"
                                                               *ngIf="isReceiverSubmit &&  shippersReceivers[i].receivers.phone == ''">
                                                               This Field is required
                                                            </span>
                                                         </div>
                                                         
                                                      </div>
                                                      <div class="row mt-3">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Reference</label>

                                                            <input [(ngModel)]="item.receivers.reference"
                                                               name="reference" type="text" class="form-control"
                                                               id="inputDefault">
                                                         </div>
                                                         
                                                      </div>
                                                      <div class="row mt-3">
                                                         
                                                         <div class="col-lg-12 col-md-12">
                                                            <label  class="control-label font-weight-semibold labelmt text-3 text-dark"
                                                               for="inputDefault">Notes</label>


                                                            <input [(ngModel)]="item.receivers.notes" name="notes"
                                                               type="text" class="form-control" id="inputDefault">
                                                         </div>
                                                         
                                                         
                                                      </div>
                                                      <div *ngFor="let commodity of item.receivers.commodity; let z = index;">
                                                         <div class="row mt-3">
                                                            <div class="col-lg-12">
                                                               <label class="control-label font-weight-semibold labelmt text-3 text-dark">Commodity</label>
                                                            </div>
                                                            <div class="col-lg-6">

                                                               <input type="text" [(ngModel)]="commodity.name" name="name{{z}}" class="form-control">
                                                               <span class="text-danger"
                                                                  *ngIf="isReceiverSubmit &&  shippersReceivers[i].receivers.commodity[z].name == ''">
                                                                  This Field is required
                                                               </span> 

                                                            </div>
                                                            <div class="col-lg-6">
                                                               <a class="btn btn-success btn-sm" href="javascript:;" *ngIf="z === 0" (click)="addCommodity('receiver', i)"><i class="fas fa-plus"></i> Commodity </a> 
                                                               <a class="btn btn-success btn-sm" href="javascript:;" *ngIf="z !== 0" (click)="removeCommodity('receiver', i, z)"><i class="fas fa-minus"></i> </a> 
                                                            </div>
                                                         </div>

                                                         <div class="row mt-3">
                                                            <div class="col-lg-12">
                                                               <label class="control-label font-weight-semibold labelmt text-3 text-dark">Quantity</label>
                                                            </div>
                                                            <div class="col-lg-6">

                                                               <input type="text" [(ngModel)]="commodity.quantity" name="quantity{{z}}" class="form-control"> 
                                                               <span class="text-danger"
                                                                  *ngIf="isReceiverSubmit &&  shippersReceivers[i].receivers.commodity[z].quantity == ''">
                                                                  This Field is required
                                                               </span>
                                                            </div>

                                                            <div class="col-lg-6">
                                                               <ng-select [(ngModel)]="commodity.quantityUnit" name="quantityUnit{{z}}" class="form-control" data-select2-id="19" tabindex="-1" aria-hidden="false">
                                                                  <ng-option value="Bag" data-select2-id="21">Bag</ng-option>
                                                                     <ng-option value="Bale" data-select2-id="285">Bale</ng-option>
                                                                     <ng-option value="Barrel" data-select2-id="286">Barrel</ng-option>
                                                                     <ng-option value="Basket" data-select2-id="287">Basket</ng-option>
                                                                     <ng-option value="Bin" data-select2-id="288">Bin</ng-option>
                                                                     <ng-option value="Box" data-select2-id="289">Box</ng-option>
                                                                     <ng-option value="Bucket" data-select2-id="290">Bucket</ng-option>
                                                                     <ng-option value="Can" data-select2-id="291">Can</ng-option>
                                                                     <ng-option value="Crate" data-select2-id="292">Crate</ng-option>
                                                                     <ng-option value="Cases" data-select2-id="293">Cases</ng-option>
                                                                     <ng-option value="Pallets" data-select2-id="294">Pallets</ng-option>
                                                               </ng-select>

                                                               <span class="text-danger"
                                                                  *ngIf="isReceiverSubmit &&  shippersReceivers[i].receivers.commodity[z].quantityUnit == ''">
                                                                  This Field is required
                                                               </span>

                                                            </div>
                                                            
                                                         </div>
                                                         <div class="row mt-3">
                                                            <div class="col-lg-12">
                                                               <label class="control-label font-weight-semibold labelmt text-3 text-dark">Weight</label>
                                                            </div>
                                                            <div class="col-lg-6">

                                                               <input type="text" [(ngModel)]="commodity.weight" name="weight{{z}}" class="form-control"> 
                                                               <span class="text-danger"
                                                                  *ngIf="isReceiverSubmit && shippersReceivers[i].receivers.commodity[z].weight == ''">
                                                                  This Field is required
                                                               </span>
                                                            </div>

                                                            <div class="col-lg-6">
                                                               <ng-select [(ngModel)]="commodity.weightUnit" name="weightUnit{{z}}" class="form-control" data-select2-id="19" tabindex="-1" aria-hidden="false">
                                                                     <ng-option value="ton(s)">ton(s)</ng-option>
                                                                     <ng-option value="Kilograms">Kilograms</ng-option>
                                                                     <ng-option value="lbs">lbs</ng-option>
                                                               </ng-select>

                                                               <span class="text-danger"
                                                                  *ngIf="isReceiverSubmit && shippersReceivers[i].receivers.commodity[z].weightUnit == ''">
                                                                  This Field is required
                                                               </span>
                                                            </div>
                                                           
                                                         </div>
                                                      </div>


                                                      <div class="row mt-3">
                                                         <div class="col-lg-4 col-sm-12 col-xs-12 col-12">
                                                            <label class="control-label font-weight-semibold mb-0 text-3 text-dark"
                                                               for="inputDefault">Will Driver Unload ?</label>
                                                         </div>
                                                         <div class="col-lg-2 col-sm-6 col-xs-6 col-6">
                                                            <div class="radio-custom">
                                                               <input [(ngModel)]="item.receivers.driverUnload"
                                                                  name="driverUnload" type="radio" value="yes"
                                                                  id="unloadyes" checked="">
                                                               <label for="radioExample1">Yes</label>
                                                            </div>
                                                         </div>
                                                         <div class="col-lg-2 col-sm-6 col-xs-6 col-6">
                                                            <div class="radio-custom">
                                                               <input [(ngModel)]="item.receivers.driverUnload"
                                                                  name="driverUnload" type="radio" value="no"
                                                                  id="unloadno">
                                                               <label for="radioExample2">No</label>
                                                            </div>
                                                         </div>
                                                      </div>

                                                      <div class="divcenter mt-2">
                                                         <a *ngIf="!showReceiverUpdate" href="javascript:;"
                                                            class="mb-1 mt-1 mr-1 btn btn-md btn-dark"
                                                            (click)="saveReceiver(i)">Save</a>
                                                         <a *ngIf="showReceiverUpdate" href="javascript:;" (click)="updateShipperReceiver('receiver', i)"
                                                               class="mb-1 mt-1 mr-1 btn btn-md btn-dark">Update</a>
                                                      </div>
                                                   </div>
                                                </section>
                                             </div>
                                          </div>

                                          <!-- <a class="btn btn-success btn-sm" href="javascript:"
                                             (click)="addReceiver()"><i class="fas fa-plus"></i> Add Next Receiver</a> -->
                                          

                                       </div>
                                    </div>
                                 </ng-template>
                              </ngb-panel>
                           </ngb-accordion>
                        </div>
                     </div>
                  </div>
                  <div class="form-group row">
                     <div class="col-lg-12 text-right">
                        <button (click)="addAccordian()" type="button" class="btn btn-success">Add More</button>
                        <button *ngIf="shippersReceivers.length > 1" (click)="removeAccordian(i)" type="button" class="btn btn-success ml-2">Remove</button>
                     </div>
                  </div>
         
                  <div class="form-group row">

                     <div class="col-lg-6 pr-0">
                        <h4 class="mt-0 text-dark font-weight-bold text-4">Additional Details</h4>

                        <div class="row mt-3">
                           
                           <div class="col-lg-8 offset-lg-2">
                              <label class="control-label font-weight-semibold text-3 text-dark"
                                 for="inputDefault">&nbsp;</label>
                                 
                              <div class="checkbox-custom checkbox-default">
                                 <input (change)="checkTrailer($event.target.value)"
                                    [(ngModel)]="orderData.additionalDetails.dropTrailer" name="dropTrailer"
                                    type="checkbox" id="droptrailer">
                                 <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                    for="droptrailer">Drop Trailer</label>
                              </div>

                           </div>
                           
                        </div>



                        <div class="row mt-3" *ngIf="!orderData.additionalDetails.dropTrailer">
                           
                           <div class="col-lg-8 offset-lg-2 pr-0">
                              <label class="control-label font-weight-semibold text-3 text-dark"
                                 for="inputDefault">Trailer Type</label>

                              <ng-select [(ngModel)]="orderData.additionalDetails.trailerType" name="trailerType"
                                 class="form-control populate">

                                 <ng-option value="Refer" data-select2-id="51">Refer</ng-option>
                                 <ng-option value="Dry Van">Dry Van</ng-option>
                                 <ng-option value="Flat Bed">Flat Bed</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-3">
                           </div>
                        </div>


                        <div class="row mt-3">
                           <div class="col-lg-10 offset-lg-2">
                              <label class="control-label font-weight-semibold text-3 text-dark" for="inputDefault">Load Type</label>
                           </div>

                           <div class="col-lg-2 offset-lg-2 mr-3">
                              <div class="checkbox-custom checkbox-default">

                                 <input name="orderData.additionalDetails.loadType.hazMat" [(ngModel)]="orderData.additionalDetails.loadType.hazMat"

                                     type="checkbox" id="HazMat">
                                 <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                    for="HazMat">HazMat</label>
                              </div>
                           </div>

                           <div class="col-lg-3">
                              <div class="checkbox-custom checkbox-default">
                                 <input name="orderData.additionalDetails.loadType.oversize" [(ngModel)]="orderData.additionalDetails.loadType.oversize"
                                    type="checkbox" id="Load">
                                 <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                    for="Load">Oversize Load</label>
                              </div>
                           </div>

                           <div class="col-lg-2">
                              <div class="checkbox-custom checkbox-default">

                                 <input name="orderData.additionalDetails.loadType.reefer" [(ngModel)]="orderData.additionalDetails.loadType.reefer"

                                   type="checkbox" id="Reefer">
                                 <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                    for="Reefer">Reefer</label>
                              </div>
                           </div>

                           <div class="col-lg-2">
                              <div class="checkbox-custom checkbox-default">
                                 <input name="orderData.additionalDetails.loadType.tanker" [(ngModel)]="orderData.additionalDetails.loadType.tanker"
                                     type="checkbox" id="Tanker">
                                 <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                    for="Tanker">Tanker</label>
                              </div>
                           </div>


                        </div>

                        <!--Tempratures-->
                        <div class="row mt-2" *ngIf="orderData.additionalDetails.loadType.reefer">
                           <div class="col-lg-10 offset-lg-2">
                              <label class="control-label font-weight-semibold text-3 text-dark" for="inputDefault">Temprature</label>
                           </div>
                           <div class="col-lg-4 offset-lg-2 pr-0">
                              <input
                                 name="orderData.additionalDetails.refeerTemp.minTemprature" [(ngModel)]="orderData.additionalDetails.refeerTemp.minTemprature" type="text" class="form-control"
                                 placeholder="From" id="inputDefault">
                           </div>
                           <div class="col-lg-4">
                              <ng-select 
                              name="orderData.additionalDetails.refeerTemp.minTempratureUnit" [(ngModel)]="orderData.additionalDetails.refeerTemp.minTempratureUnit" data-plugin-selecttwo=""
                                 class="form-control populate" data-select2-id="10"
                                 tabindex="-1" aria-hidden="true">
                                 
                                    <ng-option value="C">C</ng-option>
                                    <ng-option value="F">F</ng-option>
                                 
                              </ng-select>
                           </div>
                           
                        </div>




                        <div class="row mt-2" *ngIf="orderData.additionalDetails.loadType.reefer">
                           
                           <div class="col-lg-4 offset-lg-2 pr-0">
                              <input 
                              name="orderData.additionalDetails.refeerTemp.maxTemprature" [(ngModel)]="orderData.additionalDetails.refeerTemp.maxTemprature" type="text" class="form-control"
                              type="text" class="form-control"
                                 placeholder="To" id="inputDefault">
                           </div>
                           <div class="col-lg-4">
                              <ng-select 
                              name="orderData.additionalDetails.refeerTemp.maxTempratureUnit" [(ngModel)]="orderData.additionalDetails.refeerTemp.maxTempratureUnit" type="text" class="form-control"
                              data-plugin-selecttwo=""
                                 class="form-control populate" data-select2-id="13"
                                 tabindex="-1" aria-hidden="true">
                                    <ng-option value="C">C</ng-option>
                                    <ng-option value="F">F</ng-option>
                                 
                              </ng-select>
                           </div>
                           
                        </div>


                        <div class="row mt-2">
                           
                           <div class="col-lg-8 offset-lg-2 pr-0">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark">Attachments</label>
                              <input [(ngModel)]="orderData.additionalDetails.uploadedDocs" name="uploadedDocs"
                                 type="file" (change)="selectDocuments($event)" multiple class="form-control p-0">
                           </div>
                           
                        </div>

                        <div class="row mt-3">
                           <div class="col-lg-8 offset-lg-2 bordall">
                              <h5 class="font-weight-semibold text-4 text-dark">Miles</h5>
                              <h5 *ngIf="orderData.orderMode === 'FTL'" class="text-4 text-dark mb-3">Calculated Using</h5>
   
   
                              <div class="col-lg-12 mb-3">
   
                                 <div class="btn-group-toggle btn-group-vertical" data-toggle="buttons">
                                    <label class="btn btn-outline btn-fleet mr-2 milesCommon" [class.active]="orderData.milesInfo.calculateBy === 'google'" id="google"
                                       style="width:110px;" (click)="getMiles('google')">
                                       <input type="radio" [(ngModel)]="orderData.milesInfo.calculateBy" name="calculateBy"
                                          checked hidden value="google"> Google Miles </label>
                                    <label class="btn btn-outline btn-fleet mr-2 milesCommon" style="width:110px;" id="pcmiles"
                                       [class.active]="orderData.milesInfo.calculateBy === 'pcmiles'" (click)="getMiles('pcmiles')">
                                       <input type="radio" [(ngModel)]="orderData.milesInfo.calculateBy" name="calculateBy"
                                          hidden value="pcmiles"> PC Miles </label>
                                    <label class="btn btn-outline btn-fleet mr-2 milesCommon" style="width:110px;" id="manual"
                                       [class.active]="orderData.milesInfo.calculateBy === 'manual'" (click)="getMiles('manual')">
                                       <input type="radio" [(ngModel)]="orderData.milesInfo.calculateBy" name="calculateBy"
                                          hidden value="manual"> manual </label>
                                 </div>
   
                              </div>
   
   
   
   
                              <div class="col-lg-12 mb-3">
                                 <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                    for="inputDefault">Total Miles</label>
                                 <input type="text" [disabled]="orderData.milesInfo.calculateBy == 'google' || orderData.milesInfo.calculateBy == 'pcmiles'" [(ngModel)]="orderData.milesInfo.totalMiles" name="totalMiles"
                                 #totalMiles="ngModel" required totalMiles class="form-control">
                                 <span class="text-danger"
                                    *ngIf="isSubmit && !orderData.milesInfo.totalMiles">
                                    This Field is required
                                 </span>
                              </div>
                           </div>
   
                           <div class="col-lg-8 offset-lg-2 pl-0 mt-3">
                              <label class="control-label font-weight-bold text-4 text-dark"
                                 for="inputDefault">Remarks</label>
                              <textarea [(ngModel)]="orderData.remarks" name="remarks" class="form-control" rows="3"
                                 id="textareaDefault"></textarea>
                           </div>
                        </div>


                     </div>

                     <div class="col-lg-6">
                        <h4 class="mt-0 text-dark font-weight-bold text-4">Charges</h4>


                        <div class="row mt-3">
                           <div class="col-lg-9 offset-lg-2 pl-0">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">Freight Fee</label>
                           </div>
                           <div class="col-lg-3 offset-lg-2 pl-0 col-md-12">
                              <ng-select [(ngModel)]="orderData.charges.freightFee.type" name="freight_type"

                              #freightType="ngModel" required freightType

                                 class="form-control populate" >
                                    <ng-option value="Flat Fee">Flat Fee</ng-option>
                                    <ng-option value="Per Mile">Per Mile</ng-option>
                                    <ng-option value="Bag">Bag</ng-option>
                                    <ng-option value="Box">Box</ng-option>
                                    <ng-option value="Carton">Carton</ng-option>
                                    <ng-option value="Case">Case</ng-option>
                                    <ng-option value="Container Bulk Cargo">Container Bulk Cargo</ng-option>
                                    <ng-option value="Pieces">Pieces</ng-option>
                                    <ng-option value="Parcel">Parcel</ng-option>
                                    <ng-option value="Skid">Skid</ng-option>
                                    <ng-option value="Unit">Unit</ng-option>
                              </ng-select>
                              <span class="text-danger"
                                 *ngIf="isSubmit &&  !orderData.charges.freightFee.type">
                                 This Field is required
                              </span>
                           </div>
                           <div class="col-lg-2">
                              <div class="input-group mb-3">
                                 <span class="input-group-prepend positionsta">
                                    <span class="input-group-text pt-0 pb-0">$</span>
                                 </span>
                                 <input [(ngModel)]="orderData.charges.freightFee.amount" name="freight_amount"

                                    (blur)="calculateAmount()"  #freightAmt="ngModel" required freightAmt type="text" class="form-control" placeholder="0.00">
                                 <span class="text-danger"
                                    *ngIf="isSubmit &&  !orderData.charges.freightFee.amount">
                                    This Field is required
                                 </span>
                              </div>
                           </div>
                           <div class="col-lg-2">
                              <ng-select (change)="changeCurrency($event)" [(ngModel)]="orderData.charges.freightFee.currency" 
                              #freightCur="ngModel" required freightCur  name="freight_currency"

                                 class="form-control populate">

                                 <ng-option value="CAD">CAD</ng-option>
                                 <ng-option value="USD">USD</ng-option>

                              </ng-select>
                              <span class="text-danger"
                                 *ngIf="isSubmit &&  !orderData.charges.freightFee.currency">
                                 This Field is required
                              </span>
                           </div>
                           <div class="col-lg-2">
                              <p class="text-right"> <span>{{orderData.charges.freightFee.amount}}</span> </p>
                           </div>

                        </div>
                        <div class="row mt-3">
                           <div class="col-lg-9 offset-lg-2 pl-0">
                              <label class="control-label font-weight-semibold labelmt text-3 text-dark"
                                 for="inputDefault">Fuel Surcharge</label>
                           </div>
                           <div class="col-lg-3 offset-lg-2 pl-0">
                              <ng-select [(ngModel)]="orderData.charges.fuelSurcharge.type" name="fuel_type"
                                 class="form-control populate" data-select2-id="55" tabindex="-1" aria-hidden="true">

                                 <ng-option value="Flat Fee">Flat Fee</ng-option>
                                 <ng-option value="Per Mile">Per Mile</ng-option>
                                 <ng-option value="Percentage">Percentage</ng-option>


                              </ng-select>
                           </div>
                           <div class="col-lg-2">
                              <div class="input-group mb-3">
                                 <span class="input-group-prepend positionsta">
                                    <span class="input-group-text pt-0 pb-0">$</span>
                                 </span>
                                 <input [(ngModel)]="orderData.charges.fuelSurcharge.amount" name="fuel_amount"
                                    (blur)="calculateAmount()" type="text" class="form-control" placeholder="0.00">
                              </div>
                           </div>
                           <div class="col-lg-2">
                              <ng-select (change)="changeCurrency($event)" [(ngModel)]="orderData.charges.fuelSurcharge.currency" name="fuel_currency"
                                 class="form-control populate" data-select2-id="52" tabindex="-1" aria-hidden="true">

                                 <ng-option value="CAD">CAD</ng-option>
                                 <ng-option value="USD">USD</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-2">
                              <p class="text-right"> <span>{{orderData.charges.fuelSurcharge.amount}} </span></p>
                           </div>
                        </div>
                        <div class="row mt-3" *ngFor="let item of accessFeesInfo.accessFees; let i = index;">
                           <div class="col-lg-9 offset-lg-2 pl-0">
                              <label class="control-label font-weight-semibold text-3 text-dark"
                                 for="inputDefault"> Accessorial Fee</label>
                           </div>
                           <div class="col-lg-3 offset-lg-2 pl-0">
                              <ng-select [(ngModel)]="item.type" name="accessfee_type{{i}}"
                                 class="form-control populate">

                                 <ng-option value="Stop Off">Stop Off</ng-option>
                                 <ng-option value="Lumper">Lumper</ng-option>
                                 <ng-option value="Detention">Detention</ng-option>
                                 <ng-option value="Tarp">Tarp</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-2">
                              <div class="input-group mb-3">
                                 <span class="input-group-prepend positionsta">
                                    <span class="input-group-text pt-0 pb-0">$</span>
                                 </span>
                                 <input (blur)="calculateAmount()"
                                    [(ngModel)]="item.amount" name="accessfee_amount{{i}}" type="text"
                                    class="form-control" placeholder="0.00">
                              </div>
                           </div>
                           <div class="col-lg-2">
                              <ng-select (change)="changeCurrency($event)" [(ngModel)]="item.currency" name="accessfee_currency{{i}}"
                                 class="form-control populate" data-select2-id="52" tabindex="-1" aria-hidden="true">

                                 <ng-option value="CAD">CAD</ng-option>
                                 <ng-option value="USD">USD</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-1">
                              <a *ngIf="i != 0" class="btn btn-danger btn-sm" (click)="deleteAccessFee('accessFee', i)" href="javascript:;"><i class="fas fa-minus"></i></a>
                           </div>
                           <div class="col-lg-1">
                              <p class="text-right"> <span>{{item.amount}} </span></p>
                           </div>

                           <div class="col-lg-11 offset-lg-1 text-right">
                              <a class="btn btn-success btn-sm" (click)="addAccessFee('accessFee')" href="javascript:;"><i class="fas fa-plus"></i> 
                                 Add Accessorial Fee</a>
                           </div>

                        </div>
                        

                        <div class="row mt-3" *ngFor="let item of accessorialDeductionInfo.accessDeductions; let i = index;" >
                           <div class="col-lg-9 offset-lg-2 pl-0">
                              <label class="control-label font-weight-semibold text-3 text-dark"
                                 for="inputDefault">Accessorial Deduction</label>
                           </div>
                           <div class="col-lg-3 offset-lg-2 pl-0">
                              <ng-select [(ngModel)]="item.type" name="type{{i}}"
                                 class="form-control populate" data-select2-id="61" tabindex="-1" aria-hidden="true">

                                 <ng-option value="Stop Off" data-select2-id="63">Stop Off</ng-option>
                                 <ng-option value="Lumper">Lumper</ng-option>
                                 <ng-option value="Detention">Detention</ng-option>
                                 <ng-option value="Tarp">Tarp</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-2">
                              <div class="input-group mb-3">
                                 <span class="input-group-prepend positionsta">
                                    <span class="input-group-text pt-0 pb-0">$</span>
                                 </span>
                                 <input (blur)="calculateAmount()"
                                    [(ngModel)]="item.amount" name="amount{{i}}"
                                    type="text" class="form-control" placeholder="0.00">
                              </div>
                           </div>
                           <div class="col-lg-2">
                              <ng-select (change)="changeCurrency($event)" [(ngModel)]="item.currency" name="currency{{i}}"
                                 data-plugin-selecttwo="" class="form-control populate" data-select2-id="52"
                                 tabindex="-1" aria-hidden="true">

                                 <ng-option value="CAD">CAD</ng-option>
                                 <ng-option value="USD">USD</ng-option>

                              </ng-select>
                           </div>
                           <div class="col-lg-1">
                              <a *ngIf="i != 0" class="btn btn-danger btn-sm" (click)="deleteAccessFee('accessDeduct', i)" href="javascript:;"><i class="fas fa-minus"></i></a>
                           </div>
                           <div class="col-lg-1">
                              <p class="text-right"> <span>{{item.amount}} </span></p>
                           </div>

                           <div class="col-lg-11 offset-lg-1 text-right">
                              <a class="btn btn-success btn-sm" href="javascript:;" (click)="addAccessFee('accessDeduct')"><i class="fas fa-plus"></i> Add Accessorial
                                 Deduction</a>
                           </div>


                        </div>
                        

                        <div class="row">
                           <div class="col-lg-8">
                              <div class="row mt-3" *ngFor="let item of orderData.taxesInfo; let i = index;">
                                 <div class="col-lg-2 offset-lg-3 pl-0">
                                    <label class="control-label font-weight-semibold text-3 text-dark pt-2">Tax
                                       {{i + 1}}</label>
                                 </div>
                                 <div class="col-lg-2">
                                    <input type="text" class="form-control" value="{{item.name}}" disabled>
                                 </div>
                                 <div class="col-lg-3">
                                    <div class="input-group">
                                       <input type="text" class="form-control" value="{{item.amount}}" placeholder="0" disabled>
                                       <span class="input-group-append">
                                          <span class="input-group-text pt-0 pb-0">
                                             %
                                          </span>
                                       </span>
                                    </div>
                                 </div>
                              </div>
                              
                              <div class="row mt-3">
                                 <div class="col-lg-2 offset-lg-3 pl-0">
                                    <label class="control-label font-weight-semibold text-3 text-dark pt-2">Discount</label>
                                 </div>
                                 <div class="col-lg-2">
                                    <input (blur)="calculateAmount()"
                                       [(ngModel)]="orderData.discount.amount" name="amount" type="text"
                                       class="form-control" value="0">
                                 </div>
                                 <div class="col-lg-3">
                                    <ng-select (change)="calculateAmount()"
                                       [(ngModel)]="orderData.discount.unit" name="unit" data-plugin-selectTwo
                                       class="form-control populate">

                                       <ng-option selected value="percentage">%</ng-option>
                                       <ng-option value="CAD">CAD</ng-option>
                                       <ng-option value="USD">USD</ng-option>

                                    </ng-select>
                                 </div>
                              </div>
                           </div>
                           <div class="col-lg-4">
                              <div class="row mt-3">
                                 <div class="col-lg-9 bordtop pt-1">
                                    <h5 class="text-right font-weight-semibold text-4 text-dark">Sub Total</h5>
                                 </div>
                                 <div class="col-lg-3 bordtop pt-1">
                                    <p class="text-right">$ <span [innerHTML]="subTotal"> </span></p>
                                 </div>
                              </div>
                              <div class="row">
                                 <div class="col-lg-9 pt-1 bordtop text-right">
                                    <h5 class="text-right font-weight-semibold text-4 text-dark">Discount</h5>
                                 </div>
                                 <div class="col-lg-3 bordtop pt-1">
                                    <p class="text-right">
                                       <!-- <span *ngIf="orderData.discount.unit != 'percentage'"> $</span>
                                       <span *ngIf="orderData.discount.unit === 'percentage'"> %</span>  -->
                                       $<span [innerHTML]="discount"> </span>
                                    </p>
                                 </div>
                              </div>
                              <div class="row">
                                 <div class="col-lg-9 bordtop pt-1">
                                    <h5 class="text-right font-weight-semibold text-4 text-dark">Taxes</h5>
                                 </div>
                                 <div class="col-lg-3 bordtop pt-1">
                                    <p class="text-right">
                                       $<span [innerHTML]="tax"> </span>
                                    </p>
                                 </div>
                              </div>
                              <div class="row">
                                 <div class="col-lg-9 bordtop pt-1">
                                    <h5 class="text-right font-weight-semibold text-4 text-dark">Total Amount</h5>
                                 </div>
                                 <div class="col-lg-3 bordtop pt-1">
                                    <p class="text-right"> $ <span [innerHTML]="totalAmount"> </span> </p>
                                 </div>
                              </div>
                           </div>
                        </div>


                     </div>
                    
                  </div>




                  <div class="form-group row">
                     <div class="col-lg-12 text-right">
                        <a href="javascript:;" routerLink="dispatch/orders"
                           class="mb-1 mt-1 mr-2 btn btn-default">Cancel</a>
                        <button *ngIf="!getOrderID" type="submit" class="btn btn-success">Save</button>
                        <a *ngIf="getOrderID" (click)=updateOrder() class="btn btn-success">Update</a>
                     </div>
                  </div>
               </form>




            </div>
         </div>
      </section>
   </div>
</section>
