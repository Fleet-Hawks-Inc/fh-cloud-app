<section class="body">
  <div class="inner-wrapper">
    <section role="main" class="content-body pt-0 pr-0 pl-0">
      <header class="page-header">
        <div class="row" style="padding-top: 10px">
          <div class="col-md-4 col-lg-4 font-weight-bold text-4 text-dark">
            Order Details
          </div>
          <div class="col-md-8 col-lg-8 text-right" *ngIf="showBtns">
            <a *ngIf="orderStatus === 'delivered'" routerLink="/dispatch/orders/edit/{{ orderID }}"
              [queryParams]="{ state: 'recall' }" title="Recall" class="btn btn-sm mr-2 btn-success">
              <i class="fas fa-redo"></i>
            </a>
            <button *ngIf="showInvBtn" (click)="openEmailInv()" class="btn btn-sm mr-2 btn-success">
              Email
            </button>
            <button *ngIf="showInvBtn" (click)="showInv(); isModalShow = true" class="btn btn-success btn-sm mr-2">
              Invoice
            </button>

            <button *ngIf="orderStatus === 'brokerage'" (click)="downloadBrokeragePdf()" [disabled]="brokerageDisabled"
              class="btn btn-success btn-sm mr-2">
              <i class="fas fa-download"> </i>
              Brokerage
            </button>
            <!-- <button (click)="downloadBolPdf();" class="btn btn-success btn-sm
              mr-2">
              <i class="fas fa-download"> </i>
              BOL
            </button> -->
            <a *ngIf="hideEdit" routerLink="/dispatch/orders/edit/{{ orderID }}" class="btn btn-default btn-sm mr-2"><i
                class="fas fa-pencil-alt"></i> Edit Order</a>
            <a (click)="cancel()" class="btn btn-default btn-sm"><i class="fas fa-list"></i> All Orders</a>
            <div class="btn-group flex-wrap" *ngIf="!environment">
              <button type="button" class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown"
                aria-expanded="false">
                Actions<span class="caret"></span>
              </button>
              <div class="dropdown-menu" role="menu" x-placement="bottom-start" style="
                  position: absolute;
                  will-change: transform;
                  top: 0px;
                  left: 0px;
                  transform: translate3d(0px, 38px, 0px);
                ">
                <a class="dropdown-item text-1" href="#">Edit</a>
                <a class="dropdown-item text-1" href="#">Print</a>
                <a class="dropdown-item text-1" href="#">Email</a>
                <a class="dropdown-item text-1" href="#">Fax</a>
                <a class="dropdown-item text-1" href="">Cancel</a>
              </div>
            </div>
            <!-- <a href="#templateSelectionModal" class="modal-with-form btn btn-success btn-sm"><i class="fas fa-plus"></i>
                     Create Invoice</a> -->
          </div>
        </div>
      </header>
      <section class="m-2">
        <div class="row mb-3">
          <div class="col-12">
            <div class="bg-white p-3 d-flex justify-content-between align-items-center text-dark">
              <div>
                <h4 class="m-0 font-weight-bold">
                  {{ orderMode }} - ORD{{ orderNumber }}
                  <span class="badge p-1 badge-dark mt-2 mb-0 text-uppercase" *ngIf="orderStatus">
                    {{ orderStatus }} <span *ngIf="recallStatus">(R) </span>
                  </span>
                </h4>
              </div>
              <div class="pull-right" *ngIf="tripData">
                <h4 class="m-0 font-weight-bold">
                  Trip#:
                  <a *ngIf="tripData.tripNo" routerLink="/dispatch/trips/trip-details/{{
                      tripData.tripID
                    }}">
                    {{ tripData.tripNo }}
                  </a>
                  <span *ngIf="!tripData.tripNo"> NA </span>
                </h4>
                <!-- <a routerLink="/dispatch/orders/add" class="btn btn-success btn-sm"><i class="fas fa-plus"></i> Add
                  Order</a> -->
              </div>
            </div>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-lg-12">
            <div class="bg-white p-3">
              <div class="row mb-3">
                <div class="col-lg-6 text-dark">
                  <div id="vehicle-details" class="">
                    <div class="row m-0">
                      <div class="col-lg-3 p-2 font-weight-bold text-3 text-left">
                        Customer:
                      </div>
                      <div class="col-lg-9 p-2 text-capitalize">
                        {{ customerName ? customerName : "-" }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div class="col-lg-3 p-2 font-weight-bold text-3 text-left">
                        Address:
                      </div>
                      <div class="col-lg-9 p-2">
                        {{ customerAddress ? customerAddress : "-" }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div class="col-lg-3 p-2 font-weight-bold text-3 text-left">
                        City, Province/State:
                      </div>
                      <div class="col-lg-9 p-2">
                        {{ cityAndState ? cityAndState : "-" }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div class="col-lg-3 p-2 font-weight-bold text-3 text-left">
                        Country:
                      </div>
                      <div class="col-lg-9 p-2">
                        {{ customerCountryName ? customerCountryName : "-" }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div class="col-lg-3 p-2 font-weight-bold text-3 text-left">
                        Phone:
                      </div>
                      <div class="col-lg-9 p-2">
                        {{ customerPhone ? customerPhone : "-" }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div class="col-lg-3 p-2 font-weight-bold text-3 text-left">
                        Email:
                      </div>
                      <div class="col-lg-9 p-2">
                        {{ customerEmail ? customerEmail : "-" }}
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-lg-6 text-dark">
                  <div id="vehicle-details" class="">
                    <!-- <div class="row m-0">
                                            <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">
                                                Customer PO#:
                                            </div>
                                            <div class="col-lg-8 p-2 border-box">
                                                {{ customerPo }}
                                            </div>
                                        </div> -->
                    <div class="row m-0">
                      <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">
                        Customer Confirmation:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                        {{ cusConfirmation ? cusConfirmation : "-" }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">
                        Reference:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                        {{ reference ? reference : "-" }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">
                        Order Creation Date/Time:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                        {{
                        createdTime
                        | date
                        : "yyyy/MM/dd
                        hh:mm:ss a"
                        }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">
                        Additional Contact Name:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                        {{
                        additionalContactName ? additionalContactName : "-"
                        }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">
                        Phone:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                        {{ additionalPhone ? additionalPhone : "-" }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">
                        Email:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                        {{ additionalEmail ? additionalEmail : "-" }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row mb-3 shipment-wrap" *ngFor="
            let shipperReceiversInfo of shipperReceiversInfos;
            let i = index
          ">
          <div class="col-lg-12">
            <div class="bg-white p-3">
              <div class="row mb-3">
                <div class="col-lg-12 mb-4 mb-lg-0">
                  <div class="accordion" id="accordion{{ i }}" style="
                      border: 0.5px solid #333;
                      background: #f6f6f6;
                      border-radius: 10px;
                      box-shadow: 2px 5px 5px #d1d1d1;
                    ">
                    <div class="card card-default mb-0 mt-0">
                      <div class="card-header bgnone" id="collapse1Heading{{ i }}">
                        <h4 class="card-title m-0">
                          <a class="accordion-toggle cursorpoint font-weight-bold text-4 text-dark"
                            data-toggle="collapse" [attr.data-target]="'#collapse' + i" aria-expanded="true"
                            [attr.aria-controls]="'collapse' + i">
                            Shipment-{{ i + 1 }}</a>
                        </h4>
                      </div>
                      <div id="collapse{{ i }}" class="collapse" [attr.aria-labelledby]="'collapse1Heading' + i">
                        <div class="card-body">
                          <div class="form-group row divderrel">
                            <div class="midledriver"></div>

                            <div class="col-lg-6">
                              <h4 class="mt-0 text-dark font-weight-bold text-4">
                                Shipper
                              </h4>
                            </div>
                            <div class="col-lg-6">
                              <h4 class="mt-0 text-dark font-weight-bold text-4">
                                Receiver
                              </h4>
                            </div>

                            <div class="col-lg-4 pl-0 pr-0 offset-lg-1">
                              <div class="pl-0 pr-5" *ngFor="
                                  let shipper of shipperReceiversInfo.shippers;
                                  let j = index
                                ">
                                <a data-toggle="collapse" [attr.data-target]="
                                    '#collapseShipperArea-' + i + '-' + j
                                  " href="#collapseShipperArea-{{ i }}-{{ j }}" aria-expanded="false">
                                  <label style="background: #f4f4f4; width: 100%"
                                    class="text-dark text-5 mb-0 font-weight-bold btn" (click)="caretClickShipper(i, j)"
                                    id="shipperArea-{{ i }}-{{ j }}">
                                    <span class="pull-left">Shipper {{ j + 1 }}</span>
                                    <i class="fas fa-caret-right caret_icon pull-right mt-2"></i>
                                  </label>
                                </a>

                                <section>
                                  <div id="collapseShipperArea-{{ i }}-{{ j }}" class="collapse">
                                    <div style="
                                        border: 1px solid #efefef;
                                        padding: 10px;
                                      ">
                                      <div class="row">
                                        <div class="col-lg-12">
                                          <p class="mb-0 text-dark text-capitalize">
                                            <strong>{{
                                              shipper.shipperName
                                              }}</strong>
                                          </p>
                                          <div style="
                                              padding: 10px;
                                              background: #f3f3f3;
                                              margin-bottom: 10px;
                                            " *ngFor="
                                              let pick of shipper.pickupPoint
                                            ">
                                            <p *ngIf="pick.unit" class="mb-0 text-dark">
                                              <strong>Unit Number:</strong>
                                              {{ pick.unitNumber }}
                                            </p>
                                            <p class="mb-0 text-dark">
                                              <strong>Pickup Location:</strong>
                                              <span class="mb-0 text-dark" *ngIf="!pick.address.manual">
                                                {{
                                                pick.address.pickupLocation
                                                }}
                                              </span>
                                              <span class="mb-0 text-dark" *ngIf="pick.address.manual">
                                                {{ pick.address.address }},
                                                {{ pick.address.city }},
                                                {{ pick.address.state }},
                                                {{ pick.address.country }}
                                                {{ pick.address.zipCode }}
                                              </span>
                                            </p>

                                            <p class="mb-0 text-dark">
                                              <strong>Pickup Date/Time:</strong>
                                              {{
                                              pick.dateAndTime
                                              | date: "yyyy/MM/dd hh:mm a"
                                              }}
                                            </p>
                                            <p class="mb-0 text-dark">
                                              <strong>Customer PO#</strong>
                                              <span *ngFor="
                                                  let po of pick.customerPO
                                                " class="mr-1">
                                                <span class="badge badge-dark">
                                                  {{ po }}
                                                </span>
                                              </span>
                                            </p>
                                            <p class="mb-0 text-dark text-capitalize">
                                              <strong>Pickup Instruction:</strong>
                                              {{
                                              pick.pickupInstruction
                                              ? pick.pickupInstruction
                                              : "-"
                                              }}
                                            </p>
                                            <p class="mb-0 text-dark text-capitalize">
                                              <strong>Contact Person at
                                                Pickup:</strong>
                                              {{
                                              pick.contactPerson
                                              ? pick.contactPerson
                                              : "-"
                                              }}
                                            </p>
                                            <p class="mb-0 text-dark">
                                              <strong>Phone:</strong>
                                              {{
                                              pick.phone ? pick.phone : "-"
                                              }}
                                            </p>
                                            <table
                                              class="table table-responsive-lg table-bordered table-striped table-sm mt-3 mb-0">
                                              <thead>
                                                <tr>
                                                  <th>Sr. No.</th>
                                                  <th>Commodity</th>
                                                  <th>PU#</th>
                                                  <th>Quantity</th>
                                                  <th>Weight</th>
                                                </tr>
                                              </thead>
                                              <tbody>
                                                <tr *ngFor="
                                                    let commodity of pick.commodity;
                                                    let l = index
                                                  ">
                                                  <td>{{ l + 1 }}</td>
                                                  <td class="text-capitalize">
                                                    {{
                                                    commodity.name
                                                    ? commodity.name
                                                    : "NA"
                                                    }}
                                                  </td>
                                                  <td>
                                                    {{
                                                    commodity.pu
                                                    ? commodity.pu
                                                    : "NA"
                                                    }}
                                                  </td>
                                                  <td class="text-capitalize">
                                                    {{
                                                    commodity.quantity
                                                    ? commodity.quantity
                                                    : "NA"
                                                    }}
                                                    {{
                                                    commodity.quantity
                                                    ? commodity.quantityUnit
                                                    : ""
                                                    }}
                                                  </td>
                                                  <td class="text-capitalize">
                                                    {{
                                                    commodity.weight
                                                    ? commodity.weight
                                                    : "NA"
                                                    }}
                                                    {{
                                                    commodity.weight
                                                    ? commodity.weightUnit
                                                    : ""
                                                    }}
                                                  </td>
                                                </tr>
                                              </tbody>
                                            </table>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </section>
                                <p class="mb-0 text-dark">
                                  <strong>Will Driver Load ?:</strong>
                                  {{ shipper.driverLoad ? "Yes" : "No" }}
                                </p>
                                <div class="mt-3"></div>
                              </div>
                            </div>

                            <div class="col-lg-4 pl-0 pr-0 offset-lg-2">
                              <div class="pl-0 pr-5" *ngFor="
                                  let receiver of shipperReceiversInfo.receivers;
                                  let k = index
                                ">
                                <a data-toggle="collapse" [attr.data-target]="
                                    '#collapseReceiverArea-' + i + '-' + k
                                  " href="#collapseReceiverArea-{{ i }}-{{ k }}" aria-expanded="false">
                                  <label style="background: #f4f4f4; width: 100%"
                                    class="text-dark text-5 font-weight-bold btn" (click)="caretClickReceiver(i, k)"
                                    id="receiverArea-{{ i }}-{{ k }}">
                                    <span class="pull-left">Receiver {{ k + 1 }}</span>
                                    <i class="fas fa-caret-right caret_icon pull-right mt-2"></i>
                                  </label>
                                  <div class="expand_caret caret"></div>
                                </a>

                                <section>
                                  <div id="collapseReceiverArea-{{ i }}-{{ k }}" class="collapse">
                                    <div style="
                                        border: 1px solid #efefef;
                                        padding: 10px;
                                      ">
                                      <div class="row">
                                        <div class="col-lg-12">
                                          <p class="mb-0 text-dark text-capitalize">
                                            <strong>{{
                                              receiver.receiverName
                                              }}</strong>
                                          </p>
                                          <div style="
                                              padding: 10px;
                                              background: #f3f3f3;
                                              margin-bottom: 10px;
                                            " *ngFor="
                                              let drop of receiver.dropPoint
                                            ">
                                            <p *ngIf="drop.unit" class="mb-0 text-dark">
                                              <strong>Unit Number:</strong>
                                              {{ drop.unitNumber }}
                                            </p>
                                            <p class="mb-0 text-dark">
                                              <strong>Drop Location:</strong>
                                              <span class="mb-0 text-dark" *ngIf="!drop.address.manual">
                                                {{
                                                drop.address.dropOffLocation
                                                }}
                                              </span>
                                              <span class="mb-0 text-dark" *ngIf="drop.address.manual">
                                                {{ drop.address.address }},
                                                {{ drop.address.city }},
                                                {{ drop.address.state }},
                                                {{ drop.address.country }}
                                                {{ drop.address.zipCode }}
                                              </span>
                                            </p>

                                            <p class="mb-0 text-dark">
                                              <strong>Delivery Date/Time:</strong>
                                              {{
                                              drop.dateAndTime
                                              | date: "yyyy/MM/dd hh:mm a"
                                              }}
                                            </p>
                                            <p class="mb-0 text-dark text-capitalize">
                                              <strong>Delivery Instruction:</strong>
                                              {{
                                              drop.dropOffInstruction
                                              ? drop.dropOffInstruction
                                              : "-"
                                              }}
                                            </p>
                                            <p class="mb-0 text-dark text-capitalize">
                                              <strong>Contact Person at
                                                Delivery</strong>
                                              {{
                                              drop.contactPerson
                                              ? drop.contactPerson
                                              : "-"
                                              }}
                                            </p>
                                            <p class="mb-0 text-dark">
                                              <strong>Phone:</strong>
                                              {{
                                              drop.phone ? drop.phone : "-"
                                              }}
                                            </p>
                                            <table
                                              class="table table-responsive-lg table-bordered table-striped table-sm mt-3 mb-0">
                                              <thead>
                                                <tr>
                                                  <th>Sr. No.</th>
                                                  <th>Commodity</th>
                                                  <th>DEL#</th>
                                                  <th>Quantity</th>
                                                  <th>Weight</th>
                                                </tr>
                                              </thead>
                                              <tbody>
                                                <tr *ngFor="
                                                    let commodity of drop.commodity;
                                                    let m = index
                                                  ">
                                                  <td>{{ m + 1 }}</td>
                                                  <td class="text-capitalize">
                                                    {{
                                                    commodity.name
                                                    ? commodity.name
                                                    : "NA"
                                                    }}
                                                  </td>
                                                  <td>
                                                    {{
                                                    commodity.del
                                                    ? commodity.del
                                                    : "NA"
                                                    }}
                                                  </td>
                                                  <td class="text-capitalize">
                                                    {{
                                                    commodity.quantity
                                                    ? commodity.quantity
                                                    : "NA"
                                                    }}
                                                    {{
                                                    commodity.quantity
                                                    ? commodity.quantityUnit
                                                    : ""
                                                    }}
                                                  </td>
                                                  <td class="text-capitalize">
                                                    {{
                                                    commodity.weight
                                                    ? commodity.weight
                                                    : "NA"
                                                    }}
                                                    {{
                                                    commodity.weight
                                                    ? commodity.weightUnit
                                                    : ""
                                                    }}
                                                  </td>
                                                </tr>
                                              </tbody>
                                            </table>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </section>
                                <p class="mb-0 text-dark">
                                  <strong>Will Driver Unload ?:</strong>
                                  {{ receiver.driverUnload ? "Yes" : "No" }}
                                </p>
                                <div class="mt-3"></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-lg-12">
            <div class="bg-white p-3">
              <div class="row">
                <div class="col-lg-6 text-dark">
                  <div id="vehicle-details" class="">
                    <div class="row m-0 back-color-gray">
                      <div class="col-lg-12 p-2">
                        <h2 class="pull-left mt-0 mb-0 text-4 font-weight-semibold text-dark">
                          Additional Details
                        </h2>
                      </div>
                    </div>
                    <div class="row m-0">
                      <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">
                        Seal Type:
                      </div>
                      <div class="col-lg-8 p-2 border-box text-capitalize">
                        {{ additionalDetails.sealType }}
                      </div>
                    </div>
                    <div class="row m-0" *ngIf="additionalDetails.sealType != ''">
                      <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">
                        Seal#:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                        {{ additionalDetails.sealNo }}
                      </div>
                    </div>
                    <div class="row m-0" *ngIf="!additionalDetails.trailerType">
                      <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">
                        Asset Type:
                      </div>
                      <div class="col-lg-8 p-2 border-box text-capitalize">
                        {{ additionalDetails.trailerType }}
                      </div>
                    </div>

                    <div class="row m-0" *ngIf="additionalDetails.trailerType == 'reefer'">
                      <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">
                        Temperature Required:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                        From
                        {{ additionalDetails.refeerTemp.minTemprature }}
                        {{ additionalDetails.refeerTemp.minTempratureUnit }}
                        To
                        {{ additionalDetails.refeerTemp.maxTemprature }}
                        {{ additionalDetails.refeerTemp.maxTempratureUnit }}
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-xl-6 col-12 mb-3 pl-0 pr-0" style="padding-top: 3px">
                  <div class="col-xl-12 col-12 mb-3">
                    <div class="boxshadow1 maindisbox w100 mb-3 pull-left">
                      <div class="widgetload">
                        <div class="widgettbload">
                          <span class="pull-right text-3 mt-2 text-dark">
                          </span>
                          <h2 class="pull-left mt-0 mb-0 text-4 font-weight-semibold text-dark">
                            Miles for the Load is entered using:
                            <span *ngIf="milesInfo.calculateBy == 'pcmiles'">PC miles</span>
                            <span *ngIf="milesInfo.calculateBy != 'pcmiles'">Manual</span>
                          </h2>
                        </div>

                        <div class="widgetlinfo">
                          <table class="table table-responsive-lg table-bordered table-striped table-sm mb-0">
                            <thead>
                              <tr class="bgcol2">
                                <th>From</th>
                                <th>To</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngIf="milesArr?.length == 0">
                                <td colspan="2">No data found</td>
                              </tr>
                              <tr *ngFor="let data of milesArr">
                                <td style="width: 50%">
                                  <div *ngFor="
                                      let ship of data.shippers;
                                      let k = index
                                    " class="border-bottom mb-2 pb-2">
                                    <h5 class="m-0 text-dark">
                                      <strong>Shipper-{{ k + 1 }}</strong>
                                    </h5>
                                    <div *ngFor="
                                        let point of ship.pickupPoint;
                                        let s = index
                                      ">
                                      Pickup-{{ s + 1 }}:
                                      <span *ngIf="point.address.manual">
                                        {{ point.address.address }}
                                        {{ point.address.city }}
                                        {{ point.address.state }}
                                        {{ point.address.country }}
                                        {{ point.address.zipCode }}
                                      </span>
                                      <span *ngIf="!point.address.manual">
                                        {{ point.address.pickupLocation }}
                                      </span>
                                      <br />
                                    </div>
                                  </div>
                                </td>
                                <td style="width: 50%">
                                  <div *ngFor="
                                      let rec of data.receivers;
                                      let m = index
                                    " class="border-bottom mb-2 pb-2">
                                    <h5 class="m-0 text-dark">
                                      <strong>Receiver-{{ m + 1 }}</strong>
                                    </h5>
                                    <div *ngFor="
                                        let drop of rec.dropPoint;
                                        let s = index
                                      ">
                                      Drop-{{ s + 1 }}:
                                      <span *ngIf="drop.address.manual">
                                        {{ drop.address.address }}
                                        {{ drop.address.city }}
                                        {{ drop.address.state }}
                                        {{ drop.address.country }}
                                        {{ drop.address.zipCode }}
                                      </span>
                                      <span *ngIf="!drop.address.manual">
                                        {{ drop.address.dropOffLocation }}
                                      </span>
                                    </div>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>

                          <p class="mb-0 mt-3 text-dark text-right">
                            <strong>Total Miles: </strong>
                            <span class="">{{ milesInfo.totalMiles }} Miles</span>
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-lg-12">
            <div class="bg-white p-3">
              <div class="row">
                <div class="col-xl-6 col-12 mb-3 pl-0 pr-0">
                  <div class="col-xl-12 col-12 mb-3">
                    <div class="boxshadow1 maindisbox w100 pull-left">
                      <div class="widgetload">
                        <div class="widgettbload">
                          <span class="pull-right text-3 mt-2 text-dark">
                          </span>
                          <h2 class="pull-left mt-0 mb-0 text-4 font-weight-semibold text-dark">
                            Charges
                          </h2>
                        </div>

                        <div class="widgetlinfo">
                          <div class="col-lg-2 pull-left">
                            <img src="assets/img/icon-cur.png" class="img-fluid" alt="shipper" />
                          </div>
                          <div class="col-lg-10 pull-left">
                            <p class="mb-0 text-dark">
                              Freight Fee
                              <span class="pull-right">{{
                                charges.freightFee.amount | number: "1.2-2"
                                }}
                                {{ charges.freightFee.currency }}</span>
                            </p>
                            <p class="mb-0 text-dark">
                              Fuel Surcharge
                              <span class="pull-right">{{
                                charges.fuelSurcharge.amount | number: "1.2-2"
                                }}
                                {{ charges.freightFee.currency }}</span>
                            </p>
                            <p class="mb-0 text-dark">
                              Accessorial Amount
                              <span class="pull-right">{{
                                charges.accessorialFeeInfo.total
                                | number: "1.2-2"
                                }}
                                {{ charges.freightFee.currency }}</span>
                            </p>
                            <p class="mb-0 text-dark">
                              Accessorial Deduction Amount
                              <span class="pull-right">{{
                                charges.accessorialDeductionInfo.total
                                | number: "1.2-2"
                                }}
                                {{ charges.freightFee.currency }}</span>
                            </p>

                            <!-- <p class="mb-0 text-dark" *ngIf="stateCode == ''"> Tax Amount <span class="pull-right">${{taxesTotal}}</span> </p> -->
                            <p class="mb-0 text-dark" *ngIf="!zeroRated">
                              Tax Amount
                              <span *ngIf="stateCode != ''">
                                (
                                <span class="font-weight-semibold">{{
                                  stateCode
                                  }}</span>
                                )
                              </span>
                              <span class="pull-right">{{ taxableAmount }}
                                {{ charges.freightFee.currency }}</span>
                            </p>

                            <p class="mb-0 text-dark bordtopdas">
                              <strong>Total Charges</strong>
                              <span class="pull-right">{{ totalCharges | number: "1.2-2" }}
                                {{ charges.freightFee.currency }}</span>
                            </p>
                            <!-- <p class="mb-0 text-dark bordtopdas">
                              <strong>Advance Received</strong>
                              <span class="pull-right">${{advances}}</span>
                            </p> -->
                            <!-- <p class="mb-0 text-dark bordtopdas">
                              <strong>Balance</strong>
                              <span class="pull-right"
                                >{{ balance }}
                                {{ charges.freightFee.currency }}</span
                              >
                            </p> -->
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-xl-3 col-12 pl-0 pr-0">
                  <div class="col-xl-12 col-12 mb-3">
                    <div class="boxshadow1 maindisbox w100 pull-left">
                      <div class="widgetload">
                        <div class="widgettbload">
                          <h2 class="pull-left mt-0 mb-0 text-4 font-weight-semibold text-dark">
                            <i class="fas fa-box"></i> Attachments
                          </h2>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <div class="row my-2 px-2" *ngFor="let item of attachments; let d = index">
                              <div class="col-5">
                                <a href="javascript:;" data-toggle="modal" data-target="#viewDocModal"
                                  (click)="setPDFSrc(item.docPath)">Document {{ d + 1 }}</a>
                              </div>
                              <div class="col- 3 text-right">
                                <em class="far fa-file text-dak mr-1" (click)="setPDFSrc(item.docPath)"
                                  data-toggle="modal" data-target="#viewDocModal"></em>
                                <a href="javascript:;" (click)="delete('attachment', item.name, d)"
                                  class="modal-with-form">
                                  <em class="fas fa-times text-danger"></em></a>
                              </div>
                            </div>
                            <div *ngIf="attachments.length == 0" class="my-2 px-2">
                              <span>No attachment found</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-xl-3 col-12 pl-0 pr-0">
                  <div class="col-xl-12 col-12 mb-3">
                    <div class="boxshadow1 maindisbox w100 pull-left">
                      <div class="widgetload">
                        <div class="widgettbload">
                          <div class="row align-items-center">
                            <div class="col-6">
                              <h2 class="pull-left mt-0 mb-0 text-4 font-weight-semibold text-dark">
                                <i class="fas fa-box"></i> Upload BOL/POD
                              </h2>
                            </div>
                            <div class="col-6">
                              <input type="file" #uploadBol (change)="selectDocuments($event)" multiple
                                class="p-0 form-control pull-right mb-0" id="bolUpload" />
                            </div>
                          </div>
                        </div>
                        <div class="row" style="max-height: 170px; overflow: scroll">
                          <div class="col-12">
                            <table class="table table-bordered">
                              <thead>
                                <th>Sr.</th>
                                <th>Name</th>
                                <th>Icon/Thumbnail</th>
                                <th>Action</th>
                              </thead>
                              <tbody>
                                <tr *ngIf="docs.length == 0">
                                  <td colspan="4">
                                    <span>No document found</span>
                                  </td>
                                </tr>
                                <tr *ngFor="let doc of docs; let d = index">
                                  <td>{{ d + 1 }}</td>
                                  <td>{{ doc.displayName }}</td>
                                  <td>
                                    <a class="image-popup-no-margins" href="{{ doc.docPath }}" target="_blank">
                                      <img class="img_thumbnail" src="{{ doc.imgPath }}" />
                                    </a>
                                  </td>
                                  <td class="cursorpoint text-center">
                                    <a href="javascript:;" (click)="delete('docs', doc.name, d)"
                                      class="modal-with-form">
                                      <em class="fas fa-times text-danger"></em></a>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                            <!-- <div class="row my-2 px-2" *ngFor="let doc of docs;let d= index">
                              <div class="col-4">
                                <a class="image-popup-no-margins" href="{{doc.docPath}}" target="_blank">
                                  <img class="img_thumbnail" src="{{doc.imgPath}}">
                                  <p>{{doc.displayName}}</p>
                                </a>
                                <a href="javascript:;" data-toggle="modal" data-target="#viewDocModal"
                                  (click)="setPDFSrc(doc.path)">{{doc.displayName}}</a>
                              </div>
                              <div class="col-1 text-right">
                                <em class="far fa-file text-dak mr-1" (click)="setPDFSrc(doc.path)" data-toggle="modal"
                                  data-target="#viewDocModal"></em>
                                <a href="javascript:;" (click)="delete('docs',doc.name, d)" class="modal-with-form">
                                  <em class="fas fa-times text-danger"></em></a>
                              </div>
                            </div> -->
                            <!-- <div *ngIf="docs.length == 0;" class="my-2 px-2">
                              <span>No document found</span>
                            </div> -->
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-xl-6 col-12 pl-0 pr-0">
                  <div class="col-xl-12 col-12 mb-3">
                    <div class="boxshadow1">
                      <div class="widgetload">
                        <div class="widgettbload">
                          <h2 class="pull-left mt-0 mb-0 text-4 font-weight-semibold text-dark">
                            <i class="fas fa-user"></i> Order Log
                          </h2>
                        </div>
                      </div>
                      <div class="timeline timeline-simple changelog"
                        style="max-height: 497px; overflow-x: auto; width: 100%">
                        <div class="tm-body text-dark" *ngIf="orderLogs.length > 0">
                          <ol class="tm-items">
                            <li *ngFor="let data of orderLogs">
                              <div class="tm-box">
                                <span class="release-date">{{ data.createdDate | date: "yyyy/MM/dd" }} -
                                  {{ data.createdTime }}</span>
                                <ul class="list-unstyled">
                                  <li>
                                    {{ data.userFirstName | titlecase }}
                                    {{ data.userLastName | titlecase }}
                                    {{ data.eventParams.message }}
                                    {{ data.eventParams.type }}
                                    <b class="text-success">{{
                                      data.entityNumber
                                      }}</b>
                                  </li>
                                </ul>
                              </div>
                            </li>
                          </ol>
                        </div>
                        <div class="mt-3 mb-3 text-center" *ngIf="orderLogs.length == 0">
                          {{ noLogsMsg }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </section>
  </div>
</section>

<!-- Modal -->
<div class="modal fade" id="templateSelectionModal" tabindex="-1" role="dialog"
  aria-labelledby="templateSelectionModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="max-width: 1200px" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="templateSelectionModalLabel">
          Select Invoice Template
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <i class="far fa-window-close modal-dismiss" style="font-size: 25px"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="invoice-templates__listing">
          <ul class="m-0 p-0 d-flex flex-wrap">
            <li class="position-relative" *ngFor="let item of templateList; let i = index"
              [ngClass]="{ active: selectedItem === i }" (click)="selectedItem = i">
              <img src="{{ item }}" class="img-fluid" />
              <div class="invoice-actions">
                <div>
                  <a href="javascript:;" class="btn btn-success">Use template</a>
                </div>
              </div>
              <div class="selected-template">
                <i class="fa fa-check-circle fa-fw" style="color: #000"></i>
              </div>
            </li>
          </ul>
        </div>
      </div>
      <div class="modal-footer">
        <a (click)="previewModal()" href="javascript:;" class="btn btn-success">Preview</a>
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<!-- *ngIf="isModalShow" -->
<ng-template #previewInvoiceModal let-modal>
  <div class="modal-content">
    <div class="modal-body p-0">
      <section class="invoice-wrapper p-2" style="background-color: #fff; color: #000" id="print_wrap">
        <table width="100%">
          <tbody>
            <tr>
              <td>
                <table width="100%" style="margin-top: 0px; border-bottom: 1px solid #cdcdcd">
                  <tbody>
                    <tr>
                      <td width="60%" class="title" valign="center" style="padding: 10px; text-align: left">
                        <h4 style="
                            margin: 0 0 15px;
                            font-size: 37px;
                            color: #040404;
                            font-weight: 700;
                            text-transform: capitalize;
                          ">
                          INVOICE
                        </h4>
                      </td>
                      <td align="right">
                        <img crossorigin="anonymous" *ngIf="companyLogoSrc" [src]="companyLogoSrc" alt="logo"
                          style="max-width: 100px" />
                        <p *ngIf="
                            invoiceData.carrierData.termsInfo.tagLine &&
                            invoiceData.carrierData.termsInfo.tagLine != ''
                          " class="m-0 font-weight-bold text-dark">
                          {{ invoiceData.carrierData.termsInfo.tagLine }}
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td width="60%" class="title" valign="top" style="padding: 10px; text-align: left">
                        <p style="margin: 0; color: #000">
                          <span style="font-size: 12px">
                            <b>Invoice#</b>
                          </span>
                          {{ orderNumber }}
                        </p>
                        <p style="margin: 0; color: #000">
                          <span style="font-size: 12px">
                            <b>Invoice Date</b>
                          </span>
                          {{ today | date: "yyyy/MM/dd" }}
                        </p>
                        <p style="margin: 0; color: #000">
                          <span style="font-size: 12px">
                            <b>Order#</b>
                          </span>
                          {{ orderNumber }}
                        </p>
                        <p style="margin: 0; color: #000">
                          <span style="font-size: 12px">
                            <b>Customer Confirmation#: </b>
                          </span>
                          {{
                          invoiceData.cusConfirmation
                          ? invoiceData.cusConfirmation
                          : "NA"
                          }}
                        </p>
                      </td>
                      <td width="60%" class="title" valign="top" style="padding: 10px; text-align: right">
                        <h4 style="
                            margin: 0;
                            font-size: 20px;
                            color: #040404;
                            font-weight: 700;
                            text-transform: capitalize;
                          ">
                          {{ invoiceData.carrierData.companyName }}
                        </h4>
                        <h6 style="
                            color: #040404;
                            font-weight: 500;
                            font-size: 13px;line-height: 24px;
                            width: 300px;" class="ml-auto m-0">

                          {{ invoiceData.carrierData.address }}
                        </h6>
                        <h6 style="
                            color: #040404;
                            font-weight: 500;
                            font-size: 13px;
                            line-height: 24px;
                          " class="ml-auto m-0">
                          <strong>Phone: </strong>
                          {{ invoiceData.carrierData.phone }}
                        </h6>
                        <h6 style="
                            color: #040404;
                            font-weight: 500;
                            font-size: 13px;
                            line-height: 24px;" class="ml-auto m-0">

                          >
                          <strong>Email: </strong>
                </table>
                <table width="100%" style="margin-top: 0px; border-bottom: 1px solid #cdcdcd">
                  <tbody>
                    <tr>
                      <td style="padding: 10px; font-size: 13px" valign="top">
                        <b style="font-size: 12px">Customer:</b> <br />
                        <span style="text-transform: capitalize">
                          {{ invoiceData.data[0].customerData.companyName }}
                          <br /></span>
                        <b> Address:</b>
                        {{ invoiceData.data[0].customerData.address }} <br />
                        <b> C/O:</b>
                        {{
                        invoiceData.data[0].customerData.careOption
                        ? invoiceData.data[0].customerData.careOption
                        : "NA"
                        }}
                      </td>
                      <td style="
                          padding: 10px;
                          text-align: right;
                          font-size: 13px;
                        ">
                        <div>
                          <b>Phone:</b>
                          {{
                          invoiceData.data[0].customerData.phone
                          ? invoiceData.data[0].customerData.phone
                          : "NA"
                          }}
                        </div>
                        <div>
                          <b>Email:</b>
                          {{
                          invoiceData.data[0].customerData.email
                          ? invoiceData.data[0].customerData.email
                          : "NA"
                          }}
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>

                <table width="100%" style="
                    color: #040404;
                    margin-top: 0px;
                    border-bottom: 1px solid #cdcdcd;
                  ">
                  <tbody>
                    <tr>
                      <td style="padding: 10px; font-size: 13px" valign="top">
                        <div>
                          <span>
                            <b style="font-size: 12px">Vehicle(s):</b>
                          </span>
                          <span style="text-transform: capitalize" *ngIf="vehicles.length === 0">
                            NA
                          </span>
                          <span style="text-transform: capitalize" *ngFor="let veh of vehicles; let isLast = last">
                            {{ veh.vehicleIdentification }}
                            <span *ngIf="!isLast">,</span>
                          </span>
                        </div>
                      </td>

                      <td style="padding: 10px; font-size: 13px" valign="top" align="right">
                        <div>
                          <span>
                            <b style="font-size: 12px">Asset(s):</b>
                          </span>
                          <span style="text-transform: capitalize" *ngIf="assets.length === 0">
                            NA
                          </span>
                          <span style="text-transform: capitalize" *ngFor="let ast of assets; let isLast = last">
                            {{ ast.assetIdentification }}
                            <span *ngIf="!isLast">,</span>
                          </span>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>

            <tr>
              <td>
                <div class="p-2">
                  <table width="100%" class="invoice-iner__wrapper" style="padding: 10px">
                    <tbody>
                      <tr>
                        <td valign="top" colspan="2">
                          <div *ngFor="let item of invoiceData.data; let m = index">
                            <div *ngFor="let ship of item.shippers" style="
                                align-items: flex-start;
                                flex-wrap: wrap;
                                display: flex;
                                width: 100%;
                                float: left;
                                justify-content: space-between;
                              ">
                              <p style="
                                  width: 100%;
                                  font-weight: 600;
                                  color: #000;
                                  margin: 0;
                                  text-transform: uppercase;
                                ">
                                Shipment - {{ m + 1 }}
                              </p>
                              <div class="shipment__wrap" style="
                                  padding: 5px;
                                  float: left;
                                  margin-bottom: 5px;
                                  width: 49.5%;
                                  border-style: dashed;
                                  border-width: 1px;
                                  border-color: #8d8d8d;
                                ">
                                <b style="font-size: 12px">SHIPPER:</b> <br />
                                <span class="text-capitalize">{{
                                  ship.companyName
                                  }}</span>
                                <br />
                                {{ ship.shipAddress }}

                                <div *ngFor="
                                    let pick of ship.pickupPoint;
                                    let i = index
                                  " class="pickup-item mt-2">
                                  <p class="m-0 text-dark">
                                    <b>Pickup: {{ i + 1 }}</b> -
                                    {{
                                    pick.dateAndTime
                                    | date: "yyyy/MM/dd hh:mm a"
                                    }}
                                  </p>

                                  <span *ngIf="pick.address.manual" style="
                                      width: 220px;
                                      display: inline-block;
                                      min-height: 45px;
                                    ">
                                    {{ pick.address.address }}
                                    {{ pick.address.city }}
                                    {{ pick.address.state }}
                                    {{ pick.address.country }}
                                    {{ pick.address.zipCode }}
                                  </span>
                                  <span *ngIf="!pick.address.manual" style="
                                      width: 220px;
                                      display: inline-block;
                                      min-height: 45px;
                                    ">
                                    {{ pick.address.pickupLocation }}
                                  </span>
                                  <p class="m-0 text-dark">
                                    Contact Person:
                                    <b class="text-capitalize">{{
                                      pick.contactPerson
                                      }}</b>
                                  </p>
                                  <p class="m-0 text-dark">
                                    Customer PO#
                                    <span *ngIf="
                                        pick.customerPO &&
                                        pick.customerPO.length > 0
                                      ">
                                      <span *ngFor="
                                          let po of pick.customerPO;
                                          let i = index
                                        ">{{ i
                                        }}<span *ngIf="po != ''">{{ po }}</span><span *ngIf="
                                            pick.customerPO.length > 0 &&
                                            i < pick.customerPO.length - 1
                                          ">,</span></span>
                                    </span>
                                  </p>

                                  <table width="100%" style="border-top: none; font-size: 12px">
                                    <tbody>
                                      <tr>
                                        <td colspan="6" style="padding: 5px 0">
                                          <table class="table-striped table-bordered" width="100%">
                                            <thead>
                                              <tr style="font-size: 12px">
                                                <td class="text-capitalize" colspan="2">
                                                  COMMODITY
                                                </td>
                                                <td style="width: 80px">
                                                  PICK#
                                                </td>
                                                <td style="width: 70px">QTY</td>
                                                <td style="width: 70px">
                                                  WEIGHT
                                                </td>
                                              </tr>
                                            </thead>
                                            <tbody>
                                              <tr class="item" *ngFor="
                                                  let commodity of pick.commodity
                                                ">
                                                <td colspan="2">
                                                  {{ commodity.name }}
                                                </td>
                                                <td>
                                                  {{
                                                  commodity.pu
                                                  ? commodity.pu
                                                  : "NA"
                                                  }}
                                                </td>
                                                <td>
                                                  {{
                                                  commodity.quantity
                                                  ? commodity.quantity
                                                  : "NA"
                                                  }}
                                                  {{
                                                  commodity.quantity
                                                  ? commodity.quantityUnit
                                                  : ""
                                                  }}
                                                </td>
                                                <td>
                                                  {{
                                                  commodity.weight
                                                  ? commodity.weight
                                                  : "NA"
                                                  }}
                                                  {{
                                                  commodity.weight
                                                  ? commodity.weightUnit
                                                  : ""
                                                  }}
                                                </td>
                                              </tr>
                                            </tbody>
                                          </table>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                              <div class="receivement__wrap" style="width: 49.5%; float: left">
                                <div *ngFor="let receive of ship.receivers" style="
                                    padding: 5px;
                                    margin-bottom: 5px;
                                    border: 1px dashed #8d8d8d;
                                  ">
                                  <b style="font-size: 12px">RECEIVER:</b>
                                  <br />
                                  <span class="text-capitalize">{{
                                    receive.companyName
                                    }}</span>
                                  <br />
                                  {{ receive.receiverAddress }}

                                  <div *ngFor="
                                      let drop of receive.dropPoint;
                                      let j = index
                                    " class="pickup-item mt-2">
                                    <p class="m-0 text-dark">
                                      <b>Drop: {{ j + 1 }}</b> -
                                      {{
                                      drop.dateAndTime
                                      | date: "yyyy/MM/dd hh:mm a"
                                      }}
                                    </p>

                                    <span *ngIf="drop.address.manual" style="
                                        width: 220px;
                                        display: inline-block;
                                        min-height: 45px;
                                      ">
                                      {{ drop.address.address }}
                                      {{ drop.address.city }}
                                      {{ drop.address.state }}
                                      {{ drop.address.country }}
                                      {{ drop.address.zipCode }}
                                    </span>
                                    <span *ngIf="!drop.address.manual" style="
                                        width: 220px;
                                        display: inline-block;
                                        min-height: 45px;
                                      ">
                                      {{ drop.address.dropOffLocation }}
                                    </span>
                                    <p class="m-0 text-dark">
                                      Contact Person:
                                      <b>{{ drop.contactPerson }}</b>
                                    </p>

                                    <table width="100%" style="border-top: none; font-size: 12px">
                                      <tbody>
                                        <tr>
                                          <td colspan="6" style="padding: 5px 0">
                                            <table class="table-striped table-bordered" width="100%">
                                              <thead>
                                                <tr style="font-size: 12px">
                                                  <td colspan="2">COMMODITY</td>
                                                  <td style="width: 80px">
                                                    DEL#
                                                  </td>
                                                  <td style="width: 70px">
                                                    QTY
                                                  </td>
                                                  <td style="width: 70px">
                                                    WEIGHT
                                                  </td>
                                                </tr>
                                              </thead>
                                              <tbody>
                                                <tr class="item" *ngFor="
                                                    let commodity of drop.commodity
                                                  ">
                                                  <td class="text-capitalize" colspan="2">
                                                    {{ commodity.name }}
                                                  </td>
                                                  <td>
                                                    {{
                                                    commodity.del
                                                    ? commodity.del
                                                    : "NA"
                                                    }}
                                                  </td>
                                                  <td>
                                                    {{
                                                    commodity.quantity
                                                    ? commodity.quantity
                                                    : "NA"
                                                    }}
                                                    {{
                                                    commodity.quantity
                                                    ? commodity.quantityUnit
                                                    : ""
                                                    }}
                                                  </td>
                                                  <td>
                                                    {{
                                                    commodity.weight
                                                    ? commodity.weight
                                                    : "NA"
                                                    }}
                                                    {{
                                                    commodity.weight
                                                    ? commodity.weightUnit
                                                    : ""
                                                    }}
                                                  </td>
                                                </tr>
                                              </tbody>
                                            </table>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>
                                </div>
                              </div>
                              <!-- <div *ngIf="m > 0" class="html2pdf__page-break"></div> -->
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <table class="invoice-iner__wrapper" width="100%" style="border-top: none">
                    <tbody>
                      <tr>
                        <td colspan="6">
                          <table class="table-striped table-bordered" width="100%">
                            <thead>
                              <tr style="font-size: 12px">
                                <td colspan="6">FEE METHOD</td>

                                <td style="width: 150px" align="right">
                                  TOTAL
                                </td>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngIf="
                                  invoiceData.charges.freightFee.type != '' &&
                                  invoiceData.charges.freightFee.type != null
                                ">
                                <td colspan="8" style="padding: 0">
                                  <table style="width: 100%">
                                    <tbody>
                                      <tr class="item">
                                        <td colspan="6">
                                          {{
                                          invoiceData.charges.freightFee.type
                                          }}
                                          <small>(Freight Fees)</small>
                                        </td>

                                        <td align="right">
                                          {{
                                          invoiceData.charges.freightFee
                                          .amount | number: "1.2-2"
                                          }}
                                          <small>{{
                                            invoiceData.charges.freightFee
                                            .currency
                                            }}</small>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </td>
                              </tr>

                              <tr *ngIf="
                                  invoiceData.charges.fuelSurcharge.type !=
                                    '' &&
                                  invoiceData.charges.fuelSurcharge.type != null
                                ">
                                <td colspan="8" style="padding: 0">
                                  <table style="width: 100%">
                                    <tbody>
                                      <tr>
                                        <td colspan="6">
                                          {{
                                          invoiceData.charges.fuelSurcharge
                                          .type
                                          }}<small> (Fuel Surcharge)</small>
                                        </td>

                                        <td align="right">
                                          {{
                                          invoiceData.charges.fuelSurcharge
                                          .amount | number: "1.2-2"
                                          }}
                                          <small>{{
                                            invoiceData.charges.fuelSurcharge
                                            .currency
                                            }}</small>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </td>
                              </tr>

                              <tr *ngIf="
                                  invoiceData.charges.accessorialFeeInfo
                                    .accessorialFee.length > 0 &&
                                  invoiceData.charges.accessorialFeeInfo
                                    .accessorialFee[0].type != '' &&
                                  invoiceData.charges.accessorialFeeInfo
                                    .accessorialFee[0].type != null
                                ">
                                <td colspan="8" style="padding: 0">
                                  <table style="width: 100%">
                                    <tbody>
                                      <tr *ngFor="
                                          let item of invoiceData.charges
                                            .accessorialFeeInfo.accessorialFee
                                        ">
                                        <td colspan="6">
                                          {{ item.type }}
                                          <small>(Accessorial Fee)</small>
                                        </td>
                                        <td align="right">
                                          {{ item.amount | number: "1.2-2" }}
                                          <small>{{ item.currency }}</small>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </td>
                              </tr>
                              <tr *ngIf="
                                  invoiceData.charges.accessorialDeductionInfo
                                    .accessorialDeduction.length > 0 &&
                                  invoiceData.charges.accessorialDeductionInfo
                                    .accessorialDeduction[0].type != '' &&
                                  invoiceData.charges.accessorialDeductionInfo
                                    .accessorialDeduction[0].type != null
                                ">
                                <td colspan="8" style="padding: 0">
                                  <table style="width: 100%">
                                    <tbody>
                                      <tr *ngFor="
                                          let item of invoiceData.charges
                                            .accessorialDeductionInfo
                                            .accessorialDeduction
                                        ">
                                        <td colspan="6">
                                          {{ item.type }}
                                          <small>(Accessorial Deduction)</small>
                                        </td>
                                        <td align="right">
                                          - {{ item.amount | number: "1.2-2" }}
                                          <small>{{ item.currency }}</small>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </td>
                              </tr>

                              <tr class="bg-transparent">
                                <td align="right" colspan="6">Sub Total</td>
                                <td align="right">
                                  {{ invoiceData.subTotal | number: "1.2-2" }}
                                  <small>{{ charges.freightFee.currency }}
                                  </small>
                                </td>
                              </tr>
                              <tr class="bg-transparent">
                                <td colspan="6" align="right">Tax</td>
                                <td align="right">
                                  {{ invoiceData.taxesAmt }}
                                  <small>{{ charges.freightFee.currency }}
                                  </small>
                                </td>
                              </tr>
                            </tbody>
                            <tfoot class="border-1">
                              <tr>
                                <th colspan="6" align="right">
                                  <div style="text-align: right">TOTAL</div>
                                </th>
                                <th align="right">
                                  <div style="text-align: right">
                                    {{
                                    invoiceData.finalAmount | number: "1.2-2"
                                    }}
                                    <small>{{ charges.freightFee.currency }}
                                    </small>
                                  </div>
                                </th>
                              </tr>
                            </tfoot>
                          </table>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <table class="invoice-iner__wrapper" width="100%" style="border-top: none">
                    <tbody>
                      <tr *ngFor="let newDoc of invDocs">
                        <td>
                          <table>
                            <tbody>
                              <tr *ngIf="newDoc.ext === 'pdf'">
                                <td>
                                  <pdf-viewer [src]="newDoc.docPath" [fit-to-page]="false" [show-all]="true"
                                    [render-text]="true" [original-size]="false" [autoresize]="true"
                                    style="max-width: 700px; display: block">
                                  </pdf-viewer>
                                </td>
                              </tr>
                              <tr *ngIf="
                                  newDoc.ext === 'jpg' ||
                                  newDoc.ext === 'jpeg' ||
                                  newDoc.ext === 'png'
                                ">
                                <td>
                                  <img crossorigin="anonymous" [src]="newDoc.docPath" width="100%" />
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </td>
            </tr>
            <tr *ngIf="
                invoiceData.carrierData.termsInfo.terms &&
                invoiceData.carrierData.termsInfo.terms != ''
              ">
              <td colspan="2" class="p-3">
                <p style="margin: 0; color: #000">
                  <strong>Terms & Conditions: </strong>{{ invoiceData.carrierData.termsInfo.terms }}
                </p>
              </td>
            </tr>
            <tr>
              <td colspan="2">
                <table border="0" align="center" cellpadding="0" cellspacing="0">
                  <tbody>
                    <tr>
                      <td align="center">
                        <h2 style="font-size: 13px; margin-top: 0">
                          Powered By
                        </h2>
                        <img src="assets/img/logo.png" width="207" height="28" />
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </div>
    <div class="modal-footer">
      <button class="btn btn-default" (click)="modal.dismiss('Cross click')">
        Cancel
      </button>
      <button class="btn btn-success" (click)="generate()">Print</button>
      <button *ngIf="isGenerate" [disabled]="generateBtnDisabled" (click)="generatePDF()" class="btn btn-success">
        Generate & Print
      </button>
    </div>
  </div>
</ng-template>

<ng-template #emailInvoice let-modal>
  <div class="modal-content">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Send Invoice</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body p-0">
      <section class="invoice-wrapper p-2" style="
          background-color: #fff;
          max-height: 650px;
          overflow-y: auto;
          overflow-x: hidden;
        ">
        <div class="row">
          <div class="col-12">
            <ngx-slick-carousel class="carousel" #slickModal="slick-carousel" [config]="slideConfig">
              <table width="100%">
                <tbody>
                  <tr>
                    <td>
                      <table width="100%" style="
                          margin-top: 0px;
                          border-bottom: 1px solid #cdcdcd;
                        ">
                        <tbody>
                          <tr>
                            <td width="60%" class="title" valign="top" style="padding: 10px; text-align: left">
                              <h4 style="
                                  margin: 0 0 15px;
                                  font-size: 37px;
                                  color: #040404;
                                  font-weight: 700;
                                  text-transform: capitalize;
                                ">
                                INVOICE
                              </h4>
                              <p style="margin: 0; color: #000">
                                <span style="font-size: 12px">
                                  <b>Invoice#</b>
                                </span>
                                {{ orderNumber }}
                              </p>
                              <p style="margin: 0; color: #000">
                                <span style="font-size: 12px">
                                  <b>Invoice Date</b>
                                </span>
                                {{ today | date: "yyyy/MM/dd" }}
                              </p>
                              <p style="margin: 0; color: #000">
                                <span style="font-size: 12px">
                                  <b>Order#</b>
                                </span>
                                {{ orderNumber }}
                              </p>
                              <p style="margin: 0; color: #000">
                                <span style="font-size: 12px">
                                  <b>Customer Confirmation#: </b>
                                </span>
                                {{ invoiceData.cusConfirmation }}
                              </p>
                            </td>
                            <td width="60%" class="title" valign="top" style="padding: 10px; text-align: right">
                              <h4 style="
                                  margin: 0;
                                  font-size: 20px;
                                  color: #040404;
                                  font-weight: 700;
                                  text-transform: capitalize;
                                ">
                                {{ invoiceData.carrierData.companyName }}
                              </h4>
                              <h6 style="
                                  color: #040404;
                                  font-weight: 500;
                                  font-size: 13px;
                                  width: 300px;
                                  float: right;
                                " class="m-0">
                                {{ invoiceData.carrierData.address }}
                              </h6>
                              <h6 style="
                                  color: #040404;
                                  font-weight: 500;
                                  font-size: 13px;
                                  float: right;
                                  line-height: 24px;
                                " class="m-0">
                                <strong>Phone: </strong>
                                {{ invoiceData.carrierData.phone }}
                              </h6>
                              <h6 style="
                                  color: #040404;
                                  font-weight: 500;
                                  font-size: 13px;
                                  float: right;
                                  line-height: 24px;
                                " class="m-0">
                                <strong>Email: </strong>
                                {{ invoiceData.carrierData.email }}
                              </h6>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <table width="100%" style="
                          margin-top: 0px;
                          border-bottom: 1px solid #cdcdcd;
                        ">
                        <tbody>
                          <tr>
                            <td style="
                                color: #040404;
                                padding: 10px;
                                font-size: 13px;
                              " valign="top">
                              <b style="font-size: 12px">Customer:</b> <br />
                              <span style="text-transform: capitalize">
                                {{
                                invoiceData.data[0].customerData.companyName
                                }}
                                <br /></span>
                              {{ invoiceData.data[0].customerData.address }}
                              <br />
                            </td>
                            <td style="
                                color: #040404;
                                padding: 10px;
                                text-align: right;
                                font-size: 13px;
                              ">
                              <div>
                                <b>Phone:</b>
                                {{
                                invoiceData.data[0].customerData.phone
                                ? invoiceData.data[0].customerData.phone
                                : "NA"
                                }}
                              </div>
                              <div>
                                <b>Email:</b>
                                {{
                                invoiceData.data[0].customerData.email
                                ? invoiceData.data[0].customerData.email
                                : "NA"
                                }}
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>

                      <table width="100%" style="
                          color: #040404;
                          margin-top: 0px;
                          border-bottom: 1px solid #cdcdcd;
                        ">
                        <tbody>
                          <tr>
                            <td style="padding: 10px; font-size: 13px" valign="top">
                              <div>
                                <span>
                                  <b style="font-size: 12px">Vehicle(s):</b>
                                </span>
                                <span style="text-transform: capitalize" *ngIf="vehicles.length === 0">
                                  NA
                                </span>
                                <span style="text-transform: capitalize" *ngFor="
                                    let veh of vehicles;
                                    let isLast = last
                                  ">
                                  {{ veh.vehicleIdentification }}
                                  <span *ngIf="!isLast">,</span>
                                </span>
                              </div>
                            </td>

                            <td style="padding: 10px; font-size: 13px" valign="top" align="right">
                              <div>
                                <span>
                                  <b style="font-size: 12px">Asset(s):</b>
                                </span>
                                <span style="text-transform: capitalize" *ngIf="assets.length === 0">
                                  NA
                                </span>
                                <span style="text-transform: capitalize" *ngFor="let ast of assets; let isLast = last">
                                  {{ ast.assetIdentification }}
                                  <span *ngIf="!isLast">,</span>
                                </span>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <div class="p-2">
                        <table width="100%" class="invoice-iner__wrapper" style="color: #040404; padding: 10px">
                          <tbody>
                            <tr>
                              <td valign="top" colspan="2">
                                <div *ngFor="
                                    let item of invoiceData.data;
                                    let m = index
                                  ">
                                  <div *ngFor="let ship of item.shippers" style="
                                      align-items: flex-start;
                                      flex-wrap: wrap;
                                      display: flex;
                                      width: 100%;
                                      float: left;
                                      justify-content: space-between;
                                    ">
                                    <p style="
                                        width: 100%;
                                        font-weight: 600;
                                        color: #000;
                                        margin: 0;
                                        text-transform: uppercase;
                                      ">
                                      Shipment - {{ m + 1 }}
                                    </p>
                                    <div class="shipment__wrap" style="
                                        padding: 5px;
                                        float: left;
                                        margin-bottom: 5px;
                                        width: 49.5%;
                                        border-style: dashed;
                                        border-width: 1px;
                                        border-color: #8d8d8d;
                                      ">
                                      <b style="font-size: 12px">SHIPPER:</b>
                                      <br />
                                      <span class="text-capitalize">{{
                                        ship.companyName
                                        }}</span>
                                      <br />
                                      {{ ship.shipAddress }}

                                      <div *ngFor="
                                          let pick of ship.pickupPoint;
                                          let i = index
                                        " class="pickup-item mt-2">
                                        <p class="m-0 text-dark">
                                          <b>Pickup: {{ i + 1 }}</b> -
                                          {{
                                          pick.dateAndTime
                                          | date: "yyyy/MM/dd hh:mm a"
                                          }}
                                        </p>

                                        <span *ngIf="pick.address.manual" style="
                                            width: 220px;
                                            display: inline-block;
                                            min-height: 45px;
                                          ">
                                          {{ pick.address.address }}
                                          {{ pick.address.city }}
                                          {{ pick.address.state }}
                                          {{ pick.address.country }}
                                          {{ pick.address.zipCode }}
                                        </span>
                                        <span *ngIf="!pick.address.manual" style="
                                            width: 220px;
                                            display: inline-block;
                                            min-height: 45px;
                                          ">
                                          {{ pick.address.pickupLocation }}
                                        </span>
                                        <p class="m-0 text-dark">
                                          Contact Person:
                                          <b class="text-capitalize">{{
                                            pick.contactPerson
                                            }}</b>
                                        </p>

                                        <table width="100%" style="
                                            border-top: none;
                                            font-size: 12px;
                                          ">
                                          <tbody>
                                            <tr>
                                              <td colspan="6" style="padding: 5px 0">
                                                <table class="table-striped table-bordered" width="100%">
                                                  <thead>
                                                    <tr style="font-size: 12px">
                                                      <td class="text-capitalize" colspan="2">
                                                        COMMODITY
                                                      </td>
                                                      <td style="width: 80px">
                                                        PICK#
                                                      </td>
                                                      <td style="width: 70px">
                                                        QTY
                                                      </td>
                                                      <td style="width: 70px">
                                                        WEIGHT
                                                      </td>
                                                    </tr>
                                                  </thead>
                                                  <tbody>
                                                    <tr class="item" *ngFor="
                                                        let commodity of pick.commodity
                                                      ">
                                                      <td colspan="2">
                                                        {{ commodity.name }}
                                                      </td>
                                                      <td>
                                                        {{
                                                        commodity.pu
                                                        ? commodity.pu
                                                        : "NA"
                                                        }}
                                                      </td>
                                                      <td>
                                                        {{
                                                        commodity.quantity
                                                        ? commodity.quantity
                                                        : "NA"
                                                        }}
                                                        {{
                                                        commodity.quantity
                                                        ? commodity.quantityUnit
                                                        : ""
                                                        }}
                                                      </td>
                                                      <td>
                                                        {{
                                                        commodity.weight
                                                        ? commodity.weight
                                                        : "NA"
                                                        }}
                                                        {{
                                                        commodity.weight
                                                        ? commodity.weightUnit
                                                        : ""
                                                        }}
                                                      </td>
                                                    </tr>
                                                  </tbody>
                                                </table>
                                              </td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </div>
                                    </div>
                                    <div class="receivement__wrap" style="width: 49.5%; float: left">
                                      <div *ngFor="let receive of ship.receivers" style="
                                          padding: 5px;
                                          margin-bottom: 5px;
                                          border: 1px dashed #8d8d8d;
                                        ">
                                        <b style="font-size: 12px">RECEIVER:</b>
                                        <br />
                                        <span class="text-capitalize">{{
                                          receive.companyName
                                          }}</span>
                                        <br />
                                        {{ receive.receiverAddress }}

                                        <div *ngFor="
                                            let drop of receive.dropPoint;
                                            let j = index
                                          " class="pickup-item mt-2">
                                          <p class="m-0 text-dark">
                                            <b>Drop: {{ j + 1 }}</b> -
                                            {{
                                            drop.dateAndTime
                                            | date: "yyyy/MM/dd hh:mm a"
                                            }}
                                          </p>

                                          <span *ngIf="drop.address.manual" style="
                                              width: 220px;
                                              display: inline-block;
                                              min-height: 45px;
                                            ">
                                            {{ drop.address.address }}
                                            {{ drop.address.city }}
                                            {{ drop.address.state }}
                                            {{ drop.address.country }}
                                            {{ drop.address.zipCode }}
                                          </span>
                                          <span *ngIf="!drop.address.manual" style="
                                              width: 220px;
                                              display: inline-block;
                                              min-height: 45px;
                                            ">
                                            {{ drop.address.dropOffLocation }}
                                          </span>
                                          <p class="m-0 text-dark">
                                            Contact Person:
                                            <b>{{ drop.contactPerson }}</b>
                                          </p>

                                          <table width="100%" style="
                                              border-top: none;
                                              font-size: 12px;
                                            ">
                                            <tbody>
                                              <tr>
                                                <td colspan="6" style="padding: 5px 0">
                                                  <table class="table-striped table-bordered" width="100%">
                                                    <thead>
                                                      <tr style="font-size: 12px">
                                                        <td colspan="2">
                                                          COMMODITY
                                                        </td>
                                                        <td style="width: 80px">
                                                          DEL#
                                                        </td>
                                                        <td style="width: 70px">
                                                          QTY
                                                        </td>
                                                        <td style="width: 70px">
                                                          WEIGHT
                                                        </td>
                                                      </tr>
                                                    </thead>
                                                    <tbody>
                                                      <tr class="item" *ngFor="
                                                          let commodity of drop.commodity
                                                        ">
                                                        <td class="text-capitalize" colspan="2">
                                                          {{ commodity.name }}
                                                        </td>
                                                        <td>
                                                          {{
                                                          commodity.del
                                                          ? commodity.del
                                                          : "NA"
                                                          }}
                                                        </td>
                                                        <td>
                                                          {{
                                                          commodity.quantity
                                                          ? commodity.quantity
                                                          : "NA"
                                                          }}
                                                          {{
                                                          commodity.quantity
                                                          ? commodity.quantityUnit
                                                          : ""
                                                          }}
                                                        </td>
                                                        <td>
                                                          {{
                                                          commodity.weight
                                                          ? commodity.weight
                                                          : "NA"
                                                          }}
                                                          {{
                                                          commodity.weight
                                                          ? commodity.weightUnit
                                                          : ""
                                                          }}
                                                        </td>
                                                      </tr>
                                                    </tbody>
                                                  </table>
                                                </td>
                                              </tr>
                                            </tbody>
                                          </table>
                                        </div>
                                      </div>
                                    </div>
                                    <div *ngIf="m > 0" class="html2pdf__page-break"></div>
                                  </div>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>

                        <table class="invoice-iner__wrapper" width="100%" style="color: #040404; border-top: none">
                          <tbody>
                            <tr>
                              <td colspan="6">
                                <table class="table-striped table-bordered" width="100%">
                                  <thead>
                                    <tr style="font-size: 12px">
                                      <td colspan="6">FEE METHOD</td>

                                      <td style="width: 150px" align="right">
                                        TOTAL
                                      </td>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr *ngIf="
                                        invoiceData.charges.freightFee.type !=
                                          '' &&
                                        invoiceData.charges.freightFee.type !=
                                          null
                                      ">
                                      <td colspan="8" style="padding: 0">
                                        <table style="width: 100%">
                                          <tbody>
                                            <tr class="item">
                                              <td colspan="6">
                                                {{
                                                invoiceData.charges.freightFee
                                                .type
                                                }}
                                                <small>(Freight Fees)</small>
                                              </td>

                                              <td align="right">
                                                {{
                                                invoiceData.charges.freightFee
                                                .amount | number: "1.2-2"
                                                }}
                                                <small>{{
                                                  invoiceData.charges.freightFee
                                                  .currency
                                                  }}</small>
                                              </td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </td>
                                    </tr>

                                    <tr *ngIf="
                                        invoiceData.charges.fuelSurcharge
                                          .type != '' &&
                                        invoiceData.charges.fuelSurcharge
                                          .type != null
                                      ">
                                      <td colspan="8" style="padding: 0">
                                        <table style="width: 100%">
                                          <tbody>
                                            <tr>
                                              <td colspan="6">
                                                {{
                                                invoiceData.charges
                                                .fuelSurcharge.type
                                                }}<small>
                                                  (Fuel Surcharge)</small>
                                              </td>

                                              <td align="right">
                                                {{
                                                invoiceData.charges
                                                .fuelSurcharge.amount
                                                | number: "1.2-2"
                                                }}
                                                <small>{{
                                                  invoiceData.charges
                                                  .fuelSurcharge.currency
                                                  }}</small>
                                              </td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </td>
                                    </tr>

                                    <tr *ngIf="
                                        invoiceData.charges.accessorialFeeInfo
                                          .accessorialFee.length > 0 &&
                                        invoiceData.charges.accessorialFeeInfo
                                          .accessorialFee[0].type != '' &&
                                        invoiceData.charges.accessorialFeeInfo
                                          .accessorialFee[0].type != null
                                      ">
                                      <td colspan="8" style="padding: 0">
                                        <table style="width: 100%">
                                          <tbody>
                                            <tr *ngFor="
                                                let item of invoiceData.charges
                                                  .accessorialFeeInfo
                                                  .accessorialFee
                                              ">
                                              <td colspan="6">
                                                {{ item.type }}
                                                <small>(Accessorial Fee)</small>
                                              </td>
                                              <td align="right">
                                                {{
                                                item.amount | number: "1.2-2"
                                                }}
                                                <small>{{
                                                  item.currency
                                                  }}</small>
                                              </td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </td>
                                    </tr>
                                    <tr *ngIf="
                                        invoiceData.charges
                                          .accessorialDeductionInfo
                                          .accessorialDeduction.length > 0 &&
                                        invoiceData.charges
                                          .accessorialDeductionInfo
                                          .accessorialDeduction[0].type != '' &&
                                        invoiceData.charges
                                          .accessorialDeductionInfo
                                          .accessorialDeduction[0].type != null
                                      ">
                                      <td colspan="8" style="padding: 0">
                                        <table style="width: 100%">
                                          <tbody>
                                            <tr *ngFor="
                                                let item of invoiceData.charges
                                                  .accessorialDeductionInfo
                                                  .accessorialDeduction
                                              ">
                                              <td colspan="6">
                                                {{ item.type }}
                                                <small>(Accessorial
                                                  Deduction)</small>
                                              </td>
                                              <td align="right">
                                                -
                                                {{
                                                item.amount | number: "1.2-2"
                                                }}
                                                <small>{{
                                                  item.currency
                                                  }}</small>
                                              </td>
                                            </tr>
                                          </tbody>
                                        </table>
                                      </td>
                                    </tr>

                                    <tr class="bg-transparent">
                                      <td align="right" colspan="6">
                                        Sub Total
                                      </td>
                                      <td align="right">
                                        {{
                                        invoiceData.subTotal | number: "1.2-2"
                                        }}
                                        <small>{{ charges.freightFee.currency }}
                                        </small>
                                      </td>
                                    </tr>
                                    <tr class="bg-transparent">
                                      <td colspan="6" align="right">Tax</td>
                                      <td align="right">
                                        {{ invoiceData.taxesAmt }}
                                        <small>{{ charges.freightFee.currency }}
                                        </small>
                                      </td>
                                    </tr>
                                  </tbody>
                                  <tfoot class="border-1">
                                    <tr>
                                      <th colspan="6" align="right">
                                        <div style="text-align: right">
                                          TOTAL
                                        </div>
                                      </th>
                                      <th align="right">
                                        <div style="text-align: right">
                                          {{
                                          invoiceData.finalAmount
                                          | number: "1.2-2"
                                          }}
                                          <small>{{ charges.freightFee.currency }}
                                          </small>
                                        </div>
                                      </th>
                                    </tr>
                                  </tfoot>
                                </table>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td colspan="2" class="p-3">
                      <p style="margin: 0; color: #000">
                        Please include our Invoice number on the remittance.
                        Remit address is provided above, kindly send all the
                        accounting queries to
                        <strong> {{ invoiceData.carrierData.email }}</strong>
                      </p>
                      <p style="margin: 0; color: #000">
                        No Statement is issued on the payment of this invoice.
                        Terms net 15 days
                      </p>
                    </td>
                  </tr>

                  <tr>
                    <td colspan="2">
                      <table border="0" align="center" cellpadding="0" cellspacing="0">
                        <tbody>
                          <tr>
                            <td align="center">
                              <h2 style="font-size: 13px; margin-top: 0">
                                Powered By
                              </h2>
                              <img src="assets/img/logo.png" width="207" height="28" />
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div ngxSlickItem *ngFor="let item of emailDocs" class="slide">
                <div *ngIf="item.ext === 'pdf'">
                  <pdf-viewer [src]="item.docPath" [fit-to-page]="false" [show-all]="true" [render-text]="true"
                    [original-size]="false" [autoresize]="true" style="max-width: 100%; display: block">
                  </pdf-viewer>
                </div>

                <div *ngIf="
                    item.ext === 'jpg' ||
                    item.ext === 'jpeg' ||
                    item.ext === 'png'
                  ">
                  <img src="{{ item.docPath }}" alt="" width="100%" />
                </div>
              </div>
            </ngx-slick-carousel>
          </div>
        </div>
      </section>
    </div>
    <div class="modal-footer">
      <!-- <div>
        <div class="form-check">
          <input class="form-check-input" (change)="sendEmailCopy($event.target.checked)" type="checkbox" value=""
            id="copy">
          <label class="form-check-label" for="copy">
            Send me a copy
          </label>
        </div>
      </div> -->
      <div>
        <button type="button" (click)="modal.dismiss('Cross click')" class="btn btn-default">
          Cancel
        </button>
        <button class="btn btn-success ml-2">Send</button>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #emailInvoiceModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Send Invoice</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <form>
    <div class="modal-body">
      <div class="email--invoice__main">
        <div class="row align-items-center mb-2">
          <div class="col-12">
            <label class="control-label font-weight-bold mt-2 text-3 text-dark" for="inputDefault">Send To: <small> You
                can add multiple email(s)</small>
              <span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
            <ng-select multiple="true" notFoundText="Please type to add email" [addTag]="true"
              placeholder="eg. johnsmith@gmail.com" [(ngModel)]="emailData.emails" name="emails" type="text"
              class="form-control h-auto" pattern="^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9]+$">
            </ng-select>
          </div>
          <div class="col-12">
            <label class="control-label font-weight-bold mt-2 text-3 text-dark" for="inputDefault">Subject line:
              <span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
            <input type="text" [(ngModel)]="subject" class="form-control" placeholder="Enter subject" name="subject" />
          </div>
          <div class="col-12 mt-2">
            <input class="form-check-input ml-0" (change)="sendEmailCopy($event.target.checked)" type="checkbox"
              value="" id="copy" />
            <label class="form-check-label pl-3" for="copy">
              Send me a copy at <strong> {{ carrierEmail }}</strong>
            </label>
          </div>
          <div class="col-12 mt-3">
            <p>
              <strong>Note:</strong> All documents will be sent with this email
              as attachments.
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <!-- <button type="button" [disabled]="isEmail" (click)="sendEmailOnly()" class="btn
        btn-default">
        No
      </button> -->
      <button type="button" (click)="modal.dismiss('Cross click')" class="btn btn-default">
        Cancel
      </button>
      <button type="submit" [disabled]="isEmail" (click)="addEmails()" class="btn btn-success">
        Submit
      </button>
    </div>
  </form>
</ng-template>

<!-- VIEW DOCUMENT MODAL -->
<div class="modal fade" id="viewDocModal" tabindex="-1" role="dialog" aria-labelledby="viewDocModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewDocModalLabel">View Document</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <div class="form-group col-md-12">
            <div>
              <iframe [src]="pdfSrc" frameborder="0" width="100%" height="400px">
              </iframe>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>

<app-brokerage-pdf></app-brokerage-pdf>
<app-bol-pdf></app-bol-pdf>