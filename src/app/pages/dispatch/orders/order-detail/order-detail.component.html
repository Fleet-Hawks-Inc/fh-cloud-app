<section class="body">
  <div class="inner-wrapper">
    <section role="main" class="content-body pt-0 pr-0 pl-0">
      <header class="page-header">
        <div class="row" style="padding-top: 10px">
          <div class="col-md-4 col-lg-4 font-weight-bold text-4 text-dark">
            Order Details
          </div>
          <div class="col-md-8 col-lg-8 text-right">
            <a (click)="genInvoice()" data-target="#previewInvoiceModal" data-toggle="modal" class="btn btn-success btn-sm mr-2"
              > Generate Invoice</a
            >
            <a routerLink="/dispatch/orders/edit/{{orderID}}" class="btn btn-default btn-sm mr-2"
              ><i class="fas fa-pencil-alt"></i> Edit Order</a
            >
            <a routerLink="/dispatch/orders" class="btn btn-default btn-sm"
              ><i class="fas fa-list"></i> All Orders</a
            >
            <div class="btn-group flex-wrap" *ngIf="!environment">
              <button
                type="button"
                class="btn btn-success btn-sm dropdown-toggle"
                data-toggle="dropdown"
                aria-expanded="false"
              >
                Actions<span class="caret"></span>
              </button>
              <div
                class="dropdown-menu"
                role="menu"
                x-placement="bottom-start"
                style="
                  position: absolute;
                  will-change: transform;
                  top: 0px;
                  left: 0px;
                  transform: translate3d(0px, 38px, 0px);
                "
              >
                <a class="dropdown-item text-1" href="#">Edit</a>
                <a class="dropdown-item text-1" href="#">Print</a>
                <a class="dropdown-item text-1" href="#">Email</a>
                <a class="dropdown-item text-1" href="#">Fax</a>
                <a class="dropdown-item text-1" href="">Cancel</a>
              </div>
            </div>
            <!-- <a href="#templateSelectionModal" class="modal-with-form btn btn-success btn-sm"><i class="fas fa-plus"></i>
                     Create Invoice</a> -->
          </div>
        </div>
      </header>
      <section class="m-2">
        <div class="row mb-3">
          <div class="col-12">
            <div
              class="bg-white p-3 d-flex justify-content-between align-items-center text-dark"
            >
              <div>
                <h4 class="m-0 font-weight-bold">{{orderMode}} - ORD{{orderNumber}}</h4>
              </div>
              <!-- <div class="pull-right">
                <a routerLink="/dispatch/orders/add" class="btn btn-success btn-sm"
                  ><i class="fas fa-plus"></i> Add Order</a
                >
              </div> -->
            </div>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-lg-12">
            <div class="bg-white p-3">
              <div class="row mb-3">
                <!--
                  <div class="col-lg-6 text-dark">
                           <div id="vehicle-details" class="">
                              <div class="row m-0">
                                 <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">Customer:</div>
                                 <div class="col-lg-8 p-2 border-box">James</div>
                              </div>
                              <div class="row  m-0">
                                 <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">Address:</div>
                                 <div class="col-lg-8 p-2 border-box">100 Street, Olympic Park</div>
                              </div>
                              <div class="row  m-0">
                                 <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">City, State:</div>
                                 <div class="col-lg-8 p-2 border-box">Calagary, AB</div>
                              </div>
                              <div class="row  m-0">
                                 <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">Country:</div>
                                 <div class="col-lg-8 p-2 border-box">Canada</div>
                              </div>
                              <div class="row  m-0">
                                 <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">Phone:</div>
                                 <div class="col-lg-8 p-2 border-box">(103) 069-1461</div>
                              </div>
                              <div class="row  m-0">
                                 <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">Email:</div>
                                 <div class="col-lg-8 p-2 border-box">info@fleetinc.ca</div>
                              </div>
                      <div class="row  m-0">
                                 <div class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray">Fax:</div>
                                 <div class="col-lg-8 p-2 border-box">(103) 069-1465</div>
                              </div>
                           </div>
                        </div>
                  -->

                <div class="col-lg-6 text-dark">
                  <div id="vehicle-details" class="">
                    <div class="row m-0">
                      <div
                        class="col-lg-3 p-2 font-weight-bold text-3 text-left"
                      >
                        Customer:
                      </div>
                      <div class="col-lg-9 p-2">{{ customerName }}</div>
                    </div>
                    <div class="row m-0">
                      <div
                        class="col-lg-3 p-2 font-weight-bold text-3 text-left"
                      >
                        Address:
                      </div>
                      <div class="col-lg-9 p-2">{{ customerAddress }}</div>
                    </div>
                    <div class="row m-0">
                      <div
                        class="col-lg-3 p-2 font-weight-bold text-3 text-left"
                      >
                        City, Province/State:
                      </div>
                      <div class="col-lg-9 p-2">
                        {{ customerCityName }}, {{ customerStateName }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div
                        class="col-lg-3 p-2 font-weight-bold text-3 text-left"
                      >
                        Country:
                      </div>
                      <div class="col-lg-9 p-2">{{ customerCountryName }}</div>
                    </div>
                    <div class="row m-0">
                      <div
                        class="col-lg-3 p-2 font-weight-bold text-3 text-left"
                      >
                        Phone:
                      </div>
                      <div class="col-lg-9 p-2">{{ customerPhone }}</div>
                    </div>
                    <div class="row m-0">
                      <div
                        class="col-lg-3 p-2 font-weight-bold text-3 text-left"
                      >
                        Email:
                      </div>
                      <div class="col-lg-9 p-2">{{ customerEmail }}</div>
                    </div>
                    <!-- <div class="row m-0">
                      <div
                        class="col-lg-3 p-2 font-weight-bold text-3 text-left"
                      >
                        Fax:
                      </div>
                      <div class="col-lg-9 p-2">{{ customerfax }}</div>
                    </div> -->
                  </div>
                </div>

                <div class="col-lg-6 text-dark">
                  <div id="vehicle-details" class="">
                    <div class="row m-0">
                      <div
                        class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray"
                      >
                        Customer PO#:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                        {{ customerPo }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div
                        class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray"
                      >
                        Reference:
                      </div>
                      <div class="col-lg-8 p-2 border-box">{{ reference }}</div>
                    </div>
                    <div class="row m-0">
                      <div
                        class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray"
                      >
                        Order Creation Date/Time:
                      </div>
                      <div class="col-lg-8 p-2 border-box">{{ createdTime | date : 'yyyy/MM/dd hh:mm:ss a' }}</div>
                    </div>
                    <div class="row m-0">
                      <div
                        class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray"
                      >
                        Additonal Contact Name:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                        {{ additionalContactName }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div
                        class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray"
                      >
                        Phone:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                        {{ additionalPhone }}
                      </div>
                    </div>
                    <div class="row m-0">
                      <div
                        class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray"
                      >
                        Email:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                        {{ additionalEmail }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          class="row mb-3 shipment-wrap"
          *ngFor="
            let shipperReceiversInfo of shipperReceiversInfos;
            let i = index
          "
        >
          <div class="col-lg-12">
            <div class="bg-white p-3">
              <div class="row mb-3 ">
                <div class="col-lg-12 mb-4 mb-lg-0">
                  <div
                    class="accordion"
                    id="accordion{{i}}"
                    style="
                      border: 0.5px solid #333;
                      background: #f6f6f6;
                      border-radius: 10px;
                      box-shadow: 2px 5px 5px #d1d1d1;
                    "
                  >
                    <div class="card card-default mb-0 mt-0">
                      <div class="card-header bgnone" id="collapse1Heading{{i}}">
                        <h4 class="card-title m-0">
                          <a
                            class="accordion-toggle cursorpoint font-weight-bold text-4 text-dark"
                            data-toggle="collapse"
                            [attr.data-target]="'#collapse' + i"
                            aria-expanded="true"
                            [attr.aria-controls]="'collapse' + i"
                          >
                            Shipment-{{ i + 1 }}</a
                          >
                        </h4>
                      </div>
                      <div
                        id="collapse{{i}}"
                        class="collapse"
                        [attr.aria-labelledby]="'collapse1Heading' + i"
                      >
                        <div class="card-body">
                          <div class="form-group row divderrel">
                            <div class="midledriver"></div>
                            
                            <div class="col-lg-6">
                              <h4
                                class="mt-0 text-dark font-weight-bold text-4"
                              >
                              Shipper
                              </h4>
                            </div>
                            <div class="col-lg-6">
                              <h4
                                class="mt-0 text-dark font-weight-bold text-4"
                              >
                              Receiver
                              </h4>
                            </div>

                            <div class="col-lg-4 pl-0 pr-0 offset-lg-1">
                              <div class="pl-0 pr-5" *ngFor="let shipper of shipperReceiversInfo.shippers; let j = index">

                                 <a data-toggle="collapse" [attr.data-target]="'#collapseShipperArea-' + i + '-' + j" href="#collapseShipperArea-{{i}}-{{j}}" aria-expanded="false">
                                    <label style="background: #F4F4F4;width: 100%;" class="text-dark text-5 font-weight-bold btn" (click)=caretClickShipper(i,j) id="shipperArea-{{i}}-{{j}}">
                                      <span class="pull-left">Shipper {{j+1}}</span>
                                      <i class="fas fa-caret-right caret_icon pull-right mt-2"></i>
                                    </label>
                                  </a>

                                  <section>
                                    <div id="collapseShipperArea-{{i}}-{{j}}" class="collapse">
                                      <div class="row">
                                        <div class="col-lg-12">
                                          <p class="mb-0 text-dark">
                                            <strong>{{shippersObjects[shipperReceiversInfo.shippers[j].shipperID]}}</strong>
                                          </p>
                                          <p class="mb-0 text-dark">
                                             {{shipperReceiversInfo.shippers[j].pickupLocation}}
                                          </p>
                                          <p class="mb-0 text-dark">
                                            <strong>Pickup Date/Time:</strong>
                                            {{shipperReceiversInfo.shippers[j].date | date:'yyyy/MM/dd' }} {{shipperReceiversInfo.shippers[j].time}}
                                          </p>
                                          <p class="mb-0 text-dark">
                                            <strong>Pickup Instruction:</strong>
                                            {{shipperReceiversInfo.shippers[j].pickupInstruction}}
                                          </p>
                                          <p class="mb-0 text-dark">
                                            <strong
                                              >Contact Person at Pickup:</strong
                                            >
                                            {{shipperReceiversInfo.shippers[j].contactPerson}}
                                          </p>
                                          <p class="mb-0 text-dark">
                                            <strong>Phone:</strong>
                                            {{shipperReceiversInfo.shippers[j].phone}}
                                          </p>
                                          <table class="table table-responsive-lg table-bordered table-striped table-sm mt-3">
                                            <thead>
                                             <tr>

                                              <th>Sr. No.</th>
                                              <th>Commodity</th>
                                              <th>PU#</th>
                                              <th>Quantity</th>
                                              <th>Weight</th>
                                             </tr>
                                            </thead>
                                            <tbody>
                                             <tr *ngFor="let commodity of shipperReceiversInfo.shippers[j].commodity;let l = index">
                                              <td>{{l+1}}</td>
                                              <td>{{commodity.name}}</td>
                                              <td>{{commodity.pu}}</td>
                                              <td>{{commodity.quantity}} {{commodity.quantityUnit}}</td>
                                              <td>{{commodity.weight}} {{commodity.weightUnit}}</td>
                                             </tr>

                                         </table>
                                          <p class="mb-0 text-dark">
                                            <strong>Will Driver Load ?:</strong>
                                           {{shipperReceiversInfo.shippers[j].driverLoad ? 'Yes' : 'No'}}
                                          </p>
                                        </div>
                                      </div>
                                    </div>
                                 </section>
                                 <div class="mt-3"></div>
                              </div>
                            </div>

                            <div class="col-lg-4 pl-0 pr-0 offset-lg-2">
                              <div class="pl-0 pr-5" *ngFor="let receiver of shipperReceiversInfo.receivers; let k = index">

                                 <a data-toggle="collapse" [attr.data-target]="'#collapseReceiverArea-' + i + '-' + k" href="#collapseReceiverArea-{{i}}-{{k}}" aria-expanded="false">
                                    <label style="background: #F4F4F4;width: 100%;" class="text-dark text-5 font-weight-bold btn" (click)=caretClickReceiver(i,k) id="receiverArea-{{i}}-{{k}}">
                                      <span class="pull-left">Receiver {{k+1}}</span>
                                      <i class="fas fa-caret-right caret_icon pull-right mt-2"></i>
                                    </label>
                                    <div class="expand_caret caret"></div>
                                  </a>

                                  <section>
                                    <div id="collapseReceiverArea-{{i}}-{{k}}" class="collapse">
                                      <div class="row">
                                        <div class="col-lg-12">
                                          <p class="mb-0 text-dark">
                                            <strong>{{receiversObjects[shipperReceiversInfo.receivers[k].receiverID]}}</strong>
                                          </p>
                                          <p class="mb-0 text-dark">
                                             {{shipperReceiversInfo.receivers[k].dropOffLocation}}
                                          </p>
                                          <p class="mb-0 text-dark">
                                            <strong>Delivery Date/Time:</strong>
                                            {{shipperReceiversInfo.receivers[k].date | date:'yyyy/MM/dd'}} {{shipperReceiversInfo.receivers[k].time}}
                                          </p>
                                          <p class="mb-0 text-dark">
                                            <strong
                                              >Delivery Instruction:</strong
                                            >
                                            {{shipperReceiversInfo.receivers[k].dropOffInstruction}}

                                          </p>
                                          <p class="mb-0 text-dark">
                                            <strong
                                              >Contact Person at
                                              Delivery</strong
                                            >
                                            {{shipperReceiversInfo.receivers[k].contactPerson}}

                                          </p>
                                          <p class="mb-0 text-dark">
                                            <strong>Phone:</strong>
                                            {{shipperReceiversInfo.receivers[k].phone}}
                                          </p>
                                          <table class="table table-responsive-lg table-bordered table-striped table-sm mt-3">
                                            <thead>
                                             <tr>

                                              <th>Sr. No.</th>
                                              <th>Commodity</th>
                                              <th>DEL#</th>
                                              <th>Quantity</th>
                                              <th>Weight</th>
                                             </tr>
                                            </thead>
                                            <tbody>
                                             <tr *ngFor="let commodity of shipperReceiversInfo.receivers[k].commodity;let m = index">
                                              <td>{{m+1}}</td>
                                              <td>{{commodity.name}}</td>
                                              <td>{{commodity.del}}</td>
                                              <td>{{commodity.quantity}} {{commodity.quantityUnit}}</td>
                                              <td>{{commodity.weight}} {{commodity.weightUnit}}</td>
                                             </tr>

                                         </table>
                                          <p class="mb-0 text-dark">
                                            <strong>Will Driver Load ?:</strong>
                                            {{shipperReceiversInfo.receivers[k].driverUnload ? 'Yes': 'No'}}
                                          </p>
                                        </div>
                                      </div>
                                    </div>
                                 </section>
                                 <div class="mt-3"></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-lg-12">
            <div class="bg-white p-3">
              <div class="row">
                <div class="col-lg-6 text-dark">
                  <div id="vehicle-details" class="">
                    <div class="row m-0 back-color-gray">
                      <div class="col-lg-12 p-2">
                        <h2
                          class="pull-left mt-0 mb-0 text-4 font-weight-semibold text-dark"
                        >
                          Additional Details
                        </h2>
                      </div>
                    </div>
                    <div class="row m-0">
                      <div
                        class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray"
                      >
                        Drop Asset:
                      </div>
                      <div class="col-lg-8 p-2 border-box">{{additionalDetails.dropTrailer ? 'Yes' : 'No'}}</div>
                    </div>
                    <div class="row m-0" *ngIf="!additionalDetails.dropTrailer">
                      <div
                        class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray"
                      >
                        Asset Type:
                      </div>
                      <div class="col-lg-8 p-2 border-box">{{ additionalDetails.trailerType}}</div>
                    </div>
                    <!-- <div class="row m-0">
                      <div
                        class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray"
                      >
                        Load Type:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                         {{additionalDetails.loadType.hazMat ? 'Hazmat' : ''}}{{additionalDetails.loadType.oversize ? ',' : ''}}
                         {{additionalDetails.loadType.oversize ? 'Over Size' : ''}}{{additionalDetails.loadType.reefer ? ',' : ''}}
                         {{additionalDetails.loadType.reefer ? 'Reefer' : ''}}{{additionalDetails.loadType.tanker ? ',' : ''}}
                         {{additionalDetails.loadType.tanker ? 'Tanker' : ''}}

                      </div>
                    </div> -->
                    <div class="row m-0" *ngIf="additionalDetails.trailerType == 'reefer'">
                      <div
                        class="col-lg-4 p-2 font-weight-bold text-3 text-left back-color-gray"
                      >
                        Temperature Required:
                      </div>
                      <div class="col-lg-8 p-2 border-box">
                        From
                        {{additionalDetails.refeerTemp.minTemprature}}
                        {{additionalDetails.refeerTemp.minTempratureUnit }}
                        To
                        {{additionalDetails.refeerTemp.maxTemprature }}
                        {{additionalDetails.refeerTemp.maxTempratureUnit }}
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-xl-6 col-12 mb-3 pl-0 pr-0">
                  <div class="col-xl-12 col-12 mb-3">
                    <div class="boxshadow1 maindisbox w100 mb-3 pull-left">
                      <div class="widgetload">
                        <div class="widgettbload">
                          <span class="pull-right text-3 mt-2 text-dark">
                          </span>
                          <h2
                            class="pull-left mt-0 mb-0 text-4 font-weight-semibold text-dark"
                          >
                            Miles for the Load is entered using: 
                            <span *ngIf="milesInfo.calculateBy == 'pcmiles'">PC miles</span>
                            <span *ngIf="milesInfo.calculateBy != 'pcmiles'">Manual</span>
                          </h2>
                        </div>

                        <div class="widgetlinfo">
                          <table class="table table-responsive-lg table-bordered table-striped table-sm mb-0">
                            <thead>
                              <tr class="bgcol2">
                                <th>From</th>
                                <th>To</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngIf="milesArr?.length == 0">
                                <td>No data found</td>
                              </tr>
                              <tr *ngFor="let data of milesArr">
                                <td>
                                  <span *ngFor="let ship of data.shippers; ">
                                    <span *ngFor="let point of ship.pickupPoint; let s=index">
                                      <span *ngIf="point.manual">
                                        {{s+1}}. {{ point.address.pickupLocation }}
                                      </span>
                                      <span *ngIf="!point.manual">
                                        {{s+1}}. {{ point.address.address }}
                                        {{s+1}}. {{ point.address.city }}
                                        {{s+1}}. {{ point.address.state }}
                                        {{s+1}}. {{ point.address.country }}
                                        {{s+1}}. {{ point.address.zipCode }}
                                      </span>
                                    <br>
                                    </span>
                                    
                                  </span>
                                </td>
                                <td>
                                  <span *ngFor="let rec of data.receivers; let r=index">
                                    {{r+1}}. {{ rec.dropOffLocation }}
                                    <br>
                                  </span>
                                </td>
                              </tr>
                            </tbody>
                          </table>

                          <p class="mb-0 mt-3 text-dark text-right">
                            <strong>Total Miles: </strong>
                            <span class="">{{milesInfo.totalMiles}} Miles</span>
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- <div class="col-xl-12 col-12 mb-3">
                    <div class="boxshadow1 maindisbox w100 pull-left">
                      <div class="widgetload">
                        <div class="widgettbload">
                          <span class="pull-right text-3 mt-2 text-dark">
                          </span>
                          <h2
                            class="pull-left mt-0 mb-0 text-4 font-weight-semibold text-dark"
                          >
                            Advance Received
                          </h2>
                        </div>

                        <div class="widgetlinfo">
                          <table
                            class="table table-responsive-lg table-bordered table-striped table-sm mb-0"
                          >
                            <thead>
                              <tr class="bgcol2">
                                <th>Receipt Number</th>
                                <th>Payment Date</th>
                                <th class="">Payment Mode</th>
                                <th class="">Reference</th>
                                <th class="">Amount</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td class="loadid">
                                  <a href="#">RCP013676000001</a>
                                </td>
                                <td>5/28/2020</td>
                                <td>Check</td>
                                <td>-</td>
                                <td>$50.00</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div> -->
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-lg-12">
            <div class="bg-white p-3">
              <div class="row">
                <div class="col-xl-6 col-12 mb-3 pl-0 pr-0">
                  <div class="col-xl-12 col-12 mb-3">
                    <div class="boxshadow1 maindisbox w100 pull-left">
                      <div class="widgetload">
                        <div class="widgettbload">
                          <span class="pull-right text-3 mt-2 text-dark">
                          </span>
                          <h2
                            class="pull-left mt-0 mb-0 text-4 font-weight-semibold text-dark"
                          >
                            Charges
                          </h2>
                        </div>

                        <div class="widgetlinfo">
                          <div class="col-lg-2 pull-left">
                            <img
                              src="assets/img/icon-cur.png"
                              class="img-fluid"
                              alt="shipper"
                            />
                          </div>
                          <div class="col-lg-10 pull-left">
                            <p class="mb-0 text-dark">
                              Freight Fee
                              <span class="pull-right">{{charges.freightFee.amount}} {{charges.freightFee.currency}}</span>
                            </p>
                            <p class="mb-0 text-dark">
                              Fuel Surcharge
                              <span class="pull-right">{{charges.fuelSurcharge.amount}} {{charges.freightFee.currency}}</span>
                            </p>
                            <p class="mb-0 text-dark">
                              Accessorial Amount
                              <span class="pull-right">{{charges.accessorialFeeInfo.total}} {{charges.freightFee.currency}}</span>
                            </p>
                            <p class="mb-0 text-dark">
                              Accessorial Deduction Amount
                              <span class="pull-right">{{charges.accessorialDeductionInfo.total}} {{charges.freightFee.currency}}</span>
                            </p>

                            <!-- <p class="mb-0 text-dark" *ngIf="stateCode == ''"> Tax Amount <span class="pull-right">${{taxesTotal}}</span> </p> -->
                            <p class="mb-0 text-dark" *ngIf="!zeroRated">
                              Tax Amount
                              <span *ngIf="stateCode != ''">
                                ( <span class="font-weight-semibold">{{ stateCode }}</span> )
                              </span>
                              <span class="pull-right">{{taxableAmount}} {{charges.freightFee.currency}}</span>
                            </p>

                            <p class="mb-0 text-dark bordtopdas">
                              <strong>Total Charges</strong>
                              <span class="pull-right">{{totalCharges}} {{charges.freightFee.currency}}</span>
                            </p>
                            <!-- <p class="mb-0 text-dark bordtopdas">
                              <strong>Advance Received</strong>
                              <span class="pull-right">${{advances}}</span>
                            </p> -->
                            <p class="mb-0 text-dark bordtopdas">
                              <strong>Balance</strong>
                              <span class="pull-right">{{ balance }} {{charges.freightFee.currency}}</span>
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-xl-3 col-12 pl-0 pr-0">
                  <div class="col-xl-12 col-12 mb-3">
                    <div class="boxshadow1 maindisbox w100 pull-left">
                      <div class="widgetload">
                        <div class="widgettbload">
                          <h2
                            class="pull-left mt-0 mb-0 text-4 font-weight-semibold text-dark"
                          >
                            <i class="fas fa-box"></i> Attachments
                          </h2>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <div class="row my-2 px-2" *ngFor="let item of attachments; let d= index">
                              <div class="col-5"><a href="javascript:;" data-toggle="modal" data-target="#viewDocModal"
                                    (click)="setPDFSrc(item.path)">Document {{d+1}}</a> </div>
                              <div class="col-  3 text-right">
                                 <em class="far fa-file text-dak mr-1" (click)="setPDFSrc(item.path)" data-toggle="modal"
                                    data-target="#viewDocModal"></em>
                                 <a href="javascript:;" (click)="delete('attachment',item.name, d)" class="modal-with-form">
                                    <em class="fas fa-times text-danger"></em></a>
                              </div>
                           </div>
                           <div *ngIf="attachments.length == 0;" class="my-2 px-2">
                                <span>No attachment found</span>
                           </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-xl-3 col-12 pl-0 pr-0">
                    <div class="col-xl-12 col-12 mb-3">
                      <div class="boxshadow1 maindisbox w100 pull-left">
                        <div class="widgetload">
                          <div class="widgettbload">
                            <div class="row align-items-center">
                                <div class="col-6">
                                    <h2
                                    class="pull-left mt-0 mb-0 text-4 font-weight-semibold text-dark"
                                >
                                    <i class="fas fa-box"></i> Upload BOL/POD
                                </h2>
                               </div>
                                <div class="col-6">
                                    <input
                                      type="file"
                                      (change)="selectDocuments($event)"
                                      multiple
                                      class="p-0 form-control pull-right mb-0"
                                      id="bolUpload"
                                    />
                                  </div>
                            </div>
                            </div>
                          <div class="row">
                            <div class="col-12">
                              <div class="row my-2 px-2" *ngFor="let doc of docs;let d= index">
                                <div class="col-7"><a href="javascript:;" data-toggle="modal" data-target="#viewDocModal"
                                      (click)="setPDFSrc(doc.path)">Bol {{d+1}}</a> </div>
                                <div class="col-3 text-right">
                                   <em class="far fa-file text-dak mr-1" (click)="setPDFSrc(doc.path)" data-toggle="modal"
                                      data-target="#viewDocModal"></em>
                                   <a href="javascript:;" (click)="delete('docs',doc.name, d)" class="modal-with-form">
                                      <em class="fas fa-times text-danger"></em></a>
                                </div>
                             </div>
                             <div *ngIf="docs.length == 0;" class="my-2 px-2">
                                <span>No document found</span>
                           </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </section>
  </div>
</section>
<!-- Modal -->
<div
  class="modal fade"
  id="templateSelectionModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="templateSelectionModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" style="max-width: 1200px" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="templateSelectionModalLabel">
          Select Invoice Template
        </h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <i
            class="far fa-window-close modal-dismiss"
            style="font-size: 25px"
          ></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="invoice-templates__listing">
          <ul class="m-0 p-0 d-flex flex-wrap">
            <li
              class="position-relative"
              *ngFor="let item of templateList; let i = index"
              [ngClass]="{ active: selectedItem === i }"
              (click)="selectedItem = i"
            >
              <img src="{{ item }}" class="img-fluid" />
              <div class="invoice-actions">
                <div>
                  <a href="javascript:;" class="btn btn-success"
                    >Use template</a
                  >
                </div>
              </div>
              <div class="selected-template">
                <i class="fa fa-check-circle fa-fw" style="color: #000"></i>
              </div>
            </li>
          </ul>
        </div>
      </div>
      <div class="modal-footer">
        <a (click)="previewModal()" href="javascript:;" class="btn btn-success"
          >Preview</a
        >
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="previewInvoiceModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="previewInvoiceModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" style="max-width: 900px" role="document">
    <div class="modal-content">
      <div class="modal-body p-0">
        <section class="invoice-wrapper">
          <table width="100%">
              <tbody>
                  <tr>
                      <td>
                          <table width="100%">
                              <tbody><tr>
                                  <td width="60%" class="title" valign="middle" style="padding-bottom: 0;text-align: center;">
                                      <img src="logo.png" style="width:100%; max-width:250px;margin: 0 auto">
                                  </td>
                              </tr>
                          </tbody></table>
                      </td>
                  </tr>
                 
                  <tr>
                      <td>
                        <div class="invoice-iner__wrapper">
                          <table width="100%">
                            <tbody>
                                 <tr>
                                    <td style="padding-bottom: 0;">
                                        <b style="font-size: 12px;">SHIPPER:</b> <br>
                                        Diamond INC <br>
                                        2705 N. Enterprise St <br>
                                        Orange, USA 92865 <br>
                                        (403) 987-76567 <br>
                                        Contact Person: <b>William B.</b> <br>
                                        Ship Date: <b>12 Sep, 2020</b>
                                    </td>
                                    
                                    <td align="right" style="padding-bottom: 0;">
                                        <b style="font-size: 12px;">CONSIGNEE:</b> <br>
                                        Daynight Electric INC <br>
                                        15 Hodges Mews, High Wycombe <br>
                                        HP12 3JL, Canada 67R67 <br>
                                        (403) 635-6352 <br>
                                        Contact Person: <b>John Smith</b> <br>
                                        Delivery Date: <b>15 Sep, 2020</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 20px 0 0;">
                                        <b style="font-size: 12px;">CARRIER:</b> <br>
                                        Diamond INC <br>
                                        2705 N. Enterprise St <br>
                                        Orange, USA 92865 <br>
                                        (403) 987-76567 <br>
                                        Contact Person: <b>William B.</b> <br>
                                        Ship Date: <b>12 Sep, 2020</b>
                                    </td>
                                    <td align="right" style="padding: 20px 0 0;">
                                        <table>
                                            <tbody>
                                                <tr>
                                                    <td align="right" style="padding-bottom: 10px">
                                                        <span style="font-size: 12px;text-transform: uppercase;">
                                                            <b>Invoice</b> <br>
                                                        </span> 
                                                        6545
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="right" style="padding-bottom: 10px"> 
                                                        <span style="font-size: 12px;text-transform: uppercase;">
                                                            <b>Invoice Date</b> <br>
                                                        </span>  
                                                        10 Sep, 2020 
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="right" style="padding-bottom: 10px">
                                                        <span style="font-size: 12px;text-transform: uppercase;">
                                                            <b>Order</b> 
                                                        </span><br>
                                                        454667
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                        <table class="invoice-iner__wrapper" width="100%" style="border-top: none;">
                            <tbody>
                                 <tr>
                                    <td colspan="6">
                                        <table class="table-striped" width="100%">
                                            <thead>
                                                <tr style="color: #aeaeae;font-size: 12px;">
                                                    <td colspan="3">COMMODITY</td>
                                                    <td style="width: 70px">WEIGHT</td>
                                                    <td style="width: 70px">QTY</td>
                                                    <td style="width: 100px" align="right">AMOUNT</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="item">
                                                    <td colspan="3">ABC commodity</td>
                                                    <td>100 KG</td>
                                                    <td>10</td>
                                                    <td align="right"><small> CAD </small>1,000</td>
                                                </tr>
                                                <tr class="item">
                                                    <td colspan="3">XYZ commodity</td>
                                                    <td>100 KG</td>
                                                    <td>50</td>
                                                    <td align="right"><small> CAD </small>5,000</td>
                                                </tr>
                                                 
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <table class="invoice-iner__wrapper" width="100%" style="border-top: none;">
                            <tbody>
                                <tr>
                                    <td colspan="6">
                                        <table class="table-striped" width="100%">
                                            <thead>
                                                <tr style="color: #aeaeae;font-size: 12px;">
                                                     <td>FEE METHOD</td>
                                                    <td style="width: 70px">VALUE</td>
                                                    <td style="width: 70px">RATE</td>
                                                    <td style="width: 100px">AMOUNT</td>
                                                    <td style="width: 100px">TAX</td>
                                                    <td style="width: 100px" align="right">TOTAL</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="item">
                                                    <td>Freight Fees <small>(Per Mile)</small></td>
                                                    <td>1200 Miles</td>
                                                    <td><small>CAD</small> 2.00</td>
                                                    <td><small>CAD</small> 2,400</td>
                                                    <td><small>CAD</small> 400 <small>(13.0%)</small></td>
                                                    <td align="right"><small> CAD </small>2,800</td>
                                                </tr>
                                                <tr>
                                                    <td>Fuel Surcharge <small>(Per Mile)</small></td>
                                                    <td>1200 Miles</td>
                                                    <td><small>CAD</small> 1.00</td>
                                                    <td><small>CAD</small> 1,200</td>
                                                    <td><small>CAD</small> 250 <small>(12.0%)</small></td>
                                                    <td align="right"><small>CAD</small> 1,450</td>
                                                    
                                                </tr>
                                                <tr>
                                                    <td>Tarp <small>(Other Charges)</small></td>
                                                    <td>-</td>
                                                    <td><small>CAD</small> 30</td>
                                                    <td><small>CAD</small> 30</td>
                                                    <td>-</td>
                                                    <td align="right"><small>CAD</small> 30</td>
                                                </tr>
                                                <tr class="bg-transparent">
                                                    <td align="right" colspan="5">Sub Total</td>
                                                    <td align="right"><small>CAD </small>6,000</td>
                                                </tr>
                                                <tr class="bg-transparent">
                                                    <td colspan="5" align="right">Tax</td>
                                                    <td align="right"><small>CAD </small>4,450</td>
                                                </tr>
                                                <tr class="bg-transparent">
                                                    <td align="right" colspan="5">Discount</td>
                                                    <td align="right"><small>CAD </small>450</td>
                                                </tr>
                                            </tbody>
                                             <tfoot class="border-bottom border-1">
                                                <tr>
                                                    <th colspan="5" align="right">TOTAL</th>
                                                    <th align="right"><small>CAD </small>10,000</th>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        </div>
                          
                      </td>
                  </tr>
                  <tr>
                      <td colspan="6" style="padding-top: 20px;">
                          <table>
                              <tbody><tr>
                                  <td><b style="font-size: 12px;">INSTRUCTIONS:</b></td>
                              </tr>
                              <tr>
                                  <td>
                                      <ol style="margin: 0; padding-left: 15px; ">
                                          <li>Please ensure driver identifies himself as p/u on behalf of total logistics</li>
                                          <li>Driver must be able and willing to provide either company photo id or another piece of suitable picture identification upon shipper/receiver request</li>
                                          <li> All drivers are required to have safety shoes and vest</li>
                                          <li>Please note that all food products are subject to fda review and therefore all drivers must report to the fda office at the time of crossing</li>
                                      </ol>
                                  </td>
                              </tr>
                          </tbody></table>
                      </td>
                  </tr>
  
               <tr>
                  <td colspan="6" style="padding-top: 20px;">
                      <table>
                          <tbody><tr>
                              <td><b style="font-size: 12px;">TERMS:</b></td>
                          </tr>
                          <tr>
                              <td>
                                  <ol style="margin: 0; padding-left: 15px; ">
                                      <li>Invoice with all paperwork has to be sent to apinvoice@totallogistics.Com</li>
                                      <li>Time in &amp; out required for pick-up and delivery</li>
                                      <li>Third party billing by total logistics control</li>
                                      <li>All trailers must arrive at receivers sealed - ftls sealed and ltls sealed or padlocked</li>
                                      <li>Fuel surcharge included in all rates</li>
                                      <li>All trailers must be 53' in length with barn doors, food grade, odour-free, dry and clean</li>
                                      <li>Do not mix with hazmat or toxic materials</li>
                                  </ol>
                              </td>
                          </tr>
                      </tbody></table>
                  </td>
              </tr>
              </tbody>
          </table>
      </section>
      </div>
      <div class="modal-footer">
        <button class="btn btn-default" data-dismiss="modal">Cancel</button>
        <a href="javascript:;" (click)="generatePDF()" class="btn btn-success"
          >Print</a
        >
      </div>
    </div>
  </div>
</div>

<!-- VIEW DOCUMENT MODAL -->
<div
  class="modal fade"
  id="viewDocModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="viewDocModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewDocModalLabel">View Document</h5>
        <button
          type="button"
          (click)="setSrcValue()"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <div class="form-group col-md-12">
            <div>
              <iframe
                [src]="pdfSrc"
                frameborder="0"
                width="100%"
                height="400px"
              >
              </iframe>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-default"
          (click)="setSrcValue()"
          data-dismiss="modal"
        >
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>



