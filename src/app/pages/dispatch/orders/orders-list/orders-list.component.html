<style>
  .extra {
    display: none;
  }
</style>
<section class="body">
  <div class="inner-wrapper">
    <section role="main" class="content-body pl-0 pt-0 pr-0">
      <header class="page-header flex align-items-center justify-content-start">
        <form class="formgrid grid">
          <div class="row">
            <div class="col" style="margin-left: 20px; margin-top: 5px">
              <div class="row" style="padding-top: 9px">
                <div class="col-md-2 col-lg-2 pr-1">
                  <ng-select [(ngModel)]="orderFiltr.category" name="category" placeholder="Search by Category"
                    (change)="categoryChange($event)">
                    <ng-option *ngFor="let data of categoryFilter" value="{{ data.value }}">
                      {{ data.name }}</ng-option>
                  </ng-select>
                </div>

                <div class="col-md-2 col-lg-2 pr-1">
                  <div class="input-group input-group-md mb-3" *ngIf="
                      orderFiltr.category != 'customer' &&
                      orderFiltr.category != 'orderType' &&
                      orderFiltr.category != 'orderStatus'
                    ">
                    <input type="text" class="form-control" name="searchValue" [(ngModel)]="orderFiltr.searchValue"
                      placeholder="Search" />
                  </div>

                  <ng-select [(ngModel)]="orderFiltr.searchValue" name="searchValue" placeholder="Search By
                    Customer" *ngIf="orderFiltr.category == 'customer'">
                    <ng-option *ngFor="let data of customersObjects | keyvalue" value="{{ data.key }}">
                      {{ data.value }}</ng-option>
                  </ng-select>

                  <ng-select [(ngModel)]="orderFiltr.searchValue" name="searchValue" placeholder="Search By Order
                    Status" *ngIf="orderFiltr.category == 'orderStatus'">
                    <ng-option *ngFor="let data of statusData" value="{{ data.value }}">
                      {{ data.name }}</ng-option>
                  </ng-select>

                  <ng-select [(ngModel)]="orderFiltr.searchValue" name="searchValue" placeholder="Search By Order
                    Type" *ngIf="orderFiltr.category == 'orderType'">
                    <ng-option value="FTL"> FTL</ng-option>
                    <ng-option value="LTL"> LTL</ng-option>
                  </ng-select>
                </div>

                <div class="col-lg-3 col-md-3 pr-1">
                  <div class="input-daterange input-group">
                    <span class="input-group-prepend">
                      <span class="input-group-text">
                        <i class="fas fa-calendar-alt"></i>
                      </span>
                    </span>
                    <input [(ngModel)]="orderFiltr.startDate" name="fromDate" type="text" placeholder="yyyy/mm/dd"
                      (click)="from.toggle()" ngbDatepicker #from="ngbDatepicker" class="form-control"
                      autocomplete="off" [minDate]="dateMinLimit" [maxDate]="futureDatesLimit" />
                    <span class="input-group-text border-left-0 border-right-0 rounded-0">
                      to
                    </span>
                    <input [(ngModel)]="orderFiltr.endDate" name="toDate" type="text" placeholder="yyyy/mm/dd"
                      (click)="to.toggle()" ngbDatepicker #to="ngbDatepicker" class="form-control" autocomplete="off"
                      [minDate]="dateMinLimit" [maxDate]="futureDatesLimit" />
                  </div>
                </div>

                <div class="col-md-2 col-lg-2">
                  <button type="submit" class="btn btn-sm btn-success mr-3" [disabled]="isSearch"
                    (click)="filterOrders()">
                    Search
                  </button>
                  <button type="submit" class="btn btn-sm btn-success" [disabled]="isSearch" (click)="resetFilter()">
                    Reset
                  </button>
                </div>
              </div>
            </div>
          </div>
        </form>
      </header>
      <section class="m-2">
        <div class="row mb-3">
          <div class="col-lg-12">
            <div class="bg-white p-3 text-dark text-capitalize orders-listing">
              <div class="form-group row">
                <div class="col-lg-12" style="height: calc(100vh - 149px); overflow-y: scroll">
                  <p-table #dt [value]="orders" [resizableColumns]="true" columnResizeMode="expand"
                    scrollDirection="both" [columns]="selectedColumns" [loading]="!loaded"
                    styleClass=" p-datatable-sm p-datatable-gridlines p-datatable-striped" [scrollable]="true"
                    [loading]="!loaded" scrollHeight="100%" dataKey="orderNumber" responsiveLayout="scroll">
                    <ng-template pTemplate="caption">
                      <div class="p-d-flex d-flex justify-content-between align-items-center">
                        <div>
                          <h3 class="m-0">Orders</h3>
                        </div>
                        <div class="text-right">
                          <span>Showing {{ orders.length }} entries</span>
                          &nbsp;
                          <button type="button" pButton (click)="refreshData()" pTooltip="Refresh"
                            class="p-button-outlined mr-2" icon="fas fa-sync"></button>

                          <button type="button" pButton pTooltip="Add" routerLink="/dispatch/orders/add"
                            class="p-button-outlined mr-2" icon="pi pi-plus"></button>

                          <button pButton pRipple pTooltip="Clear Filter" class="p-button-outlined mr-2"
                            (click)="clear(dt)" icon="pi pi-filter-slash"></button>

                          <button type="button" pButton pRipple class="p-button-outlined mr-2"
                            icon="fas fa-regular fa-file-excel" (click)="dt.exportCSV()" pTooltip="Excel"></button>
                        </div>
                      </div>
                    </ng-template>
                    <ng-template pTemplate="header">
                      <tr>
                        <th style="width: 3%" alignFrozen="left" pFrozenColumn [frozen]="true"></th>
                        <th *ngFor="let column of dataColumns" [pSortableColumn]="dataColumns.field" pResizableColumn
                          [ngStyle]="{ width: column.width }">
                          <div [ngSwitch]="column.field">
                            <!-- Event Status Filter Customization -->
                            <span *ngSwitchCase="'newStatus'">
                              <div class="flex justify-content-center align-items-center" alignFrozen="left"
                                pFrozenColumn [frozen]="true">
                                {{ column.header }}
                                <p-sortIcon [field]="column.field"></p-sortIcon>
                                <p-columnFilter [type]="column.type" [field]="column.field" [showOperator]="false"
                                  matchMode="contains" [showMatchModes]="false" [showAddButton]="false" display="menu">
                                  <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                    <p-multiSelect [options]="statusData" placeholder="Any"
                                      (onChange)="filter($event.value)" optionLabel="name" optionValue="value">
                                      <ng-template let-option pTemplate="item">
                                        <div>
                                          <span class="ml-1">{{
                                            option.name
                                            }}</span>
                                        </div>
                                      </ng-template>
                                    </p-multiSelect>
                                  </ng-template>
                                </p-columnFilter>
                              </div>
                            </span>

                            <span *ngSwitchDefault>
                              <div class="flex justify-content-center align-items-center" alignFrozen="right"
                                pFrozenColumn [frozen]="true">
                                {{ column.header }}
                                <p-sortIcon [field]="column.field"></p-sortIcon>
                                <p-columnFilter [type]="column.type" [field]="column.field" matchMode="contains"
                                  [showMatchModes]="false" [showOperator]="false" [showAddButton]="false"
                                  display="menu">
                                </p-columnFilter>
                              </div>
                            </span>
                          </div>
                        </th>
                        <th style="width: 6%" alignFrozen="right" pFrozenColumn [frozen]="true">
                          Actions
                        </th>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-order let-columns="columns" let-rowIndex="rowIndex"
                      let-expanded="expanded">
                      <tr style="cursor: pointer">
                        <td alignFrozen="left" pFrozenColumn [frozen]="true" style="width: 3%">
                          <button type="button" pButton [pRowToggler]="order"
                            class="p-button-text p-button-rounded p-button-plain" [icon]="
                              expanded
                                ? 'pi pi-chevron-down'
                                : 'pi pi-chevron-right'
                            "></button>
                        </td>
                        <td (click)="directToDetail(order.orderID)" class="font-weight-bold" [ngStyle]="{
                            width: find(columns, { field: 'orderNumber' }).width
                          }">
                          {{ order.orderNumber }}
                        </td>
                        <td (click)="directToDetail(order.orderID)" [ngStyle]="{
                            width: find(columns, { field: 'orderMode' }).width
                          }">
                          {{ order.orderMode }}
                        </td>
                        <td (click)="directToDetail(order.orderID)" [ngStyle]="{
                            width: find(columns, { field: 'createdDate' }).width
                          }">
                          {{ order.createdDate | date: "yyyy/MM/dd" }}
                        </td>
                        <td (click)="directToDetail(order.orderID)" [ngStyle]="{
                            width: find(columns, { field: 'customerName' })
                              .width
                          }">
                          <div style="white-space: pre-line">
                            {{ order.customerName }}
                          </div>
                        </td>
                        <td (click)="directToDetail(order.orderID)" [ngStyle]="{
                            width: find(columns, { field: 'cusConfirmation' })
                              .width
                          }">
                          <div style="white-space: pre-line">
                            {{ order.cusConfirmation }}
                          </div>
                        </td>

                        <td (click)="directToDetail(order.orderID)" [ngStyle]="{
                            width: find(columns, { field: 'shipperName' }).width
                          }">
                          <div style="white-space: pre-line">
                            {{ order.shipperName }}
                          </div>
                        </td>

                        <td (click)="directToDetail(order.orderID)" [ngStyle]="{
                            width: find(columns, { field: 'receiverName' })
                              .width
                          }">
                          <div style="white-space: pre-line">
                            {{ order.receiverName }}
                          </div>
                        </td>

                        <td (click)="directToDetail(order.orderID)" [ngStyle]="{
                            width: find(columns, { field: 'amount' }).width
                          }">
                          {{ order.amount }}
                          <br />
                        </td>
                        <td (click)="directToDetail(order.orderID)" [ngStyle]="{
                            width: find(columns, { field: 'invoiceData' }).width
                          }">
                          <span class="badge badge-danger" *ngIf="!order.invoicedTime">Pending</span>
                          <span class="badge badge-success" *ngIf="order.invoicedTime">Invoiced</span>

                          <br />
                        </td>
                        <td (click)="directToDetail(order.orderID)" [ngStyle]="{
                            width: find(columns, { field: 'paymentData' }).width
                          }">
                          <div class="badges">
                            <span class="badge badge-primary" *ngIf="!order.invStatus">NA</span>
                            <span class="badge badge-secondary" *ngIf="order.invStatus === 'void'">Void</span>
                            <span class="badge badge-success" *ngIf="order.invStatus === 'paid'">Paid</span>
                            <span class="badge badge-danger" *ngIf="order.invStatus === 'open'">Open</span>
                            <span class="badge badge-warning" *ngIf="order.invStatus === 'partially_paid'">Partial
                            </span>
                          </div>
                          <br />
                        </td>
                        <td (click)="directToDetail(order.orderID)" [ngStyle]="{
                            width: find(columns, { field: 'newStatus' }).width
                          }">
                          <div class="badges">
                            <span class="badge badge-dark p-1" style="background-color: #4e97d6"
                              *ngIf="order.newStatus === 'confirmed'">confirmed</span>
                            <span class="badge badge-dark p-1" style="background-color: #171717"
                              *ngIf="order.newStatus === 'created'">created</span>
                            <span class="badge badge-dark p-1" style="background-color: cadetblue"
                              *ngIf="order.newStatus === 'brokerage'">brokerage</span>
                            <span class="badge badge-dark p-1" style="color: black; background-color: #f7e363"
                              *ngIf="order.newStatus === 'dispatched'">dispatched</span>
                            <span class="badge badge-dark p-1" style="background-color: #171717"
                              *ngIf="order.newStatus === 'attached'">attached</span>
                            <span class="badge badge-dark p-1" style="background-color: #f93121"
                              *ngIf="order.newStatus === 'tonu'">tonu</span>
                            <span class="badge badge-dark p-1" style="background-color: #f93121"
                            *ngIf="order.newStatus === 'cancelled'">cancelled</span>
                            <span class="badge badge-dark p-1" style="color: black; background-color: #f7e363"
                              *ngIf="order.newStatus === 'started'">started</span>
                            <span class="badge badge-dark p-1" style="background-color: orange"
                              *ngIf="order.recall">delivered(R)</span>
                            <span class="badge badge-success" style="color: black; background-color: #a1d9ae"
                              *ngIf="order.newStatus === 'delivered'">delivered</span>
                            <span class="badge badge-dark p-1" style="background-color: #47a447"
                              *ngIf="order.newStatus === 'settled'">settled</span>
                            <span class="badge badge-dark p-1" style="background-color: #f4978e"
                              *ngIf="order.newStatus === 'en-route'">en-route</span>
                            <br />
                          </div>
                        </td>
                        <td style="width: 6%; overflow: inherit !important" pFrozenColumn alignFrozen="right"
                          [frozen]="true">
                          <div class="dropdown dropbottom">
                            <button (click)="op.toggle($event)" class="bg-transparent border-0" type="button"
                              id="dropdownMenuButton-{{ rowIndex }}">
                              <i class="fas fa-ellipsis-v"></i>
                            </button>
                            <p-overlayPanel #op [showCloseIcon]="true" [style]="{ width: '160px' }">
                              <ng-template pTemplate>
                                <a *ngIf="order.orderStatus != 'delivered'"
                                  (click)="op.hide(); editOrder(order.orderID)" class="dropdown-item">Edit</a>
                                <a *ngIf="order.orderStatus === 'confirmed'" (click)="
                                    op.hide();
                                    createTrip(order.orderID, order.orderNumber)
                                  " class="dropdown-item">Create Trip</a>
                                <a *ngIf="order.orderStatus === 'confirmed'" class="dropdown-item" (click)="
                                    openSchedulerModal(
                                      order.orderID,
                                      order.orderNumber
                                    )
                                  ">Scheduler</a>
                                <a *ngIf="
                                    order.orderStatus == 'created' ||
                                    order.orderStatus == 'confirmed'
                                  " class="dropdown-item" href="javascript:;"
                                  (click)="op.hide(); deactivateOrder(order)">Delete</a>
                                <a *ngIf="order.orderStatus === 'created'" class="dropdown-item" (click)="
                                    op.hide(); confirmEmail(order, rowIndex)
                                  ">Confirm</a>
                                <a *ngIf="
                                    order.orderStatus === 'created' ||
                                    order.orderStatus === 'confirmed'
                                  " class="dropdown-item" (click)="
                                    op.hide();
                                    showBrokerageModal(
                                      order,
                                      ordersDraw,
                                      rowIndex,
                                      'all'
                                    )
                                  ">Brokerage</a>
                                <a *ngIf="order.orderStatus === 'brokerage'" class="dropdown-item" (click)="
                                    op.hide();
                                    updateCreatedStatus(
                                      order,
                                      ordersDraw,
                                      rowIndex
                                    )
                                  ">Cancel Brokerage</a>
                                <a class="dropdown-item" (click)="op.hide(); cloneOrder(order.orderID)">Clone</a>
                                <a *ngIf="order.canRecall" (click)="
                                    op.hide(); recallOrder(order.orderID)
                                  " class="dropdown-item">Recall</a>
                              </ng-template>
                            </p-overlayPanel>
                          </div>
                        </td>
                      </tr>
                    </ng-template>

                    <!-- Empty Template -->
                    <ng-template pTemplate="emptymessage" let-columns>
                      <div class="col-lg-12 mt-3 text-center">
                        {{ dataMessage }}
                        <br /><br />
                      </div>
                    </ng-template>
                    <!-- Summary Section with Load More button -->

                    <ng-template pTemplate="summary" let-columns>
                      <div class="col-lg-12 mt-3 text-center" *ngIf="
                          lastEvaluatedKey !== 'end' && orders.length !== 0
                        ">
                        <button type="button " (click)="onScroll($event)" class="btn btn-success btn-sm text-light">
                          Load More..
                        </button>

                        <br /><br />
                      </div>
                      <div class="col-lg-12 mt-3 text-center" *ngIf="lastEvaluatedKey === 'end'">
                        Total Records: {{ orders.length }}
                      </div>
                    </ng-template>

                    <ng-template pTemplate="rowexpansion" let-order>
                      <tr>
                        <td width="40%" class="p-0 custom-bg-light border-0">
                          <div class="p-3">
                            <p-table [value]="order.shippersReceiversInfo"
                              styleClass=" p-datatable-md p-datatable-gridlines p-datatable-striped">
                              <ng-template pTemplate="header">
                      <tr>
                        <th class="border-0 p-0">Pickup Location</th>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-ord>
                      <tbody>
                        <tr>
                          <td>
                            <b>Date: </b>
                            {{
                            ord.shippers[0].pickupPoint[0]
                            .dateAndTime
                            | date
                            : "yyyy/MM/dd
                            hh:mm a"
                            }}<br />
                            <b>Location: </b>
                            <span *ngIf="
                                          ord.shippers[0].pickupPoint[0].address
                                            .manual
                                        ">
                              {{
                              ord.shippers[0].pickupPoint[0].address
                              .address
                              }},
                              {{
                              ord.shippers[0].pickupPoint[0].address
                              .cityName
                              }},
                              {{
                              ord.shippers[0].pickupPoint[0].address
                              .stateName
                              }},
                              {{
                              ord.shippers[0].pickupPoint[0].address
                              .countryName
                              }}
                              {{
                              ord.shippers[0].pickupPoint[0].address
                              .zipCode
                              }}
                            </span>
                            <span *ngIf="
                                          !ord.shippers[0].pickupPoint[0]
                                            .address.manual
                                        ">
                              {{
                              ord.shippers[0].pickupPoint[0].address
                              .pickupLocation
                              }}
                            </span>
                            <span class="badge badge-dark" *ngIf="
                                          ord.shippers[0].pickupPoint.length > 1
                                        ">
                              +{{
                              ord.shippers[0].pickupPoint.length - 1
                              }}
                            </span>
                          </td>
                        </tr>
                      </tbody>
                    </ng-template>
                  </p-table>
                </div>
                </td>
                <td width="40%" class="p-0 custom-bg-light border-0">
                  <div class="p-3">
                    <p-table [value]="order.shippersReceiversInfo"
                      styleClass=" p-datatable-md p-datatable-gridlines p-datatable-striped">
                      <ng-template pTemplate="header">
                        <tr>
                          <th class="border-0 p-0">
                            Drop Off Location
                          </th>
                        </tr>
                      </ng-template>
                      <ng-template pTemplate="body" let-ord>
                        <tbody>
                          <tr>
                            <td>
                              <b>Date: </b>
                              {{
                              ord.receivers[0].dropPoint[0]
                              .dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              <b>Location: </b>
                              <span *ngIf="
                                          ord.receivers[0].dropPoint[0].address
                                            .manual
                                        ">
                                {{
                                ord.receivers[0].dropPoint[0].address
                                .address
                                }},
                                {{
                                ord.receivers[0].dropPoint[0].address
                                .cityName
                                }},
                                {{
                                ord.receivers[0].dropPoint[0].address
                                .stateName
                                }},
                                {{
                                ord.receivers[0].dropPoint[0].address
                                .countryName
                                }}
                                {{
                                ord.receivers[0].dropPoint[0].address
                                .zipCode
                                }}
                              </span>
                              <span *ngIf="
                                          !ord.receivers[0].dropPoint[0].address
                                            .manual
                                        ">
                                {{
                                ord.receivers[0].dropPoint[0].address
                                .dropOffLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="ord.receivers[0].dropPoint > 1">
                                +{{ ord.receivers[0].dropPoint - 1 }}
                              </span>
                            </td>
                          </tr>
                        </tbody>
                      </ng-template>
                    </p-table>
                  </div>
                </td>
                <td width="20%" class="p-0 custom-bg-light border-0">
                  <div class="p-3">
                    <p-table [value]="order.shippersReceiversInfo"
                      styleClass=" p-datatable-md p-datatable-gridlines p-datatable-striped">
                      <ng-template pTemplate="header">
                        <tr>
                          <th class="border-0 p-0">Commodity</th>
                        </tr>
                      </ng-template>
                      <ng-template pTemplate="body" let-ord>
                        <tbody>
                          <tr>
                            <td>
                              {{
                              ord.shippers[0].pickupPoint[0]
                              .commodity[0].name
                              ? "Name: " +
                              ord.shippers[0].pickupPoint[0]
                              .commodity[0].name
                              : "-"
                              }}<br />
                              {{
                              ord.shippers[0].pickupPoint[0]
                              .commodity[0].quantity
                              ? "Qty:" +
                              ord.shippers[0].pickupPoint[0]
                              .commodity[0].quantity +
                              " " +
                              ord.shippers[0].pickupPoint[0]
                              .commodity[0].quantityUnit
                              : "Qty:" + "null"
                              }}
                            </td>
                          </tr>
                        </tbody>
                      </ng-template>
                    </p-table>
                  </div>
                </td>
                </tr>
                </ng-template>
                </p-table>
              </div>
            </div>
          </div>
        </div>
  </div>
</section>
</section>
</div>
</section>
<p-dialog header="Brokerage Order" [(visible)]="display" [style]="{width: '500px'}" [modal]="true">
  <div class="form-group row text-dark">
    <div class="col-lg-12">
      <div class="row">
        <div class="col-lg-12">
          <label class="control-label font-weight-bold text-lg-right pt-2">Order Information</label>
          <p>
            Order# : {{ brokerage.orderNo }} <br />
            Order Total: {{ brokerage.finalAmount }}
          </p>
        </div>
        <div class="col-lg-12">
          <div class="row">
            <div class="col-lg-6">
              <label class="control-label font-weight-bold text-lg-right pt-2">Select Carrier
                <span class="mandfield text-2 ml-1"><sup>*</sup></span>
              </label>
              <ng-select [(ngModel)]="brokerage.carrierID" name="brokerage.carrierID" placeholder="Select Carrier">
                <ng-option value="{{ data.key }}" *ngFor="let data of carriersObject | keyvalue">
                  {{ data.value }}</ng-option>
              </ng-select>
            </div>
            <div class="col-2 mar-top-37 p-0">
              <a class="btn btn-success btn-sm text-light" (click)="openModal('form')"><i class="fas fa-plus"></i>
              </a>
              <a data-toggle="modal" (click)="refreshCarrierData()" href="javascript:;"
                class="modal-with-form btn btn-sm btn-success ml-2">
                <em class="fas fa-sync"></em>
              </a>
            </div>
            <div class="col-lg-6">
              <label class="control-label font-weight-bold text-lg-right pt-2">Brokerage amount
                <span class="mandfield text-2 ml-1"><sup>*</sup></span>
              </label>
              <input [(ngModel)]="brokerage.brokerageAmount" name="brokerageAmount" type="text" class="form-control"
                placeholder="e.g. 230" />
            </div>

            <div class="col-lg-6">
              <label class="control-label font-weight-bold text-lg-right pt-2">Select Currency
                <span class="mandfield text-2 ml-1"><sup>*</sup></span>
              </label>
              <ng-select name="brokerage.brkCurrency" placeholder="Select Currency" [(ngModel)]="brokerage.brkCurrency"
                (change)="changeCurrency($event)" #money="ngModel" placeholder="Select Currency" required>
                >
                <ng-option value="CAD">CAD</ng-option>
                <ng-option value="USD">USD</ng-option>
              </ng-select>

            </div>


          </div>
        </div>
        <div class="col-lg-12">
          <label class="control-label font-weight-bold text-lg-right pt-2">Special Instructions</label>
          <textarea placeholder="eg. Please be on time" [(ngModel)]="brokerage.instructions" name="instructions_br"
            class="form-control h-auto" rows="2" pattern="^[\s\S]{500}$"></textarea>

          <label class="error">{{ brokerErr }}</label>
        </div>
      </div>
    </div>
  </div>
  <div class="text-right">
    <button type="button" class="btn btn-default mr-2" (click)="display = false;">
      Close
    </button>
    <button type="button" class="btn btn-success" [disabled]="brokerageDisabled" (click)="submitClick()">
      Save
    </button>
  </div>
</p-dialog>


<app-brokerage-pdf></app-brokerage-pdf>

<ng-template #confirmEmailModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">
      Confirm Order <strong>#{{ newOrderNumber }}</strong>
    </h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <form>
    <div class="modal-body">
      <div class="email--invoice__main mt-3">
        <div class="row align-items-center mb-2">
          <div class="col-7">
            <label class="control-label font-weight-bold text-3 text-dark" for="inputDefault">Do you want to send the
              confirmation email to customer ?</label>
          </div>
          <div class="col-5">
            <div class="btn-group-toggle" data-toggle="buttons">
              <label class="btn btn-outline btn-yesno mr-2 mb-2" [class.active]="emailData.confirmEmail === true"
                (click)="conEmailChange(true)">
                <input type="radio" [(ngModel)]="emailData.confirmEmail" name="orderMode" checked hidden value="FTL" />
                Yes
              </label>
              <label class="btn btn-outline btn-yesno mr-2 mb-2" [class.active]="emailData.confirmEmail === false"
                (click)="conEmailChange(false)">
                <input type="radio" [(ngModel)]="emailData.confirmEmail" name="orderMode" hidden value="LTL" />
                No
              </label>
            </div>
          </div>
        </div>
        <div class="" *ngIf="emailData.confirmEmail != false">
          <label class="control-label font-weight-bold mt-2 text-3 text-dark" for="inputDefault">Enter Email
            <small>You can also add multiple email(s)</small></label>
          <ng-select multiple="true" notFoundText="Please type to add
            email" [addTag]="true" placeholder="eg. johnsmith@gmail.com" [clearable]="false"
            [(ngModel)]="emailData.emails" name="emails" type="text" class="form-control h-auto"></ng-select>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" (click)="modal.dismiss('Cross click')" class="btn btn-default">
        Cancel
      </button>
      <button [disabled]="isConfirm" (click)="changeStatus()" class="btn btn-success">
        Confirm
      </button>
    </div>
  </form>
</ng-template>
<ng-template #schedularModal let-modal class="modal-block modal-block-lg2 modal-block-primary mfp-hide">
  <section class="card">
    <header class="card-header">
      <h2 class="card-title font-weight-bold">
        Scheduler <span>#{{ scheduler.orderNumber }}</span>
      </h2>
    </header>
    <div class="card-body text-dark">
      <form class="form-horizontal form-bordered" #scheduleModal="ngForm">
        <div class="form-row">
          <div class="form-group col-lg-12 col-md-12" id="manualDiv">
            <div class="row">
              <div class="col-lg-8">
                <label>
                  Schedule Name
                  <span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                <input placeholder="Schedule Name" [(ngModel)]="scheduler.name" type="text" name="scheduleName"
                  class="form-control" #scheduleName="ngModel" />
              </div>
              <div class="col-lg-4">
                <label>
                  Time <span><sup>*</sup></span></label>
                <input placeholder="--:--:--" type="time" [(ngModel)]="scheduler.time" name="scheduleTime"
                  class="form-control" />
              </div>
            </div>
            <div class="col-lg-12 pl-0">
              <h5 class="font-weight-bold text-5">Repeat Type</h5>
            </div>
            <div class="col-lg-12 borddas p-3">
              <div class="row">
                <div class="col-lg-3">
                  <div class="radio">
                    <label>
                      <input type="radio" name="repeatType" value="selectDaysNo" [(ngModel)]="repeatType" />
                      Every
                    </label>
                  </div>
                </div>
                <div class="col-lg-2">
                  <input type="number" min="0" name="daysNo" class="form-control" [(ngModel)]="scheduler.type.daysNo" />
                </div>
                <div class="col-lg-1">day(s)</div>
              </div>


              <div class="row">
                <div class="col-lg-12">
                  <hr class="solid" />
                </div>
              </div>
              <div class="row">
                <div class="col-lg-2">
                  <div class="radio">
                    <label>
                      <input type="radio" name="repeatType" value="everyday" [(ngModel)]="repeatType">
                      Everyday
                    </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-12">
                  <hr class="solid" />
                </div>
              </div>
              <div class="row">
                <div class="col-lg-3">
                  <div class="radio">
                    <label>
                      <input type="radio" name="repeatType" value="days" [(ngModel)]="repeatType" />
                      Select the days
                    </label>
                  </div>
                </div>
              </div>
              <div class="row" style="margin-left: 15%">
                <div class="col-lg-2" *ngFor="let day of days">
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" [value]="day" (change)="
                          onCheckboxChange(
                            $event.target.value,
                            $event.target.checked
                          )
                        " />
                      {{ day | titlecase }}
                    </label>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-12 pl-0 mt-4">
              <h5 class="font-weight-bold text-5">Repetition Range</h5>
            </div>

            <div class="col-lg-12 borddas p-3 mt-3">
              <div class="row">
                <div class="col-lg-3">
                  <label>
                    From the date <span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                </div>
                <div class="col-lg-2">
                  <input type="text" name="fromDate" [(ngModel)]="scheduler.dateRange.from" #fromDate="ngbDatepicker"
                    (click)="fromDate.toggle();" autocomplete="off" ngbDatepicker placeholder="yyyy/mm/dd"
                    class="form-control">
                </div>
                <div class="col-lg-2">
                  <label>To the date <span class="mandfield text-2 ml-1"><sup>*</sup></span></label>
                </div>
                <div class="col-lg-2">
                  <input type="text" name="toDate" [(ngModel)]="scheduler.dateRange.to" #toDate="ngbDatepicker"
                    (click)="toDate.toggle();" autocomplete="off" ngbDatepicker placeholder="yyyy/mm/dd"
                    class="form-control">
                </div>
              </div>
              <div class="row">
                <div class="col-lg-12">
                  <hr class="solid" />
                </div>
              </div>
              <div class="row">
                <div class="col-lg-3">
                  <div class="radio">
                    <label>
                      <input type="radio" name="range" value="everymonth" [(ngModel)]="range">
                      Every Month
                    </label>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-lg-12">
                  <hr class="solid">
                </div>
              </div>

              <div class="row">
                <div class="col-lg-3">
                  <div class="radio">
                    <label>
                      <input type="radio" name="range1" value="month" [(ngModel)]="range">
                      Select month
                    </label>
                  </div>
                </div>
              </div>
              <div class="row" style="margin-left:15%">
                <div class="col-lg-2" *ngFor="let month of months">
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" [value]="month"
                        (change)="onRangeCheckboxChange($event.target.value, $event.target.checked)">
                      {{month | titlecase}}
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" (click)="modal.dismiss('Cross click')" class="btn btn-default">
            Cancel
          </button>
          <button (click)="saveScheduler()" [disabled]="saveDisabled" class="btn btn-success">
            Save
          </button>
        </div>
      </form>
    </div>
  </section>
</ng-template>