<style>
  .extra {
    display: none;
  }
</style>
<section class="body">
  <div class="inner-wrapper">
    <section role="main" class="content-body pl-1 pt-0 pr-0">
      <header class="page-header flex align-items-center justify-content-start">
        <form class="formgrid grid">
          <div class="row">
            <div class="col" style="margin-left: 20px;margin-top: 5px;">
              <div class="row" style="padding-top: 9px">
                <div class="col-md-2 col-lg-2 pr-1">
                  <ng-select [(ngModel)]="orderFiltr.category" name="category" placeholder="Search by Category"
                    (change)="categoryChange($event)">
                    <ng-option *ngFor="let data of categoryFilter" value="{{
                      data.value }}">
                      {{ data.name }}</ng-option>
                  </ng-select>
                </div>

                <div class="col-md-2 col-lg-2 pr-1">
                  <div class="input-group input-group-md mb-3" *ngIf="orderFiltr.category
                    != 'customer' &&
                    orderFiltr.category != 'orderType' &&
                    orderFiltr.category != 'orderStatus'">
                    <input type="text" class="form-control" name="searchValue" [(ngModel)]="orderFiltr.searchValue"
                      placeholder="Search" />
                  </div>

                  <ng-select [(ngModel)]="orderFiltr.searchValue" name="searchValue" placeholder="Search By
                    Customer" *ngIf="orderFiltr.category == 'customer'">
                    <ng-option *ngFor="let data of customersObjects | keyvalue" value="{{ data.key }}">
                      {{ data.value }}</ng-option>
                  </ng-select>

                  <ng-select [(ngModel)]="orderFiltr.searchValue" name="searchValue" placeholder="Search By Order
                    Status" *ngIf="orderFiltr.category == 'orderStatus'">
                    <ng-option *ngFor="let data of statusData" value="{{ data.value
                      }}">
                      {{ data.name }}</ng-option>
                  </ng-select>

                  <ng-select [(ngModel)]="orderFiltr.searchValue" name="searchValue" placeholder="Search By Order
                    Type" *ngIf="orderFiltr.category == 'orderType'">
                    <ng-option value="FTL"> FTL</ng-option>
                    <ng-option value="LTL"> LTL</ng-option>
                  </ng-select>
                </div>

                <div class="col-lg-3 col-md-3 pr-1">
                  <div class="input-daterange input-group">
                    <span class="input-group-prepend">
                      <span class="input-group-text">
                        <i class="fas fa-calendar-alt"></i>
                      </span>
                    </span>
                    <input [(ngModel)]="orderFiltr.startDate" name="fromDate" type="text" placeholder="yyyy/mm/dd"
                      (click)="from.toggle()" ngbDatepicker #from="ngbDatepicker" class="form-control"
                      autocomplete="off" [minDate]="dateMinLimit" [maxDate]="futureDatesLimit" />
                    <span class="input-group-text
                      border-left-0 border-right-0
                      rounded-0">
                      to
                    </span>
                    <input [(ngModel)]="orderFiltr.endDate" name="toDate" type="text" placeholder="yyyy/mm/dd"
                      (click)="to.toggle()" ngbDatepicker #to="ngbDatepicker" class="form-control" autocomplete="off"
                      [minDate]="dateMinLimit" [maxDate]="futureDatesLimit" />
                  </div>
                </div>

                <div class="col-md-2 col-lg-2">
                  <button type="submit" class="btn btn-sm btn-success mr-3" [disabled]="isSearch"
                    (click)="filterOrders()">
                    Search
                  </button>
                  <button type="submit" class="btn btn-sm btn-success" [disabled]="isSearch" (click)="resetFilter()">
                    Reset
                  </button>
                </div>

              </div>
            </div>
          </div>
        </form>
      </header>
      <section class="m-2">
        <div class="row mb-3">
          <div class="col-lg-12">
            <div class="bg-white p-3 text-dark text-capitalize">
              <div class="form-group row pt-3">
                <div class="col-lg-12" style="height: calc(100vh - 149px); overflow-y: scroll;">
                  <p-table #dt [value]="orders" [resizableColumns]="true" columnResizeMode="expand"
                    scrollDirection="both" [columns]="selectedColumns" [loading]="!loaded"
                    styleClass=" p-datatable-md p-datatable-gridlines p-datatable-striped" [scrollable]="true"
                    [loading]="!loaded" scrollHeight="100%" dataKey="orderNumber" responsiveLayout="scroll">


                    <ng-template pTemplate="caption">
                      <div class="p-d-flex d-flex justify-content-between align-items-center">
                        <div>
                          <h3 class="m-0"> Orders </h3>
                        </div>
                        <div class="text-right">
                          <span>Showing {{orders.length}} enteries</span> &nbsp;
                          <button type="button" pButton (click)="refreshData()" pTooltip="Refresh"
                            class="p-button-outlined mr-2" icon="fas fa-sync"></button>

                          <button type="button" pButton pTooltip="Add" routerLink="/dispatch/orders/add"
                            class="p-button-outlined mr-2" icon="pi pi-plus"></button>

                          <button pButton pRipple pTooltip="Clear Filter" class="p-button-outlined mr-2"
                            (click)="clear(dt)" icon="pi pi-filter-slash"></button>

                          <button type="button" pButton pRipple class="p-button-outlined mr-2"
                            icon="fas fa-regular fa-file-excel" (click)="generateCSV()" pTooltip="Excel"></button>

                          <!-- <p-multiSelect [options]="dataColumns" [(ngModel)]="selectedColumns" optionLabel="header"
                            selectedItemsLabel="{0} columns selected" [style]="{minWidth: '200px'}"
                            placeholder="Choose Columns">
                          </p-multiSelect> -->
                        </div>
                      </div>
                    </ng-template>

                    <!-- Header template of DataTable -->
                    <ng-template pTemplate="header" let-columns>
                      <tr>
                        <th style="width: 5%" alignFrozen="left" pFrozenColumn [frozen]="true"></th>

                        <th *ngFor="let column of dataColumns" [pSortableColumn]="column.field" pResizableColumn
                          style="width:12%" [hidden]="column.field === 'newStatus'">
                          <span>
                            <div class="flex justify-content-center align-items-center" alignFrozen="right"
                              pFrozenColumn [frozen]="true">
                              {{column.header}}
                              <p-sortIcon [field]="column.field" [hidden]="column.field === 'invStatus'">
                              </p-sortIcon>
                              <p-columnFilter [type]="column.type" [field]="column.field" matchMode="contains"
                                [showMatchModes]="false" [showOperator]="false" [showAddButton]="false" display="menu"
                                [hidden]="column.field === 'invStatus'">
                              </p-columnFilter>
                            </div>
                          </span>

                        </th>

                        <th pSortableColumn="newStatus" style="width: 10%" alignFrozen="right" pFrozenColumn
                          [frozen]="true">
                          <span>
                            <div class="flex justify-content-center align-items-center">
                              Order Status
                              <p-sortIcon field="newStatus"></p-sortIcon>
                              <p-columnFilter type="text" field="newStatus" matchMode="contains"
                                [showMatchModes]="false" [showOperator]="false" [showAddButton]="false" display="menu">
                              </p-columnFilter>
                            </div>
                          </span>
                        </th>
                        <th style="width: 5%" alignFrozen="right" pFrozenColumn [frozen]="true">Actions</th>
                      </tr>

                    </ng-template>
                    <ng-template pTemplate="body" let-order let-columns="columns" let-rowIndex="rowIndex"
                      let-expanded="expanded">
                      <tr style="cursor: pointer;">
                        <td alignFrozen="left" pFrozenColumn [frozen]="true" style="width:5%">
                          <button type="button" pButton [pRowToggler]="order"
                            class="p-button-text p-button-rounded p-button-plain"
                            [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
                        </td>

                        <td routerLink='/dispatch/orders/detail/{{order.orderID}}' style="width:12%">
                          {{order.orderNumber}}
                        </td>
                        <td routerLink='/dispatch/orders/detail/{{order.orderID}}' style="width:12%">
                          {{order.orderMode}}
                        </td>
                        <td routerLink='/dispatch/orders/detail/{{order.orderID}}' style="width:12%">
                          {{ order.createdDate | date: "yyyy/MM/dd" }}
                        </td>
                        <td routerLink='/dispatch/orders/detail/{{order.orderID}}' style="width:12%">
                          {{ customersObjects[order.customerID] }}
                        </td>

                        <td routerLink='/dispatch/orders/detail/{{order.orderID}}' style="width:12%">
                          {{
                          order.commodityName
                          ? "Name: " +
                          order.commodityName
                          : "-"
                          }}<br />
                          {{
                          order.commoQuantity
                          ? "Qty:" +
                          order.commoQuantity +
                          " " +
                          order.commoQuantityUnit
                          : ""
                          }}
                        </td>
                        <td routerLink='/dispatch/orders/detail/{{order.orderID}}' style="width:12%">
                          {{ order.currency }}
                          {{ order.totalAmount }}<br />
                        </td>
                        <td routerLink='/dispatch/orders/detail/{{order.orderID}}' style="width:12%">
                          <div class="badges ">
                            <b>Invoiced: </b>
                            <span class="badge badge-success" *ngIf="order.invoicedTime"><i
                                class="fa fa-check"></i></span>
                            <span style="background: #000000a1;" class="badge badge-info" *ngIf="!order.invoicedTime"><i
                                class="fa fa-close"></i></span><br>
                            <b>Payment:</b> {{order.invStatus ? order.invStatus.replace('_', ' ') : 'NA'}}
                          </div>
                        </td>
                        <td alignFrozen="right" pFrozenColumn [frozen]="true"
                          routerLink='/dispatch/orders/detail/{{order.orderID}}' style="width:10%">
                          <span class="badge badge-dark p-1">{{ order.newStatus }}</span> <br>
                        </td>
                        <td style="width:5%;overflow: inherit !important; " pFrozenColumn alignFrozen="right"
                          [frozen]="true">
                          <div class="dropdown dropright" style="z-index: 1000">
                            <button class="bg-transparent border-0" type="button" id="dropdownMenuButton-{{ i
                              }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              <i class="fas fa-ellipsis-v"></i>
                            </button>
                            <div class="dropdown-menu" attr.aria-labelledby="dropdownMenuButton-{{
                              i
                              }}">
                              <a *ngIf="order.orderStatus!= 'delivered'" class="dropdown-item" routerLink="/dispatch/orders/edit/{{
                                order.orderID
                                }}">Edit</a>
                              <a *ngIf="order.orderStatus === 'confirmed'" class="dropdown-item"
                                [routerLink]="['/dispatch','trips','add-trip']"
                                [queryParams]="{orderId:order.orderID,orderNum:order.orderNumber}">Create Trip</a>
                              <a *ngIf="order.orderStatus == 'created' ||
                                order.orderStatus == 'confirmed'" class="dropdown-item" href="javascript:;"
                                (click)="deactivateOrder(order)">Delete</a>
                              <a *ngIf="order.orderStatus === 'created'" class="dropdown-item"
                                (click)="confirmEmail(order, i)">Confirm</a>
                              <a *ngIf="order.orderStatus === 'created' ||
                                order.orderStatus === 'confirmed'" class="dropdown-item" (click)="showBrokerageModal(
                                order,
                                ordersDraw,
                                i,
                                'all'
                                )">Brokerage</a>
                              <a *ngIf="order.orderStatus === 'brokerage'" class="dropdown-item" (click)="updateCreatedStatus(order,
                                ordersDraw, i)">Cancel Brokerage</a>
                              <a class="dropdown-item" [routerLink]="[
                                '/dispatch',
                                'orders',
                                'add'
                                ]" [queryParams]="{
                                cloneID: order.orderID
                                }">Clone</a>
                              <a *ngIf="order.canRecall" class="dropdown-item" routerLink="/dispatch/orders/edit/{{
                                order.orderID
                                }}" [queryParams]="{
                                state: 'recall'
                                }">Recall</a>
                            </div>
                          </div>
                        </td>
                      </tr>

                    </ng-template>

                    <!-- Empty Template -->
                    <ng-template pTemplate="emptymessage" let-columns>
                      <div class="col-lg-12 mt-3 text-center">
                        {{dataMessage}}
                        <br /><br>
                      </div>
                    </ng-template>
                    <!-- Summary Section with Load More button -->

                    <ng-template pTemplate="summary" let-columns>
                      <div class="col-lg-12 mt-3 text-center " *ngIf="lastEvaluatedKey !=='end' && orders.length !==0 ">
                        <button type="button " (click)="onScroll($event) "
                          class="btn btn-success btn-sm text-light ">Load
                          More..</button>

                        <br /><br>
                      </div>
                      <div class="col-lg-12 mt-3 text-center" *ngIf="lastEvaluatedKey ==='end'">
                        Total Records: {{orders.length}}</div>
                    </ng-template>

                    <ng-template pTemplate="rowexpansion" let-order>
                      <tr>
                        <td width="50%" class="p-0 custom-bg-light border-0">
                          <div class="p-3">
                            <p-table [value]="order.shippersReceiversInfo"
                              styleClass=" p-datatable-md p-datatable-gridlines p-datatable-striped">
                              <ng-template pTemplate="header">

                      <tr>
                        <th class="border-0 p-0">Pickup Location</th>

                      </tr>

                    </ng-template>
                    <ng-template pTemplate="body" let-ord>
                      <tbody>
                        <tr>
                          <td>
                            <b>Date: </b>
                            {{
                            ord.shippers[0]
                            .pickupPoint[0].dateAndTime
                            | date
                            : "yyyy/MM/dd
                            hh:mm a"
                            }}<br />
                            <b>Location: </b>
                            <span *ngIf="ord.shippers[0]
                                                .pickupPoint[0].address.manual">
                              {{
                              ord.shippers[0]
                              .pickupPoint[0].address.address
                              }},
                              {{
                              ord.shippers[0]
                              .pickupPoint[0].address.cityName
                              }},
                              {{
                              ord.shippers[0]
                              .pickupPoint[0].address.stateName
                              }},
                              {{
                              ord.shippers[0]
                              .pickupPoint[0].address.countryName
                              }}
                              {{
                              ord.shippers[0]
                              .pickupPoint[0].address.zipCode
                              }}
                            </span>
                            <span *ngIf="!ord.shippers[0]
                                                .pickupPoint[0].address.manual">
                              {{
                              ord.shippers[0]
                              .pickupPoint[0].address.pickupLocation
                              }}
                            </span>
                            <span class="badge badge-dark" *ngIf="ord.shippers[0]
                                                .pickupPoint.length> 1
                                                ">
                              +{{
                              ord.shippers[0]
                              .pickupPoint.length - 1
                              }}
                            </span>
                          </td>

                        </tr>
                      </tbody>
                    </ng-template>
                  </p-table>
                </div>
                </td>
                <td width="50%" class="p-0 custom-bg-light border-0">
                  <div class="p-3 ">
                    <p-table [value]="order.shippersReceiversInfo"
                      styleClass=" p-datatable-md p-datatable-gridlines p-datatable-striped">
                      <ng-template pTemplate="header">

                        <tr>
                          <th class="border-0 p-0">Drop Off Location</th>
                        </tr>

                      </ng-template>
                      <ng-template pTemplate="body" let-ord>
                        <tbody>
                          <tr>
                            <td> <b>Date: </b>
                              {{
                              ord.receivers[0]
                              .dropPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              <b>Location: </b>
                              <span *ngIf="ord.receivers[0]
                                              .dropPoint[0].address.manual">
                                {{
                                ord.receivers[0]
                                .dropPoint[0].address.address
                                }},
                                {{
                                ord.receivers[0]
                                .dropPoint[0].address.cityName
                                }},
                                {{
                                ord.receivers[0]
                                .dropPoint[0].address.stateName
                                }},
                                {{
                                ord.receivers[0]
                                .dropPoint[0].address.countryName
                                }}
                                {{
                                ord.receivers[0]
                                .dropPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!ord.receivers[0]
                                              .dropPoint[0].address.manual">
                                {{
                                ord.receivers[0]
                                .dropPoint[0].address.dropOffLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="ord.receivers[0]
                                              .dropPoint> 1
                                              ">
                                +{{
                                ord.receivers[0]
                                .dropPoint - 1
                                }}
                              </span>
                            </td>
                          </tr>
                        </tbody>
                      </ng-template>
                    </p-table>
                  </div>
                </td>
                </tr>


                </ng-template>





                </p-table>
              </div>
            </div>

          </div>
        </div>
  </div>
</section>


</section>
</div>
</section>
<!-- <section class="body">
  <div class="inner-wrapper">
    <section role="main" class="content-body pl-0 pr-0 pt-0">
      <header class="page-header pr19 pl11">
        <form class="form-horizontal" method="get">
          <div class="row" style="padding-top: 9px">
            <div class="col-md-2 col-lg-2 pr-1">
              <ng-select [(ngModel)]="orderFiltr.category" name="category" placeholder="Search by Category"
                (change)="categoryChange($event)">
                <ng-option *ngFor="let data of categoryFilter" value="{{
                  data.value }}">
                  {{ data.name }}</ng-option>
              </ng-select>
            </div>

            <div class="col-md-2 col-lg-2 pr-1">
              <div class="input-group input-group-md mb-3" *ngIf="orderFiltr.category
                != 'customer' &&
                orderFiltr.category != 'orderType' &&
                orderFiltr.category != 'orderStatus'">
                <input type="text" class="form-control" name="searchValue" [(ngModel)]="orderFiltr.searchValue"
                  placeholder="Search" />
              </div>

              <ng-select [(ngModel)]="orderFiltr.searchValue" name="searchValue" placeholder="Search By
                Customer" *ngIf="orderFiltr.category == 'customer'">
                <ng-option *ngFor="let data of customersObjects | keyvalue" value="{{ data.key }}">
                  {{ data.value }}</ng-option>
              </ng-select>

              <ng-select [(ngModel)]="orderFiltr.searchValue" name="searchValue" placeholder="Search By Order
                Status" *ngIf="orderFiltr.category == 'orderStatus'">
                <ng-option *ngFor="let data of statusData" value="{{ data.value
                  }}">
                  {{ data.name }}</ng-option>
              </ng-select>

              <ng-select [(ngModel)]="orderFiltr.searchValue" name="searchValue" placeholder="Search By Order
                Type" *ngIf="orderFiltr.category == 'orderType'">
                <ng-option value="FTL"> FTL</ng-option>
                <ng-option value="LTL"> LTL</ng-option>
              </ng-select>
            </div>

            <div class="col-lg-3 col-md-3 pr-1">
              <div class="input-daterange input-group">
                <span class="input-group-prepend">
                  <span class="input-group-text">
                    <i class="fas fa-calendar-alt"></i>
                  </span>
                </span>
                <input [(ngModel)]="orderFiltr.startDate" name="fromDate" type="text" placeholder="yyyy/mm/dd"
                  (click)="from.toggle()" ngbDatepicker #from="ngbDatepicker" class="form-control" autocomplete="off"
                  [minDate]="dateMinLimit" [maxDate]="futureDatesLimit" />
                <span class="input-group-text
                  border-left-0 border-right-0
                  rounded-0">
                  to
                </span>
                <input [(ngModel)]="orderFiltr.endDate" name="toDate" type="text" placeholder="yyyy/mm/dd"
                  (click)="to.toggle()" ngbDatepicker #to="ngbDatepicker" class="form-control" autocomplete="off"
                  [minDate]="dateMinLimit" [maxDate]="futureDatesLimit" />
              </div>
            </div>

            <div class="col-md-2 col-lg-2">
              <button type="submit" class="btn btn-sm btn-success mr-3" [disabled]="isSearch" (click)="filterOrders()">
                Search
              </button>
              <button type="submit" class="btn btn-sm btn-success" [disabled]="isSearch" (click)="resetFilter()">
                Reset
              </button>
            </div>
            <div class="col-md-3 col-lg-3 pr-1 text-right">
              <div class="btn-group flex-wrap mr-2" *ngIf="!environment">
                <button type="button" class="btn btn-success btn-sm
                  dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                  Actions<span class="caret"></span>
                </button>
                <div class="dropdown-menu" role="menu" x-placement="bottom-start" style="position: absolute;
                  will-change: transform;
                  top: 0px;
                  left: 0px;
                  transform: translate3d(0px, 38px, 0px);">
                  <a class="dropdown-item text-1" href="">Import</a>
                  <a class="dropdown-item text-1" href="">Export</a>
                </div>
              </div>
              <a href="javascript:;" (click)="refreshData()" data-toggle="tooltip" title="Refresh data"
                class="btn btn-success btn-sm modal-with-form mr-2">
                <i class="fas fa-sync"></i>
              </a>
              <a routerLink="/dispatch/orders/add" href="javascript:;" class="btn btn-success btn-sm modal-with-form"
                style="color: white"><i class="fas fa-plus"></i> Add Order
              </a>
            </div>
          </div>
        </form>
      </header>

      <section class="m-2">
        <div class="row mb-3">
          <div class="col-lg-12">
            <div class="bg-white p-3 text-dark">
              <div class="form-group row">
                <div class="col-lg-12 pl-0 pr-0">
                  <div class="m-2">
                    <ul class="nav nav-tabs top-tabs" id="top-tabs" role="tablist">
                      <li class="nav-item">
                        <a class="nav-link navtabs" id="allOrders-tab" href="javascript:;"
                          [ngClass]="{ active: activeTab == 'all' }" (click)="fetchTabData('all')">All</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link navtabs" id="confirmed-tab" href="javascript:;"
                          [ngClass]="{ active: activeTab == 'confirmed' }" (click)="fetchTabData('confirmed')">Confirmed
                          : {{ confirmOrders.length }}</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link navtabs" id="dispatched-tab" href="javascript:;"
                          [ngClass]="{ active: activeTab == 'dispatched' }"
                          (click)="fetchTabData('dispatched')">Dispatched : {{
                          dispatchOrders.length }}</a>
                      </li>

                      <li class="nav-item">
                        <a class="nav-link navtabs" id="cancelledDispatch-tab" href="javascript:;"
                          [ngClass]="{ active: activeTab == 'cancelled' }" (click)="fetchTabData('cancelled')">Cancelled
                          Dispatch : {{ cancelledOrders.length }}</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link navtabs" id="delivered-tab" href="javascript:;"
                          [ngClass]="{ active: activeTab == 'delivered' }" (click)="fetchTabData('delivered')">Delivered
                          : {{ deliveredOrders.length }}</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link navtabs" id="tonu-tab" href="javascript:;"
                          [ngClass]="{ active: activeTab == 'tonu' }" (click)="fetchTabData('tonu')">TONU : {{
                          tonuOrders.length }}</a>
                      </li>
                     
                    </ul>
                  </div>
                  <div class="tab-content" id="myTabContent" style="box-shadow:
                    none; border: none">
                    <div class="tab-pane show active" id="allOrders" role="tabpanel" aria-labelledby="allOrders-tab"
                      [ngClass]="{ 'show active': activeTab == 'all' }" *ngIf="activeTab == 'all'">
                      <div class="col-lg-12" infiniteScroll [infiniteScrollDistance]="1" [infiniteScrollUpDistance]="1"
                        [infiniteScrollThrottle]="5" (scrolled)="onScroll()">
                        <table class="row-border
                          hover
                          table table-bordered table-striped
                          mb-0">
                          <thead>
                            <tr>
                              <th>Order#</th>
                              <th>Type</th>
                              <th>Date</th>
                              <th>Customer</th>
                              <th>Pickup Location</th>
                              <th>Drop Off Location</th>
                              <th>Commodity</th>
                              <th *ngIf="isOrderPriceEnabled">Amount</th>
                              <th class="custom-w-160">Status</th>
                              <th>Actions</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngIf="orders.length === 0" class="text-center">
                              <td colspan="12">{{ dataMessage }}</td>
                            </tr>
                            <tr class="cursorpoint" *ngFor="let order of
                              orders;
                              let i= index">
                              <td [routerLink]="order.url" class="font-weight-bold">
                                {{ order.orderNumber }}
                              </td>
                              <td [routerLink]="order.url">
                                {{ order.orderMode }}
                              </td>
                              <td [routerLink]="order.url">
                                {{ order.createdDate | date: "yyyy/MM/dd" }}
                              </td>
                              <td [routerLink]="order.url" class="text-capitalize">
                                {{ order.customerName }} <br />
                                <b>Confirmation#: </b> {{order.cusConfirmation}}
                              </td>
                              <td [routerLink]="order.url">
                                <b>Date: </b>
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].dateAndTime
                                | date
                                : "yyyy/MM/dd
                                hh:mm a"
                                }}<br />
                                <b>Location: </b>
                                <span *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                  .pickupPoint[0].address.manual">
                                  {{
                                  order.shippersReceiversInfo[0].shippers[0]
                                  .pickupPoint[0].address.address
                                  }},
                                  {{
                                  order.shippersReceiversInfo[0].shippers[0]
                                  .pickupPoint[0].address.cityName
                                  }},
                                  {{
                                  order.shippersReceiversInfo[0].shippers[0]
                                  .pickupPoint[0].address.stateName
                                  }},
                                  {{
                                  order.shippersReceiversInfo[0].shippers[0]
                                  .pickupPoint[0].address.countryName
                                  }}
                                  {{
                                  order.shippersReceiversInfo[0].shippers[0]
                                  .pickupPoint[0].address.zipCode
                                  }}
                                </span>
                                <span *ngIf="!order.shippersReceiversInfo[0].shippers[0]
                                  .pickupPoint[0].address.manual">
                                  {{
                                  order.shippersReceiversInfo[0].shippers[0]
                                  .pickupPoint[0].address.pickupLocation
                                  }}
                                </span>
                                <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                  .pickupPoint.length> 1
                                  ">
                                  +{{
                                  order.shippersReceiversInfo[0].shippers[0]
                                  .pickupPoint.length - 1
                                  }}
                                </span>
                              </td>
                              <td [routerLink]="order.url">
                                <b>Date: </b>
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].dateAndTime
                                | date
                                : "yyyy/MM/dd
                                hh:mm a"
                                }}<br />
                                <b>Location: </b>
                                <span *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                  .dropPoint[0].address.manual">
                                  {{
                                  order.shippersReceiversInfo[0].receivers[0]
                                  .dropPoint[0].address.address
                                  }},
                                  {{
                                  order.shippersReceiversInfo[0].receivers[0]
                                  .dropPoint[0].address.cityName
                                  }},
                                  {{
                                  order.shippersReceiversInfo[0].receivers[0]
                                  .dropPoint[0].address.stateName
                                  }},
                                  {{
                                  order.shippersReceiversInfo[0].receivers[0]
                                  .dropPoint[0].address.countryName
                                  }}
                                  {{
                                  order.shippersReceiversInfo[0].receivers[0]
                                  .dropPoint[0].address.zipCode
                                  }}
                                </span>
                                <span *ngIf="!order.shippersReceiversInfo[0].receivers[0]
                                  .dropPoint[0].address.manual">
                                  {{
                                  order.shippersReceiversInfo[0].receivers[0]
                                  .dropPoint[0].address.dropOffLocation
                                  }}
                                </span>
                                <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                  .dropPoint> 1
                                  ">
                                  +{{
                                  order.shippersReceiversInfo[0].receivers[0]
                                  .dropPoint - 1
                                  }}
                                </span>
                              </td>
                              <td [routerLink]="order.url">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].commodity[0].name
                                ? "Name: " +
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].commodity[0].name
                                : "-"
                                }}<br />
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].commodity[0].quantity
                                ? "Qty:" +
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].commodity[0].quantity +
                                " " +
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].commodity[0].quantityUnit
                                : ""
                                }}
                              </td>
                              <td *ngIf="isOrderPriceEnabled" [routerLink]="order.url">
                                {{ order.charges.freightFee.currency }}
                                {{ order.totalAmount }}<br />
                              </td>

                              <td class="text-capitalize" [routerLink]="order.url">
                                <span class="badge badge-dark p-1">{{ order.newStatus }}</span> <br>
                                <b>Invoiced: </b> {{order.invoicedTime ? 'Yes' : 'No'}} <br>
                                <b>Payment:</b> {{order.invStatus ? order.invStatus.replace('_', ' ') : 'NA'}}
                              </td>
                              <td>
                                <div class="dropdown dropright">
                                  <button class="bg-transparent border-0" type="button" id="dropdownMenuButton-{{ i
                                    }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fas fa-ellipsis-v"></i>
                                  </button>
                                  <div class="dropdown-menu" attr.aria-labelledby="dropdownMenuButton-{{
                                    i
                                    }}">
                                    <a *ngIf="order.orderStatus!= 'delivered'" class="dropdown-item" routerLink="/dispatch/orders/edit/{{
                                      order.orderID
                                      }}">Edit</a>
                                    <a *ngIf="order.orderStatus === 'confirmed'" class="dropdown-item"
                                      [routerLink]="['/dispatch','trips','add-trip']"
                                      [queryParams]="{orderId:order.orderID,orderNum:order.orderNumber}">Create Trip</a>
                                    <a *ngIf="order.orderStatus == 'created' ||
                                      order.orderStatus == 'confirmed'" class="dropdown-item" href="javascript:;"
                                      (click)="deactivateOrder(order)">Delete</a>
                                    <a *ngIf="order.orderStatus === 'created'" class="dropdown-item"
                                      (click)="confirmEmail(order, i)">Confirm</a>
                                    <a *ngIf="order.orderStatus === 'created' ||
                                      order.orderStatus === 'confirmed'" class="dropdown-item" (click)="showBrokerageModal(
                                      order,
                                      ordersDraw,
                                      i,
                                      'all'
                                      )">Brokerage</a>
                                    <a *ngIf="order.orderStatus === 'brokerage'" class="dropdown-item" (click)="updateCreatedStatus(order,
                                      ordersDraw, i)">Cancel Brokerage</a>
                                    <a class="dropdown-item" [routerLink]="[
                                      '/dispatch',
                                      'orders',
                                      'add'
                                      ]" [queryParams]="{
                                      cloneID: order.orderID
                                      }">Clone</a>
                                    <a *ngIf="order.canRecall" class="dropdown-item" routerLink="/dispatch/orders/edit/{{
                                      order.orderID
                                      }}" [queryParams]="{
                                      state: 'recall'
                                      }">Recall</a>
                                  </div>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="col-lg-12 mt-3 text-center" *ngIf="lastEvaluatedKey !== 'end' && orders.length
                        !==
                        0">
                        <button type="button" class="btn btn-success
                          btn-sm text-light" (click)="onScroll()"><i class="fa
                            fa-spinner fa-spin" *ngIf="isLoad">
                          </i> {{isLoadText}}</button>
                      </div>
               
                    </div>
                    <div class="tab-pane show" id="confirmedOrders" role="tabpanel"
                      aria-labelledby="confirmedOrders-tab" [ngClass]="{ 'show
                      active': activeTab == 'confirmed' }" *ngIf="activeTab ==
                      'confirmed'">
                      <table class="row-border
                        hover
                        table table-bordered table-striped
                        mb-0">
                        <thead>
                          <tr>
                            <th>Order#</th>
                            <th>Type</th>

                            <th>Date</th>
                            <th>Customer</th>
                            <th>Pickup Location</th>
                            <th>Drop Off Location</th>
                            <th>Commodity</th>
                            <th>Amount</th>
                            <th class="custom-w-160">Status</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngIf="confirmOrders.length == 0" class="text-center">
                            <td colspan="10">{{ noOrdersMsg }}</td>
                          </tr>
                          <tr class="cursorpoint" *ngFor="let order of
                            confirmOrders; let i= index">
                            <td [routerLink]="order.url" class="font-weight-bold">
                              {{ order.orderNumber }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.orderMode }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.createdDate | date: "yyyy/MM/dd" }}
                            </td>
                            <td class="text-capitalize" [routerLink]="order.url">
                              {{ customersObjects[order.customerID] }}
                            </td>
                            <td [routerLink]="order.url">
                              Date:
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location:
                              <span *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.pickupLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              Date:-
                              {{
                              order.shippersReceiversInfo[0].receivers[0]
                              .dropPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location: -
                              <span *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.dropOffLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              ? "Name: " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              : "-"
                              }}<br />
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity
                              ? "Qty:" +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity +
                              " " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantityUnit
                              : ""
                              }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.charges.freightFee.currency }}
                              {{ order.totalAmount }}<br />
                            </td>
                            <td class="text-capitalize" [routerLink]="order.url">
                              <span class="badge badge-dark p-1">{{ order.newStatus }}</span> <br>
                              <b>Invoiced: </b> {{order.invoicedTime ? 'Yes' : 'No'}} <br>
                              <b>Payment:</b> {{order.invStatus ? order.invStatus.replace('_', ' ') : 'NA'}}
                            </td>
                            <td>
                              <div class="dropdown dropright">
                                <button class="bg-transparent border-0" type="button" id="dropdownMenuButton-{{ i }}"
                                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                  <i class="fas fa-ellipsis-v"></i>
                                </button>
                                <div class="dropdown-menu" attr.aria-labelledby="dropdownMenuButton-{{
                                  i
                                  }}">
                                  <a *ngIf="order.orderStatus!='delivered'" class="dropdown-item" routerLink="/dispatch/orders/edit/{{
                                    order.orderID
                                    }}">Edit</a>
                                  <a *ngIf="order.orderStatus!='delivered'" class="dropdown-item" [routerLink]="[
                                      '/dispatch',
                                      'trips',
                                      'add-trip'
                                      ]" [queryParams]="{orderId:order.orderID,orderNum:order.orderNumber}">
                                    Create Trip</a>
                                  <a class="dropdown-item" [routerLink]="[
                                    '/dispatch',
                                    'orders',
                                    'add'
                                    ]" [queryParams]="{
                                    cloneID: order.orderID
                                    }">Clone</a>
                                  <a *ngIf="order.orderStatus == 'created' ||
                                    order.orderStatus == 'confirmed'" class="dropdown-item" href="javascript:;"
                                    (click)="deactivateOrder(order)">Delete</a>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="tab-pane show" id="dispatchedOrders" role="tabpanel"
                      aria-labelledby="dispatchedOrders-tab" [ngClass]="{ 'show
                      active': activeTab == 'dispatched' }" *ngIf="activeTab ==
                      'dispatched'">
                      <table class="row-border
                        hover
                        table table-bordered table-striped
                        mb-0">
                        <thead>
                          <tr>
                            <th>Order#</th>
                            <th>Type</th>
                            <th>Date</th>
                            <th>Customer</th>
                            <th>Pickup Location</th>
                            <th>Drop Off Location</th>
                            <th>Commodity</th>
                            <th>Amount</th>
                            <th class="custom-w-160">Status</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngIf="dispatchOrders.length == 0" class="text-center">
                            <td colspan="10">{{ noOrdersMsg }}</td>
                          </tr>
                          <tr class="cursorpoint" *ngFor="let order of
                            dispatchOrders; let i= index">
                            <td [routerLink]="order.url" class="font-weight-bold">
                              {{ order.orderNumber }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.orderMode }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.createdDate | date: "yyyy/MM/dd" }}
                            </td>
                            <td class="text-capitalize" [routerLink]="order.url">
                              {{ customersObjects[order.customerID] }}
                            </td>
                            <td [routerLink]="order.url">
                              Date:
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location:
                              <span *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.pickupLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              Date:-
                              {{
                              order.shippersReceiversInfo[0].receivers[0]
                              .dropPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location: -
                              <span *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.dropOffLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              ? "Name: " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              : "-"
                              }}<br />
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity
                              ? "Qty:" +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity +
                              " " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantityUnit
                              : ""
                              }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.charges.freightFee.currency }}
                              {{ order.totalAmount }}<br />
                            </td>
                            <td class="text-capitalize" [routerLink]="order.url">
                              <span class="badge badge-dark p-1">{{ order.newStatus }}</span> <br>
                              <b>Invoiced: </b> {{order.invoicedTime ? 'Yes' : 'No'}} <br>
                              <b>Payment:</b> {{order.invStatus ? order.invStatus.replace('_', ' ') : 'NA'}}
                            </td>
                            <td>
                              <div class="dropdown dropright">
                                <button class="bg-transparent border-0" type="button" id="dropdownMenuButton-{{ i }}"
                                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                  <i class="fas fa-ellipsis-v"></i>
                                </button>
                                <div class="dropdown-menu" attr.aria-labelledby="dropdownMenuButton-{{
                                  i
                                  }}">
                                  <a *ngIf="order.orderStatus!='delivered'" class="dropdown-item" routerLink="/dispatch/orders/edit/{{
                                    order.orderID
                                    }}">Edit</a>
                                  <a *ngIf="order.orderStatus == 'created' ||
                                    order.orderStatus == 'confirmed'" class="dropdown-item" href="javascript:;"
                                    (click)="deactivateOrder(order)">Delete</a>
                                  <a class="dropdown-item" [routerLink]="[
                                    '/dispatch',
                                    'orders',
                                    'add'
                                    ]" [queryParams]="{
                                    cloneID: order.orderID
                                    }">Clone</a>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="tab-pane show" id="deliveredOrders" role="tabpanel"
                      aria-labelledby="deliveredOrders-tab" [ngClass]="{ 'show
                      active': activeTab == 'delivered' }" *ngIf="activeTab ==
                      'delivered'">
                      <table class="row-border
                        hover
                        table table-bordered table-striped
                        mb-0">
                        <thead>
                          <tr>
                            <th>Order#</th>
                            <th>Type</th>
                            <th>Date</th>
                            <th>Customer</th>
                            <th>Pickup Location</th>
                            <th>Drop Off Location</th>
                            <th>Commodity</th>
                            <th>Amount</th>
                            <th class="custom-w-160">Status</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngIf="deliveredOrders.length == 0" class="text-center">
                            <td colspan="10">{{ noOrdersMsg }}</td>
                          </tr>
                          <tr class="cursorpoint" *ngFor="let order of
                            deliveredOrders; let i= index">
                            <td [routerLink]="order.url" class="font-weight-bold">
                              {{ order.orderNumber }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.orderMode }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.createdDate | date: "yyyy/MM/dd" }}
                            </td>
                            <td class="text-capitalize" [routerLink]="order.url">
                              {{ customersObjects[order.customerID] }}
                            </td>
                            <td [routerLink]="order.url">
                              Date:
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location:
                              <span *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.pickupLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              Date:-
                              {{
                              order.shippersReceiversInfo[0].receivers[0]
                              .dropPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location: -
                              <span *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.dropOffLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              ? "Name: " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              : "-"
                              }}<br />
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity
                              ? "Qty:" +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity +
                              " " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantityUnit
                              : ""
                              }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.charges.freightFee.currency }}
                              {{ order.totalAmount }}<br />
                            </td>
                            <td class="text-capitalize" [routerLink]="order.url">
                              <span class="badge badge-dark p-1">{{ order.newStatus }}</span> <br>
                              <b>Invoiced: </b> {{order.invoicedTime ? 'Yes' : 'No'}} <br>
                              <b>Payment:</b> {{order.invStatus ? order.invStatus.replace('_', ' ') : 'NA'}}
                            </td>
                            <td>
                              <div class="dropdown dropright">
                                <button class="bg-transparent border-0" type="button" id="dropdownMenuButton-{{ i }}"
                                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                  <i class="fas fa-ellipsis-v"></i>
                                </button>
                                <div class="dropdown-menu" attr.aria-labelledby="dropdownMenuButton-{{
                                  i
                                  }}">
                                  <a *ngIf="order.orderStatus!='delivered'" class="dropdown-item" routerLink="/dispatch/orders/edit/{{
                                    order.orderID
                                    }}">Edit</a>
                                  <a *ngIf="order.orderStatus == 'created' ||
                                    order.orderStatus == 'confirmed'" class="dropdown-item" href="javascript:;"
                                    (click)="deactivateOrder(order)">Delete</a>
                                  <a class="dropdown-item" [routerLink]="[
                                    '/dispatch',
                                    'orders',
                                    'add'
                                    ]" [queryParams]="{
                                    cloneID: order.orderID
                                    }">Clone</a>
                                  <a *ngIf="order.canRecall" class="dropdown-item" routerLink="/dispatch/orders/edit/{{
                                    order.orderID
                                    }}" [queryParams]="{
                                    state: 'recall'
                                    }">Recall</a>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="tab-pane show" id="cancelledOrders" role="tabpanel"
                      aria-labelledby="cancelledOrders-tab" [ngClass]="{ 'show
                      active': activeTab == 'cancelled' }" *ngIf="activeTab ==
                      'cancelled'">
                      <table class="row-border
                        hover
                        table table-bordered table-striped
                        mb-0">
                        <thead>
                          <tr>
                            <th>Order#</th>
                            <th>Type</th>
                            <th>Date</th>
                            <th>Customer</th>
                            <th>Pickup Location</th>
                            <th>Drop Off Location</th>
                            <th>Commodity</th>
                            <th>Amount</th>
                            <th class="custom-w-160">Status</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngIf="cancelledOrders.length == 0" class="text-center">
                            <td colspan="10">{{ noOrdersMsg }}</td>
                          </tr>
                          <tr class="cursorpoint" *ngFor="let order of
                            cancelledOrders; let i= index">
                            <td [routerLink]="order.url" class="font-weight-bold">
                              {{ order.orderNumber }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.orderMode }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.createdDate | date: "yyyy/MM/dd" }}
                            </td>
                            <td [routerLink]="order.url" class="text-capitalize">
                              {{ customersObjects[order.customerID] }}
                            </td>
                            <td [routerLink]="order.url">
                              Date:
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location:
                              <span *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.pickupLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              Date:-
                              {{
                              order.shippersReceiversInfo[0].receivers[0]
                              .dropPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location: -
                              <span *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.dropOffLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              ? "Name: " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              : "-"
                              }}<br />
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity
                              ? "Qty:" +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity +
                              " " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantityUnit
                              : ""
                              }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.charges.freightFee.currency }}
                              {{ order.totalAmount }}<br />
                            </td>
                            <td class="text-capitalize" [routerLink]="order.url">
                              <span class="badge badge-dark p-1">{{ order.newStatus }}</span> <br>
                              <b>Invoiced: </b> {{order.invoicedTime ? 'Yes' : 'No'}} <br>
                              <b>Payment:</b> {{order.invStatus ? order.invStatus.replace('_', ' ') : 'NA'}}
                            </td>
                            <td>
                              <div class="dropdown dropright">
                                <button class="bg-transparent border-0" type="button" id="dropdownMenuButton-{{ i }}"
                                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                  <i class="fas fa-ellipsis-v"></i>
                                </button>
                                <div class="dropdown-menu" attr.aria-labelledby="dropdownMenuButton-{{
                                  i
                                  }}">
                                  <a *ngIf="order.orderStatus!='delivered'" class="dropdown-item" routerLink="/dispatch/orders/edit/{{
                                    order.orderID
                                    }}">Edit</a>
                                  <a *ngIf="order.orderStatus == 'created' ||
                                    order.orderStatus == 'confirmed'" class="dropdown-item" href="javascript:;"
                                    (click)="deactivateOrder(order)">Delete</a>
                                  <a class="dropdown-item" [routerLink]="[
                                    '/dispatch',
                                    'orders',
                                    'add'
                                    ]" [queryParams]="{
                                    cloneID: order.orderID
                                    }">Clone</a>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="tab-pane show" id="invoicedOrders" role="tabpanel" aria-labelledby="invoicedOrders-tab"
                      [ngClass]="{ 'show active': activeTab == 'invoiced' }" *ngIf="activeTab == 'invoiced'">
                      <table class="row-border
                        hover
                        table table-bordered table-striped
                        mb-0">
                        <thead>
                          <tr>
                            <th>Order#</th>
                            <th>Type</th>
                            <th>Date</th>
                            <th>Customer</th>
                            <th>Pickup Location</th>
                            <th>Drop Off Location</th>
                            <th>Commodity</th>
                            <th>Amount</th>
                            <th class="custom-w-160">Status</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngIf="invoicedOrders.length == 0" class="text-center">
                            <td colspan="10">{{ noOrdersMsg }}</td>
                          </tr>
                          <tr class="cursorpoint" *ngFor="let order of
                            invoicedOrders; let i= index">
                            <td [routerLink]="order.url" class="font-weight-bold">
                              {{ order.orderNumber }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.orderMode }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.createdDate | date: "yyyy/MM/dd" }}
                            </td>
                            <td class="text-capitalize" [routerLink]="order.url">
                              {{ customersObjects[order.customerID] }}
                            </td>
                            <td [routerLink]="order.url">
                              Date:
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location:
                              <span *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.pickupLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              Date:-
                              {{
                              order.shippersReceiversInfo[0].receivers[0]
                              .dropPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location: -
                              <span *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.dropOffLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              ? "Name: " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              : "-"
                              }}<br />
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity
                              ? "Qty:" +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity +
                              " " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantityUnit
                              : ""
                              }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.charges.freightFee.currency }}
                              {{ order.totalAmount }}<br />
                            </td>
                            <td class="text-capitalize" [routerLink]="order.url">
                              <span class="badge badge-dark p-1">{{ order.newStatus }}</span> <br>
                              <b>Invoiced: </b> {{order.invoicedTime ? 'Yes' : 'No'}} <br>
                              <b>Payment:</b> {{order.invStatus ? order.invStatus.replace('_', ' ') : 'NA'}}
                            </td>
                            <td>
                              <div class="dropdown dropright">
                                <button class="bg-transparent border-0" type="button" id="dropdownMenuButton-{{ i }}"
                                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                  <i class="fas fa-ellipsis-v"></i>
                                </button>
                                <div class="dropdown-menu" attr.aria-labelledby="dropdownMenuButton-{{
                                  i
                                  }}">
                                  <a *ngIf="order.orderStatus!='delivered'" class="dropdown-item" routerLink="/dispatch/orders/edit/{{
                                    order.orderID
                                    }}">Edit</a>
                                  <a *ngIf="order.orderStatus == 'created' ||
                                    order.orderStatus == 'confirmed'" class="dropdown-item" href="javascript:;"
                                    (click)="deactivateOrder(order)">Delete</a>
                                  <a class="dropdown-item" [routerLink]="[
                                    '/dispatch',
                                    'orders',
                                    'add'
                                    ]" [queryParams]="{
                                    cloneID: order.orderID
                                    }">Clone</a>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="tab-pane show" id="partiallyPaidOrders" role="tabpanel"
                      aria-labelledby="partiallyPaidOrders-tab" [ngClass]="{
                      'show active': activeTab == 'partiallyPaid'
                      }" *ngIf="activeTab == 'partiallyPaid'">
                      <table class="row-border
                        hover
                        table table-bordered table-striped
                        mb-0">
                        <thead>
                          <tr>
                            <th>Order#</th>
                            <th>Type</th>
                            <th>Date</th>
                            <th>Customer</th>
                            <th>Pickup Location</th>
                            <th>Drop Off Location</th>
                            <th>Commodity</th>
                            <th>Amount</th>
                            <th class="custom-w-160">Status</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngIf="partiallyOrders.length == 0" class="text-center">
                            <td colspan="10">{{ noOrdersMsg }}</td>
                          </tr>
                          <tr class="cursorpoint" *ngFor="let order of
                            partiallyOrders; let i= index">
                            <td [routerLink]="order.url" class="font-weight-bold">
                              {{ order.orderNumber }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.orderMode }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.createdDate | date: "yyyy/MM/dd" }}
                            </td>
                            <td [routerLink]="order.url" class="text-capitalize">
                              {{ customersObjects[order.customerID] }}
                            </td>
                            <td [routerLink]="order.url">
                              Date:
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location:
                              <span *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.pickupLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              Date:-
                              {{
                              order.shippersReceiversInfo[0].receivers[0]
                              .dropPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location: -
                              <span *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.dropOffLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              ? "Name: " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              : "-"
                              }}<br />
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity
                              ? "Qty:" +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity +
                              " " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantityUnit
                              : ""
                              }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.charges.freightFee.currency }}
                              {{ order.totalAmount }}<br />
                            </td>
                            <td class="text-capitalize" [routerLink]="order.url">
                              <span class="badge badge-dark p-1">{{ order.newStatus }}</span> <br>
                              <b>Invoiced: </b> {{order.invoicedTime ? 'Yes' : 'No'}} <br>
                              <b>Payment:</b> {{order.invStatus ? order.invStatus.replace('_', ' ') : 'NA'}}
                            </td>
                            <td>
                              <div class="dropdown dropright">
                                <button class="bg-transparent border-0" type="button" id="dropdownMenuButton-{{ i }}"
                                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                  <i class="fas fa-ellipsis-v"></i>
                                </button>
                                <div class="dropdown-menu" attr.aria-labelledby="dropdownMenuButton-{{
                                  i
                                  }}">
                                  <a *ngIf="order.orderStatus!='delivered'" class="dropdown-item" routerLink="/dispatch/orders/edit/{{
                                    order.orderID
                                    }}">Edit</a>
                                  <a *ngIf="order.orderStatus == 'created' ||
                                    order.orderStatus == 'confirmed'" class="dropdown-item" href="javascript:;"
                                    (click)="deactivateOrder(order)">Delete</a>
                                  <a class="dropdown-item" [routerLink]="[
                                    '/dispatch',
                                    'orders',
                                    'add'
                                    ]" [queryParams]="{
                                    cloneID: order.orderID
                                    }">Clone</a>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>

                    <div class="tab-pane show" id="tonuOrders" role="tabpanel" aria-labelledby="tonu-tab"
                      [ngClass]="{ 'show active': activeTab == 'tonu' }" *ngIf="activeTab == 'tonu'">
                      <table class="row-border
                        hover
                        table table-bordered table-striped
                        mb-0">
                        <thead>
                          <tr>
                            <th>Order#</th>
                            <th>Type</th>
                            <th>Date</th>
                            <th>Customer</th>
                            <th>Pickup Location</th>
                            <th>Drop Off Location</th>
                            <th>Commodity</th>
                            <th>Amount</th>
                            <th class="custom-w-160">Status</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngIf="tonuOrders.length == 0" class="text-center">
                            <td colspan="10">{{ noOrdersMsg }}</td>
                          </tr>
                          <tr class="cursorpoint" *ngFor="let order of
                            tonuOrders; let i= index">
                            <td [routerLink]="order.url" class="font-weight-bold">
                              {{ order.orderNumber }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.orderMode }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.createdDate | date: "yyyy/MM/dd" }}
                            </td>
                            <td [routerLink]="order.url" class="text-capitalize">
                              {{ customersObjects[order.customerID] }}
                            </td>
                            <td [routerLink]="order.url">
                              Date:
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location:
                              <span *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint[0].address.pickupLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].shippers[0]
                                .pickupPoint.length - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              Date:-
                              {{
                              order.shippersReceiversInfo[0].receivers[0]
                              .dropPoint[0].dateAndTime
                              | date
                              : "yyyy/MM/dd
                              hh:mm a"
                              }}<br />
                              Location: -
                              <span *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.address
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.city
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.state
                                }},
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.country
                                }}
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.zipCode
                                }}
                              </span>
                              <span *ngIf="!order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.manual">
                                {{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint[0].address.dropOffLocation
                                }}
                              </span>
                              <span class="badge badge-dark" *ngIf="order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint> 1
                                ">
                                +{{
                                order.shippersReceiversInfo[0].receivers[0]
                                .dropPoint - 1
                                }}
                              </span>
                            </td>
                            <td [routerLink]="order.url">
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              ? "Name: " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].name
                              : "-"
                              }}<br />
                              {{
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity
                              ? "Qty:" +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantity +
                              " " +
                              order.shippersReceiversInfo[0].shippers[0]
                              .pickupPoint[0].commodity[0].quantityUnit
                              : ""
                              }}
                            </td>
                            <td [routerLink]="order.url">
                              {{ order.charges.freightFee.currency }}
                              {{ order.totalAmount }}<br />
                            </td>
                            <td class="text-capitalize" [routerLink]="order.url">
                              <span class="badge badge-dark p-1">{{ order.newStatus }}</span> <br>
                              <b>Invoiced: </b> {{order.invoicedTime ? 'Yes' : 'No'}} <br>
                              <b>Payment:</b> {{order.invStatus ? order.invStatus.replace('_', ' ') : 'NA'}}
                            </td>
                            <td>
                              <div class="dropdown dropright">
                                <button class="bg-transparent border-0" type="button" id="dropdownMenuButton-{{ i }}"
                                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                  <i class="fas fa-ellipsis-v"></i>
                                </button>
                                <div class="dropdown-menu" attr.aria-labelledby="dropdownMenuButton-{{
                                  i
                                  }}">
                                  <a *ngIf="order.orderStatus!='delivered'" class="dropdown-item" routerLink="/dispatch/orders/edit/{{
                                    order.orderID
                                    }}">Edit</a>
                                  <a *ngIf="order.orderStatus == 'created' ||
                                    order.orderStatus == 'confirmed'" class="dropdown-item" href="javascript:;"
                                    (click)="deactivateOrder(order)">Delete</a>
                                  <a class="dropdown-item" [routerLink]="[
                                    '/dispatch',
                                    'orders',
                                    'add'
                                    ]" [queryParams]="{
                                    cloneID: order.orderID
                                    }">Clone</a>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </section>
  </div>
</section>-->

<div class="modal fade" id="orderStatusModal" role="dialog" tabindex="-1">
  <div class="modal-dialog" role="document" style="max-width: 500px">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Brokerage Order</h4>
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
      </div>
      <form>
        <div class="modal-body">
          <div class="form-group row text-dark">
            <div class="col-lg-12">
              <div class="row">
                <div class="col-lg-12">
                  <label class="control-label font-weight-bold text-lg-right
                    pt-2">Order Information</label>
                  <p>
                    Order# : {{ brokerage.orderNo }} <br />
                    Order Total: {{ brokerage.finalAmount }}
                  </p>
                </div>
                <div class="col-lg-12">
                  <div class="row">
                    <div class="col-lg-6">
                      <label class="control-label
                        font-weight-bold
                        text-lg-right
                        pt-2">Select Carrier</label>
                      <ng-select [(ngModel)]="brokerage.carrierID" name="brokerage.carrierID"
                        placeholder="Select Carrier">
                        <ng-option value="{{ data.key }}" *ngFor="let data of
                          carriersObject | keyvalue">
                          {{ data.value }}</ng-option>
                      </ng-select>
                    </div>
                    <div class="col-lg-6">
                      <label class="control-label
                        font-weight-bold
                        text-lg-right
                        pt-2">Brokerage amount</label>
                      <input [(ngModel)]="brokerage.brokerageAmount" name="brokerageAmount" type="text"
                        class="form-control" placeholder="e.g. 230" />
                    </div>
                  </div>
                </div>
                <div class="col-lg-12">
                  <label class="control-label font-weight-bold text-lg-right
                    pt-2">Special Instructions</label>
                  <textarea placeholder="eg.
                    Please be on time" [(ngModel)]="brokerage.instructions" name="instructions_br"
                    class="form-control h-auto" rows="2" pattern="^[\s\S]{500}$"></textarea>

                  <label class="error">{{ brokerErr }}</label>
                </div>

              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">
            Close
          </button>
          <button type="button" class="btn btn-success" [disabled]="brokerageDisabled" (click)="submitClick()">
            Save
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<app-brokerage-pdf></app-brokerage-pdf>

<ng-template #confirmEmailModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">
      Confirm Order <strong>#{{ newOrderNumber }}</strong>
    </h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <form>
    <div class="modal-body">
      <div class="email--invoice__main mt-3">
        <div class="row align-items-center mb-2">
          <div class="col-7">
            <label class="control-label font-weight-bold text-3 text-dark" for="inputDefault">Do you want to send the
              confirmation email to customer ?</label>
          </div>
          <div class="col-5">
            <div class="btn-group-toggle" data-toggle="buttons">
              <label class="btn btn-outline btn-yesno mr-2 mb-2" [class.active]="emailData.confirmEmail === true"
                (click)="conEmailChange(true)">
                <input type="radio" [(ngModel)]="emailData.confirmEmail" name="orderMode" checked hidden value="FTL" />
                Yes
              </label>
              <label class="btn btn-outline btn-yesno mr-2 mb-2" [class.active]="emailData.confirmEmail === false"
                (click)="conEmailChange(false)">
                <input type="radio" [(ngModel)]="emailData.confirmEmail" name="orderMode" hidden value="LTL" />
                No
              </label>
            </div>
          </div>
        </div>
        <div class="" *ngIf="emailData.confirmEmail != false">
          <label class="control-label font-weight-bold mt-2 text-3 text-dark" for="inputDefault">Enter Email
            <small>You can also add multiple email(s)</small></label>
          <ng-select multiple="true" notFoundText="Please type to add
            email" [addTag]="true" placeholder="eg. johnsmith@gmail.com" [clearable]="false"
            [(ngModel)]="emailData.emails" name="emails" type="text" class="form-control h-auto"></ng-select>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" (click)="modal.dismiss('Cross click')" class="btn
        btn-default">
        Cancel
      </button>
      <button [disabled]="isConfirm" (click)="changeStatus()" class="btn
        btn-success">
        Confirm
      </button>
    </div>
  </form>
</ng-template>