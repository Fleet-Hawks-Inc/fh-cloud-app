<section class="body">
  <div class="inner-wrapper">
    <section role="main" class="content-body pt-0 pr-0 pl-1">
      <header class="page-header pr19 pl11">
        <div class="row" style="padding-top:10px;">

          <div class="col-md-2 col-lg-2 pr-0">
            <div class="input-group input-group-sm mb-3">
              <input type="text" autocomplete="off" placeholder="Search Asset" name="assetIdentification"
                [(ngModel)]="assetIdentification" class="form-control" (input)="getSuggestions($event.target.value)" />
            </div>
            <div *ngIf="suggestedAssets?.length > 0" class="result-suggestions">
              <ul>
                <li *ngFor="let suggestedAsset of suggestedAssets" style="cursor: pointer" (click)="
                    setAsset(
                      suggestedAsset.assetID,
                      suggestedAsset.assetIdentification
                    )
                  ">
                  {{ suggestedAsset.assetIdentification }}
                </li>
              </ul>
            </div>
          </div>

          <div class="col-md-2 col-lg-2 pr-0">
            <ng-select [(ngModel)]="assetType" name="assetType" class="form-control populate" placeholder="Select type">
              <ng-option value="container">Container</ng-option>
              <ng-option value="double_drop">Double Drop</ng-option>
              <ng-option value="dump_trailer">Dump Trailer</ng-option>
              <ng-option value="flat_bed">Flat bed</ng-option>
              <ng-option value="lowboy">Lowboy</ng-option>
              <ng-option value="stepDeck">StepDeck</ng-option>
              <ng-option value="removable_gooseneck">Removable Gooseneck</ng-option>
              <ng-option value="dry_van">Dry Van</ng-option>
              <ng-option value="reefer">Reefer</ng-option>
              <ng-option value="power_only">Power Only</ng-option>
              <ng-option value="conestoga_trailer">Conestoga Trailer</ng-option>
              <ng-option value="side_kit_trailer">Side Kit Trailer</ng-option>
              <ng-option value="specialized_trailer">Specialized Trailer</ng-option>
              <ng-option value="enclosed_trailer">Enclosed Trailer</ng-option>
              <ng-option value="scrap_trailer">Scrap Trailer</ng-option>
              <ng-option value="semi_trailer">Semi Trailer</ng-option>
              <ng-option value="chassis">Chassis</ng-option>
              <ng-option value="tank_trailer">Tank Trailer</ng-option>
            </ng-select>
          </div>

          <div class="col-md-2 col-lg-2">
            <button type="submit" (click)="searchFilter()" class="btn btn-sm btn-success mr-3">
              Search
            </button>
            <button class="btn btn-sm btn-success" type="submit" (click)="resetFilter()">
              Reset
            </button>
          </div>

          <section class="reports_div">

            <table class="row-border hover table table-bordered table-striped mb-0">
              <thead>
                <tr class="back-color-gray">
                  <th>Asset Name/Number</th>
                  <th>VIN</th>
                  <th>Asset Type</th>
                  <th>Make</th>
                  <th>Last Location</th>
                  <th>License Plate Number</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngIf="allData.length == 0" class="text-center">
                  <td colspan="15">{{dataMessage}}</td>
                </tr>
                <tr *ngFor="let item of allData">
                  <td><span class="font-weight-bold line-height-lg text-capitalize">{{item.assetIdentification}}</span>
                  </td>
                  <td>{{item.VIN}}</td>
                  <td>{{item.assetType}}</td>
                  <td>{{item.assetDetails.manufacturer ? item.assetDetails.manufacturer : '-'}}
                  </td>
                  <td>-</td>
                  <td>{{item.assetDetails.licencePlateNumber}}</td>
                  <td><span class="badge badge-dark p-1 text-uppercase">{{item.currentStatus}}</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
        </div>

        <div class="m-2">
          <div class="row text-dark">
            <div class="col-3 mb-3">
              <div class="bg-white p-3">
                <div>
                  <h4 class="m-0 text-4">Total Assets</h4>
                  <h3 class="mt-1 mb-0 font-weight-bold">
                    {{ assetsCount.total }}
                  </h3>
                </div>
              </div>
            </div>
            <div class="col-3 mb-3">
              <div class="bg-white p-3">
                <div>
                  <h4 class="m-0 text-4">Active Assets</h4>
                  <h3 class="mt-1 mb-0 font-weight-bold">
                    {{ assetsCount.active }}
                  </h3>
                </div>
              </div>
            </div>
            <div class="col-3 mb-3">
              <div class="bg-white p-3">
                <div>
                  <h4 class="m-0 text-4">Inactive Assets</h4>
                  <h3 class="mt-1 mb-0 font-weight-bold">
                    {{ assetsCount.inactive }}
                  </h3>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card">
                <div infiniteScroll [infiniteScrollDistance]="1" [infiniteScrollUpDistance]="1"
                  [infiniteScrollThrottle]="5" (scrolled)="onScroll()">
                  <div class="card-body bor-radius0px p-3">
                    <section class="reports_div">
                      <table class="
                        row-border
                        hover
                        table table-bordered table-striped
                        mb-0
                      ">
                        <thead>
                          <tr class="back-color-gray">
                            <th>Asset Name/Number</th>
                            <th>VIN</th>
                            <th>Asset Type</th>
                            <th>Make</th>
                            <th>Last Location</th>
                            <th>License Plate Number</th>
                            <th>Status</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngIf="allData.length == 0" class="text-center">
                            <td colspan="15">{{ dataMessage }}</td>
                          </tr>
                          <tr *ngFor="let item of allData">
                            <td>
                              <span class="
                                font-weight-bold
                                line-height-lg
                                text-capitalize
                              ">{{ item.assetIdentification }}</span>
                            </td>
                            <td>{{ item.VIN }}</td>
                            <td>{{ item.assetType }}</td>
                            <td>
                              {{
                              item.assetDetails.manufacturer
                              ? item.assetDetails.manufacturer
                              : "-"
                              }}
                            </td>
                            <td>-</td>
                            <td>{{ item.assetDetails.licencePlateNumber }}</td>
                            <td>
                              <span class="badge badge-dark p-1 text-uppercase">{{
                                item.currentStatus
                                }}</span>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </section>
                  </div>

                  <div class="col-lg-12 mt-3 text-center" *ngIf="lastItemSK !== 'end' && allData.length !== 0">
                    <button type="button" class="btn btn-success btn-sm text-light" (click)="onScroll()">
                      Load More..
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </section>
  </div>
</section>