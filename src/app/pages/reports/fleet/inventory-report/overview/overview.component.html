<section class="body">
    <div class="inner-wrapper">
        <section role="main" class="content-body pt-0 pr-0 pl-1">
            <header class="page-header pr19 pl11">
                <div class="row" style="padding-top:10px;">
                    <div class="col-md-2 col-lg-2 pr-0">
                        <h4 class="text-4 mt-0 font-weight-bold mb-0 text-dark">Inventory Detail</h4>
                    </div>
                    <div class="col-md-2 col-lg-2 pr-0">
                        <input class="form-control line-height-xs ng-valid ng-touched" [(ngModel)]="itemName"
                            (input)="getItemSuggestions($event.target.value,'inv')" name="driverName"
                            placeholder="Search item by name" type="text">
                        <div *ngIf="suggestedItems?.length > 0" class="result-suggestions">
                            <ul>
                                <li *ngFor="let suggestedItem of suggestedItems" style="cursor: pointer;"
                                    (click)="setItem(suggestedItem.itemID, suggestedItem.itemName,'inv')"> {{
                                    suggestedItem.itemName }}</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-2 col-lg-2 pl-0">
                        <div class="input-group input-group-sm mb-3">
                            <ng-select [(ngModel)]="vendorID" name="vendorID" style="width: 100%;"
                                placeholder="Search items by vendor">
                                <ng-option *ngFor="let data of allVendors | async" [value]="data.contactID">
                                    {{data.companyName}}</ng-option>
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-md-2 col-lg-2 pl-0 pr-0">
                        <div class="input-group input-group-sm mb-3">
                            <ng-select [(ngModel)]="category" name="category"class="capitalize" style="width: 100%;"
                                placeholder="Search items by category">
                                <ng-option value="belts">Belts</ng-option>
                                <ng-option value="brakes">Brakes</ng-option>
                                <ng-option value="electrical">Electrical</ng-option>
                                <ng-option value="filters">Filters</ng-option>
                                <ng-option value="fluids">Fluids</ng-option>
                                <ng-option value="miscellaneous">Miscellaneous</ng-option>
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-md-2 col-lg-2">
                        <button type="submit" (click)="searchFilter()"
                            class="btn btn-sm mr-3 btn-success line-height-18">Search</button>
                        <button class="btn btn-sm btn-success line-height-18" (click)="resetFilter()"
                            type="button">Reset</button>
                    </div>

                    <div class="col-md-2 col-lg-2 text-right pr-1">
                        <div class="btn-group flex-wrap ml-2">
                            <button type="button" class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown"
                                aria-expanded="false"><i class="fas fa-upload"></i> Export<span
                                    class="caret"></span></button>
                            <div class="dropdown-menu" role="menu" x-placement="bottom-start"
                                style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 38px, 0px);">
                                <a class="dropdown-item text-1" (click)="generateInventCSV()">CSV</a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <div class="m-2">
                <div class="row text-dark">
                    <div class="col-6 mb-3">
                        <div class="bg-white p-3">
                            <div>
                                <h4 class="m-0 text-4">Existing Inventory</h4>
                                <h3 class="mt-1 mb-0 font-weight-bold">{{inventCount.total}}</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 mb-3">
                        <div class="bg-white p-3">
                            <div>
                                <h4 class="m-0 text-4">Required Inventory</h4>
                                <h3 class="mt-1 mb-0 font-weight-bold">-</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <div class="card-body bor-radius0px">
                                <section class="reports_div">
                                    <div infiniteScroll [infiniteScrollDistance]="1" [infiniteScrollUpDistance]="1"
                                        [infiniteScrollThrottle]="5" (scrolled)="onScroll()">
                                        <table class="table reports_small_div">
                                            <thead>
                                                <tr class="back-color-gray">
                                                    <th>Part#</th>
                                                    <th>Item Name</th>
                                                    <th>Category</th>
                                                    <th>Vendor</th>
                                                    <th>Quantity</th>
                                                    <th>Unit Cost</th>
                                                    <th>Warehouse Details</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngIf="items.length == 0" class="text-center">
                                                    <td colspan="12">{{dataMessage}}</td>
                                                </tr>
                                                <tr class="cursorpoint" *ngFor="let item of items; let i = index">
                                                    <td>{{ item.partNumber}}</td>
                                                    <td><span class="line-height-lg text-capitalize">{{ item.itemName}}</span></td>
                                                    <td><span class="line-height-lg text-capitalize">{{ item.category}}</span></td>
                                                    <td><span class="line-height-lg text-capitalize">{{ vendors[item.warehouseVendorID]}}</span></td>
                                                    <td>{{ item.quantity}}</td>
                                                    <td>{{item.cost}} {{item.costUnitType}}</td>
                                                    <td>{{warehouses[item.warehouseID]}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <div class="row mt-3 dtPaginate">
                                            <div class="col-lg-12 mt-3 text-center"
                                                *ngIf="lastItemSK !== 'end' && items.length !== 0">
                                                <button type="button" (click)="onScroll()"
                                                    class="btn btn-success btn-sm text-light">Load More..</button>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</section>