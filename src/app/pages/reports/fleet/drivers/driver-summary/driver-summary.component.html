<section class="body">
<div class="inner-wrapper">
<section role="main" class="content-body pt-0 pr-0 pl-1">
<header class="page-header pr19 pl11">
<div class="row" style="padding-top:10px;">
<div class="col-md-3 col-lg-3 pr-0">
</div>
<div class="col-md-2 col-lg-2 pr-0">
<div class="input-group input-group-sm mb-3">
    <input type="text" autocomplete="off" name="driverName" [(ngModel)]="driverName"
        placeholder="Search driver by name" class="form-control"
        (input)="getSuggestions($event.target.value)">
</div>
    <div *ngIf="suggestedDrivers?.length> 0"
                class="result-suggestions">
        
                 
        
                            <ul>
                                <li *ngFor="let suggestedDriver of suggestedDrivers" class="cursorpoint" (click)="setDriver(suggestedDriver.driverID,
                    suggestedDriver.firstName, suggestedDriver.lastName,suggestedDriver.middleName)" class="text-capitalize">
                          {{suggestedDriver.firstName }} {{suggestedDriver.middleName}} {{suggestedDriver.lastName}}</li>
                            </ul>  
                            
              </div>
</div>
<div class="col-md-2 col-lg-2 pr-0">
<ng-select name="driverStatus" [(ngModel)]="driverStatus" placeholder="Driver Status"
    class="form-control form-control-sm populate">
    <ng-option value="active">Active </ng-option>
    <ng-option value="inActive">Inactive </ng-option>
</ng-select>
</div>
<div class="col-md-2 col-lg-2">
<button type="submit"(click)="searchDriver()"
    class="btn btn-sm btn-success mr-3">Search</button>
<button class="btn btn-sm btn-success"type="submit"
    (click)="resetDriver()">Reset</button>
</div>
<div class="col-md-3 col-lg-3 text-right pr-1">
<div class="btn-group flex-wrap ml-2">
    <button type="button" 
        class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown"
        aria-expanded="false"><i class="fas fa-upload"></i> Export<span
            class="caret"></span></button>
    <div class="dropdown-menu" role="menu" x-placement="bottom-start"
        style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 38px, 0px);">
        <a class="dropdown-item text-1" (click)="generateDriverCSV()">CSV</a>
    </div>
</div>
</div>
</div>
</header>
<div class="m-2">
<div class="row text-dark">
<div class="col-12 mb-3">
<div class="bg-white p-3">
    <div class="row text-dark">
        <div class="col-12">
            <div>
                <h4 class="mt-1 mb-0 font-weight-bold">Driver Summary</h4>
            </div>
        </div>
    </div>
</div>
</div>
<div class="col-3 mb-3">
<div class="bg-white p-3">
    <div>
        <h4 class="m-0 text-4">Total Drivers</h4>
        <h3 class="mt-1 mb-0 font-weight-bold">{{driversCount.total}}</h3>
    </div>
</div>
</div>
<div class="col-3 mb-3">
<div class="bg-white p-3">
    <div>
        <h4 class="m-0 text-4">Total Active Drivers</h4>
        <h3 class="mt-1 mb-0 font-weight-bold">{{driversCount.active}}</h3>
    </div>
</div>
</div>
<div class="col-3 mb-3">
<div class="bg-white p-3">
    <div>
        <h4 class="m-0 text-4">Total Inactive Drivers</h4>
        <h3 class="mt-1 mb-0 font-weight-bold">{{driversCount.inactive}}</h3>
    </div>
</div>
</div>
<div class="col">
<div class="card">
    <div class="card-body bor-radius0px">
        <!-- Driver Div  -->
        <div>
            <section class="reports_div">
                <div infiniteScroll [infiniteScrollDistance]="1" [infiniteScrollUpDistance]="1"
                    [infiniteScrollThrottle]="5" (scrolled)="onScroll()">
                    <table id="diverTbl"
                        class="table table-responsive-md table-bordered mb-0 no-footer table-xs table-striped table-hover">
                        <thead>
                            <tr>
                                <th id="" class="col1 minWidth200">Name</th>
                                <th id="" class="minWidth120">Email</th>
                                <th id="" class="minwidth120">Driver Type</th>
                                <th id="" class="col12 extra">Date of Birth</th>
                                <th id="" class="col12 extra">Gender</th>
                                <th id="" class="col12 extra">CDL#</th>
                                <th id="" class="col5 extra">Phone</th>
                                <th id="" class="col5 extra">Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngIf="drivers.length == 0" class="text-center">
                                <td colspan="14">{{dataMessage}}</td>
                            </tr>
                            <tr *ngFor="let driver of drivers;let i = index;">
                                <td class="cursorpoint">
                                    <span
                                        class="font-weight-bold line-height-lg text-capitalize">{{driver.firstName}} {{driver.middleName}}
                                        {{driver.lastName}}</span>
                                </td>
                                <td class="cursorpoint">{{driver.email}} </td>
                                <td class="cursorpoint text-capitalize">{{driver.driverType}}
                                </td>
                                <td class="cursorpoint">{{driver.DOB}}</td>
                                <td class="cursorpoint">{{driver.gender === "M" ? 'Male' : 'Female'}}</td>
                                <td class="cursorpoint">{{driver.CDL_Number}}</td>
                                <td class="cursorpoint">{{driver.phone}}</td>
                                <td class="cursorpoint"><span
                                        class="badge badge-dark p-2 text-uppercase">{{driver.driverStatus}}</span>
                                </td>
                        </tbody>
                    </table>
                    <div class="row mt-3 dtPaginate" *ngIf="drivers.length > 0">
                        <div class="col-lg-12 mt-3 text-center"
                            *ngIf="lastItemSK !== 'end' && drivers.length !== 0">
                            <button type="button" (click)="onScroll()"
                                class="btn btn-success btn-sm text-light">Load More..</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>
</div>
</div>
</div>
</section>
</div>
</section>